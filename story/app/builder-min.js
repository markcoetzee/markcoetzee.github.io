/*! Storymaps-Cascade - v1.9.1 - 2018-10-03, 12:57:32 PM - Copyright Â© 2016-2018 Esri 
This application is released under the Apache License V2.0 by Esri http://www.esri.com/ - https://github.com/Esri/story-map-cascade */function _typeof(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function resample_hermite(e,t,n,i,o){var r=Date.now();i=Math.round(i),o=Math.round(o);for(var a=e.getContext("2d").getImageData(0,0,t,n),s=e.getContext("2d").getImageData(0,0,i,o),l=a.data,u=s.data,c=t/i,d=n/o,p=Math.ceil(c/2),f=Math.ceil(d/2),h=0;h<o;h++)for(var m=0;m<i;m++){for(var g=4*(m+h*i),v=0,b=0,y=0,_=gx_g=gx_b=gx_a=0,w=(h+.5)*d,C=Math.floor(h*d);C<(h+1)*d;C++)for(var k=Math.abs(w-(C+.5))/f,x=(m+.5)*c,E=k*k,T=Math.floor(m*c);T<(m+1)*c;T++){var S=Math.abs(x-(T+.5))/p,P=Math.sqrt(E+S*S);P>=-1&&P<=1&&(v=2*P*P*P-3*P*P+1)>0&&(S=4*(T+C*t),gx_a+=v*l[S+3],y+=v,l[S+3]<255&&(v=v*l[S+3]/250),_+=v*l[S],gx_g+=v*l[S+1],gx_b+=v*l[S+2],b+=v)}u[g]=_/b,u[g+1]=gx_g/b,u[g+2]=gx_b/b,u[g+3]=gx_a/y}console.log("hermite = "+Math.round(Date.now()-r)/1e3+" s"),e.getContext("2d").clearRect(0,0,Math.max(t,i),Math.max(n,o)),e.width=i,e.height=o,e.getContext("2d").putImageData(s,0,0)}function debugLine(e,t,n){!0===e&&(e="true"),!1===e&&(e="false");var i=e;if("object"==typeof e){i="";for(name in e){var o=e[name];i+=" "+name+": "+o}}if(1!=t||n||(i+=" "+Math.random()),1==n){var r=jQuery("#debug_line");r.width(200),r.height()>=500&&r.html("");i=r.html()+"<br> -------------- <br>"+i}jQuery("#debug_line").show().html(i)}function debugSide(e){var t="";for(name in e){var n=e[name];t+=name+" : "+n+"<br>"}jQuery("#debug_side").show().html(t)}function trace(e){"undefined"!=typeof console&&console.log(e)}function UGFunctions(){function e(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t[e]=n}var t=null,n=this,i={starTime:0,arrThemes:[],isTouchDevice:-1,isRgbaSupported:-1,timeCache:{},dataCache:{},lastEventType:"",lastEventTime:0,handle:null};this.debugVar="",this.z__________FULL_SCREEN___________=function(){},this.toFullscreen=function(e,t){if(e.requestFullscreen)e.requestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},this.exitFullscreen=function(){if(0==n.isFullScreen())return!1;if(document.exitFullscreen)document.exitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},this.addFullScreenChangeEvent=function(t){document.webkitCancelFullScreen?e("webkitfullscreenchange",document,t):document.msExitFullscreen?e("MSFullscreenChange",document,t):document.mozCancelFullScreen?e("mozfullscreenchange",document,t):e("fullscreenchange",document,t)},this.destroyFullScreenChangeEvent=function(){jQuery(document).unbind("fullscreenChange"),jQuery(document).unbind("mozfullscreenchange"),jQuery(document).unbind("webkitfullscreenchange"),jQuery(document).unbind("MSFullscreenChange")},this.getFullScreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},this.isFullScreen=function(){var e=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return e=!!e},this.z__________GET_PROPS___________=function(){},this.getBrowserPrefix=function(){if(null!==t)return t;var e=["webkit","Moz","ms","O"],n=document.createElement("div");for(var i in e){var o=e[i];if(o+"Transform"in n.style)return o=o.toLowerCase(),t=o,o}return t="",""},this.getImageInsideParentDataByImage=function(e,t,i){var o=e.parent(),r=n.getImageOriginalSize(e);return n.getImageInsideParentData(o,r.width,r.height,t,i)},this.getImageInsideParentData=function(e,t,n,i,o,r,a){if(!o)var o={};var s={};if(void 0===r)var r=e.width();if(void 0===a)var a=e.height();o.padding_left&&(r-=o.padding_left),o.padding_right&&(r-=o.padding_right),o.padding_top&&(a-=o.padding_top),o.padding_bottom&&(a-=o.padding_bottom);var l=null,u="100%",c=null,d=null,p="display:block;margin:0px auto;";if(t>0&&n>0){if("down"==i&&t<r&&n<a)u=n,l=t,d=(r-l)/2,c=(a-u)/2;else if("fill"==i){var f=t/n;u=a,l=u*f,l<r?(l=r,u=l/f,d=0,c=Math.round((u-a)/2*-1)):(c=0,d=Math.round((l-r)/2*-1))}else{var f=t/n;u=a,l=u*f,c=0,d=(r-l)/2,"fitvert"!=i&&l>r&&(l=r,u=l/f,d=0,c=(a-u)/2)}l=Math.floor(l),u=Math.floor(u),c=Math.floor(c),d=Math.floor(d),p="position:absolute;"}return o.padding_top&&(c+=o.padding_top),o.padding_left&&(d+=o.padding_left),s.imageWidth=l,s.imageHeight=u,s.imageTop=c,s.imageLeft=d,s.imageRight=d+l,s.imageBottom=0==c||"100%"==u?null:c+u,s.style=p,s},this.getElementCenterPosition=function(e,t){var i=e.parent(),o=n.getElementSize(e),r=n.getElementSize(i),a=r.width,s=r.height;t&&void 0!==t.padding_top&&(s-=t.padding_top),t&&void 0!==t.padding_bottom&&(s-=t.padding_bottom),t&&void 0!==t.padding_left&&(a-=t.padding_left),t&&void 0!==t.padding_right&&(a-=t.padding_right);var l={};return l.left=Math.round((a-o.width)/2),l.top=Math.round((s-o.height)/2),t&&void 0!==t.padding_top&&(l.top+=t.padding_top),t&&void 0!==t.padding_left&&(l.left+=t.padding_left),l},this.getElementCenterPoint=function(e,t){if(!t)var t=!1;var i=n.getElementSize(e),o={};return o.x=i.width/2,o.y=i.height/2,1==t&&(o.x+=i.left,o.y+=i.top),o.x=Math.round(o.x),o.y=Math.round(o.y),o},this.getMousePosition=function(e,t){var n={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY};if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(n.pageX=e.originalEvent.touches[0].pageX,n.pageY=e.originalEvent.touches[0].pageY,n.clientX=e.originalEvent.touches[0].clientX,n.clientY=e.originalEvent.touches[0].clientY),t){var i=t.offset();n.mouseX=n.pageX-i.left,n.mouseY=n.pageY-i.top}return n},this.getMouseElementPoint=function(e,t){var i={x:e.pageX,y:e.pageY};return n.getElementLocalPoint(i,t)},this.getElementLocalPoint=function(e,t){var n={},i=t.offset();return n.x=Math.round(e.x-i.left),n.y=Math.round(e.y-i.top),n},this.getImageOriginalSize=function(e,t,n){if(void 0!==t&&void 0!==n)return{width:t,height:n};var i=e[0];if(void 0===i)throw new Error("getImageOriginalSize error - Image not found");var o={};if(void 0===i.naturalWidth||0===i.naturalWidth&&0===i.naturalHeight){if("number"==typeof e.data("naturalWidth")){var o={};return o.width=e.data("naturalWidth"),o.height=e.data("naturalHeight"),o}var r=new Image;return r.src=i.src,r.complete?(o.width=r.width,o.height=r.height,e.data("naturalWidth",o.width),e.data("naturalHeight",o.height),o):{width:e.data("backupWidth"),height:e.data("backupHeight")}}return o.width=i.naturalWidth,o.height=i.naturalHeight,o},this.getimageRatio=function(e){var t=n.getImageOriginalSize(e);return n.getElementSize(e).width/t.width},this.isImageFitParent=function(e){var t=e.parent(),i=n.getElementSize(e),o=n.getElementSize(t);return i.width<=o.width&&i.height<=o.height},this.getElementSize=function(e){if(void 0===e)throw new Error("Can't get size, empty element");var t=e.position();return t.height=e.outerHeight(),t.width=e.outerWidth(),t.left=Math.round(t.left),t.top=Math.round(t.top),t.right=t.left+t.width,t.bottom=t.top+t.height,t},this.isElementBiggerThenParent=function(e){var t=e.parent(),i=n.getElementSize(e),o=n.getElementSize(t);return i.width>o.width||i.height>o.height},this.isPointInsideElement=function(e,t){return 0!=(e.x>=0&&e.x<t.width)&&0!=(e.y>=0&&e.y<t.height)},this.getElementRelativePos=function(e,t,i,o){if(!o)var o=e.parent();if("number"==typeof e)var r={width:e,height:e};else var r=n.getElementSize(e);var a=n.getElementSize(o);switch(t){case"top":case"left":t=0,i&&(t+=i);break;case"center":t=Math.round((a.width-r.width)/2),i&&(t+=i);break;case"right":t=a.width-r.width,i&&(t-=i);break;case"middle":t=Math.round((a.height-r.height)/2),i&&(t+=i);break;case"bottom":t=a.height-r.height,i&&(t-=i)}return t},this.z_________SET_ELEMENT_PROPS_______=function(){},this.zoomImageInsideParent=function(e,t,i,o,r,a,s){if(!i)var i=1.2;if(!r)var r="fit";var l,u,c,d,p=i,f=e.parent(),h=n.getElementSize(e),m=n.getImageOriginalSize(e),g=!1,v=0,b=0,y=0,_=0;if(o){var w=n.getMouseElementPoint(o,e);g=n.isPointInsideElement(w,h),y=w.x,_=w.y}else g=!1;if(0==g){var C=n.getElementCenterPoint(e);y=C.x,_=C.y}if(1==t)l=h.height*p,u=h.width*p,0!=y&&(v=-(y*p-y)),0!=_&&(b=-(_*p-_));else{l=h.height/p,u=h.width/p;if(u<n.getImageInsideParentData(f,m.width,m.height,r,s).imageWidth)return n.scaleImageFitParent(e,m.width,m.height,r,s),!0;1==g&&(0!=y&&(v=-(y/p-y)),0!=_&&(b=-(_/p-_)))}if(a){var k=1;if(0!=m.width&&(k=u/m.width),k>a)return!1}if(n.setElementSize(e,u,l),0==t&&0==g){var x=n.getElementCenterPosition(e);c=x.left,d=x.top}else c=h.left+v,d=h.top+b;return n.placeElement(e,c,d),!0},this.placeElement=function(e,t,i,o,r,a){if(0==jQuery.isNumeric(t)||0==jQuery.isNumeric(i)){if(!a)var a=e.parent();var s=n.getElementSize(e),l=n.getElementSize(a)}if(0==jQuery.isNumeric(t))switch(t){case"left":t=0,o&&(t+=o);break;case"center":t=Math.round((l.width-s.width)/2),o&&(t+=o);break;case"right":t=l.width-s.width,o&&(t-=o)}if(0==jQuery.isNumeric(i))switch(i){case"top":i=0,r&&(i+=r);break;case"middle":case"center":i=Math.round((l.height-s.height)/2),r&&(i+=r);break;case"bottom":i=l.height-s.height,r&&(i-=r)}var u={position:"absolute",margin:"0px"};null!==t&&(u.left=t),null!==i&&(u.top=i),e.css(u)},this.placeElementInParentCenter=function(e){n.placeElement(e,"center","middle")},this.setElementSizeAndPosition=function(e,t,n,i,o){var r={width:i+"px",height:o+"px",left:t+"px",top:n+"px",position:"absolute",margin:"0px"};e.css(r)},this.setElementSize=function(e,t,n){var i={width:t+"px"};null!==n&&void 0!==n&&(i.height=n+"px"),e.css(i)},this.cloneElementSizeAndPos=function(e,t,i,o,r){var a=e.position();if(void 0==a)throw new Error("Can't get size, empty element");!0===i?(a.height=e.outerHeight(),a.width=e.outerWidth()):(a.height=e.height(),a.width=e.width()),a.left=Math.round(a.left),a.top=Math.round(a.top),o&&(a.left+=o),r&&(a.top+=r),n.setElementSizeAndPosition(t,a.left,a.top,a.width,a.height)},this.placeImageInsideParent=function(e,t,i,o,r,a){var s=n.getImageInsideParentData(t,i,o,r,a),l="<img";return null!==s.imageWidth&&(l+=" width = '"+s.imageWidth+"'",s.style+="width:"+s.imageWidth+";"),null!=s.imageHeight&&("100%"==s.imageHeight?(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+";"):(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+"px;")),null!==s.imageTop&&(s.style+="top:"+s.imageTop+"px;"),null!==s.imageLeft&&(s.style+="left:"+s.imageLeft+"px;"),e=n.escapeDoubleSlash(e),l+=" style='"+s.style+"'",l+=' src="'+e+'"',l+=">",t.html(l),t.children("img")},this.scaleImageCoverParent=function(e,t,i){if("number"==typeof t)var o=t,r=i;else var o=t.outerWidth(),r=t.outerHeight();var a=n.getImageOriginalSize(e),s=a.width,l=a.height,u=s/l,c=r,d=c*u,p=0,f=0;d<o?(d=o,c=d/u,f=0,p=Math.round((c-r)/2*-1)):(p=0,f=Math.round((d-o)/2*-1)),d=Math.round(d),c=Math.round(c),e.css({width:d+"px",height:c+"px",left:f+"px",top:p+"px"})},this.scaleImageFitParent=function(e,t,i,o,r){var a=e.parent(),s=n.getImageInsideParentData(a,t,i,o,r),l=!1,u={};return null!==s.imageWidth&&(l=!0,e.removeAttr("width"),u.width=s.imageWidth+"px"),null!=s.imageHeight&&(l=!0,e.removeAttr("height"),u.height=s.imageHeight+"px"),null!==s.imageTop&&(l=!0,u.top=s.imageTop+"px"),null!==s.imageLeft&&(l=!0,u.left=s.imageLeft+"px"),1==l&&(u.position="absolute",u.margin="0px 0px",e.css(u)),s},this.scaleImageByHeight=function(e,t,i,o){var r=n.getImageOriginalSize(e,i,o),a=r.width/r.height,s=Math.round(t*a);t=Math.round(t),n.setElementSize(e,s,t)},this.scaleImageByWidth=function(e,t,i,o){var r=n.getImageOriginalSize(e,i,o),a=r.width/r.height,s=Math.round(t/a);t=Math.round(t),n.setElementSize(e,t,s)},this.scaleImageExactSizeInParent=function(e,t,i,o,r,a){var s=e.parent(),l=n.getElementSize(s);l.width<o&&(o=l.width),l.height<r&&(r=l.height);var u=n.getImageInsideParentData(null,t,i,a,null,o,r),c=o,d=r,p=u.imageLeft,f=u.imageLeft,h=u.imageTop,m=u.imageTop,g=Math.round((l.width-o)/2),v=Math.round((l.height-r)/2),b=u.imageWidth+p+f,y=o-b;0!=y&&(f+=y);var _=u.imageHeight+h+m,y=r-_;0!=y&&(m+=y),e.removeAttr("width"),e.removeAttr("height");var w={position:"absolute",margin:"0px 0px"};w.width=c+"px",w.height=d+"px",w.left=g+"px",w.top=v+"px",w["padding-left"]=p+"px",w["padding-top"]=h+"px",w["padding-right"]=f+"px",w["padding-bottom"]=m+"px",e.css(w);var C={};return C.imageWidth=c,C.imageHeight=d,C},this.showElement=function(e,t,n){e.show().fadeTo(0,1),t&&t.show().fadeTo(0,1),n&&n.show().fadeTo(0,1)},this.z_________GALLERY_RELATED_FUNCTIONS_______=function(){},this.disableButton=function(e,t){if(!t)var t="ug-button-disabled";0==n.isButtonDisabled(e,t)&&e.addClass(t)},this.convertCustomPrefixOptions=function(e,t,n){if(!t)return e;var i={};return jQuery.each(e,function(e,o){if(0===e.indexOf(t+"_"+n+"_")){var r=e.replace(t+"_"+n+"_",n+"_");i[r]=o}else i[e]=o}),i},this.enableButton=function(e,t){if(!t)var t="ug-button-disabled";1==n.isButtonDisabled(e,t)&&e.removeClass(t)},this.isButtonDisabled=function(e,t){if(!t)var t="ug-button-disabled";return!!e.hasClass(t)},this.z_________MATH_FUNCTIONS_______=function(){},this.normalizeSetting=function(e,t,n,i,o,r){if(!r)var r=!1;return o=e+(o-n)/(i-n)*(t-e),1==r&&(o<e&&(o=e),o>t&&(o=t)),o},this.getNormalizedValue=function(e,t,n,i,o){return o=e+(o-e)/(t-e)*(i-n)},this.getDistance=function(e,t,n,i){return Math.round(Math.sqrt(Math.abs((n-e)*(n-e)+(i-t)*(i-t))))},this.getMiddlePoint=function(e,t,n,i){var o={};return o.x=e+Math.round((n-e)/2),o.y=t+Math.round((i-t)/2),o},this.getNumItemsInSpace=function(e,t,n){return Math.floor((e+n)/(t+n))},this.getNumItemsInSpaceRound=function(e,t,n){return Math.round((e+n)/(t+n))},this.getSpaceByNumItems=function(e,t,n){return e*t+(e-1)*n},this.getItemSizeInSpace=function(e,t,n){return Math.floor((e-(t-1)*n)/t)},this.getColX=function(e,t,n){return e*(t+n)},this.getColByIndex=function(e,t){return t%e},this.getColRowByIndex=function(e,t){var n=Math.floor(e/t);return{col:Math.floor(e%t),row:n}},this.getIndexByRowCol=function(e,t,n){return e<0?-1:t<0?-1:e*n+t},this.getPrevRowSameColIndex=function(e,t){var i=n.getColRowByIndex(e,t);return n.getIndexByRowCol(i.row-1,i.col,t)},this.getNextRowSameColIndex=function(e,t){var i=n.getColRowByIndex(e,t);return n.getIndexByRowCol(i.row+1,i.col,t)},this.z_________DATA_FUNCTIONS_______=function(){},this.setGlobalData=function(e,t){jQuery.data(document.body,e,t)},this.getGlobalData=function(e){return jQuery.data(document.body,e)},this.z_________EVENT_DATA_FUNCTIONS_______=function(){},this.handleScrollTop=function(e){if(0==n.isTouchDevice())return null;var t=n.getStoredEventData(e);if(null===t.scrollDir&&(Math.abs(t.diffMouseX)>15?t.scrollDir="hor":Math.abs(t.diffMouseY)>15&&Math.abs(t.diffMouseY)>Math.abs(t.diffMouseX)&&(t.scrollDir="vert",t.scrollStartY=t.lastMouseClientY,t.scrollOrigin=jQuery(document).scrollTop(),i.dataCache[e].scrollStartY=t.lastMouseClientY,i.dataCache[e].scrollOrigin=t.scrollOrigin),i.dataCache[e].scrollDir=t.scrollDir),"vert"!==t.scrollDir)return t.scrollDir;var o=(jQuery(document).scrollTop(),t.scrollOrigin-(t.lastMouseClientY-t.scrollStartY));return o>=0&&jQuery(document).scrollTop(o),t.scrollDir},this.wasVerticalScroll=function(e){return"vert"===n.getStoredEventData(e).scrollDir},this.storeEventData=function(e,t,o){var r=n.getMousePosition(e),a=jQuery.now(),s={startTime:a,lastTime:a,startMouseX:r.pageX,startMouseY:r.pageY,lastMouseX:r.pageX,lastMouseY:r.pageY,startMouseClientY:r.clientY,lastMouseClientY:r.clientY,scrollTop:jQuery(document).scrollTop(),scrollDir:null};o&&(s=jQuery.extend(s,o)),i.dataCache[t]=s},this.updateStoredEventData=function(e,t,o){if(!i.dataCache[t])throw new Error("updateEventData error: must have stored cache object");var r=i.dataCache[t],a=n.getMousePosition(e);r.lastTime=jQuery.now(),void 0!==a.pageX&&(r.lastMouseX=a.pageX,r.lastMouseY=a.pageY,r.lastMouseClientY=a.clientY),o&&(r=jQuery.extend(r,o)),i.dataCache[t]=r},this.getStoredEventData=function(e,t){if(!i.dataCache[e])throw new Error("updateEventData error: must have stored cache object");var n=i.dataCache[e];return n.diffMouseX=n.lastMouseX-n.startMouseX,n.diffMouseY=n.lastMouseY-n.startMouseY,n.diffMouseClientY=n.lastMouseClientY-n.startMouseClientY,n.diffTime=n.lastTime-n.startTime,!0===t?(n.startMousePos=n.lastMouseY,n.lastMousePos=n.lastMouseY,n.diffMousePos=n.diffMouseY):(n.startMousePos=n.lastMouseX,n.lastMousePos=n.lastMouseX,n.diffMousePos=n.diffMouseX),n},this.isApproveStoredEventClick=function(e,t){if(!i.dataCache[e])return!0;var o=n.getStoredEventData(e,t),r=Math.abs(o.diffMousePos);return!(o.diffTime>400)&&!(r>30)},this.clearStoredEventData=function(e){i.dataCache[e]=null},this.z_________CHECK_SUPPORT_FUNCTIONS_______=function(){},this.isCanvasExists=function(){return"function"==typeof jQuery('<canvas width="500" height="500" > </canvas>')[0].getContext},this.isScrollbarExists=function(){return window.innerWidth>document.documentElement.clientWidth},this.isTouchDevice=function(){if(-1!==i.isTouchDevice)return i.isTouchDevice;try{document.createEvent("TouchEvent"),i.isTouchDevice=!0}catch(e){i.isTouchDevice=!1}return i.isTouchDevice},this.isRgbaSupported=function(){if(-1!==i.isRgbaSupported)return i.isRgbaSupported;var e=document.getElementsByTagName("script")[0],t=e.style.color;try{e.style.color="rgba(1,5,13,0.44)"}catch(e){}var n=e.style.color!=t;return e.style.color=t,i.isRgbaSupported=n,n},this.z_________GENERAL_FUNCTIONS_______=function(){},this.checkMinJqueryVersion=function(e){for(var t=jQuery.fn.jquery.split("."),n=e.split("."),i=0,o=t.length;i<o;i++){var r=parseInt(t[i]),a=parseInt(n[i]);if(void 0===n[i])return!0;if(a>r)return!1;if(r>a)return!0}return!0},this.getCssSizeParam=function(e){return jQuery.isNumeric(e)?e+"px":e},this.convertHexToRGB=function(e,t){var n=e.replace("#","");return n===e?e:(r=parseInt(n.substring(0,2),16),g=parseInt(n.substring(2,4),16),b=parseInt(n.substring(4,6),16),result="rgba("+r+","+g+","+b+","+t+")",result)},this.timestampToString=function(e){var t=new Date(e),n=t.getDate()+"/"+t.getMonth();return n+=" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()},this.getArrTouches=function(e){var t=[];return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(t=e.originalEvent.touches),t},this.getArrTouchPositions=function(e){for(var t=[],n=0;n<e.length;n++){var i={pageX:e[n].pageX,pageY:e[n].pageY};t.push(i)}return t},this.startTimeDebug=function(){i.starTime=jQuery.now()},this.showTimeDebug=function(){debugLine({"Time Passed":jQuery.now()-i.starTime},!0)},this.initProgressIndicator=function(e,t,i){switch("bar"!=e&&0==n.isCanvasExists()&&(e="bar"),e){case"bar":var o=new UGProgressBar;o.putHidden(i,t);break;default:case"pie":var o=new UGProgressPie;o.putHidden(i,t);break;case"pie2":t.type_fill=!0;var o=new UGProgressPie;o.putHidden(i,t)}return o},this.setButtonMobileReady=function(e){e.on("touchstart",function(e){jQuery(this).addClass("ug-nohover")}),e.on("mousedown touchend",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1})},this.registerTheme=function(e){i.arrThemes.push(e)},this.getArrThemes=function(){return i.arrThemes},this.isThemeRegistered=function(e){return-1!==jQuery.inArray(e,i.arrThemes)},this.getFirstRegisteredTheme=function(){return 0==i.arrThemes.length?"":i.arrThemes[0]},this.isTimePassed=function(e,t){if(!t)var t=100;var n=jQuery.now();0==i.timeCache.hasOwnProperty(e)?lastTime=0:lastTime=i.timeCache[e];var o=n-lastTime;return i.timeCache[e]=n,!(o<=t)},this.whenContiniousEventOver=function(e,t,n){if(!n)var n=300;1==i.timeCache.hasOwnProperty(e)&&null!=i.timeCache[e]&&(clearTimeout(i.timeCache[e]),i.timeCache[e]=null),i.timeCache[e]=setTimeout(t,n)},this.validateClickTouchstartEvent=function(e){var t=!0,n=jQuery.now()-i.lastEventTime;return"click"==e&&"touchstart"==i.lastEventType&&n<1e3&&(t=!1),i.lastEventTime=jQuery.now(),i.lastEventType=e,t},this.addClassOnHover=function(e,t){if(!t)var t="ug-button-hover";e.hover(function(){jQuery(this).addClass(t)},function(){jQuery(this).removeClass(t)})},this.destroyButton=function(e){e.off("mouseenter"),e.off("mouseleave"),e.off("click"),e.off("touchstart"),e.off("touchend"),e.off("mousedown")},this.setButtonOnClick=function(e,t){n.setButtonMobileReady(e),e.on("click touchstart",function(e){if(objThis=jQuery(this),e.stopPropagation(),e.stopImmediatePropagation(),0==n.validateClickTouchstartEvent(e.type))return!0;t(objThis,e)})},this.loadJs=function(e,t){!0===t&&(e=location.protocol+"//"+e);var n=document.createElement("script");n.src=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)},this.loadCss=function(e,t){!0===t&&(e=location.protocol+"//"+e);var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(n)},this.addEvent=function(e,t,n){void 0!==e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},this.checkImagesLoaded=function(e,t,n){function i(e,i){o++,"function"==typeof n&&setTimeout(function(){n(e,i)}),o==r&&"function"==typeof t&&setTimeout(function(){t()})}var o=0,r=e.length;if(0==r&&t)return t(),!1;setTimeout(function(){for(var t=0;t<r;t++){var n=e[t];if(void 0!==n.naturalWidth&&0!==n.naturalWidth)i(e[t],!1);else{var o=jQuery("<img/>");o.data("index",t),o.on("load",function(){var t=jQuery(this).data("index");i(e[t],!1)}),o.on("error",function(){var t=jQuery(this).data("index");i(e[t],!0)}),o.attr("src",n.src)}}})},this.waitForWidth=function(e,t){var n=e.width();if(0!=n)return t(),!1;i.handle=setInterval(function(){0!=(n=e.width())&&(clearInterval(i.handle),t())},300)},this.arrayShuffle=function(e){if("object"!=typeof e)return e;for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);return e},this.getObjectLength=function(e){var t=0;for(var n in e)t++;return t},this.normalizePercent=function(e){return e<0&&(e=0),e>1&&(e=1),e},this.stripTags=function(e){return e.replace(/(<([^>]+)>)/gi,"")},this.escapeDoubleSlash=function(e){return e.replace('"','"')},this.htmlentitles=function(e){return jQuery("<div/>").text(e).html()},this.z_________END_GENERAL_FUNCTIONS_______=function(){}}function UGThumbsGeneral(){function e(e,t,n,i){var o={width:e+"px",height:t+"px"},r={width:e-P.thumbInnerReduce+"px",height:t-P.thumbInnerReduce+"px"},a=".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay";n?(!0!==i&&n.css(o),n.children(a).css(r)):(C.children(".ug-thumb-wrapper").css(o),C.find(a).css(r))}function t(e,t,n,i){if(!i)var i=!1;E.isFakeFullscreen()&&(i=!0);var o=e.children(".ug-thumb-border-overlay"),r={};r["border-width"]=t+"px",0!=t&&(r["border-color"]=n),i&&!0===i?(o.css(r),0==t?o.hide():o.show()):(0==t?o.stop().fadeOut(S.thumb_transition_duration):o.show().stop().fadeIn(S.thumb_transition_duration),s(o,r))}function n(e,t,n){var i=e.children(".ug-thumb-overlay"),o=S.thumb_transition_duration;n&&!0===n&&(o=0),t?i.stop(!0).fadeTo(o,P.colorOverlayOpacity):i.stop(!0).fadeTo(o,0)}function i(e,t,n){var i=e.children("img.ug-thumb-image"),o=e.children("img.ug-thumb-image-overlay"),r=S.thumb_transition_duration;n&&!0===n&&(r=0),t?o.stop(!0).fadeTo(r,1):(i.fadeTo(0,1),o.stop(!0).fadeTo(r,0))}function o(e,o){if(P.isEffectBorder&&t(e,S.thumb_selected_border_width,S.thumb_selected_border_color,o),P.isEffectOverlay){n(e,1==S.thumb_overlay_reverse,o)}P.isEffectImage&&i(e,!1,o),x.trigger(k.events.SETSELECTEDSTYLE,e)}function r(e){var t=k.getItemByThumb(e);if(t.isLoaded=!0,t.isThumbImageLoaded=!1,1==P.customThumbs)return x.trigger(k.events.IMAGELOADERROR,e),!0;e.children(".ug-thumb-loader").hide(),e.children(".ug-thumb-error").show()}function a(){if(S.thumb_round_corners_radius<=0)return!1;var e={"border-radius":S.thumb_round_corners_radius+"px"};C.find(".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay").css(e)}function s(e,t){e.stop(!0).animate(t,{duration:S.thumb_transition_duration,easing:S.thumb_transition_easing,queue:!1})}function l(e){1==p(e)?o(e,!0,"redraw"):k.setThumbNormalStyle(e,!0,"redraw")}function u(t,n,i){if(1==S.thumb_fixed_size)T.scaleImageCoverParent(n,t);else{"height"==S.thumb_resize_by?T.scaleImageByHeight(n,S.thumb_height):T.scaleImageByWidth(n,S.thumb_width);var o=T.getElementSize(n);T.placeElement(n,0,0),e(o.width,o.height,t)}t.children(".ug-thumb-loader").hide(),n.show(),0==S.thumb_image_overlay_effect?n.fadeTo(0,1):(1==S.thumb_image_overlay_effect&&c(n),n.fadeTo(0,0),l(t)),x.trigger(k.events.AFTERPLACEIMAGE,t)}function c(e){var t=e.siblings(".ug-thumb-image-overlay");if(0==t.length)return!1;var n=T.getElementSize(e),i={width:n.width+"px",height:n.height+"px",left:n.left+"px",top:n.top+"px"};t.css(i),0==P.customThumbs&&t.fadeTo(0,1)}function d(){var e="",t=S.thumb_image_overlay_type.split(",");for(var n in t){switch(t[n]){case"bw":e+=" ug-bw-effect";break;case"blur":e+=" ug-blur-effect";break;case"sepia":e+=" ug-sepia-effect"}}return e}function p(e){return!!e.hasClass("ug-thumb-selected")}function f(t,n){n=jQuery(n);var i=(k.getItemByThumb(n),T.getElementSize(n));e(i.width,i.height,n,!0),l(n)}function h(e){if(1==P.touchEnabled)return objThumbs.off("mouseenter").off("mouseleave"),!0;0==p(e)&&k.setThumbOverStyle(e)}function m(e){if(1==P.touchEnabled)return!0;0==p(e)&&k.setThumbNormalStyle(e,!1)}function g(e,t){if(!t)var t=!1;var n=jQuery(e),i=n.parents(".ug-thumb-wrapper");return 0!=i.parent().length&&(objItem=k.getItemByThumb(i),(1!=objItem.isLoaded||!1!==t)&&(k.triggerImageLoadedEvent(i,n),void(1==P.customThumbs?x.trigger(k.events.PLACEIMAGE,[i,n]):u(i,n,objItem))))}function v(e,t,n){objItem=k.getItemByThumb(t),objItem.isLoaded=!0,objItem.isThumbImageLoaded=!0;var i=T.getImageOriginalSize(n);objItem.thumbWidth=i.width,objItem.thumbHeight=i.height,objItem.thumbRatioByWidth=i.width/i.height,objItem.thumbRatioByHeight=i.height/i.width}var b,y,_,w,C,k=this,x=jQuery(k),E=new UniteGalleryMain,T=new UGFunctions;this.events={SETOVERSTYLE:"thumbmouseover",SETNORMALSTYLE:"thumbmouseout",SETSELECTEDSTYLE:"thumbsetselected",PLACEIMAGE:"thumbplaceimage",AFTERPLACEIMAGE:"thumb_after_place_image",IMAGELOADERROR:"thumbimageloaderror",THUMB_IMAGE_LOADED:"thumb_image_loaded"};var S={thumb_width:88,thumb_height:50,thumb_fixed_size:!0,thumb_resize_by:"height",thumb_border_effect:!0,thumb_border_width:0,thumb_border_color:"#000000",thumb_over_border_width:0,thumb_over_border_color:"#d9d9d9",thumb_selected_border_width:1,thumb_selected_border_color:"#d9d9d9",thumb_round_corners_radius:0,thumb_color_overlay_effect:!0,thumb_overlay_color:"#000000",thumb_overlay_opacity:.4,thumb_overlay_reverse:!1,thumb_image_overlay_effect:!1,thumb_image_overlay_type:"bw",thumb_transition_duration:200,thumb_transition_easing:"easeOutQuad",thumb_show_loader:!0,thumb_loader_type:"dark",thumb_wrapper_as_link:!1,thumb_link_newpage:!1},P={touchEnabled:!1,num_thumbs_checking:0,customThumbs:!1,funcSetCustomThumbHtml:null,isEffectBorder:!1,isEffectOverlay:!1,isEffectImage:!1,colorOverlayOpacity:1,thumbInnerReduce:0,allowOnResize:!0},O={timeout_thumb_check:100,thumb_max_check_times:600,eventSizeChange:"thumb_size_change"};this.init=function(e,t){y=e.getObjects(),E=e,b=jQuery(e),_=y.g_objWrapper,w=y.g_arrItems,S=jQuery.extend(S,t),P.isEffectBorder=S.thumb_border_effect,P.isEffectOverlay=S.thumb_color_overlay_effect,P.isEffectImage=S.thumb_image_overlay_effect},this._____________EXTERNAL_SETTERS__________=function(){},this.setHtmlThumbs=function(e){C=e;var t=E.getNumItems();if(1==P.isEffectImage)var n=d();for(var i=0;i<t;i++){var o=w[i],r="";0==P.customThumbs&&(r=" ug-thumb-generated");var a=o.index+1,s="style='z-index:"+a+";'",l="<div class='ug-thumb-wrapper"+r+"' "+s+"></div>";if(1==S.thumb_wrapper_as_link){var u=o.link;""==o.link&&(u="javascript:void(0)");var c="";1==S.thumb_link_newpage&&o.link&&(c=" target='_blank'");var l="<a href='"+u+"'"+c+" class='ug-thumb-wrapper"+r+"'></a>"}var p=jQuery(l),f=o.objThumbImage;if(0==P.customThumbs){if(1==S.thumb_show_loader&&f){var h="ug-thumb-loader-dark";"bright"==S.thumb_loader_type&&(h="ug-thumb-loader-bright"),p.append("<div class='ug-thumb-loader "+h+"'></div>"),p.append("<div class='ug-thumb-error' style='display:none'></div>")}if(f){if(f.addClass("ug-thumb-image"),1==S.thumb_image_overlay_effect){var m=f.clone().appendTo(p);m.addClass("ug-thumb-image-overlay "+n).removeClass("ug-thumb-image"),m.fadeTo(0,0),o.objImageOverlay=m}p.append(f)}}P.isEffectBorder&&p.append("<div class='ug-thumb-border-overlay'></div>"),P.isEffectOverlay&&p.append("<div class='ug-thumb-overlay'></div>"),C.append(p),P.customThumbs&&P.funcSetCustomThumbHtml(p,o),w[i].objThumbWrapper=p}},this.setThumbNormalStyle=function(e,o,r){if(1==P.customThumbs&&e.removeClass("ug-thumb-over"),P.isEffectBorder&&t(e,S.thumb_border_width,S.thumb_border_color,o),P.isEffectOverlay){n(e,1!=S.thumb_overlay_reverse,o)}P.isEffectImage&&i(e,!0,o),x.trigger(k.events.SETNORMALSTYLE,e)},this.setThumbOverStyle=function(e){if(1==P.customThumbs&&e.addClass("ug-thumb-over"),P.isEffectBorder&&t(e,S.thumb_over_border_width,S.thumb_over_border_color),P.isEffectOverlay){n(e,1==S.thumb_overlay_reverse)}1==P.isEffectImage&&i(e,!1),x.trigger(k.events.SETOVERSTYLE,e)},this.setHtmlProperties=function(){if(0==P.customThumbs){1==S.thumb_fixed_size&&e(S.thumb_width,S.thumb_height),a()}if(C.children(".ug-thumb-wrapper").each(function(){l(jQuery(this))}),P.isEffectOverlay&&S.thumb_overlay_color){var t={};if(T.isRgbaSupported()){var n=T.convertHexToRGB(S.thumb_overlay_color,S.thumb_overlay_opacity);t["background-color"]=n}else t["background-color"]=S.thumb_overlay_color,P.colorOverlayOpacity=S.thumb_overlay_opacity;C.find(".ug-thumb-wrapper .ug-thumb-overlay").css(t)}},this.setThumbSelected=function(e){if(1==P.customThumbs&&e.removeClass("ug-thumb-over"),1==p(e))return!0;e.addClass("ug-thumb-selected"),o(e)},this.setThumbUnselected=function(e){e.removeClass("ug-thumb-selected"),k.setThumbNormalStyle(e,!1,"set unselected")},this.setOptions=function(e){S=jQuery.extend(S,e)},this.setThumbInnerReduce=function(e){P.thumbInnerReduce=e},this.setCustomThumbs=function(e,t,n){if(P.customThumbs=!0,"function"!=typeof e)throw new Error("The argument should be function");P.funcSetCustomThumbHtml=e,-1==jQuery.inArray("overlay",t)&&(P.isEffectOverlay=!1),-1==jQuery.inArray("border",t)&&(P.isEffectBorder=!1),P.isEffectImage=!1,n&&!1===n.allow_onresize&&(P.allowOnResize=!1)},this._____________EXTERNAL_GETTERS__________=function(){},this.getOptions=function(){return S},this.getNumThumbs=function(){return w.length},this.getThumbImage=function(e){return e.find(".ug-thumb-image")},this.getThumbByIndex=function(e){var t=k.getThumbs();if(e>=t.length||e<0)throw new Error("Wrong thumb index");return jQuery(t[e])},this.getThumbs=function(){return C.children(".ug-thumb-wrapper")},this.getItemByThumb=function(e){var t=e.data("index");return void 0===t&&(t=e.index()),w[t]},this.isThumbLoaded=function(e){return k.getItemByThumb(e).isLoaded},this.getGlobalThumbSize=function(){return{width:S.thumb_width,height:S.thumb_height}},this._____________EXTERNAL_OTHERS__________=function(){},this.initEvents=function(){var e=C.find(".ug-thumb-wrapper");e.on("touchstart",function(){P.touchEnabled=!0,e.off("mouseenter").off("mouseleave")}),1==P.allowOnResize&&_.on(O.eventSizeChange,f),e.hover(function(e){h(jQuery(this))},function(e){m(jQuery(this))}),x.on(k.events.THUMB_IMAGE_LOADED,v)},this.destroy=function(){var e=C.find(".ug-thumb-wrapper");e.off("touchstart"),_.off(O.eventSizeChange),e.off("mouseenter"),e.off("mouseleave"),x.off(k.events.THUMB_IMAGE_LOADED)},this.loadThumbsImages=function(){var e=C.find(".ug-thumb-image");T.checkImagesLoaded(e,null,function(e,t){if(0==t)g(e,!0);else{r(jQuery(e).parent())}})},this.triggerImageLoadedEvent=function(e,t){
x.trigger(k.events.THUMB_IMAGE_LOADED,[e,t])},this.hideThumbs=function(){C.find(".ug-thumb-wrapper").hide()}}function UGTiles(){function e(e,n){g_objects=e.getObjects(),oe=e,Q=jQuery(e),X=g_objects.g_objWrapper,Z=g_objects.g_arrItems,ue=jQuery.extend(ue,n),t(),ae.init(e,ue),se=ae.getObjThumbs()}function t(){ue.tiles_min_columns<1&&(ue.tiles_min_columns=1),0!=ue.tiles_max_columns&&ue.tiles_max_columns<ue.tiles_min_columns&&(ue.tiles_max_columns=ue.tiles_min_columns)}function n(e){if(!e)var e=X;J=e;var t=ue.tiles_type;e.addClass("ug-tiletype-"+t),ae.setHtml(e),e.children(".ug-thumb-wrapper").hide()}function i(){if(J.addClass("ug-tiles-rest-mode"),ce.isTransInited=!0,1==ue.tiles_enable_transition){J.addClass("ug-tiles-transit");var e=ae.getOptions();1==e.tile_enable_image_effect&&0==e.tile_image_effect_reverse&&J.addClass("ug-tiles-transit-overlays"),ce.isTransActive=!0}}function o(){return re.getElementSize(J).width}function r(){return 0!=ce.isTransInited&&(J.addClass("ug-tiles-transition-active"),J.removeClass("ug-tiles-rest-mode"),0!=ce.isTransActive&&void ae.disableEvents())}function a(){if(0==ce.isTransInited)return!1;J.removeClass("ug-tiles-transition-active"),J.addClass("ug-tiles-rest-mode")}function s(){1==ce.isTransActive?(setTimeout(function(){ae.enableEvents(),ae.triggerSizeChangeEventAllTiles(),a()},800),ce.handle&&clearTimeout(ce.handle),ce.handle=setTimeout(function(){a(),ae.triggerSizeChangeEventAllTiles(),ce.handle=null},2e3)):(ae.triggerSizeChangeEventAllTiles(),a())}function l(){le.colWidth=(le.availWidth-le.colGap*(le.numCols-1))/le.numCols,le.colWidth=Math.floor(le.colWidth),le.totalWidth=re.getSpaceByNumItems(le.numCols,le.colWidth,le.colGap)}function u(){if(le.colWidth=ue.tiles_col_width,le.minCols=ue.tiles_min_columns,le.maxCols=ue.tiles_max_columns,0==oe.isMobileMode()?le.colGap=ue.tiles_space_between_cols:le.colGap=ue.tiles_space_between_cols_mobile,le.galleryWidth=o(),le.availWidth=le.galleryWidth,1==ue.tiles_include_padding&&(le.availWidth=le.galleryWidth-2*le.colGap),1==ue.tiles_exact_width)le.numCols=re.getNumItemsInSpace(le.availWidth,le.colWidth,le.colGap),le.maxCols>0&&le.numCols>le.maxCols&&(le.numCols=le.maxCols),le.numCols<le.minCols?(le.numCols=le.minCols,l()):le.totalWidth=le.numCols*(le.colWidth+le.colGap)-le.colGap;else{var e=re.getNumItemsInSpaceRound(le.availWidth,le.colWidth,le.colGap);e<le.minCols?e=le.minCols:0!=le.maxCols&&e>le.maxCols&&(e=le.maxCols),le.numCols=e,l()}switch(ue.tiles_align){case"center":default:le.addX=Math.round((le.galleryWidth-le.totalWidth)/2);break;case"left":le.addX=0;break;case"right":le.addX=le.galleryWidth-le.totalWidth}for(le.maxColHeight=0,le.arrPosx=[],col=0;col<le.numCols;col++){var t=re.getColX(col,le.colWidth,le.colGap);le.arrPosx[col]=t+le.addX}le.colHeights=[0]}function c(){var e=0,t=999999999;for(col=0;col<le.numCols;col++){if(void 0==le.colHeights[col]||0==le.colHeights[col])return col;le.colHeights[col]<t&&(e=col,t=le.colHeights[col])}return e}function d(e,t,n,i){if(null===i||void 0===i)var i=c();var o=0;void 0!==le.colHeights[i]&&(o=le.colHeights[i]);var r=ae.getTileHeightByWidth(le.colWidth,e,"placeTile");if(null===r){if(1==ue.tiles_enable_transition)throw new Error("Can't know tile height, please turn off transition");r=re.getElementSize(e).height}var a=le.arrPosx[i];re.placeElement(e,a,o);var s=o+r;le.colHeights[i]=s+le.colGap,le.maxColHeight<s&&(le.maxColHeight=s),1==t&&e.show().fadeTo(0,1),1==n&&J.height(le.maxColHeight)}function p(e){e||(e=!1),u();var t=se.getThumbs();r(),ae.resizeAllTiles(le.colWidth,ae.resizemode.VISIBLE_ELEMENTS);for(var n=0;n<t.length;n++){var i=jQuery(t[n]),o=void 0;1==ue.tiles_keep_order&&(o=re.getColByIndex(le.numCols,n)),d(i,e,!1,o)}s();var a=J.height();1==ce.isTransActive&&a>le.maxColHeight?setTimeout(function(){J.height(le.maxColHeight)},700):J.height(le.maxColHeight)}function f(e){var t=e.index();if(!0===oe.getItem(t).ordered_placed)return!1;var n=re.getPrevRowSameColIndex(t,le.numCols);return n<0||!0===oe.getItem(n).ordered_placed}function h(e,t){if(!0!==t){if(0==f(e))return!1}var n=e.index(),i=re.getColByIndex(le.numCols,n),o=oe.getItem(n);ae.resizeTile(e,le.colWidth),d(e,!0,!0,i),o.ordered_placed=!0;var r=oe.getNumItems(),a=re.getNextRowSameColIndex(n,le.numCols);if(a>=r)return!1;var s=se.getThumbByIndex(a),l=oe.getItem(a);se.isThumbLoaded(s);se.isThumbLoaded(s)&&!l.ordered_placed&&h(s,!0)}function m(e,t){if(1==t)return!1;e=jQuery(e);var n=jQuery(e).parent();se.triggerImageLoadedEvent(n,e),1==ue.tiles_keep_order?h(n):(ae.resizeTile(n,le.colWidth),d(n,!0,!0))}function g(){var e=se.getThumbs();ce.isAllLoaded=!1,u();var t=Math.abs(le.galleryWidth-le.totalWidth);if(1==ue.tiles_set_initial_height&&0==re.isScrollbarExists()&&t<25){var n=(e.length,Math.ceil(e.length/le.numCols)),o=n*ue.tiles_col_width*.75;J.height(o),u()}e.fadeTo(0,0);var r=jQuery(J).find("img.ug-thumb-image");if(1==ce.isFixedMode)ie.trigger(ne.events.TILES_FIRST_PLACED),p(!0),re.checkImagesLoaded(r,function(){i(),ie.trigger(ne.events.ALL_TILES_LOADED)});else{var a=le.numCols,s=le.galleryWidth,l=!1;re.checkImagesLoaded(r,function(){u(),a==le.numCols&&s==le.galleryWidth||p(!1),i(),ie.trigger(ne.events.ALL_TILES_LOADED)},function(e,t){0==l&&ie.trigger(ne.events.TILES_FIRST_PLACED),l=!0,m(e,t)})}}function v(){var e=o(),t=se.getThumbs(),n=ue.tiles_justified_row_height,i=[],r=0,a=ue.tiles_justified_space_between,s=t.length;jQuery.each(t,function(e,t){t=jQuery(t);var o=se.getItemByThumb(t),a=o.thumbWidth;o.thumbHeight!==n&&(a=Math.floor(o.thumbRatioByWidth*n)),i[e]=a,r+=a});var l=Math.ceil(r/e);l>s&&(l=s);var u=r/l,c=[],d=0,p=[],f=[],h=0,m=0;jQuery.each(t,function(e,t){var n=i[e];h+n/2>(m+1)*u&&(p[c.length]=d,c.push(f),f=[],d=0,m++),h+=n,d+=n,f.push(t)}),p[c.length]=d,c.push(f);var g=[],v=[],b=0;return jQuery.each(c,function(t,o){var r=(o.length,p[t]),s=(o.length-1)*a,l=(e-s)/r,u=Math.round(n*l);b+=u,t>0&&(b+=a),v.push(u);var c=u/n,d=[],f=s;jQuery.each(o,function(e,t){var n=jQuery(t),o=n.index(),r=i[o],a=Math.round(r*c);d[e]=a,f+=a});var h=f-e;jQuery.each(d,function(e,t){if(0==h)return!1;h<0?(d[e]=t+1,h++):(d[e]=t-1,h--),e==d.length-1&&0!=h&&(d[e]-=h)}),g[t]=d}),{arrRows:c,arrRowWidths:g,arrRowHeights:v,gap:a,totalHeight:b}}function b(e){if(!e)var e=!1;var t=o(),n=v();J.height(n.totalHeight),o()!=t&&(n=v()),r();var i=0,a=0;jQuery.each(n.arrRows,function(t,o){var r=n.arrRowWidths[t],s=n.arrRowHeights[t],l=0;jQuery.each(o,function(t,o){var u=jQuery(o),c=s,d=r[t];ae.resizeTile(u,d,c,ae.resizemode.VISIBLE_ELEMENTS),re.placeElement(u,l,i),l+=d,l>a&&(a=l),l+=n.gap,1==e&&jQuery(o).show()}),i+=s+n.gap}),s()}function y(){var e=jQuery(X).find("img.ug-thumb-image"),t=se.getThumbs();ce.isAllLoaded=!1,t.fadeTo(0,0),re.checkImagesLoaded(e,function(){setTimeout(function(){b(!0),t.fadeTo(0,1),ie.trigger(ne.events.TILES_FIRST_PLACED),i(),ie.trigger(ne.events.ALL_TILES_LOADED)})},function(e,t){e=jQuery(e);var n=jQuery(e).parent();se.triggerImageLoadedEvent(n,e)})}function _(){var e=jQuery(X).find("img.ug-thumb-image"),t=se.getThumbs();ce.isAllLoaded=!1,t.fadeTo(0,0),re.checkImagesLoaded(e,function(){1==oe.isMobileMode()?p(!0):C(!0),ie.trigger(ne.events.TILES_FIRST_PLACED),i(),ie.trigger(ne.events.ALL_TILES_LOADED)},function(e,t){e=jQuery(e);var n=jQuery(e).parent();se.triggerImageLoadedEvent(n,e)})}function w(){var e=o();switch(de.galleryWidth=e,ee={},de.colWidth=ue.tiles_nested_col_width,de.optimalTileWidth=ue.tiles_nested_optimal_tile_width,de.currentGap=ue.tiles_space_between_cols,1==oe.isMobileMode()&&(de.currentGap=ue.tiles_space_between_cols_mobile),null==de.colWidth?de.colWidth=Math.floor(de.optimalTileWidth/de.nestedOptimalCols):de.optimalTileWidth>de.colWidth?de.nestedOptimalCols=Math.ceil(de.optimalTileWidth/de.colWidth):de.nestedOptimalCols=1,de.maxColumns=re.getNumItemsInSpace(e,de.colWidth,de.currentGap),de.colWidth=re.getItemSizeInSpace(e,de.maxColumns,de.currentGap),de.gridY=0,te=[],se.getThumbs().each(function(){var e=jQuery(this),t=k(e);te.push(t)}),de.optimalTileWidth>de.colWidth?de.nestedOptimalCols=Math.ceil(de.optimalTileWidth/de.colWidth):de.nestedOptimalCols=1,de.totalWidth=de.maxColumns*(de.colWidth+de.currentGap)-de.currentGap,ue.tiles_align){case"center":default:de.addX=Math.round((de.galleryWidth-de.totalWidth)/2);break;case"left":de.addX=0;break;case"right":de.addX=de.galleryWidth-de.totalWidth}de.maxGridY=0}function C(e){var t=o();w(),T();var n=de.maxGridY*(de.colWidth+de.currentGap)-de.currentGap;J.height(n),o()!=t&&(w(),T()),0==ue.tiles_nested_debug&&V(e)}function k(e){var t,n,i={},o=de.colWidth,r=de.currentGap,a=ae.getTileImageSize(e),s=e.index(),l=Math.ceil(x(s)*(1*de.nestedOptimalCols/3)+2*de.nestedOptimalCols/3),u=a.width,c=a.height,d=u/c;return u>c?(t=l,0==(n=Math.round(t/d))&&(n=1)):(n=l,0==(t=Math.round(n*d))&&(t=1)),i.dimWidth=t,i.dimHeight=n,i.width=t*o+r*(t-1),i.height=n*o+r*(n-1),i.imgWidth=u,i.imgHeight=c,i.left=0,i.top=0,i}function x(e){return Math.abs(Math.sin(Math.abs(1e3*Math.sin(e))))}function E(e,t){if(0==t){for(var n=de.currentItem;n<te.length;n++)S(n,!0);de.currentItem=te.length-1}else S(de.currentItem,!0);for(var n=0;n<=de.currentItem;n++)G(n,!0);de.currentItem++}function T(e){if(1==ue.tiles_nested_debug)return void 0===e&&(e=!0),E(!0,e),!1;for(var t=0;t<te.length;t++)S(t,!0)}function S(e,t){if(!t)var t=!1;de.maxColHeight=0;for(var n=re.getObjectLength(ee),i=de.gridY;i<=n+1;i++){for(var o=0;o<de.maxColumns;o++)if(0==U(de.gridY)||0==z(de.gridY,o)){var r=B(o);return void P(e,r,o)}de.gridY++}}function P(e,t,n){var i=jQuery.extend(!0,{},te[e]),o=i.dimWidth,r=t-i.dimWidth,a=de.nestedOptimalCols;if(t<=i.dimWidth||r<=.33*a||t<=a)L(e,t);else if(r<=a)a>=4?1==F(Math.floor(t/2),n)?L(e,Math.floor(t/2)+1):L(e,Math.floor(t/2)):L(objImage,t);else if(1==F(o,n))switch(o>=a){case!0:L(e,o-1);break;case!1:L(e,o+1)}i=jQuery.extend(!0,{},te[e]);var s=N(e,i.dimWidth,n);if(de.columnsValueToEnableHeightResize<=s[0]&&de.maxColumns>=2*de.nestedOptimalCols){var l=j(n,i),u=D(e,l.newHeight,!0);te[e].dimHeight=u.dimHeight;var c=A(s,u.dimWidth),d=O(c),p=!1;d>=2&&(p=!0),l.newHeight>=i.dimHeight&&(i=D(e,l.newHeight,!0));var f=I(l.idToResize,l.newHeight,i.dimHeight);i.top=de.gridY,i.left=n,f.push({tileID:e,sizes:i});return R(f)<R(c)||1==p?void M(f):void M(c)}i.left=n,i.top=de.gridY,te[e]=i,H(e,i,n,de.gridY),de.maxGridY=i.top+i.dimHeight}function O(e){for(var t=0,n=0,i=0;i<e.length-1;i++){var o=e[i].sizes,r=-1,a=-1;U(o.top+o.dimHeight)&&de.maxColumns>o.left+o.dimWidth&&(r=ee[o.top+o.dimHeight-1][o.left+o.dimWidth],a=ee[o.top+o.dimHeight][o.left+o.dimWidth]),r!=a&&t++}for(var i=0;i<e.length-1;i++){var o=e[i].sizes,r=-1,a=-1;U(o.top+o.dimHeight)&&o.left-1>=0&&(r=ee[o.top+o.dimHeight-1][o.left-1],a=ee[o.top+o.dimHeight][o.left-1]),r!=a&&n++}return Math.max(n,t)}function I(e,t,n){var i=te[e],o=i.dimHeight,r=(i.dimWidth,i.left),a=i.top,s=(parseInt(a/(de.colWidth+de.currentGap)),parseInt(r/(de.colWidth+de.currentGap)),o-t+n),l=D(e,s,!0),u=[];return u.push({tileID:e,sizes:l}),u}function M(e){for(var t=0;t<e.length;t++){var n=e[t].sizes,i=e[t].tileID;te[i]=jQuery.extend(!0,{},n),H(i,n,n.left,n.top)}}function A(e,t){for(var n=0,i=0,o=[],r=0,a=0,s=0;s<e[1].length;s++){var l=e[1][s],u=te[e[1][s]];if(i+=u.dimHeight,0!=s)n+=u.dimHeight,o.push([l,u.dimHeight]);else{var c=L(l,t,!0);n+=c.dimHeight,o.push([e[1][s],c.dimHeight])}}r=u.left,a=u.top;for(var d=i,p=[],s=o.length-1;s>=0;s--){var f,l=o[s][0];0!=s?(f=Math.max(Math.round(1*i/3),Math.floor(o[s][1]*(i/n))),d-=f,c=D(l,f,!0),c.left=r,c.top=a,p.push({tileID:l,sizes:c}),a+=c.dimHeight):(f=d,c=D(l,f,!0),c.left=r,c.top=a,p.push({tileID:l,sizes:c}))}return p}function N(e,t,n){var i=de.gridY-1,o=0,r=0,a=1,s=[],l=[];if(s.push(e),i>=0){for(r=0;i>=0;){if(o=ee[i][n],void 0!==ee[i][n-1]&&ee[i][n-1]==ee[i][n]||void 0!==ee[i][n+t]&&ee[i][n+t-1]==ee[i][n+t]||ee[i][n]!=ee[i][n+t-1])return l.push(a),l.push(s),l;r!=o&&(a++,s.push(o)),i--,r=o}return l.push(a),l.push(s),l}return[0,[]]}function j(e,t){var n=0,i=0,o=t.dimWidth,r=t.dimHeight,a=0,s=0,l=jQuery.map(ee,function(e,t){return[e]});if(void 0===l[de.gridY]||void 0===l[de.gridY][e-1])i=0;else for(var u=0;;){if(void 0===ee[de.gridY+u]||-1==ee[de.gridY+u][e-1])break;a=ee[de.gridY+u][e-2],u++,i++}if(void 0===l[de.gridY]||void 0===l[de.gridY][e+o])n=0;else for(u=0;;){if(void 0===ee[de.gridY+u]||-1==ee[de.gridY+u][e+o])break;s=ee[de.gridY+u][e+o+1],u++,n++}var c=0,d=0;return Math.abs(r-i)<Math.abs(r-n)&&0!=i?(c=i,d=a):0!=n?(c=n,d=s):c=r,{newHeight:c,idToResize:d}}function L(e,t,n){n||(n=!1);var i=de.colWidth,o=de.currentGap,r=te[e],a=r.imgWidth,s=r.imgHeight,l=a/s;if(dimWidth=t,dimHeight=Math.round(dimWidth/l),1==n){var u=jQuery.extend(!0,{},r);return u.dimWidth=dimWidth,u.dimHeight=dimHeight,u.width=dimWidth*i+o*(dimWidth-1),u.height=dimHeight*i+o*(dimHeight-1),u}r.dimWidth=dimWidth,r.dimHeight=dimHeight,r.width=dimWidth*i+o*(dimWidth-1),r.height=dimHeight*i+o*(dimHeight-1)}function D(e,t,n){n||(n=!1);var i=te[e],o=i.dimWidth,r=de.colWidth,a=de.currentGap;if(1==n){var s=jQuery.extend(!0,{},i);return s.dimHeight=t,s.width=o*r+a*(o-1),s.height=t*r+a*(t-1),s}i.dimHeight=t,i.width=o*r+a*(o-1),i.height=t*r+a*(t-1)}function R(e){for(var t=0,n=0,i=0;i<e.length;i++){var o=te[e[i].tileID];if(0==o.dimHeight||0==o.height)return;resizeVal=o.dimWidth/o.dimHeight/(o.imgWidth/o.imgHeight),resizeVal<1&&(resizeVal=1/resizeVal),t+=resizeVal,n++}return t/n}function F(e,t){var n=de.gridY-1;return!(n<=0||0==U(n))&&ee[n][t+e-1]!=ee[n][t+e]}function B(e){var t=e,n=0;if(1==U(de.gridY))for(;0==z(de.gridY,t);)n++,t++;else n=de.maxColumns;return n}function U(e){return void 0!==ee[e]}function H(e,t,n,i){for(var o=0;o<t.dimHeight;o++)for(var r=0;r<t.dimWidth;r++)0==U(i+o)&&$(i+o),W(i+o,n+r,e)}function $(e){ee[e]=new Object;for(var t=0;t<de.maxColumns;t++)ee[e][t]=-1}function z(e,t){return-1!=ee[e][t]}function W(e,t,n){ee[e][t]=n}function V(e){if(!e)var e=!1;r();for(var t=0;t<te.length;t++)G(t,e);J.height(de.maxColHeight),s()}function G(e,t){var n=se.getThumbByIndex(e),i=te[e],o=i.top*(de.colWidth+de.currentGap),r=de.addX+i.left*(de.colWidth+de.currentGap);ae.resizeTile(n,i.width,i.height,ae.resizemode.VISIBLE_ELEMENTS),re.placeElement(n,r,o),o+i.height>de.maxColHeight&&(de.maxColHeight=o+i.height),1==t&&n.fadeTo(0,1)}function q(){if(1==ce.isFirstTimeRun)return!0;if(0==ce.isAllLoaded)return!1;switch(ue.tiles_type){case"columns":p(!1);break;case"justified":b(!1);break;case"nested":1==oe.isMobileMode()?p(!1):C(!1)}}function K(){ie.on(ne.events.ALL_TILES_LOADED,function(){if(1==ce.isAllLoaded)return!0;ce.isAllLoaded=!0,Q.trigger(oe.events.LOAD)}),Q.on(oe.events.SIZE_CHANGE,q),ae.initEvents()}function Y(){switch(X.children(".ug-tile").show(),1==ce.isFirstTimeRun&&K(),ae.run(),ue.tiles_type){default:case"columns":g();break;case"justified":y();break;case"nested":_()}ce.isFirstTimeRun=!1}var Q,X,J,Z,ee,te,ne=this,ie=jQuery(this),oe=new UniteGalleryMain,re=new UGFunctions,ae=new UGTileDesign,se=new UGThumbsGeneral,le={},ue={tiles_type:"columns",tiles_col_width:250,tiles_align:"center",tiles_exact_width:!1,tiles_space_between_cols:3,tiles_space_between_cols_mobile:3,tiles_include_padding:!0,tiles_min_columns:2,tiles_max_columns:0,tiles_keep_order:!1,tiles_set_initial_height:!0,tiles_justified_row_height:150,tiles_justified_space_between:3,tiles_nested_optimal_tile_width:250,tiles_nested_col_width:null,tiles_nested_debug:!1,tiles_enable_transition:!0};this.events={THUMB_SIZE_CHANGE:"thumb_size_change",TILES_FIRST_PLACED:"tiles_first_placed",ALL_TILES_LOADED:"all_tiles_loaded"};var ce={isFixedMode:!1,isFirstTimeRun:!0,handle:null,isTransActive:!1,isTransInited:!1,isAllLoaded:!1},de={colWidth:null,nestedOptimalCols:5,gridY:0,maxColumns:0,columnsValueToEnableHeightResize:3,resizeLeftRightToColumn:!0,currentItem:0,currentGap:null,optimalTileWidth:null,maxGridY:0};this.destroy=function(){Q.off(oe.events.SIZE_CHANGE),ae.destroy()},this.setFixedSizeMode=function(){ce.isFixedMode=!0,ae.setFixedMode()},this.init=function(t,n){e(t,n)},this.setHtml=function(e){n(e)},this.getObjTileDesign=function(){return ae},this.run=function(){Y()}}function UGTileDesign(){function e(e,n){U=e,j=jQuery(e);var o=U.getObjects();D=o.g_objWrapper,R=U.getArrItems(),z=jQuery.extend(z,W),z=jQuery.extend(z,n),t(),$.init(e,z);var r={allow_onresize:!1},a=["overlay"];V.funcCustomTileHtml&&(a=[]),$.setCustomThumbs(i,a,r);var s=$.getOptions();z=jQuery.extend(z,s),V.ratioByWidth=z.tile_width/z.tile_height,V.ratioByHeight=z.tile_height/z.tile_width,z.tile_size_by==F.sizeby.GLOBAL_RATIO&&V.isTextpanelOutside&&(V.hasImageContainer=!0)}function t(){if(1==z.tile_enable_overlay?(z.thumb_overlay_opacity=z.tile_overlay_opacity,z.thumb_overlay_color=z.tile_overlay_color):0==z.tile_enable_icons?z.thumb_color_overlay_effect=!1:z.thumb_overlay_opacity=0,z.tile_as_link&&(z.thumb_wrapper_as_link=!0,z.thumb_link_newpage=z.tile_link_newpage),1==z.tile_enable_outline&&0==z.tile_enable_border&&(z.tile_enable_outline=!1),V.tileInnerReduce=0,z.tile_enable_border&&(V.tileInnerReduce=2*z.tile_border_width,$.setThumbInnerReduce(V.tileInnerReduce)),V.isSaparateIcons=!H.isRgbaSupported(),1==z.tile_enable_textpanel){switch(z.tile_textpanel_position){case"top":z.tile_textpanel_align="top";case"bottom":V.isTextpanelOutside=!0,z.tile_textpanel_always_on=!0,z.tile_textpanel_offset=0;break;case"inside_top":z.tile_textpanel_align="top";break;case"middle":z.tile_textpanel_align="middle",z.tile_textpanel_appear_type="fade"}0==z.tile_textpanel_always_on&&(V.isSaparateIcons=!0)}0!=z.tile_textpanel_offset&&(z.tile_textpanel_appear_type="fade",z.tile_textpanel_margin=z.tile_textpanel_offset),"title_and_desc"==z.tile_textpanel_source&&(z.tile_textpanel_enable_description=!0,z.tile_textpanel_desc_style_as_title=!0)}function n(){var e=U.isMobileMode();switch(V.isTextPanelHidden=!1,1==e&&0==z.tile_textpanel_always_on&&(V.isTextPanelHidden=!0),V.isVideoplayIconAlwaysOn=z.tile_videoplay_icon_always_on,z.tile_videoplay_icon_always_on){case"always":V.isVideoplayIconAlwaysOn=!0;break;case"never":V.isVideoplayIconAlwaysOn=!1;break;case"mobile_only":V.isVideoplayIconAlwaysOn=1==e;break;case"desktop_only":V.isVideoplayIconAlwaysOn=0==e}}function i(e,t){if(e.addClass("ug-tile"),V.funcCustomTileHtml)return V.funcCustomTileHtml(e,t),!1;var n="";1==V.hasImageContainer&&(n+="<div class='ug-image-container ug-trans-enabled'>");var i="ug-thumb-image";0!=z.tile_enable_image_effect&&1!=z.tile_image_effect_reverse||(i+=" ug-trans-enabled");var o=H.stripTags(t.title);o=H.htmlentitles(o),n+='<img src="'+H.escapeDoubleSlash(t.urlThumb)+"\" alt='"+o+"' class='"+i+"' data-backup-width='"+t.thumbWidth+"' data-backup-height='"+t.thumbHeight+"'>",1==V.hasImageContainer&&(n+="</div>"),e.append(n),z.tile_size_by==F.sizeby.GLOBAL_RATIO&&e.fadeTo(0,0);var r={};if(1==z.tile_enable_background&&(r["background-color"]=z.tile_background_color),1==z.tile_enable_border&&(r["border-width"]=z.tile_border_width+"px",r["border-style"]="solid",r["border-color"]=z.tile_border_color,z.tile_border_radius&&(r["border-radius"]=z.tile_border_radius+"px")),1==z.tile_enable_outline&&(r.outline="1px solid "+z.tile_outline_color),1==z.tile_enable_shadow){var a=z.tile_shadow_h+"px ";a+=z.tile_shadow_v+"px ",a+=z.tile_shadow_blur+"px ",a+=z.tile_shadow_spread+"px ",a+=z.tile_shadow_color,r["box-shadow"]=a}e.css(r);var s="";if(z.tile_enable_icons){if(0==z.tile_as_link&&1==z.tile_enable_action){var l="ug-button-play ug-icon-zoom";"image"!=t.type&&(l="ug-button-play ug-icon-play"),s+="<div class='ug-tile-icon "+l+"' style='display:none'></div>"}if(t.link&&1==z.tile_show_link_icon||1==z.tile_as_link)if(0==z.tile_as_link){var u="";1==z.tile_link_newpage&&(u=" target='_blank'"),s+="<a href='"+t.link+"'"+u+" class='ug-tile-icon ug-icon-link'></a>"}else s+="<div class='ug-tile-icon ug-icon-link' style='display:none'></div>";var d=V.isSaparateIcons;if(0==d&&"image"!=t.type&&1==V.isVideoplayIconAlwaysOn&&(d=!0),d)var p=e;else var p=e.children(".ug-thumb-overlay");p.append(s);var f=p.children("."+l);0==f.length?f=null:f.hide();var h=p.children(".ug-icon-link");0==h.length?h=null:h.hide(),h||1!=z.tile_enable_action||e.addClass("ug-tile-clickable")}else 1==z.tile_enable_action&&e.addClass("ug-tile-clickable");if(1==z.tile_enable_image_effect){var m="";0==z.tile_image_effect_reverse&&(m=" ug-trans-enabled");var g="<div class='ug-tile-image-overlay"+m+"' >",v=" ug-"+z.tile_image_effect_type+"-effect";g+='<img src="'+H.escapeDoubleSlash(t.urlThumb)+"\" alt='"+t.title+"' class='"+v+m+"'>",g+="</div>",e.append(g),1==z.tile_image_effect_reverse&&e.children(".ug-tile-image-overlay").fadeTo(0,0)}if(1==z.tile_enable_textpanel){var b=new UGTextPanel;b.init(U,z,"tile");var y="";1!=z.tile_textpanel_always_on&&1!=V.isTextpanelOutside||(y="ug-trans-enabled"),b.appendHTML(e,y);var _=t.title,w="";switch(z.tile_textpanel_source){case"desc":case"description":_=t.description;break;case"desc_title":""!=t.description&&(_=t.description);break;case"title_and_desc":_=t.title,w=t.description}if(b.setTextPlain(_,w),0==z.tile_textpanel_always_on&&b.getElement().fadeTo(0,0),e.data("objTextPanel",b),1==z.tile_textpanel_always_on){c(e).css("z-index",2)}if(1==V.isTextpanelOutside){e.append("<div class='ug-tile-cloneswrapper'></div>");var C=e.children(".ug-tile-cloneswrapper"),k=new UGTextPanel;k.init(U,z,"tile"),k.appendHTML(C),k.setTextPlain(_,w),e.data("objTextPanelClone",k)}}null!==t.addHtml&&e.append(t.addHtml)}function o(e){return e.children(".ug-tile-image-overlay")}function r(e){return e.children(".ug-thumb-overlay")}function a(e){return 0==V.hasImageContainer?null:e.children(".ug-image-container")}function s(e){return e.find(".ug-tile-image-overlay img")}function l(e){return e.data("objTextPanel")}function u(e){return e.data("objTextPanelClone")}function c(e){return e.children(".ug-textpanel")}function d(e){var t=e.find(".ug-tile-cloneswrapper .ug-textpanel");if(0==t.length)throw new Error("text panel cloned element not found");return t}function p(e){if(1==V.isTextpanelOutside)var t=d(e);else var t=c(e);return t?H.getElementSize(t).height:0}function f(e){var t=e.find(".ug-icon-link");return 0==t.length?null:t}function h(e,t){var n=V.ratioByHeight;switch(z.tile_size_by){default:n=V.ratioByHeight;break;case F.sizeby.IMAGE_RATIO:if(!e)throw new Error("tile should be given for tile ratio");var i=F.getItemByTile(e);if(void 0!==i.thumbRatioByHeight){if(0==i.thumbRatioByHeight)throw trace(i),new Error("the item ratio not inited yet");n=i.thumbRatioByHeight}break;case F.sizeby.CUSTOM:return null}return n}function m(e){var t=e.find(".ug-button-play");return 0==t.length?null:t}function g(e){return!!e.hasClass("ug-thumb-over")}function v(e){return e.hasClass("ug-tile-clickable")}function b(e){return 1==z.tile_enable_icons&&1==V.isVideoplayIconAlwaysOn&&"image"!=e.type}function y(e,t,n,i){var r=o(e),l=F.getTileImage(e),u=s(e);t-=V.tileInnerReduce,n-=V.tileInnerReduce;var c=null;if(1==V.isTextpanelOutside){var d=p(e);if(n-=d,"top"==z.tile_textpanel_position&&(c=d),1==V.hasImageContainer){var f=a(e);H.setElementSize(f,t,n),null!==c&&H.placeElement(f,0,c)}}if(0==z.tile_enable_image_effect)H.scaleImageCoverParent(l,t,n),0==V.hasImageContainer&&null!==c&&H.placeElement(l,0,c);else{var h="nothing";!0===i&&0==V.isTextpanelOutside&&(h=1==z.tile_image_effect_reverse?"effect":"image"),"effect"!=h&&(H.setElementSize(r,t,n),null!==c&&H.placeElement(r,0,c),H.scaleImageCoverParent(u,t,n)),"image"!=h&&(1==V.hasImageContainer?H.scaleImageCoverParent(l,t,n):"effect"==h?(H.scaleImageCoverParent(l,t,n),null!==c&&H.placeElement(l,0,c)):H.cloneElementSizeAndPos(u,l,!1,null,c))}}function _(e,t,n,i){var o=null;if(n&&(o=n-V.tileInnerReduce),i&&(i-=V.tileInnerReduce),"clone"==t){u(e).refresh(!0,!0,o);return F.getItemByTile(e).textPanelCloneSizeSet=!0,!1}var r=l(e);if(!r)return!1;var a=null;if(1==V.isTextpanelOutside&&(a=p(e)),r.refresh(!1,!0,o,a),1==z.tile_textpanel_always_on||"fade"==z.tile_textpanel_appear_type)if(1==V.isTextpanelOutside&&i&&"bottom"==z.tile_textpanel_position){var s=i-a;r.positionPanel(s)}else r.positionPanel()}function w(e){var t=(F.getItemByTile(e),m(e)),n=f(e),i=H.getElementSize(e);y(e,i.width,i.height),1==z.tile_enable_textpanel&&_(e,"regular",i.width,i.height);var o=i.width-V.tileInnerReduce,a=i.height-V.tileInnerReduce,s=0;if(1==V.isTextpanelOutside){var l=p(e);a-=l,"top"==z.tile_textpanel_position&&(s=l)}var u=r(e);if(H.setElementSizeAndPosition(u,0,s,o,a),t||n){var d=0;if(1==z.tile_enable_textpanel&&0==V.isTextPanelHidden&&0==V.isTextpanelOutside){var h=c(e),g=H.getElementSize(h);g.height>0&&(d=Math.floor(g.height/2*-1))}}if(t&&n){var v=H.getElementSize(t),b=H.getElementSize(n),w=z.tile_space_between_icons,C=v.width+w+b.width,k=Math.floor((i.width-C)/2);k<w&&(w=Math.floor((i.width-v.width-b.width)/3),C=v.width+w+b.width,k=Math.floor((i.width-C)/2)),H.placeElement(t,k,"middle",0,d),H.placeElement(n,k+v.width+w,"middle",0,d)}else t&&H.placeElement(t,"center","middle",0,d),n&&H.placeElement(n,"center","middle",0,d);t&&t.show(),n&&n.show()}function C(e,t){var n=(F.getItemByTile(e),o(e)),i=z.thumb_transition_duration;if(0==z.tile_image_effect_reverse){var r=F.getTileImage(e);t?(r.fadeTo(0,1),n.stop(!0).fadeTo(i,0)):n.stop(!0).fadeTo(i,1)}else t?n.stop(!0).fadeTo(i,1):n.stop(!0).fadeTo(i,0)}function k(e,t){var n=z.thumb_transition_duration,i=c(e);if(!i)return!0;if("slide"==z.tile_textpanel_appear_type){var o=H.getElementSize(i);if(0==o.width)return!1;var r=-o.height,a={},s={},l="bottom";"inside_top"==z.tile_textpanel_position&&(l="top"),a[l]=r+"px",s[l]="0px",1==t?(i.fadeTo(0,1),0==i.is(":animated")&&i.css(a),s.opacity=1,i.stop(!0).animate(s,n)):i.stop(!0).animate(a,n)}else 1==t?i.stop(!0).fadeTo(n,1):i.stop(!0).fadeTo(n,0)}function x(e,t,n){var i=z.thumb_transition_duration;n&&!0===n&&(i=0);var o=m(e),r=f(e),a=t?1:0;o&&o.stop(!0).fadeTo(i,a),r&&r.stop(!0).fadeTo(i,a)}function E(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&C(t,!0),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&0==V.isTextPanelHidden&&k(t,!0),V.isSaparateIcons&&1==z.tile_enable_icons){var n=1==z.thumb_overlay_reverse;0==b(F.getItemByTile(t))&&x(t,n,!1)}}function T(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&C(t,!1),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&k(t,!1),1==V.isSaparateIcons&&1==z.tile_enable_icons){var n=1!=z.thumb_overlay_reverse;0==b(F.getItemByTile(t))?x(t,n,!1):x(t,!0,!0)}}function S(e){$.getThumbs().not(e).each(function(e,t){$.setThumbNormalStyle(jQuery(t))})}function P(e,t,n){if(t=jQuery(t),1==z.tile_visible_before_image&&!0!==t.data("image_placed")&&!0!==n)return!0;w(t),$.setThumbNormalStyle(t)}function O(e,t,n){w(t),n.fadeTo(0,1),t.data("image_placed",!0)}function I(e){if(1==v(e))return B.trigger(F.events.TILE_CLICK,e),!0;0==g(e)&&(S(e),$.setThumbOverStyle(e))}function M(e){var t=jQuery(this),n=t.prop("tagName").toLowerCase(),i=!0;if(V.funcParentApproveClick&&0==V.funcParentApproveClick()&&(i=!1),"a"==n)0==i&&e.preventDefault();else if(0==g(t))1==i&&I(t);else{if(0==v(t))return!0;1==i&&B.trigger(F.events.TILE_CLICK,t)}}function A(e){e.stopPropagation();var t=jQuery(this).parents(".ug-tile"),n=!0;return V.funcParentApproveClick&&0==V.funcParentApproveClick()&&(n=!1),0==g(t)?(I(t),!0):1==n?(B.trigger(F.events.TILE_CLICK,t),!1):void 0}function N(e){var t=jQuery(this).parents(".ug-tile");V.funcParentApproveClick&&0==V.funcParentApproveClick()&&e.preventDefault(),0==g(t)&&0==z.tile_as_link&&(e.preventDefault(),I(t))}var j,L,D,R,F=this,B=jQuery(this),U=new UniteGalleryMain,H=new UGFunctions,$=new UGThumbsGeneral;this.resizemode={FULL:"full",WRAPPER_ONLY:"wrapper_only",VISIBLE_ELEMENTS:"visible_elements"},this.sizeby={GLOBAL_RATIO:"global_ratio",TILE_RATIO:"tile_ratio",IMAGE_RATIO:"image_ratio",CUSTOM:"custom"},this.events={TILE_CLICK:"tile_click"};var z={tile_width:250,tile_height:200,tile_size_by:F.sizeby.IMAGE_RATIO,tile_visible_before_image:!1,tile_enable_background:!0,tile_background_color:"#F0F0F0",tile_enable_border:!1,tile_border_width:3,tile_border_color:"#F0F0F0",tile_border_radius:0,tile_enable_outline:!1,tile_outline_color:"#8B8B8B",tile_enable_shadow:!1,tile_shadow_h:1,tile_shadow_v:1,tile_shadow_blur:3,tile_shadow_spread:2,tile_shadow_color:"#8B8B8B",tile_enable_action:!0,tile_as_link:!1,tile_link_newpage:!0,tile_enable_overlay:!0,tile_overlay_opacity:.4,tile_overlay_color:"#000000",tile_enable_icons:!0,tile_show_link_icon:!1,tile_videoplay_icon_always_on:"never",tile_space_between_icons:26,tile_enable_image_effect:!1,tile_image_effect_type:"bw",tile_image_effect_reverse:!1,tile_enable_textpanel:!1,tile_textpanel_source:"title",tile_textpanel_always_on:!1,tile_textpanel_appear_type:"slide",tile_textpanel_position:"inside_bottom",tile_textpanel_offset:0},W={thumb_color_overlay_effect:!0,thumb_overlay_reverse:!0,thumb_image_overlay_effect:!1,tile_textpanel_enable_description:!1,tile_textpanel_bg_opacity:.6,tile_textpanel_padding_top:8,tile_textpanel_padding_bottom:8},V={ratioByHeight:0,ratioByWidth:0,eventSizeChange:"thumb_size_change",funcCustomTileHtml:null,funcCustomPositionElements:null,funcParentApproveClick:null,isSaparateIcons:!1,tileInnerReduce:0,isTextpanelOutside:!1,hasImageContainer:!1,isVideoplayIconAlwaysOn:!1,isTextPanelHidden:!1};this.loadTileImage=function(e){var t=F.getTileImage(e);H.checkImagesLoaded(t,null,function(t,n){O(null,e,jQuery(t))})},this.setHtml=function(e){L=e,n(),$.setHtmlThumbs(e)},this.initEvents=function(){$.initEvents(),jQuery($).on($.events.SETOVERSTYLE,E),jQuery($).on($.events.SETNORMALSTYLE,T),jQuery($).on($.events.PLACEIMAGE,O),D.on(V.eventSizeChange,P),L.delegate(".ug-tile .ug-button-play","click",A),L.delegate(".ug-tile","click",M),L.delegate(".ug-tile .ug-icon-link","click",N)},this.destroy=function(){if(jQuery($).off($.events.SETOVERSTYLE),jQuery($).off($.events.SETNORMALSTYLE),jQuery($).off($.events.PLACEIMAGE),D.off(V.eventSizeChange),1==z.tile_enable_textpanel){var e=$.getThumbs();jQuery.each(e,function(e,t){var n=l(jQuery(t));n&&n.destroy()})}$.destroy()},this.init=function(t,n,i){e(t,n)},this.setFixedMode=function(){z.tile_size_by=F.sizeby.GLOBAL_RATIO,z.tile_visible_before_image=!0},this.setApproveClickFunction=function(e){V.funcParentApproveClick=e},this.resizeTile=function(e,t,n,i){if(1==V.isTextpanelOutside&&_(e,"clone",t),t){if(!n)var n=F.getTileHeightByWidth(t,e,"resizeTile")}else var t=z.tile_width,n=z.tile_height;switch(H.setElementSize(e,t,n),i){default:case F.resizemode.FULL:F.triggerSizeChangeEvent(e,!0);break;case F.resizemode.WRAPPER_ONLY:return!0;case F.resizemode.VISIBLE_ELEMENTS:if(V.funcCustomTileHtml)return F.triggerSizeChangeEvent(e,!0),!0;y(e,t,n,!0),1==z.tile_enable_textpanel&&1==z.tile_textpanel_always_on&&t&&_(e,"regular",t,n)}},this.resizeAllTiles=function(e,t){n();var i=null;z.tile_size_by==F.sizeby.GLOBAL_RATIO&&(i=F.getTileHeightByWidth(e,null,"resizeAllTiles")),$.getThumbs().each(function(n,o){F.resizeTile(jQuery(o),e,i,t)})},this.triggerSizeChangeEvent=function(e,t){if(!e)return!1;if(!t)var t=!1;D.trigger(V.eventSizeChange,[e,t])},this.triggerSizeChangeEventAllTiles=function(e){$.getThumbs().each(function(){var t=jQuery(this);F.triggerSizeChangeEvent(t,e)})},this.disableEvents=function(){$.getThumbs().css("pointer-events","none")},this.enableEvents=function(){$.getThumbs().css("pointer-events","auto")},this.setOptions=function(e){z=jQuery.extend(z,e),$.setOptions(e)},this.setTileSizeOptions=function(e){if(z.tile_size_by!==F.sizeby.GLOBAL_RATIO)throw new Error("setNewTileOptions works with global ration only");z.tile_width=e,z.tile_height=Math.floor(e*V.ratioByHeight)},this.setCustomFunctions=function(e,t){V.funcCustomTileHtml=e,V.funcCustomPositionElements=t},this.run=function(){var e=$.getThumbs();z.tile_size_by==F.sizeby.GLOBAL_RATIO&&F.resizeAllTiles(z.tile_width,F.resizemode.WRAPPER_ONLY),1==z.tile_enable_image_effect&&0==z.tile_image_effect_reverse&&e.children(".ug-thumb-image").fadeTo(0,0),$.setHtmlProperties(),1==z.tile_visible_before_image&&(e.children(".ug-thumb-image").fadeTo(0,0),$.loadThumbsImages())},
this._____________EXTERNAL_GETTERS____________=function(){},this.getObjThumbs=function(){return $},this.getOptions=function(){return z},this.getTileImage=function(e){return e.find("img.ug-thumb-image")},this.getItemByTile=function(e){return $.getItemByThumb(e)},this.getTileHeightByWidth=function(e,t,n){var i=h(t,n);if(null===i)return null;var o=Math.floor((e-V.tileInnerReduce)*i)+V.tileInnerReduce;return t&&1==V.isTextpanelOutside&&z.tile_size_by==F.sizeby.IMAGE_RATIO&&(o+=p(t)),o},this.getTileImageSize=function(e){var t=F.getItemByTile(e);if(!t.thumbWidth||!t.thumbHeight)throw new Error("Can't get image size - image not inited.");return{width:t.thumbWidth,height:t.thumbHeight}},this.getGlobalTileSize=function(){if(z.tile_size_by!=F.sizeby.GLOBAL_RATIO)throw new Error("The size has to be global ratio");return{width:z.tile_width,height:z.tile_height}}}function ugCheckForMinJQueryVersion(){if(0==g_ugFunctions.checkMinJqueryVersion("1.8.0"))throw new Error("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library.")}function ugCheckForErrors(e,t){try{"jquery"==t?(!function(){if("undefined"==typeof jQuery)throw new Error("jQuery library not included")}(),ugCheckForMinJQueryVersion()):(ugCheckForMinJQueryVersion(),function(){if("function"==typeof jQuery.fn.unitegallery)return!0;var e="You have some jquery.js library include that comes after the gallery files js include.";throw e+="<br> This include eliminates the gallery libraries, and make it not work.","cms"==t?(e+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.",e+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it."):e+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.",new Error(e)}())}catch(o){var n=o.message;if(n="Unite Gallery Error: "+n,n="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+n+"</div>","jquery"==t){var i=document.getElementById(e);i.innerHTML=n,i.style.display="block"}else jQuery(e).show().html(n);return!1}return!0}function UniteGalleryMain(){function __________INIT_GALLERY_______(){}function getThemeFunction(e){var t=e;return-1==t.indexOf("UGTheme_")&&(t="UGTheme_"+t),t}function initTheme(objCustomOptions){if(objCustomOptions.hasOwnProperty("gallery_theme"))g_options.gallery_theme=objCustomOptions.gallery_theme;else{var defaultTheme=g_options.gallery_theme;0==g_ugFunctions.isThemeRegistered(defaultTheme)&&(g_options.gallery_theme=g_ugFunctions.getFirstRegisteredTheme())}var themeFunction=getThemeFunction(g_options.gallery_theme);try{g_options.gallery_theme=eval(themeFunction)}catch(e){}g_options.gallery_theme=eval(themeFunction),g_objTheme=new g_options.gallery_theme,g_objTheme.init(t,objCustomOptions)}function resetOptions(){g_options=jQuery.extend({},g_temp.originalOptions),g_selectedItemIndex=-1,g_selectedItem=null,g_objSlider=void 0,g_objThumbs=void 0,g_objSlider=void 0}function checkForStartupErrors(){try{ugCheckForMinJQueryVersion()}catch(e){throwErrorShowMessage(e.message)}"object"==typeof g_objWrapper.outerWidth()&&throwErrorShowMessage("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version."),setTimeout(function(){ugCheckForErrors(g_galleryID,"cms")},5e3)}function runGallery(e,n,i,o){var r="object"==typeof n;if(r&&(g_temp.objCustomOptions=n),1==g_temp.isRunFirstTime){if(g_galleryID=e,g_objWrapper=jQuery(g_galleryID),0==g_objWrapper.length)return trace("div with id: "+g_galleryID+" not found"),!1;g_objParent=g_objWrapper.parent(),checkForStartupErrors(),g_temp.originalOptions=jQuery.extend({},g_options),r&&(g_options=jQuery.extend(g_options,n)),1==g_options.gallery_enable_cache&&g_options.gallery_initial_catid&&cacheItems(g_options.gallery_initial_catid),t.setSizeClass();var a=g_objWrapper.children();fillItemsArray(a),loadAPIs(),g_objWrapper.find("img").fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}else if(t.destroy(),resetOptions(),g_options=jQuery.extend(g_options,g_temp.objCustomOptions),i){if(o&&1==g_options.gallery_enable_cache&&cacheItems(o,i),"noitems"==i)return showErrorMessage("No items in this category",""),!1;g_objWrapper.html(i);var a=g_objWrapper.children();fillItemsArray(a),loadAPIs(),g_objWrapper.children().fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}1==g_temp.isRunFirstTime&&1==g_options.gallery_enable_tabs&&(g_objTabs=new UGTabs,g_objTabs.init(t,g_options)),r&&modifyInitParams(g_temp.objCustomOptions),validateParams(),1==g_options.gallery_shuffle&&t.shuffleItems(),initTheme(g_temp.objCustomOptions),setGalleryHtml(),setHtmlObjectsProperties(),0==g_objWrapper.width()?g_functions.waitForWidth(g_objWrapper,runGalleryActually):runGalleryActually()}function runGalleryActually(){t.setSizeClass(),0==g_temp.isFreestyleMode&&1==g_options.gallery_preserve_ratio&&setHeightByOriginalRatio(),g_objTheme.run(),g_objTabs&&g_temp.isRunFirstTime&&g_objTabs.run(),preloadBigImages(),initEvents(),g_numItems>0&&t.selectItem(0),1==g_options.gallery_autoplay&&t.startPlayMode(),g_temp.isRunFirstTime=!1}function showErrorMessage(e,t){if(void 0===t)var t="<b>Unite Gallery Error: </b>";e=t+e;var n="<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+e+"</div></div>";g_objWrapper.children().remove(),g_objWrapper.html(n),g_objWrapper.show()}function throwErrorShowMessage(e){throw showErrorMessage(e),new Error(e)}function modifyInitParams(){g_options.gallery_images_preload_type||(g_options.gallery_images_preload_type="minimal"),(void 0==g_options.gallery_min_height||g_options.gallery_height<g_options.gallery_min_height)&&(g_options.gallery_min_height=0),(void 0==g_options.gallery_min_width||g_options.gallery_width<g_options.gallery_min_width)&&(g_options.gallery_min_width=0)}function validateParams(){if(!g_options.gallery_theme)throw new Error("The gallery can't run without theme");if(jQuery.isNumeric(g_options.gallery_height)&&g_options.gallery_height<g_options.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(g_options.gallery_width<g_options.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>")}function setGalleryHtml(){g_objWrapper.addClass("ug-gallery-wrapper"),g_objWrapper.append("<div class='ug-overlay-disabled' style='display:none'></div>"),t.setSizeClass()}function clearInitData(){g_objWrapper.children().remove()}function storeLastSize(){var e=t.getSize();g_temp.lastWidth=e.width,g_temp.lastHeight=e.height}function setHeightByOriginalRatio(){var e=t.getSize();if(e.width/e.height!=e.orig_ratio){var n=e.width/e.orig_ratio;n=Math.round(n),n<g_options.gallery_min_height&&(n=g_options.gallery_min_height),g_objWrapper.height(n)}}function setHtmlObjectsProperties(){var e=g_functions.getCssSizeParam(g_options.gallery_width),t={"max-width":e,"min-width":g_functions.getCssSizeParam(g_options.gallery_min_width)};if(0==g_temp.isFreestyleMode){var n=g_functions.getCssSizeParam(g_options.gallery_height);t.height=n}else t.overflow="visible";g_options.gallery_background_color&&(t["background-color"]=g_options.gallery_background_color),g_objWrapper.css(t)}function fillItemsArray(e){g_arrItems=[];for(var n=t.isMobileMode(),i=0,o=0;o<e.length;o++){var r=jQuery(e[o]),a=r.prop("tagName").toLowerCase(),s="";if("a"==a){s=r.attr("href"),r=r.children();var a=r.prop("tagName").toLowerCase()}var l=r.data("type");void 0==l&&(l="image");var u={};if(u.type=l,"img"==a){var c=r.data("lazyload-src");c&&""!=c&&(r.attr("src",c),jQuery.removeData(r,"lazyload-src"));var d=r.data("image"),p=r.data("thumb");void 0===d&&(d=null),void 0===p&&(p=null);var f=r.attr("src");d||(d=f),p||(p=f),p||(p=d),d||(d=p),u.urlThumb=p,u.urlImage=d,u.title=r.attr("alt"),u.objThumbImage=r,u.objThumbImage.attr("src",u.urlThumb)}else{if("image"==l)throw trace("Problematic gallery item found:"),trace(r),trace("Please look for some third party js script that could add this item to the gallery"),new Error("The item should not be image type");u.urlThumb=r.data("thumb"),u.title=r.data("title"),u.objThumbImage=null,u.urlImage=r.data("image")}if(1==n){var h=r.data("thumb-mobile");void 0!==h&&""!=h&&(u.urlThumb=h,"img"==a&&r.attr("src",u.urlThumb));var m=r.data("image-mobile");void 0!==m&&""!=m&&(u.urlImage=m)}u.link=s,u.description=r.attr("title"),u.description||(u.description=r.data("description")),u.description||(u.description=""),u.isLoaded=!1,u.isThumbImageLoaded=!1,u.objPreloadImage=null,u.isBigImageLoadStarted=!1,u.isBigImageLoaded=!1,u.isBigImageLoadError=!1,u.imageWidth=0,u.imageHeight=0,u.thumbWidth=0,u.thumbHeight=0,u.thumbRatioByWidth=0,u.thumbRatioByHeight=0;var g=r.data("width"),v=r.data("height");g&&"number"==typeof g&&v&&"number"==typeof v&&(u.thumbWidth=g,u.thumbHeight=v,u.thumbRatioByWidth=g/v,u.thumbRatioByHeight=v/g),u.addHtml=null;var b=void 0==u.urlImage||""==u.urlImage,y=void 0==u.urlThumb||""==u.urlThumb;switch(u.type){case"youtube":if(u.videoid=r.data("videoid"),b||y){var _=g_ugYoutubeAPI.getVideoImages(u.videoid);b&&(u.urlImage=_.preview),y&&(u.urlThumb=_.thumb,"img"==a&&r.attr("src",u.urlThumb))}g_temp.isYoutubePresent=!0;break;case"vimeo":u.videoid=r.data("videoid"),g_temp.isVimeoPresent=!0;break;case"html5video":u.videoogv=r.data("videoogv"),u.videowebm=r.data("videowebm"),u.videomp4=r.data("videomp4"),g_temp.isHtml5VideoPresent=!0;break;case"soundcloud":u.trackid=r.data("trackid"),g_temp.isSoundCloudPresent=!0;break;case"wistia":u.videoid=r.data("videoid"),g_temp.isWistiaPresent=!0;break;case"custom":var w=r.children("img");w.length&&(w=jQuery(w[0]),u.urlThumb=w.attr("src"),u.title=w.attr("alt"),u.objThumbImage=w);var C=r.children().not("img:first-child");C.length&&(u.addHtml=C.clone())}u.objThumbImage&&(u.objThumbImage.removeAttr("data-description",""),u.objThumbImage.removeAttr("data-image",""),u.objThumbImage.removeAttr("data-thumb",""),u.objThumbImage.removeAttr("title","")),u.index=i,g_arrItems.push(u),i++}g_numItems=g_arrItems.length}function loadAPIs(){g_temp.isYoutubePresent&&g_ugYoutubeAPI.loadAPI(),g_temp.isVimeoPresent&&g_ugVimeoAPI.loadAPI(),g_temp.isHtml5VideoPresent&&g_ugHtml5MediaAPI.loadAPI(),g_temp.isSoundCloudPresent&&g_ugSoundCloudAPI.loadAPI(),g_temp.isWistiaPresent&&g_ugWistiaAPI.loadAPI()}function preloadBigImages(){if("visible"!=g_options.gallery_images_preload_type||g_objThumbs||(g_options.gallery_images_preload_type="minimal"),1==g_temp.isAllItemsPreloaded)return!0;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(g_arrItems).each(function(){preloadItemImage(this)});break;case"visible":jQuery(g_arrItems).each(function(){var e=this;1==g_objThumbs.isItemThumbVisible(e)&&preloadItemImage(e)})}}function checkPreloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!1;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":preloadItemImage(e);break;case"visible":1==g_objThumbs.isItemThumbVisible(e)&&preloadItemImage(e)}}function preloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!0;var n=e.urlImage;if(""==n||void 0==n)return e.isBigImageLoadError=!0,!1;e.isBigImageLoadStarted=!0,e.objPreloadImage=jQuery("<img/>").attr("src",n),e.objPreloadImage.data("itemIndex",e.index),e.objPreloadImage.on("load",t.onItemBigImageLoaded),e.objPreloadImage.on("error",function(){var e=jQuery(this),n=e.data("itemIndex"),i=g_arrItems[n];i.isBigImageLoadError=!0,i.isBigImageLoaded=!1;var o=jQuery(this).attr("src");console.log("Can't load image: "+o),g_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED,[n,i.urlImage]),i.objThumbImage.attr("src",i.urlThumb)}),checkAllItemsStartedPreloading()}function preloadNearBigImages(e){if(1==g_temp.isAllItemsPreloaded)return!1;if(!e)var e=g_selectedItem;if(!e)return!0;var t=e.index,n=t-1,i=t+1;n>0&&preloadItemImage(g_arrItems[n]),i<g_numItems&&preloadItemImage(g_arrItems[i])}function checkAllItemsStartedPreloading(){if(1==g_temp.isAllItemsPreloaded)return!1;for(var e in g_arrItems)if(0==g_arrItems[e].isBigImageLoadStarted)return!1;g_temp.isAllItemsPreloaded=!0}function __________END_INIT_GALLERY_______(){}function __________EVENTS_____________(){}function onSliderMouseEnter(e){1==g_options.gallery_pause_on_mouseover&&0==t.isFullScreen()&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()&&t.pausePlaying()}function onSliderMouseLeave(e){if(1==g_options.gallery_pause_on_mouseover&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()){0==g_objSlider.isCurrentSlideLoadingImage()&&t.continuePlaying()}}function onKeyPress(e){var n=jQuery(e.target);if(n.is("textarea")||n.is("select")||n.is("input"))return!0;var i=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0,o=!0;switch(i){case 39:t.nextItem();break;case 37:t.prevItem();break;default:o=!1}1==o&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),g_objGallery.trigger(t.events.GALLERY_KEYPRESS,[i,e])}function onGalleryResized(){var e=t.getSize();if(0==e.width)return!0;t.setSizeClass();var e=t.getSize();if(e.width!=g_temp.lastWidth||e.height!=g_temp.lastHeight){var n=!1;if(g_temp.funcCustomHeight){var i=g_temp.funcCustomHeight(e);i&&(g_objWrapper.height(i),n=!0)}0==n&&1==g_options.gallery_preserve_ratio&&0==g_temp.isFreestyleMode&&setHeightByOriginalRatio(),storeLastSize(),g_objGallery.trigger(t.events.SIZE_CHANGE)}}function onThumbsChange(e){"visible"==g_options.gallery_images_preload_type&&0==g_temp.isAllItemsPreloaded&&preloadBigImages()}function onFullScreenChange(){var e=g_functions.isFullScreen(),n=e?t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN,i=g_functions.getGlobalData("fullscreenID");if(g_galleryID!==i)return!0;e?g_objWrapper.addClass("ug-fullscreen"):g_objWrapper.removeClass("ug-fullscreen"),g_objGallery.trigger(n),onGalleryResized()}function onItemImageUpdated(e,n){checkPreloadItemImage(t.getItem(n))}function onCurrentSlideImageLoadEnd(){1==t.isPlayMode()&&t.continuePlaying()}function initEvents(){if(g_objWrapper.on("dragstart",function(e){e.preventDefault()}),g_objGallery.on(t.events.ITEM_IMAGE_UPDATED,onItemImageUpdated),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE,onThumbsChange);break;case"grid":jQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE,onThumbsChange)}if("advance"==g_options.gallery_mousewheel_role&&0==g_temp.isFreestyleMode&&g_objWrapper.on("mousewheel",t.onGalleryMouseWheel),storeLastSize(),jQuery(window).resize(function(){g_objWrapper.css("width","auto"),g_functions.whenContiniousEventOver("gallery_resize",onGalleryResized,g_temp.resizeDelay)}),setTimeout(function(){setInterval(onGalleryResized,2e3)},1e4),g_functions.addFullScreenChangeEvent(onFullScreenChange),g_objSlider){if(jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED,function(){var e=g_objSlider.getCurrentItemIndex();-1!=e&&t.selectItem(e)}),1==g_options.gallery_pause_on_mouseover){g_objSlider.getElement().hover(onSliderMouseEnter,onSliderMouseLeave),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){onSliderMouseLeave()})}retriggerEvent(g_objSlider,g_objSlider.events.ACTION_START,t.events.SLIDER_ACTION_START),retriggerEvent(g_objSlider,g_objSlider.events.ACTION_END,t.events.SLIDER_ACTION_END),jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END,onCurrentSlideImageLoadEnd)}1==g_options.gallery_control_keyboard&&jQuery(document).keydown(onKeyPress)}function __________GENERAL_______(){}function cacheItems(e,t){if(t){var n=t;"noitems"!=n&&(n=jQuery(t).clone())}else var n=g_objWrapper.children().clone();g_objCache[e]=n}function removeAllSizeClasses(e){e||(e=g_objWrapper),e.removeClass("ug-under-480"),e.removeClass("ug-under-780"),e.removeClass("ug-under-960")}function retriggerEvent(e,t,n){jQuery(e).on(t,function(e){g_objGallery.trigger(n,[this])})}function advanceNextStep(){var e=jQuery.now(),n=e-g_temp.playTimeLastStep;if(g_temp.playTimePassed+=n,g_temp.playTimeLastStep=e,g_temp.objProgress){var i=g_temp.playTimePassed/g_options.gallery_play_interval;g_temp.objProgress.setProgress(i)}g_temp.playTimePassed>=g_options.gallery_play_interval&&(t.nextItem(),g_temp.playTimePassed=0)}function unselectSeletedItem(){if(null==g_selectedItem)return!0;g_objThumbs&&g_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper),g_selectedItem=null,g_selectedItemIndex=-1}function toFakeFullScreen(){jQuery("body").addClass("ug-body-fullscreen"),g_objWrapper.addClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!0,g_objGallery.trigger(t.events.ENTER_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}function exitFakeFullscreen(){jQuery("body").removeClass("ug-body-fullscreen"),g_objWrapper.removeClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!1,g_objGallery.trigger(t.events.EXIT_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}var t=this,g_galleryID,g_objGallery=jQuery(t),g_objWrapper,g_objParent,g_objThumbs,g_objSlider,g_functions=new UGFunctions,g_objTabs,g_arrItems=[],g_numItems,g_selectedItem=null,g_selectedItemIndex=-1,g_objTheme,g_objCache={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items",OPEN_LIGHTBOX:"open_lightbox",CLOSE_LIGHTBOX:"close_lightbox",LOAD:"load"};var g_options={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:!1,gallery_play_interval:3e3,gallery_pause_on_mouseover:!0,gallery_mousewheel_role:"zoom",gallery_control_keyboard:!0,gallery_carousel:!0,gallery_preserve_ratio:!0,gallery_background_color:"",gallery_debug_errors:!1,gallery_shuffle:!1,gallery_urlajax:null,gallery_enable_tabs:!1,gallery_enable_cache:!0,gallery_initial_catid:""},g_temp={objCustomOptions:{},isAllItemsPreloaded:!1,isFreestyleMode:!1,lastWidth:0,lastHeigh:0,handleResize:null,isInited:!1,isPlayMode:!1,isPlayModePaused:!1,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:!1,thumbsType:null,isYoutubePresent:!1,isVimeoPresent:!1,isHtml5VideoPresent:!1,isSoundCloudPresent:!1,isWistiaPresent:!1,resizeDelay:100,isRunFirstTime:!0,originalOptions:{},funcCustomHeight:null};this.onItemBigImageLoaded=function(e,t){if(!t)var t=jQuery(this);var n=t.data("itemIndex"),i=g_arrItems[n];i.isBigImageLoaded=!0;var o=g_functions.getImageOriginalSize(t);i.imageWidth=o.width,i.imageHeight=o.height},this.checkFillImageSize=function(e,t){if(!t){var n=e.data("itemIndex");if(void 0===n)throw new Error("Wrong image given to gallery.checkFillImageSize");var t=g_arrItems[n]}var i=g_functions.getImageOriginalSize(e);t.imageWidth=i.width,t.imageHeight=i.height},this.setFreestyleMode=function(){g_temp.isFreestyleMode=!0},this.attachThumbsPanel=function(e,t){g_temp.thumbsType=e,g_objThumbs=t},this.initSlider=function(e,n){if(!e)var e={};e=jQuery.extend(g_temp.objCustomOptions,e),g_objSlider=new UGSlider,g_objSlider.init(t,e,n)},this.onGalleryMouseWheel=function(e,n,i,o){e.preventDefault(),n>0?t.prevItem():t.nextItem()},this.destroy=function(){if(g_objWrapper.off("dragstart"),g_objGallery.off(t.events.ITEM_IMAGE_UPDATED),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);break;case"grid":jQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE)}if(g_objWrapper.off("mousewheel"),jQuery(window).off("resize"),g_functions.destroyFullScreenChangeEvent(),g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);var e=g_objSlider.getElement();e.off("mouseenter"),e.off("mouseleave"),g_objGallery.off(t.events.ENTER_FULLSCREEN),jQuery(g_objSlider).off(g_objSlider.events.ACTION_START),jQuery(g_objSlider).off(g_objSlider.events.ACTION_END),jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END)}1==g_options.gallery_control_keyboard&&jQuery(document).off("keydown"),g_objTheme&&"function"==typeof g_objTheme.destroy&&g_objTheme.destroy(),g_objWrapper.html("")},this.getArrItems=function(){return g_arrItems},this.getObjects=function(){return{g_galleryID:g_galleryID,g_objWrapper:g_objWrapper,g_objThumbs:g_objThumbs,g_objSlider:g_objSlider,g_options:g_options,g_arrItems:g_arrItems,g_numItems:g_numItems}},this.getObjSlider=function(){return g_objSlider},this.getItem=function(e){if(e<0)throw new Error("item with index: "+e+" not found");if(e>=g_numItems)throw new Error("item with index: "+e+" not found");return g_arrItems[e]},this.getWidth=function(){return t.getSize().width},this.getHeight=function(){return t.getSize().height},this.getSize=function(){var e=g_functions.getElementSize(g_objWrapper);return e.orig_width=g_options.gallery_width,e.orig_height=g_options.gallery_height,e.orig_ratio=e.orig_width/e.orig_height,e},this.getGalleryID=function(){return g_galleryID.replace("#","")},this.getNextItem=function(e,t){"object"==typeof e&&(e=e.index);var n=e+1;if(!0!==t&&1==g_numItems)return null;if(n>=g_numItems){if(1!=g_options.gallery_carousel&&!0!==t)return null;n=0}return g_arrItems[n]},this.getPrevItem=function(e){"object"==typeof e&&(e=e.index);var t=e-1;if(t<0){if(1!=g_options.gallery_carousel&&!0!==forceCarousel)return null;t=g_numItems-1}return g_arrItems[t]},this.getSelectedItem=function(){return g_selectedItem},this.getSelectedItemIndex=function(){return g_selectedItemIndex},this.getNumItems=function(){return g_numItems},this.isLastItem=function(){return g_selectedItemIndex==g_numItems-1},this.isFirstItem=function(){return 0==g_selectedItemIndex},this.getOptions=function(){return g_options},this.getElement=function(){return g_objWrapper},this.___________SET_CONTROLS___________=function(){},this.setNextButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.nextItem)},this.setPrevButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.prevItem)},this.setFullScreenToggleButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.toggleFullscreen),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){e.addClass("ug-fullscreenmode")}),g_objGallery.on(t.events.EXIT_FULLSCREEN,function(){e.removeClass("ug-fullscreenmode")})},this.destroyFullscreenButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.ENTER_FULLSCREEN),g_objGallery.off(t.events.EXIT_FULLSCREEN)},this.setPlayButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.togglePlayMode),g_objGallery.on(t.events.START_PLAY,function(){e.addClass("ug-stop-mode")}),g_objGallery.on(t.events.STOP_PLAY,function(){e.removeClass("ug-stop-mode")})},this.destroyPlayButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.START_PLAY),g_objGallery.off(t.events.STOP_PLAY)},this.setProgressIndicator=function(e){g_temp.objProgress=e},this.setTextContainers=function(e,n){g_objGallery.on(t.events.ITEM_CHANGE,function(){var i=t.getSelectedItem();e.html(i.title),n.html(i.description)})},this.showDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").show()},this.hideDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").hide()},this.___________END_SET_CONTROLS___________=function(){},this.___________PLAY_MODE___________=function(){},this.startPlayMode=function(){if(g_temp.isPlayMode=!0,g_temp.isPlayModePaused=!1,g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval),g_temp.objProgress){var e=g_temp.objProgress.getElement();g_temp.objProgress.setProgress(0),e.show()}g_objGallery.trigger(t.events.START_PLAY),g_objSlider&&1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()},this.resetPlaying=function(){if(0==g_temp.isPlayMode)return!0;g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now()},this.pausePlaying=function(){if(1==g_temp.isPlayModePaused)return!0;g_temp.isPlayModePaused=!0,clearInterval(g_temp.playHandle),g_objGallery.trigger(t.events.PAUSE_PLAYING)},this.continuePlaying=function(){if(0==g_temp.isPlayModePaused)return!0;g_temp.isPlayModePaused=!1,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval)},this.stopPlayMode=function(){if(g_temp.isPlayMode=!1,clearInterval(g_temp.playHandle),g_temp.playTimePassed=0,g_temp.objProgress){g_temp.objProgress.getElement().hide()}g_objGallery.trigger(t.events.STOP_PLAY)},this.isPlayMode=function(){return g_temp.isPlayMode},this.togglePlayMode=function(){0==t.isPlayMode()?t.startPlayMode():t.stopPlayMode()},this.___________GENERAL_EXTERNAL___________=function(){},this.shuffleItems=function(){g_arrItems=g_functions.arrayShuffle(g_arrItems);for(var e in g_arrItems)g_arrItems[e].index=parseInt(e)},this.setOptions=function(e){g_options=jQuery.extend(g_options,e)},this.selectItem=function(e,n){"number"==typeof e&&(e=t.getItem(e));var i=e.index;if(i==g_selectedItemIndex)return!0;if(unselectSeletedItem(),g_selectedItem=e,g_selectedItemIndex=i,g_objGallery.trigger(t.events.ITEM_CHANGE,[e,n]),1==g_temp.isPlayMode){t.resetPlaying();1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()}},this.nextItem=function(){var e=g_selectedItemIndex+1;return 0==g_numItems||(0==g_options.gallery_carousel&&e>=g_numItems||(e>=g_numItems&&(e=0),void t.selectItem(e,"next")))},this.prevItem=function(){var e=g_selectedItemIndex-1;return-1==g_selectedItemIndex&&(e=0),0==g_numItems||(0==g_options.gallery_carousel&&e<0||(e<0&&(e=g_numItems-1),void t.selectItem(e,"prev")))},this.isFullScreen=function(){return 1==g_temp.isFakeFullscreen||1==g_functions.isFullScreen()},this.isFakeFullscreen=function(){return g_temp.isFakeFullscreen},this.toFullScreen=function(){g_functions.setGlobalData("fullscreenID",g_galleryID);var e=g_objWrapper.get(0);0==g_functions.toFullscreen(e)&&toFakeFullScreen()},this.exitFullScreen=function(){1==g_temp.isFakeFullscreen?exitFakeFullscreen():g_functions.exitFullscreen()},this.toggleFullscreen=function(){0==t.isFullScreen()?t.toFullScreen():t.exitFullScreen()},this.resize=function(e,t,n){g_objWrapper.css("width","auto"),g_objWrapper.css("max-width",e+"px"),t&&g_objWrapper.height(t),n||!0===n||onGalleryResized()},this.setSizeClass=function(e,n){if(!e)var e=g_objWrapper;if(!n)var i=t.getSize(),n=i.width;if(0==n)var n=jQuery(window).width();var o="";if(n<=480?o="ug-under-480":n<=780?o="ug-under-780":n<960&&(o="ug-under-960"),1==e.hasClass(o))return!0;removeAllSizeClasses(e),""!=o&&e.addClass(o)},this.isMobileMode=function(){return!!g_objWrapper.hasClass("ug-under-480")},this.isSmallWindow=function(){var e=jQuery(window).width();return!e||e<=480},this.changeItems=function(e,t){if(!e)var e="noitems";runGallery(g_galleryID,"nochange",e,t)},this.showErrorMessageReplaceGallery=function(e){showErrorMessage(e)},this.setFuncCustomHeight=function(e){g_temp.funcCustomHeight=e},this.__________AJAX_REQUEST_______=function(){},this.ajaxRequest=function(e,t,n,i){if(1==n&&"json",!i||"function"!=typeof i)throw new Error("ajaxRequest error: success function should be passed");if(""==g_options.gallery_urlajax)throw new Error("ajaxRequest error: Ajax url don't passed");if(void 0===t)var t={};var o={action:"unitegallery_ajax_action",client_action:e,galleryID:g_galleryID,data:t};jQuery.ajax({type:"post",url:g_options.gallery_urlajax,dataType:"json",data:o,success:function(e){return e?-1==e||0===e?(showErrorMessage("ajax error!!!"),!1):void 0===e.success?(showErrorMessage("The 'success' param is a must!"),!1):0==e.success?(showErrorMessage(e.message),!1):void i(e):(showErrorMessage("Empty ajax response!","Ajax Error"),!1)},error:function(e,t,n){console.log("Ajax Error!!! "+t)}})},this.requestNewItems=function(e,n,i){var o=g_options.gallery_enable_cache;if(i||(i=e),1==n&&(o=!1),1==o&&g_objCache.hasOwnProperty(i)){var r=g_objCache[i];t.changeItems(r,i)}else g_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS),t.ajaxRequest("front_get_cat_items",{catid:e},!0,function(e){var n=e.html;t.changeItems(n,i)})},this.run=function(e,t){g_options.gallery_debug_errors;if(t&&t.hasOwnProperty("gallery_debug_errors")&&(g_options.gallery_debug_errors=t.gallery_debug_errors),1==g_options.gallery_debug_errors)try{runGallery(e,t)}catch(e){if("object"==typeof e){var n=e.message,i=e.lineNumber,o=e.fileName;e.stack;n+=" <br><br> in file: "+o,n+=" <b> line "+i+"</b>",trace(e)}else var n=e;n=n.replace("Error:",""),showErrorMessage(n)}else runGallery(e,t)}}function UG_API(e){function t(e){var t={index:e.index,title:e.title,description:e.description,urlImage:e.urlImage,urlThumb:e.urlThumb},n=e.objThumbImage.data();for(var i in n){switch(i){case"image":case"description":continue}t[i]=n[i]}return t}var n,i=this,o=(jQuery(i),new UniteGalleryMain),r=[];o=e,n=jQuery(e),this.events={API_INIT_FUNCTIONS:"api_init",API_ON_EVENT:"api_on_event"},this.on=function(e,a,s){switch(!0!==s&&r.push({event:e,func:a}),e){case"item_change":n.on(o.events.ITEM_CHANGE,function(){var e=o.getSelectedItem(),n=t(e);a(n.index,n)});break;case"resize":n.on(o.events.SIZE_CHANGE,a);break;case"enter_fullscreen":n.on(o.events.ENTER_FULLSCREEN,a);break;case"exit_fullscreen":n.on(o.events.EXIT_FULLSCREEN,a);break;case"play":n.on(o.events.START_PLAY,a);break;case"stop":n.on(o.events.STOP_PLAY,a);break;case"pause":n.on(o.events.PAUSE_PLAYING,a);break;case"continue":n.on(o.events.CONTINUE_PLAYING,a);break;case"open_lightbox":n.on(o.events.OPEN_LIGHTBOX,a);break;case"close_lightbox":n.on(o.events.CLOSE_LIGHTBOX,a);break;case"load":n.on(o.events.LOAD,a);break;default:console&&console.log("wrong api event: "+e)}n.trigger(i.events.API_ON_EVENT,[e,a])},this.play=function(){o.startPlayMode()},this.stop=function(){o.stopPlayMode()},this.togglePlay=function(){o.togglePlayMode()},this.enterFullscreen=function(){o.toFullScreen()},this.exitFullscreen=function(){o.exitFullScreen()},this.toggleFullscreen=function(){o.toggleFullscreen()},this.resetZoom=function(){var e=o.getObjSlider();if(!e)return!1;e.zoomBack()},this.zoomIn=function(){var e=o.getObjSlider();if(!e)return!1;e.zoomIn()},this.zoomOut=function(){var e=o.getObjSlider();if(!e)return!1;e.zoomOut()},this.nextItem=function(){o.nextItem()},this.prevItem=function(){o.prevItem()},this.selectItem=function(e){o.selectItem(e)},this.resize=function(e,t){t?o.resize(e,t):o.resize(e)},this.getItem=function(e){return t(o.getItem(e))},this.getNumItems=function(){return o.getNumItems()},this.reloadGallery=function(e){if(!e)var e={};o.run(null,e),r.map(function(e){i.on(e.event,e.func,!0)})},this.destroy=function(){o.destroy()},n.trigger(i.events.API_INIT_FUNCTIONS,i)}function UGTheme_tiles(){function e(e,n){f=e,v=jQuery.extend(v,b),v=jQuery.extend(v,n),t(),f.setOptions(v),f.setFreestyleMode(),u=e.getObjects(),l=jQuery(e),c=u.g_objWrapper,h.init(e,v),g=h.getObjTileDesign()}function t(){switch(1==v.theme_enable_preloader&&(y.showPreloader=!0),v.theme_appearance_order){default:case"normal":break;case"shuffle":f.shuffleItems();break;case"keep":v.tiles_keep_order=!0}}function n(){c.addClass("ug-theme-tiles"),c.append("<div class='ug-tiles-wrapper' style='position:relative'></div>"),1==y.showPreloader&&(c.append("<div class='ug-tiles-preloader ug-preloader-trans'></div>"),d=c.children(".ug-tiles-preloader"),d.fadeTo(0,0)),p=c.children(".ug-tiles-wrapper"),v.theme_gallery_padding&&c.css({
"padding-left":v.theme_gallery_padding+"px","padding-right":v.theme_gallery_padding+"px"}),h.setHtml(p)}function i(){d&&(d.fadeTo(0,1),c.height(v.theme_preloading_height),m.placeElement(d,"center",v.theme_preloader_vertpos)),s(),h.run()}function o(){n(),i()}function r(e,t){t=jQuery(t);var n=g.getItemByTile(t);n.index}function a(){if(p.hide(),d){d.show();var e=m.getElementSize(d),t=e.bottom+30;c.height(t)}}function s(){d&&jQuery(h).on(h.events.TILES_FIRST_PLACED,function(){c.height("auto"),d.hide()}),jQuery(g).on(g.events.TILE_CLICK,r),l.on(f.events.GALLERY_BEFORE_REQUEST_ITEMS,a)}var l,u,c,d,p,f=new UniteGalleryMain,h=new UGTiles,m=new UGFunctions,g=new UGTileDesign,v={theme_enable_preloader:!0,theme_preloading_height:200,theme_preloader_vertpos:100,theme_gallery_padding:0,theme_appearance_order:"normal",theme_auto_open:null},b={gallery_width:"100%"},y={showPreloader:!1};this.destroy=function(){jQuery(g).off(g.events.TILE_CLICK),jQuery(h).off(h.events.TILES_FIRST_PLACED),l.off(f.events.GALLERY_BEFORE_REQUEST_ITEMS),h.destroy()},this.run=function(){o()},this.init=function(t,n){e(t,n)}}define("lib-build/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,i=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?i=!1:t[4]&&(n=parseInt(t[4])<18);var o={};o.pluginBuilder="./css-builder";var r,a=function(){r=document.createElement("style"),e.appendChild(r)},s=function(e,t){a();var n=r.styleSheet||r.sheet;if(n&&n.addImport)n.addImport(e),r.onload=t;else{r.textContent='@import "'+e+'";';var i=setInterval(function(){try{r.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},l=function(t,n){var o=document.createElement("link");if(o.type="text/css",o.rel="stylesheet",i)o.onload=function(){o.onload=function(){},setTimeout(n,7)};else var r=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){if(document.styleSheets[e].href==o.href)return clearInterval(r),n()}},10);o.href=t,e.appendChild(o)};return o.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},o.load=function(e,t,i,o){(n?s:l)(t.toUrl(e+".css"),i)},o}),define("lib-build/css!lib/calcite-bootstrap/css/calcite-bootstrap-open.min",[],function(){}),define("lib-build/less",["require"],function(e){var t={};if(t.pluginBuilder="./less-builder","undefined"==typeof window)return t.load=function(e,t,n){n()},t;t.normalize=function(e,t){return".less"==e.substr(e.length-5,5)&&(e=e.substr(0,e.length-5)),e=t(e)};var n=document.getElementsByTagName("head")[0],i=document.getElementsByTagName("base");i=i&&i[0]&&i[0]&&i[0].href;var o=(i||window.location.href.split("#")[0].split("?")[0]).split("/");o[o.length-1]="",o=o.join("/");var r,a=0;return t.inject=function(e){a<31&&(r=document.createElement("style"),r.type="text/css",n.appendChild(r),a++),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))},t.load=function(n,i,r,a){var s={},l=a?a.less||a:s;"env"in l||(l.env="development");var u=window.less;u?u.Parser||(l===s&&(l=u),u=null):window.less=l,e(u?["./normalize"]:["./normalize","./lessc"],function(e,a){a||(a=u),"fileExt"in l||(l.fileExt=".less");var s=n;".css"!==s.substring(s.length-4)&&l.fileExt&&(s+=l.fileExt),s=e.absoluteURI(i.toUrl(s),o),a.render("@import ("+(l.importOption||"multiple")+') "'+s+'";',l,function(e,n){if(e)return r.error(e);n.css=n.css.replace(/..\/..\/(..\/)*resources/g,"resources"),t.inject(n.css),setTimeout(r,7)},l)})},t}),define("lib-build/less!storymaps/tpl/view/ui/bootstrap-override",[],function(){}),define("lib-build/css!lib/font-awesome/css/font-awesome",[],function(){}),define("lib-build/css!storymaps/tpl/core/Core",[],function(){}),define("lib-build/less!storymaps/tpl/core/Core",[],function(){}),define("storymaps/tpl/utils/SocialSharing",["dojo/Deferred","esri/urlUtils"],function(e,t){return{shareFacebook:function(e,t,n,i){var o="u="+this.cleanURL(i||document.location.href);window.open("https://www.facebook.com/sharer/sharer.php?"+o,"","toolbar=0,status=0,width=626,height=436")},shareTwitter:function(e,t){var n="text="+encodeURIComponent(e||"")+"&url="+this.cleanURL(t||document.location.href)+"&related=EsriStoryMaps&hashtags=StoryMaps";window.open("https://twitter.com/intent/tweet?"+n,"","toolbar=0,status=0,width=626,height=436")},requestShortUrl:function(t){var n=t||document.location.href,i=new e;return $.getJSON("https://arcg.is/prod/shorten?callback=?",{longUrl:n},function(e){console.log(e),e&&e&&e.data.url?i.resolve(e.data.url):i.reject()}),i},cleanURL:function(e,n){var i=t.urlToObject(e),o=i.path;return i.query&&(delete i.query.edit,delete i.query.locale,delete i.query.folderId,delete i.query.webmap,delete i.query.autoplay,$.each(Object.keys(i.query),function(e,t){o+=0===e?"?":"&",void 0!==i.query[t]&&""!==i.query[t]?o+=t+"="+i.query[t]:o+=t})),n?o:encodeURIComponent(o)}}}),define("storymaps/tpl/utils/CommonHelper",["esri/urlUtils","esri/arcgis/utils","dojo/cookie","dojo/_base/Color","./SocialSharing"],function(e,t,n,i,o){return{switchToBuilder:function(){document.location.search.match(/appid/)?document.location=o.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search,!0)+"&edit"+document.location.hash:(document.location.search.slice(-1),document.location=o.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname,!0)+"?edit"+document.location.hash)},getMyStoriesURL:function(){return app.isPortal?this.getPortalURL()+"/apps/MyStories/":"//storymaps.arcgis.com/en/my-stories/"},getUrlParams:function(t){var n=e.urlToObject(t||document.location.search).query;return n||(this.browserSupportHistory()||n?{}:e.urlToObject(document.location.hash).query||{})},getUrlHash:function(t){var n=e.urlToObject(t||document.location).hash;return n||""},browserSupportHistory:function(){return!(!window.history||!history.pushState)},isArcGISHosted:function(){return/(\/)([a-zA-Z0-9]+(\/))*(apps\/|home\/)([a-zA-Z0-9\-\_]+\/)/.test(document.location.pathname)},isArcGISOnlineHosted:function(){return document.location.host.match(/\.arcgis\.com$/)},isDefaultLogoLink:function(e){return/\/\/www\.esri\.com$/i.test(e)},getAppID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.appid?app.indexCfg.appid:this.isArcGISHosted()||!e?t.appid:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.appid:void 0},getWebmapID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.webmap?app.indexCfg.webmap:this.isArcGISHosted()||!e?t.webmap:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.webmap:void 0},getPortalURL:function(){return t.arcgisUrl.split("/sharing/")[0]},getPortalUser:function(){var e=n("esri_auth");if(e&&(e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),!e.urlKey||!e.customBaseUrl||(e.urlKey+"."+e.customBaseUrl).toLowerCase()==document.location.hostname.toLowerCase()))return e?e.email:null},getCookieToken:function(){var e=n("esri_auth");if(e&&(e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),!e.urlKey||!e.customBaseUrl||(e.urlKey+"."+e.customBaseUrl).toLowerCase()==document.location.hostname.toLowerCase()))return e?e.token:null},userIsAppOwner:function(){var e=app.portal?app.portal.getPortalUser():null,t=app.data.appItem?app.data.appItem.item:null;return e&&t&&e.username==t.owner||null!=this.getPortalUser()&&t&&this.getPortalUser()==t.owner||e&&e.privileges&&$.inArray("portal:admin:updateItems",e.privileges)>-1||t&&"admin"==t.itemControl||t&&"update"==t.itemControl},checkUserItemPrivileges:function(){var e=app.portal?app.portal.getPortalUser():null;return e&&!e.orgId&&!e.privileges||e&&e.privileges&&$.inArray("portal:user:createItem",e.privileges)>-1},prependURLHTTP:function(e){return!e||""===e||e.match(/^mailto:/)?e:/^(https?:\/\/)|^(\/\/)/i.test(e)?e:"http://"+e},forceHttpsUrl:function(e){return"https://"+e.replace(/^.*?\/\//,"")},forceProtocolRelativeUrl:function(e){return"//"+e.replace(/^.*?\/\//,"")},uploadedImageNeedsFixing:function(e){if(!e||!app.portal||!app.portal.url)return!1;var t=app.data&&app.data.appItem;if(!t)return!1;var n=t.item.id;if(!n)return!1;var i=t.data.values.template.createdWith,o=t.data.values.template.editedWith;return!(!i.match(/^1.[0|1]/)||!o.match(/^1.[0|1]/)||!e.match(n+"/resources"))},fixUploadedImageUrl:function(e){var t=e.replace(/^(https?:\/\/)|^(\/\/)/,"").split(/\//)[0],n=app.portal.portalHostname;return t&&n?e.replace(t,n):e},fixUrlWithMultipleQueryParams:function(t){if(!t)return t;var n=t.match(/\?/g);if(!n||n.length<2)return t;var i=0;t=t.replace(/\?/g,function(e){return i++,i>1?"&":e});var o=e.urlToObject(t),r=o.query,a=[];for(var s in r)$.isArray(r[s])&&(r[s]=r[s][0]),a.push(s+"="+r[s]);return o.path+"?"+a.join("&")},fixSizeUrls:function(e,t){return void 0===t&&(t=this.uploadedImageNeedsFixing(e[0].url)),t?(e.forEach(function(e){e.url=this.fixUploadedImageUrl(e.url)}),e):e},sortSizeUrls:function(e,t){return e.longestSide&&t.longestSide?t.longestSide===e.longestSide?Math.min(t.width,t.height)-Math.min(e.width,e.height):t.longestSide-e.longestSide:t.width-e.width},findASize:function(e,t,n){n||e.sort(this.sortSizeUrls),t=t||$("body").width()||window.screen.width;var i=e[0];return e.every(function(e){return e.longestSide>=t-50&&(i=e,!0)}),i},getLightOrDarkText:function(e){return this.getYIQ(e)>=128?"dark":"light"},getYIQ:function(e){var t=new i(e),n=t.toRgb();return(299*n[0]+587*n[1]+114*n[2])/1e3},throttle:function(e,t,n){t||(t=250);var i,o;return function(){var r=n||this,a=+new Date,s=arguments;i&&a<i+t?(clearTimeout(o),o=setTimeout(function(){i=a,e.apply(r,s)},t)):(i=a,e.apply(r,s))}}}}),function(){"use strict";function e(t,i){var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,s=0,l=r.length;s<l;s++)a[r[s]]=function(e,t){return function(){return e.apply(t,arguments)}}(a[r[s]],a);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=e.changedTouches[0],c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=c.tagName.toLowerCase())){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!i||o||!(l=c.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,o;if(void 0===window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("lib/fastclick/lib/fastclick",[],function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),app.isPrint||require([app.isPrint?"":"lib-build/css!lib/calcite-bootstrap/css/calcite-bootstrap-open.min",app.isPrint?"":"lib-build/less!storymaps/tpl/view/ui/bootstrap-override"]),define("storymaps/tpl/core/Core",["lib-build/css!lib/font-awesome/css/font-awesome","lib-build/css!./Core","lib-build/less!./Core","esri/map","esri/arcgis/Portal","esri/arcgis/utils","storymaps/tpl/utils/CommonHelper","esri/urlUtils","dojo/has","esri/IdentityManager","esri/arcgis/OAuthInfo","esri/config","esri/tasks/GeometryService","esri/request","dojo/topic","dojo/on","dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","dojo/Deferred","dojo/DeferredList","dojo/query","lib/fastclick/lib/fastclick"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h,m,g,v,b,y,_,w,C){function k(e,t){return K=e,Y=t,app.userCanEdit=!1,W(),a.isArcGISHosted()?app.indexCfg={}:V()||(app.indexCfg={proxyurl:app.indexCfg.proxyurl,sharingurl:app.indexCfg.sharingurl,oAuthAppId:app.indexCfg.oAuthAppId,story:app.indexCfg.story}),document.title=app.cfg.TPL_NAME,l("touch")&&$("body").addClass("hasTouch"),C.prototype._needsClick=C.prototype.needsClick,C.prototype.needsClick=function(e){return!!$(e).parents(".esriPopup").length||C.prototype._needsClick.call(this,e)},C.attach(document.body),window!=window.top&&$("body").addClass("isEmbed"),g.mixin(app,{data:{},appCfg:{supportWebmapPreviewAGOL:!1,useWebmapInApp:!1,useStandardHeader:!1,useAppTitleAsPageTitle:!1},portal:null,builder:t,isLoading:!0,loadingTimeout:null}),app.isInBuilder&&(l("ie")||l("trident")||l("edge"))?($("#fatalError .error-title").html(i18n.viewer.errors.sorry),$("#fatalError .error-msg").html(i18n.viewer.errors.builderSupportOther.replace("${CHROME}",'<a href="https://www.google.com/chrome/" target="_blank">Chrome</a>').replace("${SAFARI}",'<a href="https://www.apple.com/safari/" target="_blank">Safari</a>').replace("${FIREFOX}",'<a href="https://www.mozilla.org/" target="_blank">Firefox</a>').replace("${ESRI-SUPPORT}",'<a href="https://support.esri.com" target="_blank">Esri Support</a>').replace("${BROWSER-SUPPORT-VOTE}",'<a href="http://links.esri.com/storymaps/vote-for-cascade-builder-browser-support" target="_blank">vote here</a>')),void $("#fatalError").show()):app.isInBuilder&&l("ipad")?($("#fatalError .error-title").html(i18n.viewer.errors.sorry),$("#fatalError .error-msg").html(i18n.viewer.errors.builderSupportIpad),void $("#fatalError").show()):l("ie")<11?($("#fatalError .error-title").html(i18n.viewer.errors.sorry),$("#fatalError .error-msg").html(i18n.viewer.errors.noViewerIE.replace("${VERSION}",11).replace("${UPGRADE}",'<a href="http://browsehappy.com/" target="_blank">'+i18n.viewer.errors.upgradeBrowser+"</a>")),void $("#fatalError").show()):void x.bind(this)(t)}function x(e){if(m(u,"dialog-create",function(){app.isLoading&&j("invalidConfignoOAuth")}),h.subscribe("tpl-ready",function(){var e=document.location.search;e&&(e=e.replace("&preview","")),window.history.replaceState({},"","index.html"+e+document.location.hash)}),app.isInBuilder){var t="notConfiguredMobile";l("touch")&&(window.innerHeight>window.innerWidth?window.innerHeight>768&&(t="notConfiguredMobile2"):window.innerWidth>768&&(t="notConfiguredMobile2")),j(t,null,!0)}if(K.init(this)){U();var n=a.getUrlParams();if(n.sharinghost&&(app.indexCfg.sharingurl=n.sharinghost,app.indexCfg.proxyurl=n.sharinghost.split("/content/")[0]+"/proxy"),!app.indexCfg.sharingurl){var i=document.location.pathname.indexOf("/apps/");if(-1==i&&(i=document.location.pathname.indexOf("/home/")),-1!=i){var p=location.pathname.substr(0,i);app.indexCfg.sharingurl="//"+location.host+p+"/sharing/rest/content/items",app.indexCfg.proxyurl="//"+location.host+p+"/sharing/proxy"}else app.indexCfg.sharingurl=app.cfg.DEFAULT_SHARING_URL}app.indexCfg.sharingurl.match(/^http/)?r.arcgisUrl=app.indexCfg.sharingurl:r.arcgisUrl=location.protocol+app.indexCfg.sharingurl,app.indexCfg.proxyurl||(app.indexCfg.proxyurl=app.cfg.DEFAULT_PROXY_URL),d.defaults.io.proxyUrl=location.protocol+app.indexCfg.proxyurl,u&&u.setProtocolErrorHandler(function(){return!0}),app.isInBuilder&&app.cfg.CORS_SERVER&&$.each(app.cfg.CORS_SERVER,function(e,t){d.defaults.io.corsEnabledServers.push(t)}),app.cfg.PROXY_RULES&&app.cfg.PROXY_RULES.length&&$.each(app.cfg.PROXY_RULES,function(e,t){t&&t.urlPrefix&&t.proxyUrl&&s.addProxyRule(t)}),d.defaults.io.timeout=app.isInBuilder?app.cfg.TIMEOUT_BUILDER_REQUEST:app.cfg.TIMEOUT_VIEWER_REQUEST,$&&$.fn&&$.fn.modal&&($.fn.modal.Constructor.prototype.enforceFocus=function(){}),$("form").bind("keydown",function(e){if(13==e.keyCode)return!1}),h.subscribe("CORE_UPDATE_EXTENT",D),app.portal=new o.Portal(app.indexCfg.sharingurl.split("/sharing/")[0]),app.portal.on("load",function(t){if(app.isPortal=!!t.isPortal,app.isSelfHosted=!app.isPortal&&!a.isArcGISOnlineHosted(),G(),app.indexCfg.oAuthAppId){var n=new c({appId:app.indexCfg.oAuthAppId,popup:!1,portalUrl:"https:"+app.indexCfg.sharingurl.split("/sharing/")[0]});u.registerOAuthInfos([n]),u.checkSignInStatus(n.portalUrl+"/sharing/rest").then(function(){P().then(E)},function(){e?P().then(E):E()})}else u.checkSignInStatus("https:"+app.indexCfg.sharingurl.split("/sharing/")[0]+"/sharing/rest"),E()})}}function E(){var e=a.getAppID(V()),t=a.getWebmapID(V()),n=!(app.appCfg&&!app.appCfg.supportWebmapPreviewAGOL),i=app.indexCfg.story||a.getUrlParams().story;return i?V()?void K.getConfig(i):void setTimeout(function(){K.getConfig(i)},1e3):e?void T(e):t&&!n?void(a.isArcGISHosted()?M():O(t)):app.isInBuilder&&Y.isDirectCreation&&V()&&a.isArcGISHosted()&&!a.getPortalUser()&&!app.portal.getPortalUser()?void B():app.isInBuilder&&Y.isDirectCreation?void P().then(function(){A(),N()}):void(a.isArcGISHosted()?M():j(!Q.appid||app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners[0]?app.isProduction?"invalidConfigNoApp":"invalidConfigNoAppDev":"unspecifiedConfigOwner"))}function T(e){void 0!==Q.forceLogin||app.isInBuilder?P().then(function(){S(e)},function(){j("notAuthorized")}):S(e)}function S(e){r.getItem(e).then(function(e){if(!e)return void j("appLoadingFail");var t=e.item,n=e.itemData;if(app.data.appItem={item:t,data:n},app.userCanEdit=a.userIsAppOwner(),app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]){var i=t.owner,o=!1;if(i&&(o=-1!=$.inArray(i,app.indexCfg.authorizedOwners)),o||"*"!=app.indexCfg.authorizedOwners[0]||(o=!0),o||$.each(app.indexCfg.authorizedOwners,function(e,n){var i=n.match(/^\[(.*)\]$/);i&&t.orgId==i[1]&&(o=!0)}),!o)return void j("invalidConfigOwner")}if(t&&t.appProxies){var r=v.map(t.appProxies,function(e){return{url:e.sourceUrl,mixin:{url:e.proxyUrl}}});app.data.appProxies=r}if(app.isInBuilder&&V()&&!app.userCanEdit)return void j("notAuthorized");K.isStoryBlank()?app.isInBuilder?N():a.getAppID(V())?app.userCanEdit?a.switchToBuilder():j("notConfiguredDesktop"):j("noLayer"):N()},function(e){j(e&&400==e.httpCode?"invalidApp":e&&403==e.httpCode?"notAuthorized":"appLoadingFail")})}function P(){var e=new y;return app.portal.signIn().then(function(){if(app.isInBuilder&&!a.checkUserItemPrivileges())return void j("notAuthorizedBuilder");app.userCanEdit=a.userIsAppOwner(),G(),app.portal.signedIn=!0,h.publish("portal-signin"),e.resolve()},function(){e.reject()}),e}function O(e){K.loadFirstWebmap(e).then(g.hitch(this,function(e){I()}),g.hitch(this,function(){j("createMap")}))}function I(){console.error("FATAL ERROR")}function M(){window.location=app.isPortal&&app.cfg.HELP_URL_PORTAL?app.cfg.HELP_URL_PORTAL:app.cfg.HELP_URL}function A(){var e=app.data.title;app.appCfg.useAppTitleAsPageTitle&&(document.title=e?$("<div>"+e+"</div>").text():app.cfg.TPL_NAME)}function N(){K.isStoryBlank()&&app.isInBuilder?(app.builder.appInitComplete(),K.appInitComplete()):app.isInBuilder?(K.appInitComplete(),app.builder.appInitComplete()):K.appInitComplete(),document.location.pathname.match(/\/apps\/[a-zA-Z]+\/$/)&&document.location.search.match(/^\?appid=/)&&(!l("ie")||l("ie")>=10)&&window.history.replaceState({},"","index.html"+document.location.search+document.location.hash)}function j(e,t,n){var i=i18n.viewer.errors[e];i=i.replace(/{TPL_NAME}/g,app.cfg.TPL_NAME),"notAuthorized"==e&&app.indexCfg.oAuthAppId&&(i+='<div><button class="btn btn-sm btn-default" onclick="esri.id.destroyCredentials(); window.location.reload();">'+i18n.viewer.errors.signOut+"</button></div>"),"appLoadingFail"==e?$("#loadingMessage").html('<div id="loadingRetry"> <button type="button" class="btn btn-naked btn-sm" onclick="document.location.reload()">'+i18n.viewer.loading.failButton+" </button></div>").hide().fadeIn(1200,function(){$("#loadingMessage").addClass("loaded")}):$("#loadingMessage").hide(),$("#fatalError .error-msg").html(i),n||(H(),$("#loadingIndicator").hide(),$("#fatalError").show())}function L(e){$("#fatalError .error-msg").html(i18n.viewer.errors[e])}function D(e){if(!(e&&e.spatialReference&&app.map&&app.map.extent.spatialReference&&app.map.spatialReference)){var t=new y;return t.resolve(),t}if(app.map.spatialReference.wkid==e.spatialReference.wkid)return app.map.setExtent(e);var n=new y;return d.defaults.geometryService.project([e],app.map.spatialReference,function(e){e&&e[0]&&(app.map.setExtent(e[0]),n.resolve())}),n}function R(e,t){e&&(102100!=app.map.spatialReference.wkid&&4326!=app.map.spatialReference.wkid?d.defaults.geometryService.project([t],app.map.spatialReference,function(e){e&&e[0]&&(app.map.extent.contains(e[0])||app.map.centerAt(e[0]))}):app.map.extent.contains(t)||app.map.centerAt(t))}function F(){return!app.isInBuilder&&(!V()&&!!a.getAppID(V())||V()&&app.userCanEdit)&&(void 0===Q.preview||"false"==Q.preview)}function B(){window.location=r.arcgisUrl.split("/sharing/")[0]+"/home/signin.html?returnUrl="+encodeURIComponent(document.location.href)}function U(){app.loadingTimeout=setTimeout(z,app.cfg.TIMEOUT_VIEWER_LOAD)}function H(){"undefined"!=typeof app&&app.loadingTimeout&&(clearTimeout(app.loadingTimeout),app.loadingTimeout=null)}function z(){if(u&&u.dialog&&u.dialog._alreadyInitialized&&!u.loadingTimeoutAlreadyFired)return clearTimeout(app.loadingTimeout),U(),void(u._busy||(u.loadingTimeoutAlreadyFired=!0))}function W(){document.documentElement.lang=b.locale,w("#fatalError .error-title")[0].innerHTML=i18n.viewer.errors.boxTitle}function V(){return q.environment!=["TPL","ENV","DEV"].join("_")}function G(){if(app.portal){!app.cfg.HELPER_SERVICES.geocode.length&&app.portal.helperServices&&app.portal.helperServices.geocode&&app.portal.helperServices.geocode.length&&app.portal.helperServices.geocode[0].url&&$.each(app.portal.helperServices.geocode,function(e,t){app.cfg.HELPER_SERVICES.geocode.push(t)});var e;if(app.cfg.HELPER_SERVICES.geometry&&app.cfg.HELPER_SERVICES.geometry.url?e=app.cfg.HELPER_SERVICES.geometry.url:app.portal.helperServices.geometry&&app.portal.helperServices.geometry.url&&(e=app.portal.helperServices.geometry.url),d.defaults.geometryService=new p(e),!app.cfg.BING_MAPS_KEY&&app.portal.bingKey&&(app.cfg.BING_MAPS_KEY=app.portal.bingKey),app.portal.isPortal&&app.cfg&&app.cfg.AUTHORIZED_IMPORT_SOURCE&&(app.cfg.AUTHORIZED_IMPORT_SOURCE.featureService=!1),app.isPortal=!!app.portal.isPortal,app.isSelfHosted=!app.isPortal&&!a.isArcGISOnlineHosted(),app.isPortal&&app.portal.helpBase&&app.portal.portalHostname&&!app.cfg.HELP_URL_PORTAL.match("^//")){var t=app.portal.portalHostname.split("/")[0];app.cfg.HELP_URL_PORTAL="//"+t+app.portal.helpBase+app.cfg.HELP_URL_PORTAL}}}var q={environment:"TPL_ENV_PRODUCTION"},K=null,Y=null,Q=a.getUrlParams();return{init:k,isProd:V,appInitComplete:N,loadWebMap:O,hasSwitchBuilderButton:F,zoomToDeviceLocation:R,cleanLoadingTimeout:H,initError:j,replaceInitErrorMessage:L,portalLogin:P}}),function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){(function(t){"use strict";if(t._babelPolyfill)throw new Error("only one instance of babel/polyfill is allowed");t._babelPolyfill=!0,e("core-js/shim"),e("regenerator/runtime")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/shim":72,"regenerator/runtime":73}],2:[function(e,t,n){"use strict";var i=e("./$");t.exports=function(e){return function(t){var n,o=i.toObject(this),r=i.toLength(o.length),a=i.toIndex(arguments[1],r);if(e&&t!=t){for(;r>a;)if((n=o[a++])!=n)return!0}else for(;r>a;a++)if((e||a in o)&&o[a]===t)return e||a;return!e&&-1}}},{"./$":16}],3:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.ctx");t.exports=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,s=6==e,l=5==e||s;return function(u){for(var c,d,p=Object(i.assertDefined(this)),f=i.ES5Object(p),h=o(u,arguments[1],3),m=i.toLength(f.length),g=0,v=t?Array(m):n?[]:void 0;m>g;g++)if((l||g in f)&&(c=f[g],d=h(c,g,p),e))if(t)v[g]=d;else if(d)switch(e){case 3:return!0;case 5:return c;case 6:return g;case 2:v.push(c)}else if(a)return!1;return s?-1:r||a?a:v}}},{"./$":16,"./$.ctx":10}],4:[function(e,t,n){function i(e,t,n){if(!e)throw TypeError(n?t+n:t)}var o=e("./$");i.def=o.assertDefined,i.fn=function(e){if(!o.isFunction(e))throw TypeError(e+" is not a function!");return e},i.obj=function(e){if(!o.isObject(e))throw TypeError(e+" is not an object!");return e},i.inst=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e},t.exports=i},{"./$":16}],5:[function(e,t,n){var i=e("./$");t.exports=Object.assign||function(e,t){for(var n=Object(i.assertDefined(e)),o=arguments.length,r=1;o>r;)for(var a,s=i.ES5Object(arguments[r++]),l=i.getKeys(s),u=l.length,c=0;u>c;)n[a=l[c++]]=s[a];return n}},{"./$":16}],6:[function(e,t,n){function i(e){return a.call(e).slice(8,-1)}var o=e("./$"),r=e("./$.wks")("toStringTag"),a={}.toString;i.classof=function(e){var t,n;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(n=(t=Object(e))[r])?n:i(t)},i.set=function(e,t,n){e&&!o.has(e=n?e:e.prototype,r)&&o.hide(e,r,t)},t.exports=i},{"./$":16,"./$.wks":27}],7:[function(e,t,n){"use strict"
;function i(e,t){if(!p(e))return("string"==typeof e?"S":"P")+e;if(m(e))return"F";if(!c(e,g)){if(!t)return"E";f(e,g,++C)}return"O"+e[g]}function o(e,t){var n,o=i(t);if("F"!=o)return e[v][o];for(n=e[y];n;n=n.n)if(n.k==t)return n}var r=e("./$"),a=e("./$.ctx"),s=e("./$.uid").safe,l=e("./$.assert"),u=e("./$.iter"),c=r.has,d=r.set,p=r.isObject,f=r.hide,h=u.step,m=Object.isFrozen||r.core.Object.isFrozen,g=s("id"),v=s("O1"),b=s("last"),y=s("first"),_=s("iter"),w=r.DESC?s("size"):"size",C=0;t.exports={getConstructor:function(e,t,n){function i(o){var a=l.inst(this,i,e);d(a,v,r.create(null)),d(a,w,0),d(a,b,void 0),d(a,y,void 0),void 0!=o&&u.forOf(o,t,a[n],a)}return r.mix(i.prototype,{clear:function(){for(var e=this,t=e[v],n=e[y];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e[y]=e[b]=void 0,e[w]=0},delete:function(e){var t=this,n=o(t,e);if(n){var i=n.n,r=n.p;delete t[v][n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t[y]==n&&(t[y]=i),t[b]==n&&(t[b]=r),t[w]--}return!!n},forEach:function(e){for(var t,n=a(e,arguments[1],3);t=t?t.n:this[y];)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!o(this,e)}}),r.DESC&&r.setDesc(i.prototype,"size",{get:function(){return l.def(this[w])}}),i},def:function(e,t,n){var r,a,s=o(e,t);return s?s.v=n:(e[b]=s={i:a=i(t,!0),k:t,v:n,p:r=e[b],n:void 0,r:!1},e[y]||(e[y]=s),r&&(r.n=s),e[w]++,"F"!=a&&(e[v][a]=s)),e},getEntry:o,getIterConstructor:function(){return function(e,t){d(this,_,{o:e,k:t})}},next:function(){for(var e=this[_],t=e.k,n=e.l;n&&n.r;)n=n.p;return e.o&&(e.l=n=n?n.n:e.o[y])?"key"==t?h(0,n.k):"value"==t?h(0,n.v):h(0,[n.k,n.v]):(e.o=void 0,h(1))}}},{"./$":16,"./$.assert":4,"./$.ctx":10,"./$.iter":15,"./$.uid":25}],8:[function(e,t,n){"use strict";function i(e,t){return b.call(e.array,function(e){return e[0]===t})}function o(e){return e[g]||d(e,g,{array:[],get:function(e){var t=i(this,e);if(t)return t[1]},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.array.push([e,t])},delete:function(e){var t=y.call(this.array,function(t){return t[0]===e});return~t&&this.array.splice(t,1),!!~t}})[g]}var r=e("./$"),a=e("./$.uid").safe,s=e("./$.assert"),l=e("./$.iter").forOf,u=r.has,c=r.isObject,d=r.hide,p=Object.isFrozen||r.core.Object.isFrozen,f=0,h=a("id"),m=a("weak"),g=a("leak"),v=e("./$.array-methods"),b=v(5),y=v(6);t.exports={getConstructor:function(e,t,n){function i(o){r.set(s.inst(this,i,e),h,f++),void 0!=o&&l(o,t,this[n],this)}return r.mix(i.prototype,{delete:function(e){return!!c(e)&&(p(e)?o(this).delete(e):u(e,m)&&u(e[m],this[h])&&delete e[m][this[h]])},has:function(e){return!!c(e)&&(p(e)?o(this).has(e):u(e,m)&&u(e[m],this[h]))}}),i},def:function(e,t,n){return p(s.obj(t))?o(e).set(t,n):(u(t,m)||d(t,m,{}),t[m][e[h]]=n),e},leakStore:o,WEAK:m,ID:h}},{"./$":16,"./$.array-methods":3,"./$.assert":4,"./$.iter":15,"./$.uid":25}],9:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.def"),r=e("./$.iter"),a=e("./$.assert").inst;t.exports=function(t,n,s,l,u){function c(e,t){var n=h[e];i.FW&&(h[e]=function(e,i){var o=n.call(this,0===e?0:e,i);return t?this:o})}var d=i.g[t],p=d,f=l?"set":"add",h=p&&p.prototype,m={};if(i.isFunction(p)&&(u||!r.BUGGY&&h.forEach&&h.entries)){var g,v=new p,b=v[f](u?{}:-0,1);e("./$.iter-detect")(function(e){new p(e)})||(p=function(e){a(this,p,t);var n=new d;return void 0!=e&&r.forOf(e,l,n[f],n),n},p.prototype=h,i.FW&&(h.constructor=p)),u||v.forEach(function(e,t){g=1/t==-1/0}),g&&(c("delete"),c("has"),l&&c("get")),(g||b!==v)&&c(f,!0)}else p=s.getConstructor(t,l,f),i.mix(p.prototype,n);return e("./$.cof").set(p,t),e("./$.species")(p),m[t]=p,o(o.G+o.W+o.F*(p!=d),m),u||r.std(p,t,s.getIterConstructor(),s.next,l?"key+value":"value",!l,!0),p}},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.def":11,"./$.iter":15,"./$.iter-detect":14,"./$.species":22}],10:[function(e,t,n){var i=e("./$.assert").fn;t.exports=function(e,t,n){if(i(e),~n&&void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},{"./$.assert":4}],11:[function(e,t,n){function i(e,t){return function(){return e.apply(t,arguments)}}function o(e,t,n){var u,c,d,p,f=e&o.G,h=f?a:e&o.S?a[t]:(a[t]||{}).prototype,m=f?s:s[t]||(s[t]={});f&&(n=t);for(u in n)c=!(e&o.F)&&h&&u in h,d=(c?h:n)[u],p=e&o.B&&c?i(d,a):e&o.P&&l(d)?i(Function.call,d):d,h&&!c&&(f?h[u]=d:delete h[u]&&r.hide(h,u,d)),m[u]!=d&&r.hide(m,u,p)}var r=e("./$"),a=r.g,s=r.core,l=r.isFunction;a.core=s,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},{"./$":16}],12:[function(e,t,n){t.exports=function(e){return e.FW=!0,e.path=e.g,e}},{}],13:[function(e,t,n){t.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);case 5:return i?e(t[0],t[1],t[2],t[3],t[4]):e.call(n,t[0],t[1],t[2],t[3],t[4])}return e.apply(n,t)}},{}],14:[function(e,t,n){var i=e("./$.wks")("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(e){}t.exports=function(e){if(!o)return!1;var t=!1;try{var n=[7],r=n[i]();r.next=function(){t=!0},n[i]=function(){return r},e(n)}catch(e){}return t}},{"./$.wks":27}],15:[function(e,t,n){"use strict";function i(e,t){l.hide(e,f,t),h in[]&&l.hide(e,h,t)}function o(e,t,n,o){var r=e.prototype,a=r[f]||r[h]||o&&r[o]||n;if(l.FW&&i(r,a),a!==n){var s=l.getProto(a.call(new e));c.set(s,t+" Iterator",!0),l.FW&&l.has(r,h)&&i(s,l.that)}return m[t]=a,m[t+" Iterator"]=l.that,a}function r(e){var t=l.g.Symbol,n=e[t&&t.iterator||h],i=n||e[f]||m[c.classof(e)];return p(i.call(e))}function a(e){var t=e.return;void 0!==t&&p(t.call(e))}function s(e,t,n,i){try{return i?t(p(n)[0],n[1]):t(n)}catch(t){throw a(e),t}}var l=e("./$"),u=e("./$.ctx"),c=e("./$.cof"),d=e("./$.def"),p=e("./$.assert").obj,f=e("./$.wks")("iterator"),h="@@iterator",m={},g={},v="keys"in[]&&!("next"in[].keys());i(g,l.that);var b=t.exports={BUGGY:v,Iterators:m,prototype:g,step:function(e,t){return{value:t,done:!!e}},stepCall:s,close:a,is:function(e){var t=Object(e),n=l.g.Symbol;return(n&&n.iterator||h)in t||f in t||l.has(m,c.classof(t))},get:r,set:i,create:function(e,t,n,i){e.prototype=l.create(i||b.prototype,{next:l.desc(1,n)}),c.set(e,t+" Iterator")},define:o,std:function(e,t,n,i,r,a,s){function u(e){return function(){return new n(this,e)}}b.create(n,t,i);var c,p,f=u("key+value"),h=u("value"),m=e.prototype;if("value"==r?h=o(e,t,h,"values"):f=o(e,t,f,"entries"),r&&(c={entries:f,keys:a?h:u("key"),values:h},d(d.P+d.F*v,t,c),s))for(p in c)p in m||l.hide(m,p,c[p])},forOf:function(e,t,n,i){for(var o,l=r(e),c=u(n,i,t?2:1);!(o=l.next()).done;)if(!1===s(l,c,o.value,t))return a(l)}}},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.ctx":10,"./$.def":11,"./$.wks":27}],16:[function(e,t,n){"use strict";function i(e){return isNaN(e=+e)?0:(e>0?m:h)(e)}function o(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function r(e,t,n){return e[t]=n,e}function a(e){return b?function(t,n,i){return _.setDesc(t,n,o(e,i))}:r}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function l(e){return"function"==typeof e}function u(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var c="undefined"!=typeof self?self:Function("return this")(),d={},p=Object.defineProperty,f={}.hasOwnProperty,h=Math.ceil,m=Math.floor,g=Math.max,v=Math.min,b=!!function(){try{return 2==p({},"a",{get:function(){return 2}}).a}catch(e){}}(),y=a(1),_=t.exports=e("./$.fw")({g:c,core:d,html:c.document&&document.documentElement,isObject:s,isFunction:l,it:function(e){return e},that:function(){return this},toInteger:i,toLength:function(e){return e>0?v(i(e),9007199254740991):0},toIndex:function(e,t){return e=i(e),e<0?g(e+t,0):v(e,t)},has:function(e,t){return f.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:b,desc:o,getDesc:Object.getOwnPropertyDescriptor,setDesc:p,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:u,ES5Object:Object,toObject:function(e){return _.ES5Object(u(e))},hide:y,def:a(0),set:c.Symbol?r:y,mix:function(e,t){for(var n in t)y(e,n,t[n]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=d),"undefined"!=typeof __g&&(__g=c)},{"./$.fw":12}],17:[function(e,t,n){var i=e("./$");t.exports=function(e,t){for(var n,o=i.toObject(e),r=i.getKeys(o),a=r.length,s=0;a>s;)if(o[n=r[s++]]===t)return n}},{"./$":16}],18:[function(e,t,n){var i=e("./$"),o=e("./$.assert").obj;t.exports=function(e){return o(e),i.getSymbols?i.getNames(e).concat(i.getSymbols(e)):i.getNames(e)}},{"./$":16,"./$.assert":4}],19:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.invoke"),r=e("./$.assert").fn;t.exports=function(){for(var e=r(this),t=arguments.length,n=Array(t),a=0,s=i.path._,l=!1;t>a;)(n[a]=arguments[a++])===s&&(l=!0);return function(){var i,r=this,a=arguments.length,u=0,c=0;if(!l&&!a)return o(e,n,r);if(i=n.slice(),l)for(;t>u;u++)i[u]===s&&(i[u]=arguments[c++]);for(;a>c;)i.push(arguments[c++]);return o(e,i,r)}}},{"./$":16,"./$.assert":4,"./$.invoke":13}],20:[function(e,t,n){"use strict";t.exports=function(e,t,n){var i=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(n?t:this).replace(e,i)}}},{}],21:[function(e,t,n){function i(e,t){r.obj(e),r(null===t||o.isObject(t),t,": can't set as prototype!")}var o=e("./$"),r=e("./$.assert");t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n){try{n=e("./$.ctx")(Function.call,o.getDesc(Object.prototype,"__proto__").set,2),n({},[])}catch(e){t=!0}return function(e,o){return i(e,o),t?e.__proto__=o:n(e,o),e}}():void 0),check:i}},{"./$":16,"./$.assert":4,"./$.ctx":10}],22:[function(e,t,n){var i=e("./$");t.exports=function(t){i.DESC&&i.FW&&i.setDesc(t,e("./$.wks")("species"),{configurable:!0,get:i.that})}},{"./$":16,"./$.wks":27}],23:[function(e,t,n){"use strict";var i=e("./$");t.exports=function(e){return function(t){var n,o,r=String(i.assertDefined(this)),a=i.toInteger(t),s=r.length;return a<0||a>=s?e?"":void 0:(n=r.charCodeAt(a),n<55296||n>56319||a+1===s||(o=r.charCodeAt(a+1))<56320||o>57343?e?r.charAt(a):n:e?r.slice(a,a+2):o-56320+(n-55296<<10)+65536)}}},{"./$":16}],24:[function(e,t,n){"use strict";function i(){var e=+this;if(l.has(k,e)){var t=k[e];delete k[e],t()}}function o(e){i.call(e.data)}var r,a,s,l=e("./$"),u=e("./$.ctx"),c=e("./$.cof"),d=e("./$.invoke"),p=l.g,f=l.isFunction,h=l.html,m=p.document,g=p.process,v=p.setImmediate,b=p.clearImmediate,y=p.postMessage,_=p.addEventListener,w=p.MessageChannel,C=0,k={};f(v)&&f(b)||(v=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return k[++C]=function(){d(f(e)?e:Function(e),t)},r(C),C},b=function(e){delete k[e]},"process"==c(g)?r=function(e){g.nextTick(u(i,e,1))}:_&&f(y)&&!p.importScripts?(r=function(e){y(e,"*")},_("message",o,!1)):f(w)?(a=new w,s=a.port2,a.port1.onmessage=o,r=u(s.postMessage,s,1)):r=m&&"onreadystatechange"in m.createElement("script")?function(e){h.appendChild(m.createElement("script")).onreadystatechange=function(){h.removeChild(this),i.call(e)}}:function(e){setTimeout(u(i,e,1),0)}),t.exports={set:v,clear:b}},{"./$":16,"./$.cof":6,"./$.ctx":10,"./$.invoke":13}],25:[function(e,t,n){function i(e){return"Symbol("+e+")_"+(++o+Math.random()).toString(36)}var o=0;i.safe=e("./$").g.Symbol||i,t.exports=i},{"./$":16}],26:[function(e,t,n){var i=e("./$"),o=e("./$.wks")("unscopables");!i.FW||o in[]||i.hide(Array.prototype,o,{}),t.exports=function(e){i.FW&&([][o][e]=!0)}},{"./$":16,"./$.wks":27}],27:[function(e,t,n){var i=e("./$").g,o={};t.exports=function(t){return o[t]||(o[t]=i.Symbol&&i.Symbol[t]||e("./$.uid").safe("Symbol."+t))}},{"./$":16,"./$.uid":25}],28:[function(e,t,n){function i(e,t){return function(n){var i,o=S(n),r=0,a=[];for(i in o)i!=h&&k(o,i)&&a.push(i);for(;t>r;)k(o,i=e[r++])&&(~_.call(a,i)||a.push(i));return a}}function o(e){return!u.isObject(e)}function r(){}function a(e){return function(){return e.apply(u.ES5Object(this),arguments)}}function s(e){return function(t,n){m.fn(t);var i=S(this),o=P(i.length),r=e?o-1:0,a=e?-1:1;if(arguments.length<2)for(;;){if(r in i){n=i[r],r+=a;break}r+=a,m(e?r>=0:o>r,"Reduce of empty array with no initial value")}for(;e?r>=0:o>r;r+=a)r in i&&(n=t(n,i[r],r,this));return n}}function l(e){return e>9?e:"0"+e}var u=e("./$"),c=e("./$.cof"),d=e("./$.def"),p=e("./$.invoke"),f=e("./$.array-methods"),h=e("./$.uid").safe("__proto__"),m=e("./$.assert"),g=m.obj,v=Object.prototype,b=[],y=b.slice,_=b.indexOf,w=c.classof,C=Object.defineProperties,k=u.has,x=u.setDesc,E=u.getDesc,T=u.isFunction,S=u.toObject,P=u.toLength,O=!1;if(!u.DESC){try{O=8==x(document.createElement("div"),"x",{get:function(){return 8}}).x}catch(e){}u.setDesc=function(e,t,n){if(O)try{return x(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(g(e)[t]=n.value),e},u.getDesc=function(e,t){if(O)try{return E(e,t)}catch(e){}if(k(e,t))return u.desc(!v.propertyIsEnumerable.call(e,t),e[t])},C=function(e,t){g(e);for(var n,i=u.getKeys(t),o=i.length,r=0;o>r;)u.setDesc(e,n=i[r++],t[n]);return e}}d(d.S+d.F*!u.DESC,"Object",{getOwnPropertyDescriptor:u.getDesc,defineProperty:u.setDesc,defineProperties:C});var I="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),M=I.concat("length","prototype"),A=I.length,N=function(){var e,t=document.createElement("iframe"),n=A;for(t.style.display="none",u.html.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),N=e.F;n--;)delete N.prototype[I[n]];return N()};d(d.S,"Object",{getPrototypeOf:u.getProto=u.getProto||function(e){return e=Object(m.def(e)),k(e,h)?e[h]:T(e.constructor)&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?v:null},getOwnPropertyNames:u.getNames=u.getNames||i(M,M.length),create:u.create=u.create||function(e,t){var n;return null!==e?(r.prototype=g(e),n=new r,r.prototype=null,n[h]=e):n=N(),void 0===t?n:C(n,t)},keys:u.getKeys=u.getKeys||i(I,A),seal:u.it,freeze:u.it,preventExtensions:u.it,isSealed:o,isFrozen:o,isExtensible:u.isObject}),d(d.P,"Function",{bind:function(e){function t(){var o=i.concat(y.call(arguments));return p(n,o,this instanceof t?u.create(n.prototype):e)}var n=m.fn(this),i=y.call(arguments,1);return n.prototype&&(t.prototype=n.prototype),t}}),0 in Object("z")&&"z"=="z"[0]||(u.ES5Object=function(e){return"String"==c(e)?e.split(""):Object(e)}),d(d.P+d.F*(u.ES5Object!=Object),"Array",{slice:a(y),join:a(b.join)}),d(d.S,"Array",{isArray:function(e){return"Array"==c(e)}}),d(d.P,"Array",{forEach:u.each=u.each||f(0),map:f(1),filter:f(2),some:f(3),every:f(4),reduce:s(!1),reduceRight:s(!0),indexOf:_=_||e("./$.array-includes")(!1),lastIndexOf:function(e,t){var n=S(this),i=P(n.length),o=i-1;for(arguments.length>1&&(o=Math.min(o,u.toInteger(t))),o<0&&(o=P(i+o));o>=0;o--)if(o in n&&n[o]===e)return o;return-1}}),d(d.P,"String",{trim:e("./$.replacer")(/^\s*([\s\S]*\S)?\s*$/,"$1")}),d(d.S,"Date",{now:function(){return+new Date}}),d(d.P,"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+l(e.getUTCMonth()+1)+"-"+l(e.getUTCDate())+"T"+l(e.getUTCHours())+":"+l(e.getUTCMinutes())+":"+l(e.getUTCSeconds())+"."+(n>99?n:"0"+l(n))+"Z"}}),"Object"==w(function(){return arguments}())&&(c.classof=function(e){var t=w(e);return"Object"==t&&T(e.callee)?"Arguments":t})},{"./$":16,"./$.array-includes":2,"./$.array-methods":3,"./$.assert":4,"./$.cof":6,"./$.def":11,"./$.invoke":13,"./$.replacer":20,"./$.uid":25}],29:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.def"),r=i.toIndex;o(o.P,"Array",{copyWithin:function(e,t){var n=Object(i.assertDefined(this)),o=i.toLength(n.length),a=r(e,o),s=r(t,o),l=arguments[2],u=void 0===l?o:r(l,o),c=Math.min(u-s,o-a),d=1;for(s<a&&a<s+c&&(d=-1,s=s+c-1,a=a+c-1);c-- >0;)s in n?n[a]=n[s]:delete n[a],a+=d,s+=d;return n}}),e("./$.unscope")("copyWithin")},{"./$":16,"./$.def":11,"./$.unscope":26}],30:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.def"),r=i.toIndex;o(o.P,"Array",{fill:function(e){for(var t=Object(i.assertDefined(this)),n=i.toLength(t.length),o=r(arguments[1],n),a=arguments[2],s=void 0===a?n:r(a,n);s>o;)t[o++]=e;return t}}),e("./$.unscope")("fill")},{"./$":16,"./$.def":11,"./$.unscope":26}],31:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{findIndex:e("./$.array-methods")(6)}),e("./$.unscope")("findIndex")},{"./$.array-methods":3,"./$.def":11,"./$.unscope":26}],32:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{find:e("./$.array-methods")(5)}),e("./$.unscope")("find")},{"./$.array-methods":3,"./$.def":11,"./$.unscope":26}],33:[function(e,t,n){var i=e("./$"),o=e("./$.ctx"),r=e("./$.def"),a=e("./$.iter"),s=a.stepCall;r(r.S+r.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,l,u=Object(i.assertDefined(e)),c=arguments[1],d=void 0!==c,p=d?o(c,arguments[2],2):void 0,f=0;if(a.is(u))for(l=a.get(u),n=new("function"==typeof this?this:Array);!(r=l.next()).done;f++)n[f]=d?s(l,p,[r.value,f],!0):r.value;else for(n=new("function"==typeof this?this:Array)(t=i.toLength(u.length));t>f;f++)n[f]=d?p(u[f],f):u[f];return n.length=f,n}})},{"./$":16,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.iter-detect":14}],34:[function(e,t,n){var i=e("./$"),o=e("./$.unscope"),r=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step,l=a.Iterators;a.std(Array,"Array",function(e,t){i.set(this,r,{o:i.toObject(e),i:0,k:t})},function(){var e=this[r],t=e.o,n=e.k,i=e.i++;return!t||i>=t.length?(e.o=void 0,s(1)):"key"==n?s(0,i):"value"==n?s(0,t[i]):s(0,[i,t[i]])},"value"),l.Arguments=l.Array,o("keys"),o("values"),o("entries")},{"./$":16,"./$.iter":15,"./$.uid":25,"./$.unscope":26}],35:[function(e,t,n){var i=e("./$.def");i(i.S,"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)n[e]=arguments[e++];return n.length=t,n}})},{"./$.def":11}],36:[function(e,t,n){e("./$.species")(Array)},{"./$.species":22}],37:[function(e,t,n){"use strict";var i=e("./$"),o=i.setDesc,r=Function.prototype;"name"in r||i.FW&&i.DESC&&o(r,"name",{configurable:!0,get:function(){var e=String(this).match(/^\s*function ([^ (]*)/),t=e?e[1]:"";return i.has(this,"name")||o(this,"name",i.desc(5,t)),t},set:function(e){i.has(this,"name")||o(this,"name",i.desc(0,e))}})},{"./$":16}],38:[function(e,t,n){"use strict";var i=e("./$.collection-strong");e("./$.collection")("Map",{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},{"./$.collection":9,"./$.collection-strong":7}],39:[function(e,t,n){function i(e){return e+1/g-1/g}function o(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):p(e+f(e*e+1)):e}function a(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:d(e)-1}var s=e("./$.def"),l=Math.E,u=Math.pow,c=Math.abs,d=Math.exp,p=Math.log,f=Math.sqrt,h=Math.ceil,m=Math.floor,g=u(2,-52),v=u(2,-23),b=u(2,127)*(2-v),y=u(2,-126);s(s.S,"Math",{acosh:function(e){return(e=+e)<1?NaN:isFinite(e)?p(e/l+f(e+1)*f(e-1)/l)+1:e},asinh:r,atanh:function(e){return 0==(e=+e)?e:p((1+e)/(1-e))/2},cbrt:function(e){return o(e=+e)*u(c(e),1/3)},clz32:function(e){return(e>>>=0)?31-m(p(e+.5)*Math.LOG2E):32},cosh:function(e){return(d(e=+e)+d(-e))/2},expm1:a,fround:function(e){var t,n,r=c(e),a=o(e);return r<y?a*i(r/y/v)*y*v:(t=(1+v/g)*r,n=t-(t-r),n>b||n!=n?a*(1/0):a*n)},hypot:function(e,t){for(var n,i=0,o=arguments.length,r=o,a=Array(o),s=-1/0;o--;){if((n=a[o]=+arguments[o])==1/0||n==-1/0)return 1/0;n>s&&(s=n)}for(s=n||1;r--;)i+=u(a[r]/s,2);return s*f(i)},imul:function(e,t){var n=+e,i=+t,o=65535&n,r=65535&i;return 0|o*r+((65535&n>>>16)*r+o*(65535&i>>>16)<<16>>>0)},log1p:function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:p(1+e)},log10:function(e){return p(e)/Math.LN10},log2:function(e){return p(e)/Math.LN2},sign:o,sinh:function(e){return c(e=+e)<1?(a(e)-a(-e))/2:(d(e-1)-d(-e-1))*(l/2)},tanh:function(e){var t=a(e=+e),n=a(-e);return t==1/0?1:n==1/0?-1:(t-n)/(d(e)+d(-e))},trunc:function(e){return(e>0?m:h)(e)}})},{"./$.def":11}],40:[function(e,t,n){"use strict";function i(e){var t,n;if(s(t=e.valueOf)&&!a(n=t.call(e)))return n;if(s(t=e.toString)&&!a(n=t.call(e)))return n;throw TypeError("Can't convert object to number")}function o(e){if(a(e)&&(e=i(e)),"string"==typeof e&&e.length>2&&48==e.charCodeAt(0)){var t=!1;switch(e.charCodeAt(1)){case 66:case 98:t=!0;case 79:case 111:return parseInt(e.slice(2),t?2:8)}}return+e}var r=e("./$"),a=r.isObject,s=r.isFunction,l=r.g.Number,u=l,c=l.prototype;!r.FW||l("0o1")&&l("0b1")||(l=function e(t){return this instanceof e?new u(o(t)):o(t)},r.each.call(r.DESC?r.getNames(u):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(e){r.has(u,e)&&!r.has(l,e)&&r.setDesc(l,e,r.getDesc(u,e))}),l.prototype=c,c.constructor=l,r.hide(r.g,"Number",l))},{"./$":16}],41:[function(e,t,n){function i(e){return!o.isObject(e)&&l(e)&&s(e)===e}var o=e("./$"),r=e("./$.def"),a=Math.abs,s=Math.floor,l=o.g.isFinite;r(r.S,"Number",{EPSILON:Math.pow(2,-52),isFinite:function(e){return"number"==typeof e&&l(e)},isInteger:i,isNaN:function(e){return e!=e},isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991},MAX_SAFE_INTEGER:9007199254740991,MIN_SAFE_INTEGER:-9007199254740991,parseFloat:parseFloat,parseInt:parseInt})},{"./$":16,"./$.def":11}],42:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{assign:e("./$.assign")})},{"./$.assign":5,"./$.def":11}],43:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})},{"./$.def":11}],44:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.def":11,"./$.set-proto":21}],45:[function(e,t,n){function i(e,t){var n=(o.core.Object||{})[e]||Object[e],i=0,l={};l[e]=1==t?function(e){return a(e)?n(e):e}:2==t?function(e){return!a(e)||n(e)}:3==t?function(e){return!!a(e)&&n(e)}:4==t?function(e,t){return n(s(e),t)}:5==t?function(e){return n(Object(o.assertDefined(e)))}:function(e){return n(s(e))};try{n("z")}catch(e){i=1}r(r.S+r.F*i,"Object",l)}var o=e("./$"),r=e("./$.def"),a=o.isObject,s=o.toObject;i("freeze",1),i("seal",1),i("preventExtensions",1),i("isFrozen",2),i("isSealed",2),i("isExtensible",3),i("getOwnPropertyDescriptor",4),i("getPrototypeOf",5),i("keys"),i("getOwnPropertyNames")},{"./$":16,"./$.def":11}],46:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.cof"),r={};r[e("./$.wks")("toStringTag")]="z",i.FW&&"z"!=o(r)&&i.hide(Object.prototype,"toString",function(){return"[object "+o.classof(this)+"]"})},{"./$":16,"./$.cof":6,"./$.wks":27}],47:[function(e,t,n){"use strict";function i(e){var t=P(e)[g];return void 0!=t?t:e}function o(e){var t;return T(e)&&(t=e.then),!!E(t)&&t}function r(e){var t,n=e[v],i=n.c,o=0;if(n.h)return!1;for(;i.length>o;)if(t=i[o++],t.fail||!r(t.P))return!1;return!0}function a(e,t){var n=e.c;(t||n.length)&&C(function(){var i=e.p,a=e.v,s=1==e.s,l=0;if(t&&r(i))setTimeout(function(){r(i)&&("process"==p(w)?w.emit("unhandledRejection",a,i):_.console&&E(console.error)&&console.error("Unhandled promise rejection",a))},1e3);else for(;n.length>l;)!function(t){var n,i,r=s?t.ok:t.fail;try{r?(s||(e.h=!0),n=!0===r?a:r(a),n===t.P?t.rej(TypeError(y+"-chain cycle")):(i=o(n))?i.call(n,t.res,t.rej):t.res(n)):t.rej(a)}catch(e){t.rej(e)}}(n[l++]);n.length=0})}function s(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,a(t,!0))}function l(e){var t,n,i=this;if(!i.d){i.d=!0,i=i.r||i;try{(t=o(e))?(n={r:i,d:!1},t.call(e,d(l,n,1),d(s,n,1))):(i.v=e,i.s=1,a(i))}catch(e){s.call(n||{r:i,d:!1},e)}}}var u,c=e("./$"),d=e("./$.ctx"),p=e("./$.cof"),f=e("./$.def"),h=e("./$.assert"),m=e("./$.iter"),g=e("./$.wks")("species"),v=e("./$.uid").safe("record"),b=m.forOf,y="Promise",_=c.g,w=_.process,C=w&&w.nextTick||e("./$.task").set,k=_[y],x=k,E=c.isFunction,T=c.isObject,S=h.fn,P=h.obj;E(k)&&E(k.resolve)&&k.resolve(u=new k(function(){}))==u||(k=function(e){S(e);var t={p:h.inst(this,k,y),c:[],s:0,d:!1,v:void 0,h:!1};c.hide(this,v,t);try{e(d(l,t,1),d(s,t,1))}catch(e){s.call(t,e)}},c.mix(k.prototype,{then:function(e,t){var n=P(P(this).constructor)[g],i={ok:!E(e)||e,fail:!!E(t)&&t},o=i.P=new(void 0!=n?n:k)(function(e,t){i.res=S(e),i.rej=S(t)}),r=this[v];return r.c.push(i),r.s&&a(r),o},catch:function(e){return this.then(void 0,e)}})),f(f.G+f.W+f.F*(k!=x),{Promise:k}),p.set(k,y),e("./$.species")(k),f(f.S,y,{reject:function(e){return new(i(this))(function(t,n){n(e)})},resolve:function(e){return T(e)&&v in e&&c.getProto(e)===this.prototype?e:new(i(this))(function(t){t(e)})}}),f(f.S+f.F*!e("./$.iter-detect")(function(e){k.all(e).catch(function(){})}),y,{all:function(e){var t=i(this),n=[];return new t(function(i,o){b(e,!1,n.push,n);var r=n.length,a=Array(r);r?c.each.call(n,function(e,n){t.resolve(e).then(function(e){a[n]=e,--r||i(a)},o)}):i(a)})},race:function(e){var t=i(this);return new t(function(n,i){b(e,!1,function(e){t.resolve(e).then(n,i)})})}})},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.iter-detect":14,"./$.species":22,"./$.task":24,"./$.uid":25,"./$.wks":27}],48:[function(e,t,n){function i(e){var t,n=[];for(t in e)n.push(t);s.set(this,d,{o:e,a:n,i:0})}function o(e){return function(t){y(t);try{return e.apply(void 0,arguments),!0}catch(e){return!1}}}function r(e,t){var n,i=arguments.length<3?e:arguments[2],o=m(y(e),t);return o?s.has(o,"value")?o.value:void 0===o.get?void 0:o.get.call(i):h(n=v(e))?r(n,t,i):void 0}function a(e,t,n){var i,o,r=arguments.length<4?e:arguments[3],l=m(y(e),t);if(!l){if(h(o=v(e)))return a(o,t,n,r);l=s.desc(0)}return s.has(l,"value")?!(!1===l.writable||!h(r))&&(i=m(r,t)||s.desc(0),i.value=n,g(r,t,i),!0):void 0!==l.set&&(l.set.call(r,n),!0)}var s=e("./$"),l=e("./$.def"),u=e("./$.set-proto"),c=e("./$.iter"),d=e("./$.uid").safe("iter"),p=c.step,f=e("./$.assert"),h=s.isObject,m=s.getDesc,g=s.setDesc,v=s.getProto,b=Function.apply,y=f.obj,_=Object.isExtensible||s.it;c.create(i,"Object",function(){var e,t=this[d],n=t.a;do{if(t.i>=n.length)return p(1)}while(!((e=n[t.i++])in t.o));return p(0,e)});var w={apply:e("./$.ctx")(Function.call,b,3),construct:function(e,t){var n=f.fn(arguments.length<3?e:arguments[2]).prototype,i=s.create(h(n)?n:Object.prototype),o=b.call(e,i,t);return h(o)?o:i},defineProperty:o(g),deleteProperty:function(e,t){var n=m(y(e),t);return!(n&&!n.configurable)&&delete e[t]},enumerate:function(e){return new i(y(e))},get:r,getOwnPropertyDescriptor:function(e,t){return m(y(e),t)},getPrototypeOf:function(e){return v(y(e))},has:function(e,t){return t in e},isExtensible:function(e){return!!_(y(e))},ownKeys:e("./$.own-keys"),preventExtensions:o(Object.preventExtensions||s.it),set:a};u&&(w.setPrototypeOf=function(e,t){u.check(e,t);try{return u.set(e,t),!0}catch(e){return!1}}),l(l.G,{Reflect:{}}),l(l.S,"Reflect",w)},{"./$":16,"./$.assert":4,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.own-keys":18,"./$.set-proto":21,"./$.uid":25}],49:[function(e,t,n){var i=e("./$"),o=e("./$.cof"),r=i.g.RegExp,a=r,s=r.prototype;i.FW&&i.DESC&&(function(){try{return"/a/i"==r(/a/g,"i")}catch(e){}}()||(r=function(e,t){return new a("RegExp"==o(e)&&void 0!==t?e.source:e,t)},i.each.call(i.getNames(a),function(e){e in r||i.setDesc(r,e,{configurable:!0,get:function(){return a[e]},set:function(t){a[e]=t}})}),s.constructor=r,r.prototype=s,i.hide(i.g,"RegExp",r)),"g"!=/./g.flags&&i.setDesc(s,"flags",{configurable:!0,get:e("./$.replacer")(/^.*\/(\w*)$/,"$1")})),e("./$.species")(r)},{"./$":16,"./$.cof":6,"./$.replacer":20,"./$.species":22}],50:[function(e,t,n){"use strict";var i=e("./$.collection-strong");e("./$.collection")("Set",{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},{"./$.collection":9,"./$.collection-strong":7}],51:[function(e,t,n){var i=e("./$.def");i(i.P,"String",{codePointAt:e("./$.string-at")(!1)})},{"./$.def":11,"./$.string-at":23}],52:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.cof"),r=e("./$.def"),a=i.toLength;r(r.P,"String",{endsWith:function(e){if("RegExp"==o(e))throw TypeError();var t=String(i.assertDefined(this)),n=arguments[1],r=a(t.length),s=void 0===n?r:Math.min(a(n),r);return e+="",t.slice(s-e.length,s)===e}})},{"./$":16,"./$.cof":6,"./$.def":11}],53:[function(e,t,n){var i=e("./$.def"),o=e("./$").toIndex,r=String.fromCharCode;i(i.S,"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,a=0;i>a;){if(t=+arguments[a++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},{"./$":16,"./$.def":11}],54:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.cof"),r=e("./$.def");r(r.P,"String",{includes:function(e){if("RegExp"==o(e))throw TypeError();return!!~String(i.assertDefined(this)).indexOf(e,arguments[1])}})},{"./$":16,"./$.cof":6,"./$.def":11}],55:[function(e,t,n){var i=e("./$").set,o=e("./$.string-at")(!0),r=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step;a.std(String,"String",function(e){i(this,r,{o:String(e),i:0})},function(){var e,t=this[r],n=t.o,i=t.i;return i>=n.length?s(1):(e=o.call(n,i),t.i+=e.length,s(0,e))})},{"./$":16,"./$.iter":15,"./$.string-at":23,"./$.uid":25}],56:[function(e,t,n){var i=e("./$"),o=e("./$.def");o(o.S,"String",{raw:function(e){for(var t=i.toObject(e.raw),n=i.toLength(t.length),o=arguments.length,r=[],a=0;n>a;)r.push(String(t[a++])),a<o&&r.push(String(arguments[a]));return r.join("")}})},{"./$":16,"./$.def":11}],57:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.def");o(o.P,"String",{repeat:function(e){var t=String(i.assertDefined(this)),n="",o=i.toInteger(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}})},{"./$":16,"./$.def":11}],58:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.cof"),r=e("./$.def");r(r.P,"String",{startsWith:function(e){if("RegExp"==o(e))throw TypeError();var t=String(i.assertDefined(this)),n=i.toLength(Math.min(arguments[1],t.length));return e+="",t.slice(n,n+e.length)===e}})},{"./$":16,"./$.cof":6,"./$.def":11}],59:[function(e,t,n){"use strict";function i(e){var t=b[e]=o.set(o.create(f.prototype),g,e);return o.DESC&&m&&o.setDesc(Object.prototype,e,{configurable:!0,set:function(t){c(this,e,t)}}),t}var o=e("./$"),r=e("./$.cof").set,a=e("./$.uid"),s=e("./$.def"),l=e("./$.keyof"),u=o.has,c=o.hide,d=o.getNames,p=o.toObject,f=o.g.Symbol,h=f,m=!1,g=a.safe("tag"),v={},b={};o.isFunction(f)||(f=function e(t){if(this instanceof e)throw TypeError("Symbol is not a constructor");return i(a(t))},c(f.prototype,"toString",function(){return this[g]})),s(s.G+s.W,{Symbol:f});var y={for:function(e){return u(v,e+="")?v[e]:v[e]=f(e)},keyFor:function(e){return l(v,e)},pure:a.safe,set:o.set,useSetter:function(){m=!0},useSimple:function(){m=!1}};o.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var n=e("./$.wks")(t);y[t]=f===h?n:i(n)}),m=!0,s(s.S,"Symbol",y),s(s.S+s.F*(f!=h),"Object",{getOwnPropertyNames:function(e){for(var t,n=d(p(e)),i=[],o=0;n.length>o;)u(b,t=n[o++])||i.push(t);return i},getOwnPropertySymbols:function(e){for(var t,n=d(p(e)),i=[],o=0;n.length>o;)u(b,t=n[o++])&&i.push(b[t]);return i}}),r(f,"Symbol"),r(Math,"Math",!0),r(o.g.JSON,"JSON",!0)},{"./$":16,"./$.cof":6,"./$.def":11,"./$.keyof":17,"./$.uid":25,"./$.wks":27}],60:[function(e,t,n){"use strict";var i=e("./$"),o=e("./$.collection-weak"),r=o.leakStore,a=o.ID,s=o.WEAK,l=i.has,u=i.isObject,c=Object.isFrozen||i.core.Object.isFrozen,d={},p=e("./$.collection")("WeakMap",{get:function(e){
if(u(e)){if(c(e))return r(this).get(e);if(l(e,s))return e[s][this[a]]}},set:function(e,t){return o.def(this,e,t)}},o,!0,!0);i.FW&&7!=(new p).set((Object.freeze||Object)(d),7).get(d)&&i.each.call(["delete","has","get","set"],function(e){var t=p.prototype[e];p.prototype[e]=function(n,i){if(u(n)&&c(n)){var o=r(this)[e](n,i);return"set"==e?this:o}return t.call(this,n,i)}})},{"./$":16,"./$.collection":9,"./$.collection-weak":8}],61:[function(e,t,n){"use strict";var i=e("./$.collection-weak");e("./$.collection")("WeakSet",{add:function(e){return i.def(this,e,!0)}},i,!1,!0)},{"./$.collection":9,"./$.collection-weak":8}],62:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{includes:e("./$.array-includes")(!0)}),e("./$.unscope")("includes")},{"./$.array-includes":2,"./$.def":11,"./$.unscope":26}],63:[function(e,t,n){var i=e("./$"),o=e("./$.def"),r=e("./$.own-keys");o(o.S,"Object",{getOwnPropertyDescriptors:function(e){var t=i.toObject(e),n={};return i.each.call(r(t),function(e){i.setDesc(n,e,i.desc(0,i.getDesc(t,e)))}),n}})},{"./$":16,"./$.def":11,"./$.own-keys":18}],64:[function(e,t,n){function i(e){return function(t){var n,i=o.toObject(t),r=o.getKeys(t),a=r.length,s=0,l=Array(a);if(e)for(;a>s;)l[s]=[n=r[s++],i[n]];else for(;a>s;)l[s]=i[r[s++]];return l}}var o=e("./$"),r=e("./$.def");r(r.S,"Object",{values:i(!1),entries:i(!0)})},{"./$":16,"./$.def":11}],65:[function(e,t,n){var i=e("./$.def");i(i.S,"RegExp",{escape:e("./$.replacer")(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",!0)})},{"./$.def":11,"./$.replacer":20}],66:[function(e,t,n){var i=e("./$.def"),o=e("./$.iter").forOf;i(i.P,"Set",{toJSON:function(){var e=[];return o(this,!1,e.push,e),e}})},{"./$.def":11,"./$.iter":15}],67:[function(e,t,n){var i=e("./$.def");i(i.P,"String",{at:e("./$.string-at")(!0)})},{"./$.def":11,"./$.string-at":23}],68:[function(e,t,n){function i(t,n){o.each.call(t.split(","),function(t){void 0==n&&t in a?s[t]=a[t]:t in[]&&(s[t]=e("./$.ctx")(Function.call,[][t],n))})}var o=e("./$"),r=e("./$.def"),a=o.core.Array||Array,s={};i("pop,reverse,shift,keys,values,entries",1),i("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),i("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill,turn"),r(r.S,"Array",s)},{"./$":16,"./$.ctx":10,"./$.def":11}],69:[function(e,t,n){e("./es6.array.iterator");var i=e("./$"),o=e("./$.iter").Iterators,r=e("./$.wks")("iterator"),a=i.g.NodeList;!i.FW||!a||r in a.prototype||i.hide(a.prototype,r,o.Array),o.NodeList=o.Array},{"./$":16,"./$.iter":15,"./$.wks":27,"./es6.array.iterator":34}],70:[function(e,t,n){var i=e("./$.def"),o=e("./$.task");i(i.G+i.B,{setImmediate:o.set,clearImmediate:o.clear})},{"./$.def":11,"./$.task":24}],71:[function(e,t,n){function i(e){return l?function(t,n){return e(a(s,[].slice.call(arguments,2),o.isFunction(t)?t:Function(t)),n)}:e}var o=e("./$"),r=e("./$.def"),a=e("./$.invoke"),s=e("./$.partial"),l=!!o.g.navigator&&/MSIE .\./.test(navigator.userAgent);r(r.G+r.B+r.F*l,{setTimeout:i(o.g.setTimeout),setInterval:i(o.g.setInterval)})},{"./$":16,"./$.def":11,"./$.invoke":13,"./$.partial":19}],72:[function(e,t,n){e("./modules/es5"),e("./modules/es6.symbol"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.object.statics-accept-primitives"),e("./modules/es6.function.name"),e("./modules/es6.number.constructor"),e("./modules/es6.number.statics"),e("./modules/es6.math"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.iterator"),e("./modules/es6.array.species"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.regexp"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.reflect"),e("./modules/es7.array.includes"),e("./modules/es7.string.at"),e("./modules/es7.regexp.escape"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.to-array"),e("./modules/es7.set.to-json"),e("./modules/js.array.statics"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/$").core},{"./modules/$":16,"./modules/es5":28,"./modules/es6.array.copy-within":29,"./modules/es6.array.fill":30,"./modules/es6.array.find":32,"./modules/es6.array.find-index":31,"./modules/es6.array.from":33,"./modules/es6.array.iterator":34,"./modules/es6.array.of":35,"./modules/es6.array.species":36,"./modules/es6.function.name":37,"./modules/es6.map":38,"./modules/es6.math":39,"./modules/es6.number.constructor":40,"./modules/es6.number.statics":41,"./modules/es6.object.assign":42,"./modules/es6.object.is":43,"./modules/es6.object.set-prototype-of":44,"./modules/es6.object.statics-accept-primitives":45,"./modules/es6.object.to-string":46,"./modules/es6.promise":47,"./modules/es6.reflect":48,"./modules/es6.regexp":49,"./modules/es6.set":50,"./modules/es6.string.code-point-at":51,"./modules/es6.string.ends-with":52,"./modules/es6.string.from-code-point":53,"./modules/es6.string.includes":54,"./modules/es6.string.iterator":55,"./modules/es6.string.raw":56,"./modules/es6.string.repeat":57,"./modules/es6.string.starts-with":58,"./modules/es6.symbol":59,"./modules/es6.weak-map":60,"./modules/es6.weak-set":61,"./modules/es7.array.includes":62,"./modules/es7.object.get-own-property-descriptors":63,"./modules/es7.object.to-array":64,"./modules/es7.regexp.escape":65,"./modules/es7.set.to-json":66,"./modules/es7.string.at":67,"./modules/js.array.statics":68,"./modules/web.dom.iterable":69,"./modules/web.immediate":70,"./modules/web.timers":71}],73:[function(e,t,n){(function(e){!function(e){"use strict";function n(e,t,n,i){var r=Object.create((t||o).prototype);return r._invoke=s(e,n||null,new d(i||[])),r}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function r(){}function a(){}function s(e,t,n){var o=y;return function(r,a){if(o===w)throw new Error("Generator is already running");if(o===C)return f();for(;;){var s=n.delegate;if(s){if("return"===r||"throw"===r&&s.iterator.throw===h){n.delegate=null;var l=s.iterator.return;if(l){var u=i(l,s.iterator,a);if("throw"===u.type){r="throw",a=u.arg;continue}}if("return"===r)continue}var u=i(s.iterator[r],s.iterator,a);if("throw"===u.type){n.delegate=null,r="throw",a=u.arg;continue}r="next",a=h;var c=u.arg;if(!c.done)return o=_,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===r)o===_?n.sent=a:delete n.sent;else if("throw"===r){if(o===y)throw o=C,a;n.dispatchException(a)&&(r="next",a=h)}else"return"===r&&n.abrupt("return",a);o=w;var u=i(e,t,n);if("normal"===u.type){o=n.done?C:_;var c={value:u.arg,done:n.done};if(u.arg!==k)return c;n.delegate&&"next"===r&&(a=h)}else"throw"===u.type&&(o=C,r="throw",a=u.arg)}}}function l(e){x[e]=function(t){return this._invoke(e,t)}}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function c(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset()}function p(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=h,t.done=!0,t};return i.next=i}}return{next:f}}function f(){return{value:h,done:!0}}var h,m=Object.prototype.hasOwnProperty,g="function"==typeof Symbol&&Symbol.iterator||"@@iterator",v="object"==typeof t,b=e.regeneratorRuntime;if(b)return void(v&&(t.exports=b));b=e.regeneratorRuntime=v?t.exports:{},b.wrap=n;var y="suspendedStart",_="suspendedYield",w="executing",C="completed",k={},x=a.prototype=o.prototype;r.prototype=x.constructor=a,a.constructor=r,r.displayName="GeneratorFunction",b.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))},b.mark=function(e){return e.__proto__=a,e.prototype=Object.create(x),e},b.async=function(e,t,o,r){return new Promise(function(a,s){function l(e,t){var n=i(u[e],u,t);if("throw"===n.type)return void s(n.arg);var o=n.arg;o.done?a(o.value):Promise.resolve(o.value).then(c,d)}var u=n(e,t,o,r),c=l.bind(u,"next"),d=l.bind(u,"throw");c()})},l("next"),l("throw"),l("return"),x[g]=function(){return this},x.toString=function(){return"[object Generator]"},b.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},b.values=p,d.prototype={constructor:d,reset:function(){this.prev=0,this.next=0,this.sent=h,this.done=!1,this.delegate=null,this.tryEntries.forEach(c);for(var e,t=0;m.call(this,e="t"+t)||t<20;++t)this[e]=null},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return r.type="throw",r.arg=e,n.next=t,!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),s=m.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&m.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?this.next=o.finallyLoc:this.complete(r),k},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t),k},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc)}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;c(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},k}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),define("lib/babel-polyfill/browser-polyfill",function(){}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=re.type(e);return"function"!==n&&!re.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(re.isFunction(t))return re.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return re.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return re.filter(t,e,n);t=re.filter(t,e)}return re.grep(e,function(e){return Z.call(t,e)>-1!==n})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t={};return re.each(e.match(_e)||[],function(e,n){t[n]=!0}),t}function a(){Y.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),re.ready()}function s(){this.expando=re.expando+s.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Se,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Te.test(n)?re.parseJSON(n):n)}catch(e){}Ee.set(e,t,n)}else n=void 0;return n}function u(e,t,n,i){var o,r=1,a=20,s=i?function(){return i.cur()}:function(){return re.css(e,t,"")},l=s(),u=n&&n[3]||(re.cssNumber[t]?"":"px"),c=(re.cssNumber[t]||"px"!==u&&+l)&&Oe.exec(re.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do{r=r||".5",c/=r,re.style(e,t,c+u)}while(r!==(r=s()/l)&&1!==r&&--a)}return n&&(c=+c||+l||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=o)),o}function c(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&re.nodeName(e,t)?re.merge([e],n):n}function d(e,t){for(var n=0,i=e.length;i>n;n++)xe.set(e[n],"globalEval",!t||xe.get(t[n],"globalEval"))}function p(e,t,n,i,o){for(var r,a,s,l,u,p,f=t.createDocumentFragment(),h=[],m=0,g=e.length;g>m;m++)if((r=e[m])||0===r)if("object"===re.type(r))re.merge(h,r.nodeType?[r]:r);else if(De.test(r)){for(a=a||f.appendChild(t.createElement("div")),s=(Ne.exec(r)||["",""])[1].toLowerCase(),l=Le[s]||Le._default,a.innerHTML=l[1]+re.htmlPrefilter(r)+l[2],p=l[0];p--;)a=a.lastChild;re.merge(h,a.childNodes),a=f.firstChild,a.textContent=""}else h.push(t.createTextNode(r));for(f.textContent="",m=0;r=h[m++];)if(i&&re.inArray(r,i)>-1)o&&o.push(r);else if(u=re.contains(r.ownerDocument,r),a=c(f.appendChild(r),"script"),u&&d(a),n)for(p=0;r=a[p++];)je.test(r.type||"")&&n.push(r);return f}function f(){return!0}function h(){return!1}function m(){try{return Y.activeElement}catch(e){}}function g(e,t,n,i,o,r){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)g(e,s,n,i,t[s],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=h;else if(!o)return e;return 1===r&&(a=o,o=function(e){return re().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=re.guid++)),e.each(function(){re.event.add(this,t,o,i,n)})}function v(e,t){return re.nodeName(e,"table")&&re.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function y(e){var t=ze.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){var n,i,o,r,a,s,l,u;if(1===t.nodeType){if(xe.hasData(e)&&(r=xe.access(e),a=xe.set(t,r),u=r.events)){delete a.handle,a.events={};for(o in u)for(n=0,i=u[o].length;i>n;n++)re.event.add(t,o,u[o][n])}Ee.hasData(e)&&(s=Ee.access(e),l=re.extend({},s),Ee.set(t,l))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ae.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function C(e,t,n,i){t=X.apply([],t);var o,r,a,s,l,u,d=0,f=e.length,h=f-1,m=t[0],g=re.isFunction(m);if(g||f>1&&"string"==typeof m&&!ie.checkClone&&$e.test(m))return e.each(function(o){var r=e.eq(o);g&&(t[0]=m.call(this,o,r.html())),C(r,t,n,i)});if(f&&(o=p(t,e[0].ownerDocument,!1,e,i),r=o.firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=re.map(c(o,"script"),b),s=a.length;f>d;d++)l=o,d!==h&&(l=re.clone(l,!0,!0),s&&re.merge(a,c(l,"script"))),n.call(e[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,re.map(a,y),d=0;s>d;d++)l=a[d],je.test(l.type||"")&&!xe.access(l,"globalEval")&&re.contains(u,l)&&(l.src?re._evalUrl&&re._evalUrl(l.src):re.globalEval(l.textContent.replace(We,"")))}return e}function k(e,t,n){for(var i,o=t?re.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||re.cleanData(c(i)),i.parentNode&&(n&&re.contains(i.ownerDocument,i)&&d(c(i,"script")),i.parentNode.removeChild(i));return e}function x(e,t){var n=re(t.createElement(e)).appendTo(t.body),i=re.css(n[0],"display");return n.detach(),i}function E(e){var t=Y,n=Ge[e];return n||(n=x(e,t),"none"!==n&&n||(Ve=(Ve||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ve[0].contentDocument,t.write(),t.close(),n=x(e,t),Ve.detach()),Ge[e]=n),n}function T(e,t,n){var i,o,r,a,s=e.style;return n=n||Ye(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||re.contains(e.ownerDocument,e)||(a=re.style(e,t)),n&&!ie.pixelMarginRight()&&Ke.test(a)&&qe.test(t)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r),void 0!==a?a+"":a}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e){if(e in nt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}function O(e,t,n){var i=Oe.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function I(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===n&&(a+=re.css(e,n+Ie[r],!0,o)),i?("content"===n&&(a-=re.css(e,"padding"+Ie[r],!0,o)),"margin"!==n&&(a-=re.css(e,"border"+Ie[r]+"Width",!0,o))):(a+=re.css(e,"padding"+Ie[r],!0,o),"padding"!==n&&(a+=re.css(e,"border"+Ie[r]+"Width",!0,o)));return a}function M(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=Ye(e),a="border-box"===re.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=T(e,t,r),(0>o||null==o)&&(o=e.style[t]),Ke.test(o))return o;i=a&&(ie.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+I(e,t,n||(a?"border":"content"),i,r)+"px"}function A(e,t){for(var n,i,o,r=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(r[a]=xe.get(i,"olddisplay"),n=i.style.display,t?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Me(i)&&(r[a]=xe.access(i,"olddisplay",E(i.nodeName)))):(o=Me(i),"none"===n&&o||xe.set(i,"olddisplay",o?n:re.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function N(e,t,n,i,o){return new N.prototype.init(e,t,n,i,o)}function j(){return e.setTimeout(function(){it=void 0}),it=re.now()}function L(e,t){var n,i=0,o={height:e};for(t=t?1:0;4>i;i+=2-t)n=Ie[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function D(e,t,n){for(var i,o=(B.tweeners[t]||[]).concat(B.tweeners["*"]),r=0,a=o.length;a>r;r++)if(i=o[r].call(n,t,e))return i}function R(e,t,n){var i,o,r,a,s,l,u,c=this,d={},p=e.style,f=e.nodeType&&Me(e),h=xe.get(e,"fxshow");n.queue||(s=re._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,re.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=re.css(e,"display"),"inline"===("none"===u?xe.get(e,"olddisplay")||E(e.nodeName):u)&&"none"===re.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],rt.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!h||void 0===h[i])continue;f=!0}d[i]=h&&h[i]||re.style(e,i)}else u=void 0;if(re.isEmptyObject(d))"inline"===("none"===u?E(e.nodeName):u)&&(p.display=u);else{h?"hidden"in h&&(f=h.hidden):h=xe.access(e,"fxshow",{}),r&&(h.hidden=!f),f?re(e).show():c.done(function(){re(e).hide()}),c.done(function(){var t;xe.remove(e,"fxshow");for(t in d)re.style(e,t,d[t])});for(i in d)a=D(f?h[i]:0,i,c),i in h||(h[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function F(e,t){var n,i,o,r,a;for(n in e)if(i=re.camelCase(n),o=t[i],r=e[n],re.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(a=re.cssHooks[i])&&"expand"in a){r=a.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function B(e,t,n){var i,o,r=0,a=B.prefilters.length,s=re.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=it||j(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,r=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(r);return s.notifyWith(e,[u,r,n]),1>r&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{},easing:re.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||j(),duration:n.duration,tweens:[],createTween:function(t,n){var i=re.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(F(c,u.opts.specialEasing);a>r;r++)if(i=B.prefilters[r].call(u,e,c,u.opts))return re.isFunction(i.stop)&&(re._queueHooks(u.elem,u.opts.queue).stop=re.proxy(i.stop,i)),i;return re.map(c,D,u),re.isFunction(u.opts.start)&&u.opts.start.call(e,u),re.fx.timer(re.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function U(e){return e.getAttribute&&e.getAttribute("class")||""}function H(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(_e)||[];if(re.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function $(e,t,n,i){function o(s){var l;return r[s]=!0,re.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}var r={},a=e===Et;return o(t.dataTypes[0])||!r["*"]&&o("*")}function z(e,t){var n,i,o=re.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&re.extend(!0,e,i),e}function W(e,t,n){for(var i,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function V(e,t,n,i){var o,r,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(r=c.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=u[l+" "+r]||u["* "+r]))for(o in u)if(s=o.split(" "),s[1]===r&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[o]:!0!==u[o]&&(r=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function G(e,t,n,i){var o;if(re.isArray(t))re.each(t,function(t,o){n||Ot.test(e)?i(e,o):G(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==re.type(t))i(e,t);else for(o in t)G(e+"["+o+"]",t[o],n,i)}function q(e){return re.isWindow(e)?e:9===e.nodeType&&e.defaultView}var K=[],Y=e.document,Q=K.slice,X=K.concat,J=K.push,Z=K.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},oe="2.2.4",re=function(e,t){return new re.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};re.fn=re.prototype={jquery:oe,constructor:re,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return re.each(this,e)},map:function(e){return this.pushStack(re.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:J,sort:K.sort,splice:K.splice},re.extend=re.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||re.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(re.isPlainObject(i)||(o=re.isArray(i)))?(o?(o=!1,r=n&&re.isArray(n)?n:[]):r=n&&re.isPlainObject(n)?n:{},a[t]=re.extend(u,r,i)):void 0!==i&&(a[t]=i));return a},re.extend({expando:"jQuery"+(oe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!re.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==re.type(e)||e.nodeType||re.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=re.trim(e))&&(1===e.indexOf("use strict")?(t=Y.createElement("script"),t.text=e,Y.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(le,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;i>o&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?re.merge(i,"string"==typeof e?[e]:e):J.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,a=!n;r>o;o++)!t(e[o],o)!==a&&i.push(e[o]);return i},map:function(e,t,i){var o,r,a=0,s=[];if(n(e))for(o=e.length;o>a;a++)null!=(r=t(e[a],a,i))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,i))&&s.push(r);return X.apply([],s)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(n=e[t],t=e,e=n),re.isFunction(e)?(i=Q.call(arguments,2),o=function(){return e.apply(t||this,i.concat(Q.call(arguments)))},o.guid=e.guid=e.guid||re.guid++,o):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(re.fn[Symbol.iterator]=K[Symbol.iterator]),re.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var o,r,a,s,u,d,p,f,h=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!i&&((t?t.ownerDocument||t:F)!==I&&O(t),t=t||I,A)){if(11!==m&&(d=me.exec(e)))if(o=d[1]){if(9===m){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(h&&(a=h.getElementById(o))&&D(t,a)&&a.id===o)return n.push(a),n}else{if(d[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((o=d[3])&&y.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(o)),n}if(y.qsa&&!z[e+" "]&&(!N||!N.test(e))){if(1!==m)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ve,"\\$&"):t.setAttribute("id",s=R),p=k(e),r=p.length,u=ce.test(s)?"#"+s:"[id='"+s+"']";r--;)p[r]=u+" "+c(p[r]);f=p.join(","),h=ge.test(e)&&l(t.parentNode)||t}if(f)try{return Q.apply(n,h.querySelectorAll(f)),n}catch(e){}finally{s===R&&t.removeAttribute("id")}}}return E(e.replace(re,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[R]=!0,e}function o(e){var t=I.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=n.length;i--;)_.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function c(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=U++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,u,c=[B,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(u=t[R]||(t[R]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[i])&&s[0]===B&&s[1]===r)return c[2]=s[2];if(l[i]=c,c[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function f(e,n,i){for(var o=0,r=n.length;r>o;o++)t(e,n[o],i);return i}function h(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),u&&t.push(s)));return a}function m(e,t,n,o,r,a){return o&&!o[R]&&(o=m(o)),r&&!r[R]&&(r=m(r,a)),i(function(i,a,s,l){var u,c,d,p=[],m=[],g=a.length,v=i||f(t||"*",s.nodeType?[s]:s,[]),b=!e||!i&&t?v:h(v,p,e,s,l),y=n?r||(i?e:g||o)?[]:a:b;if(n&&n(b,y,s,l),o)for(u=h(y,m),o(u,[],s,l),c=u.length;c--;)(d=u[c])&&(y[m[c]]=!(b[m[c]]=d));if(i){if(r||e){if(r){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(b[c]=d);r(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=r?J(i,d):p[c])>-1&&(i[u]=!(a[u]=d))}}else y=h(y===a?y.splice(g,y.length):y),r?r(null,a,y,l):Q.apply(a,y)})}function g(e){for(var t,n,i,o=e.length,r=_.relative[e[0].type],a=r||_.relative[" "],s=r?1:0,l=d(function(e){return e===t},a,!0),u=d(function(e){return J(t,e)>-1},a,!0),f=[function(e,n,i){var o=!r&&(i||n!==T)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,o}];o>s;s++)if(n=_.relative[e[s].type])f=[d(p(f),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[R]){for(i=++s;o>i&&!_.relative[e[i].type];i++);return m(s>1&&p(f),s>1&&c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(re,"$1"),n,i>s&&g(e.slice(s,i)),o>i&&g(e=e.slice(i)),o>i&&c(e))}f.push(n)}return p(f)}function v(e,n){var o=n.length>0,r=e.length>0,a=function(i,a,s,l,u){var c,d,p,f=0,m="0",g=i&&[],v=[],b=T,y=i||r&&_.find.TAG("*",u),w=B+=null==b?1:Math.random()||.1,C=y.length;for(u&&(T=a===I||a||u);m!==C&&null!=(c=y[m]);m++){if(r&&c){for(d=0,a||c.ownerDocument===I||(O(c),s=!A);p=e[d++];)if(p(c,a||I,s)){l.push(c);break}u&&(B=w)}o&&((c=!p&&c)&&f--,i&&g.push(c))}if(f+=m,o&&m!==f){for(d=0;p=n[d++];)p(g,v,a,s);if(i){if(f>0)for(;m--;)g[m]||v[m]||(v[m]=K.call(l));v=h(v)}Q.apply(l,v),u&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&(B=w,T=b),g};return o?i(a):a}var b,y,_,w,C,k,x,E,T,S,P,O,I,M,A,N,j,L,D,R="sizzle"+1*new Date,F=e.document,B=0,U=0,H=n(),$=n(),z=n(),W=function(e,t){return e===t&&(P=!0),0},V=1<<31,G={}.hasOwnProperty,q=[],K=q.pop,Y=q.push,Q=q.push,X=q.slice,J=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1
},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ie=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",oe=new RegExp(ee+"+","g"),re=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(ie),ce=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},_e=function(){O()};try{Q.apply(q=X.call(F.childNodes),F.childNodes),q[F.childNodes.length].nodeType}catch(e){Q={apply:q.length?function(e,t){Y.apply(e,X.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}y=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:F;return i!==I&&9===i.nodeType&&i.documentElement?(I=i,M=I.documentElement,A=!C(I),(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",_e,!1):n.attachEvent&&n.attachEvent("onunload",_e)),y.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=o(function(e){return e.appendChild(I.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=he.test(I.getElementsByClassName),y.getById=o(function(e){return M.appendChild(e).id=R,!I.getElementsByName||!I.getElementsByName(R).length}),y.getById?(_.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var n=t.getElementById(e);return n?[n]:[]}},_.filter.ID=function(e){var t=e.replace(be,ye);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(be,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},_.find.CLASS=y.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&A?t.getElementsByClassName(e):void 0},j=[],N=[],(y.qsa=he.test(I.querySelectorAll))&&(o(function(e){M.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+R+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||N.push(".#.+[+~]")}),o(function(e){var t=I.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(y.matchesSelector=he.test(L=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(e){y.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),j.push("!=",ie)}),N=N.length&&new RegExp(N.join("|")),j=j.length&&new RegExp(j.join("|")),t=he.test(M.compareDocumentPosition),D=t||he.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return P=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===I||e.ownerDocument===F&&D(F,e)?-1:t===I||t.ownerDocument===F&&D(F,t)?1:S?J(S,e)-J(S,t):0:4&n?-1:1)}:function(e,t){if(e===t)return P=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],l=[t];if(!o||!r)return e===I?-1:t===I?1:o?-1:r?1:S?J(S,e)-J(S,t):0;if(o===r)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===F?-1:l[i]===F?1:0},I):I},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==I&&O(e),n=n.replace(le,"='$1']"),y.matchesSelector&&A&&!z[n+" "]&&(!j||!j.test(n))&&(!N||!N.test(n)))try{var i=L.call(e,n);if(i||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&O(e),D(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&O(e);var n=_.attrHandle[t.toLowerCase()],i=n&&G.call(_.attrHandle,t.toLowerCase())?n(e,t,!A):void 0;return void 0!==i?i:y.attributes||!A?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(P=!y.detectDuplicates,S=!y.sortStable&&e.slice(0),e.sort(W),P){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return S=null,e},w=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=w(t);return n},_=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(be,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(oe," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,p,f,h,m=r!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(g){if(r){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&b){for(p=g,d=p[R]||(p[R]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===B&&u[1],y=f&&u[2],p=f&&g.childNodes[f];p=++f&&p&&p[m]||(y=f=0)||h.pop();)if(1===p.nodeType&&++y&&p===t){c[e]=[B,f,y];break}}else if(b&&(p=t,d=p[R]||(p[R]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===B&&u[1],y=f),!1===y)for(;(p=++f&&p&&p[m]||(y=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++y||(b&&(d=p[R]||(p[R]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),c[e]=[B,y]),p!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,n){var o,r=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[R]?r(n):r.length>1?(o=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),a=o.length;a--;)i=J(e,o[a]),e[i]=!(t[i]=o[a])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=x(e.replace(re,"$1"));return o[R]?i(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,ye),function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:i(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,ye).toLowerCase(),function(t){var n;do{if(n=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[0>n?n+t:n]}),even:s(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:s(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},_.pseudos.nth=_.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})_.pseudos[b]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(b);return u.prototype=_.filters=_.pseudos,_.setFilters=new u,k=t.tokenize=function(e,n){var i,o,r,a,s,l,u,c=$[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=_.preFilter;s;){i&&!(o=ae.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=se.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(re," ")}),s=s.slice(i.length));for(a in _.filter)!(o=de[a].exec(s))||u[a]&&!(o=u[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):$(e,l).slice(0)},x=t.compile=function(e,t){var n,i=[],o=[],r=z[e+" "];if(!r){for(t||(t=k(e)),n=t.length;n--;)r=g(t[n]),r[R]?i.push(r):o.push(r);r=z(e,v(o,i)),r.selector=e}return r},E=t.select=function(e,t,n,i){var o,r,a,s,u,d="function"==typeof e&&e,p=!i&&k(e=d.selector||e);if(n=n||[],1===p.length){if(r=p[0]=p[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&y.getById&&9===t.nodeType&&A&&_.relative[r[1].type]){if(!(t=(_.find.ID(a.matches[0].replace(be,ye),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=de.needsContext.test(e)?0:r.length;o--&&(a=r[o],!_.relative[s=a.type]);)if((u=_.find[s])&&(i=u(a.matches[0].replace(be,ye),ge.test(r[0].type)&&l(t.parentNode)||t))){if(r.splice(o,1),!(e=i.length&&c(r)))return Q.apply(n,i),n;break}}return(d||x(e,p))(i,t,!A,n,!t||ge.test(e)&&l(t.parentNode)||t),n},y.sortStable=R.split("").sort(W).join("")===R,y.detectDuplicates=!!P,O(),y.sortDetached=o(function(e){return 1&e.compareDocumentPosition(I.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(Z,function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);re.find=ce,re.expr=ce.selectors,re.expr[":"]=re.expr.pseudos,re.uniqueSort=re.unique=ce.uniqueSort,re.text=ce.getText,re.isXMLDoc=ce.isXML,re.contains=ce.contains;var de=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&re(e).is(n))break;i.push(e)}return i},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=re.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;re.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?re.find.matchesSelector(i,e)?[i]:[]:re.find.matches(e,re.grep(t,function(e){return 1===e.nodeType}))},re.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(re(e).filter(function(){for(t=0;n>t;t++)if(re.contains(o[t],this))return!0}));for(t=0;n>t;t++)re.find(e,o[t],i);return i=this.pushStack(n>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&fe.test(e)?re(e):e||[],!1).length}});var ge,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(re.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||ge,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof re?t[0]:t,re.merge(this,re.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Y,!0)),he.test(i[1])&&re.isPlainObject(t))for(i in t)re.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return o=Y.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=Y,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?void 0!==n.ready?n.ready(e):e(re):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))}).prototype=re.fn,ge=re(Y);var be=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({has:function(e){var t=re(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(re.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],a=fe.test(e)||"string"!=typeof e?re(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?re.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?Z.call(re(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(re.uniqueSort(re.merge(this.get(),re(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(n,i){var o=re.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=re.filter(i,o)),this.length>1&&(ye[e]||re.uniqueSort(o),be.test(e)&&o.reverse()),this.pushStack(o)}});var _e=/\S+/g;re.Callbacks=function(e){e="string"==typeof e?r(e):re.extend({},e);var t,n,i,o,a=[],s=[],l=-1,u=function(){for(o=e.once,i=t=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(l=a.length-1,s.push(n)),function t(n){re.each(n,function(n,i){re.isFunction(i)?e.unique&&c.has(i)||a.push(i):i&&i.length&&"string"!==re.type(i)&&t(i)})}(arguments),n&&!t&&u()),this},remove:function(){return re.each(arguments,function(e,t){for(var n;(n=re.inArray(t,a,n))>-1;)a.splice(n,1),l>=n&&l--}),this},has:function(e){return e?re.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=s=[],n||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(n){re.each(t,function(t,r){var a=re.isFunction(e[t])&&e[t];o[r[1]](function(){var e=a&&a.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,i):i}},o={};return i.pipe=i.then,re.each(t,function(e,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=Q.call(arguments),a=r.length,s=1!==a||e&&re.isFunction(e.promise)?a:0,l=1===s?e:re.Deferred(),u=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?Q.call(arguments):o,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)r[o]&&re.isFunction(r[o].promise)?r[o].promise().progress(u(o,n,t)).done(u(o,i,r)).fail(l.reject):--s;return s||l.resolveWith(i,r),l.promise()}});var we;re.fn.ready=function(e){return re.ready.promise().done(e),this},re.extend({isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){(!0===e?--re.readyWait:re.isReady)||(re.isReady=!0,!0!==e&&--re.readyWait>0||(we.resolveWith(Y,[re]),re.fn.triggerHandler&&(re(Y).triggerHandler("ready"),re(Y).off("ready"))))}}),re.ready.promise=function(t){return we||(we=re.Deferred(),"complete"===Y.readyState||"loading"!==Y.readyState&&!Y.documentElement.doScroll?e.setTimeout(re.ready):(Y.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),we.promise(t)},re.ready.promise();var Ce=function(e,t,n,i,o,r,a){var s=0,l=e.length,u=null==n;if("object"===re.type(n)){o=!0;for(s in n)Ce(e,t,s,n[s],!0,r,a)}else if(void 0!==i&&(o=!0,re.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(re(e),n)})),t))for(;l>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:u?t.call(e):l?t(e[0],n):r},ke=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!ke(e))return{};var t=e[this.expando];return t||(t={},ke(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,re.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{re.isArray(t)?i=t.concat(t.map(re.camelCase)):(o=re.camelCase(t),t in r?i=[t,o]:(i=o,i=i in r?[i]:i.match(_e)||[])),n=i.length;for(;n--;)delete r[i[n]]}(void 0===t||re.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!re.isEmptyObject(t)}};var xe=new s,Ee=new s,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/[A-Z]/g;re.extend({hasData:function(e){return Ee.hasData(e)||xe.hasData(e)},data:function(e,t,n){return Ee.access(e,t,n)},removeData:function(e,t){Ee.remove(e,t)},_data:function(e,t,n){return xe.access(e,t,n)},_removeData:function(e,t){xe.remove(e,t)}}),re.fn.extend({data:function(e,t){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=Ee.get(r),1===r.nodeType&&!xe.get(r,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=re.camelCase(i.slice(5)),l(r,i,o[i])));xe.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){Ee.set(this,e)}):Ce(this,function(t){var n,i;if(r&&void 0===t){if(void 0!==(n=Ee.get(r,e)||Ee.get(r,e.replace(Se,"-$&").toLowerCase())))return n;if(i=re.camelCase(e),void 0!==(n=Ee.get(r,i)))return n;if(void 0!==(n=l(r,i,void 0)))return n}else i=re.camelCase(e),this.each(function(){var n=Ee.get(this,i);Ee.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&Ee.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ee.remove(this,e)})}}),re.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=xe.get(e,t),n&&(!i||re.isArray(n)?i=xe.access(e,t,re.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=re.queue(e,t),i=n.length,o=n.shift(),r=re._queueHooks(e,t),a=function(){re.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return xe.get(e,n)||xe.access(e,n,{empty:re.Callbacks("once memory").add(function(){xe.remove(e,[t+"queue",n])})})}}),re.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?re.queue(this[0],e):void 0===t?this:this.each(function(){var n=re.queue(this,e,t);re._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=re.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=xe.get(r[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var Pe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Oe=new RegExp("^(?:([+-])=|)("+Pe+")([a-z%]*)$","i"),Ie=["Top","Right","Bottom","Left"],Me=function(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)},Ae=/^(?:checkbox|radio)$/i,Ne=/<([\w:-]+)/,je=/^$|\/(?:java|ecma)script/i,Le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Le.optgroup=Le.option,Le.tbody=Le.tfoot=Le.colgroup=Le.caption=Le.thead,Le.th=Le.td;var De=/<|&#?\w+;/;!function(){var e=Y.createDocumentFragment(),t=e.appendChild(Y.createElement("div")),n=Y.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Re=/^key/,Fe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Be=/^([^.]*)(?:\.(.+)|)/;re.event={global:{},add:function(e,t,n,i,o){var r,a,s,l,u,c,d,p,f,h,m,g=xe.get(e);if(g)for(n.handler&&(r=n,n=r.handler,o=r.selector),n.guid||(n.guid=re.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==re&&re.event.triggered!==t.type?re.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(_e)||[""],u=t.length;u--;)s=Be.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f&&(d=re.event.special[f]||{},f=(o?d.delegateType:d.bindType)||f,d=re.event.special[f]||{},c=re.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&re.expr.match.needsContext.test(o),namespace:h.join(".")},r),(p=l[f])||(p=l[f]=[],p.delegateCount=0,d.setup&&!1!==d.setup.call(e,i,h,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,c):p.push(c),re.event.global[f]=!0)},remove:function(e,t,n,i,o){var r,a,s,l,u,c,d,p,f,h,m,g=xe.hasData(e)&&xe.get(e);if(g&&(l=g.events)){for(t=(t||"").match(_e)||[""],u=t.length;u--;)if(s=Be.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(d=re.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,p=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=p.length;r--;)c=p[r],!o&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(r,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(e,c));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||re.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)re.event.remove(e,f+t[u],n,i,!0);re.isEmptyObject(l)&&xe.remove(e,"handle events")}},dispatch:function(e){e=re.event.fix(e);var t,n,i,o,r,a=[],s=Q.call(arguments),l=(xe.get(this,"events")||{})[e.type]||[],u=re.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=re.event.handlers.call(this,e,l),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(i=((re.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,s))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;s>n;n++)r=t[n],o=r.selector+" ",void 0===i[o]&&(i[o]=r.needsContext?re(o,this).index(l)>-1:re.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,r=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Y,i=n.documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[re.expando])return e;var t,n,i,o=e.type,r=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Fe.test(o)?this.mouseHooks:Re.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new re.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=Y),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&re.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return re.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},re.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?f:h):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={constructor:re.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||re.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),re.fn.extend({on:function(e,t,n,i){return g(this,e,t,n,i)},one:function(e,t,n,i){return g(this,e,t,n,i,1)},off:function(e,t,n){var i,o
;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,re(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=h),this.each(function(){re.event.remove(this,e,n,t)})}});var Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,He=/<script|<style|<link/i,$e=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;re.extend({htmlPrefilter:function(e){return e.replace(Ue,"<$1></$2>")},clone:function(e,t,n){var i,o,r,a,s=e.cloneNode(!0),l=re.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(a=c(s),r=c(e),i=0,o=r.length;o>i;i++)w(r[i],a[i]);if(t)if(n)for(r=r||c(e),a=a||c(s),i=0,o=r.length;o>i;i++)_(r[i],a[i]);else _(e,s);return a=c(s,"script"),a.length>0&&d(a,!l&&c(e,"script")),s},cleanData:function(e){for(var t,n,i,o=re.event.special,r=0;void 0!==(n=e[r]);r++)if(ke(n)){if(t=n[xe.expando]){if(t.events)for(i in t.events)o[i]?re.event.remove(n,i):re.removeEvent(n,i,t.handle);n[xe.expando]=void 0}n[Ee.expando]&&(n[Ee.expando]=void 0)}}}),re.fn.extend({domManip:C,detach:function(e){return k(this,e,!0)},remove:function(e){return k(this,e)},text:function(e){return Ce(this,function(e){return void 0===e?re.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){v(this,e).appendChild(e)}})},prepend:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(re.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return Ce(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!Le[(Ne.exec(e)||["",""])[1].toLowerCase()]){e=re.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(re.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return C(this,arguments,function(t){var n=this.parentNode;re.inArray(this,e)<0&&(re.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var n,i=[],o=re(e),r=o.length-1,a=0;r>=a;a++)n=a===r?this:this.clone(!0),re(o[a])[t](n),J.apply(i,n.get());return this.pushStack(i)}});var Ve,Ge={HTML:"block",BODY:"block"},qe=/^margin/,Ke=new RegExp("^("+Pe+")(?!px)[a-z%]+$","i"),Ye=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Qe=function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o},Xe=Y.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Xe.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,r="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",o="4px"===t.marginRight,Xe.removeChild(a)}var n,i,o,r,a=Y.createElement("div"),s=Y.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),re.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),o},reliableMarginLeft:function(){return null==i&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(Y.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Xe.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Xe.removeChild(a),s.removeChild(n),t}}))}();var Je=/^(none|table(?!-c[ea]).+)/,Ze={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"},tt=["Webkit","O","Moz","ms"],nt=Y.createElement("div").style;re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=T(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=re.camelCase(t),l=e.style;return t=re.cssProps[s]||(re.cssProps[s]=P(s)||s),a=re.cssHooks[t]||re.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:l[t]:(r=typeof n,"string"===r&&(o=Oe.exec(n))&&o[1]&&(n=u(e,t,o),r="number"),void(null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(re.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var o,r,a,s=re.camelCase(t);return t=re.cssProps[s]||(re.cssProps[s]=P(s)||s),a=re.cssHooks[t]||re.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=T(e,t,i)),"normal"===o&&t in et&&(o=et[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,n,i){return n?Je.test(re.css(e,"display"))&&0===e.offsetWidth?Qe(e,Ze,function(){return M(e,t,i)}):M(e,t,i):void 0},set:function(e,n,i){var o,r=i&&Ye(e),a=i&&I(e,t,i,"border-box"===re.css(e,"boxSizing",!1,r),r);return a&&(o=Oe.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=re.css(e,t)),O(e,n,a)}}}),re.cssHooks.marginLeft=S(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(T(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),re.cssHooks.marginRight=S(ie.reliableMarginRight,function(e,t){return t?Qe(e,{display:"inline-block"},T,[e,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+Ie[i]+t]=r[i]||r[i-2]||r[0];return o}},qe.test(e)||(re.cssHooks[e+t].set=O)}),re.fn.extend({css:function(e,t){return Ce(this,function(e,t,n){var i,o,r={},a=0;if(re.isArray(t)){for(i=Ye(e),o=t.length;o>a;a++)r[t[a]]=re.css(e,t[a],!1,i);return r}return void 0!==n?re.style(e,t,n):re.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Me(this)?re(this).show():re(this).hide()})}}),re.Tween=N,N.prototype={constructor:N,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||re.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(re.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.options.duration?this.pos=t=re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[re.cssProps[e.prop]]&&!re.cssHooks[e.prop]?e.elem[e.prop]=e.now:re.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},re.fx=N.prototype.init,re.fx.step={};var it,ot,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;re.Animation=re.extend(B,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,Oe.exec(t),n),n}]},tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.match(_e);for(var n,i=0,o=e.length;o>i;i++)n=e[i],B.tweeners[n]=B.tweeners[n]||[],B.tweeners[n].unshift(t)},prefilters:[R],prefilter:function(e,t){t?B.prefilters.unshift(e):B.prefilters.push(e)}}),re.speed=function(e,t,n){var i=e&&"object"==typeof e?re.extend({},e):{complete:n||!n&&t||re.isFunction(e)&&e,duration:e,easing:n&&t||t&&!re.isFunction(t)&&t};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Me).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=re.isEmptyObject(e),r=re.speed(t,n,i),a=function(){var t=B(this,re.extend({},e),r);(o||xe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=re.timers,a=xe.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&at.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||re.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=xe.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=re.timers,a=i?i.length:0;for(n.finish=!0,re.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(e,t){var n=re.fn[t];re.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(L(t,!0),e,i,o)}}),re.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),re.timers=[],re.fx.tick=function(){var e,t=0,n=re.timers;for(it=re.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||re.fx.stop(),it=void 0},re.fx.timer=function(e){re.timers.push(e),e()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){ot||(ot=e.setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){e.clearInterval(ot),ot=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,n){return t=re.fx?re.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=Y.createElement("input"),t=Y.createElement("select"),n=t.appendChild(Y.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=Y.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var st,lt=re.expr.attrHandle;re.fn.extend({attr:function(e,t){return Ce(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})}}),re.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?re.prop(e,t,n):(1===r&&re.isXMLDoc(e)||(t=t.toLowerCase(),o=re.attrHooks[t]||(re.expr.match.bool.test(t)?st:void 0)),void 0!==n?null===n?void re.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=re.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&re.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(_e);if(r&&1===e.nodeType)for(;n=r[o++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?re.removeAttr(e,n):e.setAttribute(n,n),n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||re.find.attr;lt[t]=function(e,t,i){var o,r;return i||(r=lt[t],lt[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,lt[t]=r),o}});var ut=/^(?:input|select|textarea|button)$/i,ct=/^(?:a|area)$/i;re.fn.extend({prop:function(e,t){return Ce(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[re.propFix[e]||e]})}}),re.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&re.isXMLDoc(e)||(t=re.propFix[t]||t,o=re.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=re.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(re.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this});var dt=/[\t\r\n\f]/g;re.fn.extend({addClass:function(e){var t,n,i,o,r,a,s,l=0;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,U(this)))});if("string"==typeof e&&e)for(t=e.match(_e)||[];n=this[l++];)if(o=U(n),i=1===n.nodeType&&(" "+o+" ").replace(dt," ")){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=re.trim(i),o!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,o,r,a,s,l=0;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(_e)||[];n=this[l++];)if(o=U(n),i=1===n.nodeType&&(" "+o+" ").replace(dt," ")){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s=re.trim(i),o!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):re.isFunction(e)?this.each(function(n){re(this).toggleClass(e.call(this,n,U(this),t),t)}):this.each(function(){var t,i,o,r;if("string"===n)for(i=0,o=re(this),r=e.match(_e)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=U(this),t&&xe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":xe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+U(n)+" ").replace(dt," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g,ft=/[\x20\t\r\n\f]+/g;re.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=re.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,re(this).val()):e,null==o?o="":"number"==typeof o?o+="":re.isArray(o)&&(o=re.map(o,function(e){return null==e?"":e+""})),(t=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=re.valHooks[o.type]||re.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(pt,""):null==n?"":n)):void 0}}),re.extend({valHooks:{option:{get:function(e){var t=re.find.attr(e,"value");return null!=t?t:re.trim(re.text(e)).replace(ft," ")}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,a=r?null:[],s=r?o+1:i.length,l=0>o?s:r?o:0;s>l;l++)if(n=i[l],(n.selected||l===o)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!re.nodeName(n.parentNode,"optgroup"))){if(t=re(n).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=re.makeArray(t),a=o.length;a--;)i=o[a],(i.selected=re.inArray(re.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(e,t){return re.isArray(t)?e.checked=re.inArray(re(e).val(),t)>-1:void 0}},ie.checkOn||(re.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ht=/^(?:focusinfocus|focusoutblur)$/;re.extend(re.event,{trigger:function(t,n,i,o){var r,a,s,l,u,c,d,p=[i||Y],f=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||Y,3!==i.nodeType&&8!==i.nodeType&&!ht.test(f+re.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[re.expando]?t:new re.Event(f,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:re.makeArray(n,[t]),d=re.event.special[f]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!re.isWindow(i)){for(l=d.delegateType||f,ht.test(l+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(i.ownerDocument||Y)&&p.push(s.defaultView||s.parentWindow||e)}for(r=0;(a=p[r++])&&!t.isPropagationStopped();)t.type=r>1?l:d.bindType||f,c=(xe.get(a,"events")||{})[t.type]&&xe.get(a,"handle"),c&&c.apply(a,n),(c=u&&a[u])&&c.apply&&ke(a)&&(t.result=c.apply(a,n),!1===t.result&&t.preventDefault());return t.type=f,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),n)||!ke(i)||u&&re.isFunction(i[f])&&!re.isWindow(i)&&(s=i[u],s&&(i[u]=null),re.event.triggered=f,i[f](),re.event.triggered=void 0,s&&(i[u]=s)),t.result}},simulate:function(e,t,n){var i=re.extend(new re.Event,n,{type:e,isSimulated:!0});re.event.trigger(i,null,t)}}),re.fn.extend({trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?re.event.trigger(e,t,n,!0):void 0}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){re.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),re.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||re.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){re.event.simulate(t,e.target,re.event.fix(e))};re.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=xe.access(i,t);o||i.addEventListener(e,n,!0),xe.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=xe.access(i,t)-1;o?xe.access(i,t,o):(i.removeEventListener(e,n,!0),xe.remove(i,t))}}});var mt=e.location,gt=re.now(),vt=/\?/;re.parseJSON=function(e){return JSON.parse(e+"")},re.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+t),n};var bt=/#.*$/,yt=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)$/gm,wt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ct=/^(?:GET|HEAD)$/,kt=/^\/\//,xt={},Et={},Tt="*/".concat("*"),St=Y.createElement("a");St.href=mt.href,re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:wt.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,re.ajaxSettings),t):z(re.ajaxSettings,e)},ajaxPrefilter:H(xt),ajaxTransport:H(Et),ajax:function(t,n){function i(t,n,i,s){var u,d,b,y,w,k=n;2!==_&&(_=2,l&&e.clearTimeout(l),o=void 0,a=s||"",C.readyState=t>0?4:0,u=t>=200&&300>t||304===t,i&&(y=W(p,C,i)),y=V(p,y,C,u),u?(p.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(re.lastModified[r]=w),(w=C.getResponseHeader("etag"))&&(re.etag[r]=w)),204===t||"HEAD"===p.type?k="nocontent":304===t?k="notmodified":(k=y.state,d=y.data,b=y.error,u=!b)):(b=k,!t&&k||(k="error",0>t&&(t=0))),C.status=t,C.statusText=(n||k)+"",u?m.resolveWith(f,[d,k,C]):m.rejectWith(f,[C,k,b]),C.statusCode(v),v=void 0,c&&h.trigger(u?"ajaxSuccess":"ajaxError",[C,p,u?d:b]),g.fireWith(f,[C,k]),c&&(h.trigger("ajaxComplete",[C,p]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,r,a,s,l,u,c,d,p=re.ajaxSetup({},n),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?re(f):re.event,m=re.Deferred(),g=re.Callbacks("once memory"),v=p.statusCode||{},b={},y={},_=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!s)for(s={};t=_t.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=y[n]=y[n]||e,b[e]=t),this},overrideMimeType:function(e){return _||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return o&&o.abort(t),i(0,t),this}};if(m.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((t||p.url||mt.href)+"").replace(bt,"").replace(kt,mt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=re.trim(p.dataType||"*").toLowerCase().match(_e)||[""],null==p.crossDomain){u=Y.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=St.protocol+"//"+St.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=re.param(p.data,p.traditional)),$(xt,p,n,C),2===_)return C;c=re.event&&p.global,c&&0==re.active++&&re.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ct.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(vt.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=yt.test(r)?r.replace(yt,"$1_="+gt++):r+(vt.test(r)?"&":"?")+"_="+gt++)),p.ifModified&&(re.lastModified[r]&&C.setRequestHeader("If-Modified-Since",re.lastModified[r]),re.etag[r]&&C.setRequestHeader("If-None-Match",re.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Tt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)C.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(f,C,p)||2===_))return C.abort();w="abort";for(d in{success:1,error:1,complete:1})C[d](p[d]);if(o=$(Et,p,n,C)){if(C.readyState=1,c&&h.trigger("ajaxSend",[C,p]),2===_)return C;p.async&&p.timeout>0&&(l=e.setTimeout(function(){C.abort("timeout")},p.timeout));try{_=1,o.send(b,i)}catch(e){if(!(2>_))throw e;i(-1,e)}}else i(-1,"No Transport");return C},getJSON:function(e,t,n){return re.get(e,t,n,"json")},getScript:function(e,t){return re.get(e,void 0,t,"script")}}),re.each(["get","post"],function(e,t){re[t]=function(e,n,i,o){return re.isFunction(n)&&(o=o||i,i=n,n=void 0),re.ajax(re.extend({url:e,type:t,dataType:o,data:n,success:i},re.isPlainObject(e)&&e))}}),re._evalUrl=function(e){return re.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},re.fn.extend({wrapAll:function(e){var t;return re.isFunction(e)?this.each(function(t){re(this).wrapAll(e.call(this,t))}):(this[0]&&(t=re(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return re.isFunction(e)?this.each(function(t){re(this).wrapInner(e.call(this,t))}):this.each(function(){var t=re(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(n){re(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(e){return!re.expr.filters.visible(e)},re.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Pt=/%20/g,Ot=/\[\]$/,It=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;re.param=function(e,t){var n,i=[],o=function(e,t){t=re.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jquery&&!re.isPlainObject(e))re.each(e,function(){o(this.name,this.value)});else for(n in e)G(n,e[n],t,o);return i.join("&").replace(Pt,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&At.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!Ae.test(e))}).map(function(e,t){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:n.replace(It,"\r\n")}}).get()}}),re.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Nt={0:200,1223:204},jt=re.ajaxSettings.xhr();ie.cors=!!jt&&"withCredentials"in jt,ie.ajax=jt=!!jt,re.ajaxTransport(function(t){var n,i;return ie.cors||jt&&!t.crossDomain?{send:function(o,r){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(a in o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Nt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}:void 0}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),re.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=re("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),Y.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Lt=[],Dt=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||re.expando+"_"+gt++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,a,s=!1!==t.jsonp&&(Dt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Dt,"$1"+o):!1!==t.jsonp&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||re.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},i.always(function(){void 0===r?re(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Lt.push(o)),a&&re.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),re.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Y;var i=he.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=p([e],t,o),o&&o.length&&re(o).remove(),re.merge([],i.childNodes))};var Rt=re.fn.load;re.fn.load=function(e,t,n){if("string"!=typeof e&&Rt)return Rt.apply(this,arguments);var i,o,r,a=this,s=e.indexOf(" ");return s>-1&&(i=re.trim(e.slice(s)),e=e.slice(0,s)),re.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&re.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?re("<div>").append(re.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length},re.offset={setOffset:function(e,t,n){var i,o,r,a,s,l,u,c=re.css(e,"position"),d=re(e),p={};"static"===c&&(e.style.position="relative"),s=d.offset(),r=re.css(e,"top"),l=re.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1,u?(i=d.position(),a=i.top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),re.isFunction(t)&&(t=t.call(e,n,re.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):d.css(p)}},re.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){re.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},r=i&&i.ownerDocument;return r?(t=r.documentElement,re.contains(t,i)?(o=i.getBoundingClientRect(),n=q(r),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===re.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(i=e.offset()),i.top+=re.css(e[0],"borderTopWidth",!0),i.left+=re.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-re.css(n,"marginTop",!0),left:t.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){
for(var e=this.offsetParent;e&&"static"===re.css(e,"position");)e=e.offsetParent;return e||Xe})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;re.fn[e]=function(i){return Ce(this,function(e,i,o){var r=q(e);return void 0===o?r?r[t]:e[i]:void(r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o)},e,i,arguments.length)}}),re.each(["top","left"],function(e,t){re.cssHooks[t]=S(ie.pixelPosition,function(e,n){return n?(n=T(e,t),Ke.test(n)?re(e).position()[t]+"px":n):void 0})}),re.each({Height:"height",Width:"width"},function(e,t){re.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){re.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return Ce(this,function(t,n,i){var o;return re.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?re.css(t,n,a):re.style(t,n,i,a)},t,r?i:void 0,r,null)}})}),re.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var Ft=e.jQuery,Bt=e.$;return re.noConflict=function(t){return e.$===re&&(e.$=Bt),t&&e.jQuery===re&&(e.jQuery=Ft),re},t||(e.jQuery=e.$=re),re}),define("lib/jquery/dist/jquery.min",function(){}),define("lib-build/less!storymaps/tpl/core/MainView",[],function(){}),define("lib-build/css!storymaps/tpl/view/media/Common",[],function(){}),define("resources/tpl/viewer/nls/app",{root:{viewer:{common:{save:"Save",close:"Close"},errors:{noConfigName:"No configuration specified in index.html > configOptions.story",configFormatError:"The specified configuration couldn't be loaded because of a JSON syntax error.",configNotFound:"The specified configuration hasn't been found or couldn't be loaded because of a JSON syntax error.",boxTitle:"An error has occurred",servedFromFile:"The application has to be accessed through a web server. See ${USER_GUIDE} for details.",userGuide:"user guide",invalidConfig:"Invalid configuration",invalidConfigNoApp:"Web Mapping Application identifier not specified in index.html.",invalidConfigNoAppDev:"No Web Mapping Application identifier is specified in URL parameters (?appid=). In development mode, the appid configuration in index.html is ignored.",unspecifiedConfigOwner:"Authorized owner hasn't been configured.",invalidConfigOwner:"Story owner is not authorized.",invalidConfignoOAuth:"This story requires authentication, please configure an ArcGIS OAuth ID in index.html or make the story public.",invalidApp:"This story cannot be loaded.",appLoadingFail:"Something went wrong, the {TPL_NAME} did not load correctly.",notConfiguredDesktop:"The story is not configured yet.",notConfiguredMobile:"The {TPL_NAME} builder is not supported at this display size. If possible, resize your browser to access the builder or please build your story on a device with a larger screen.",notConfiguredMobile2:"Please rotate your device to landscape orientation to use the {TPL_NAME} builder.",notAuthorized:"You are not authorized to access this story",notAuthorizedBuilder:"You are not authorized to use {TPL_NAME} builder.",noViewerIE:"This story is not supported in Internet Explorer before version ${VERSION}. ${UPGRADE}.",noViewerIE2:"You are attempting to view this story using an older, unsupported browser. There may be features that do not work or other unexpected issues. We suggest you upgrade to Internet Explorer 11 or use another browser, such as Chrome.",noViewerIE3:"In late 2017, this story will no longer load on this browser. At that time, you must use a supported browser to view this story.",upgradeBrowser:"Please update your browser",mapLoadingFail:"Something went wrong, the map did not load correctly.",signOut:"Sign Out",builderSupportFirefox:"Story Map Cascade builder now supports Firefox!<br><br>Support for authoring Cascade stories in Firefox is currently in beta. Please try it out and report any issues to ${ESRI-SUPPORT} or the ${ESRI-COMMUNITY}.",builderSupportOther:"Cascade stories can be viewed in any modern web browser, but Story Map Cascade builder is supported only in ${CHROME}, ${SAFARI}, and ${FIREFOX}.<br><br>If you need Cascade builder to support a different browser, please contact ${ESRI-SUPPORT} or ${BROWSER-SUPPORT-VOTE}.",builderSupportIpad:"Story Map Cascade builder is not supported on iPad. Cascade stories that you create and share will work on iPad.",launchBuilder:"Launch Cascade builder",notAgain:"Do not show this again",sorry:"Attention:"},mobileWarning:{message1:"You've read the mobile version of this story. For the full version, with richer media elements try it out on a desktop computer.",email:"Email a link to this story"},cover:{iosEmbedLink:"Tap to read full story"},media:{captionPlaceholder:"Your caption here...",loadingError:"Sorry, this content is not accessible",explore:"Explore",exploreMap:"Explore Map",exploreStop:"Stop Exploring",sceneNotSupported:"Sorry, this 3D map is not supported on your device.",loading1:"Loading...",loading2:"Loading map...",videoPlayPause:"play/pause",videoMuteUnmute:"mute/unmute"},headerFromCommon:{defaultTagline:"A ${STORY_MAP}",share:"Share or print",tooltipAutoplayDisabled:"This isn't available in autoplay mode"},shareFromCommon:{copy:"Copy",copied:"Copied",open:"Open",embed:"Embed in web page",embedExplain:"Use the following HTML code to embed the story in a web page.",size:"Size (width/height):",autoplayLabel:"Autoplay mode",autoplayExplain1:"Autoplay mode will advance through your story at a regular interval. This is ideal on a kiosk or public display monitor, but be aware that in other situations it may make the story harder to read. This feature isn't supported on small displays.",autoplayExplain2:"When this mode is active there are controls to play/pause the story and adjust the navigation speed.",linksupdated:"Links updated!"},theme:{lightLabel:"Light",darkLabel:"Dark"},autoplay:{speedFast:"Fast",speedMedium:"Medium",speedSlow:"Slow"},bannerNotification:{learnMore:"Learn More",close:"Close",dontShowAgain:"Don't show this message again"},embedBar:{share:"Share",fullScreen:"Full screen",exitFullScreen:"Exit full screen",enlarge:"Enlarge",newTab:"Open in a new tab",tagline:"A Story Map",twitter:"Share on Twitter",facebook:"Share on Facebook"}},print:{settings:{pleaseWait:"Please wait for the entire story to load before printing",printNotes:"If this page loads slowly or some media doesn't appear, try replacing live media with images or printing a smaller range of sections. For best results, you may need to enable printing of background elements in your browser's print settings.",printOptions:"Options",makeTextBlack:"Make all text black",showLinks:"Show link URLs",useAltMedia:"Replace live media with images, if available",pageBreaks:"Begin each section on a new page",printRange:"Print part of this story",sectionStart:"Sections:",go:"Apply",reset:"Reset to whole story",print:"Print"},page:{appTagline:"This story was made with ${CASCADE_LINK_TEXT}.",cascadeLinkText:"Esri's Story Map Cascade",readItOnline:"Read it on the web at ${STORY_URL}."},sections:{sectionLabel:"Section ${SECTION_NUMBER}"},media:{websiteLabel:"Website:",videoLabel:"Video:",audioLabel:"Audio:"}}},ar:1,bs:1,ca:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sl:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("resources/tpl/builder/nls/app",{root:{builder:{dialog:{apply:"Apply",close:"Close"},header:{sharingNotAvailable:"This is not available until you share the story",edit:"Edit"},headerConfig:{toggles:{bookmarks:"Bookmarks",logoSharing:"Logo & Sharing",theme:"Appearance"},bookmarks:{title:"Section",bookmark:"Bookmark",intro:"Bookmarks are links to story sections that are shown in the header. Creating concise bookmarks for the main sections of your story helps readers get oriented.",sequentialDefault:"Narrative section (no text found)",immersiveDefault:"Immersive section (no text found)",titleDefault:"Title section (no text found)",coverDefault:"Cover section (no text found)",coverAppendage:"(Cover)"},logoSharing:{logo:"Logo",logoButton:"Use ${ESRI} Logo",useOrgLogo:"Use my organization's logo",useOrgLogoHelp:"Use the logo provided by your administrator",logoLink:"Logo link",logoUploadProgress:"Logo upload in progress",logoUploadSuccess:"Logo uploaded successfully",logoUploadError:"Logo upload failed, switching back to ${ESRI} logo",customHeaderText:"Tagline",taglineLinkDisabledTooltip:"Enter a tagline to enable the link",link:"Tagline link",enableSocialSharing:"Display sharing button"},appearance:{themeLabel:"Theme",fontLabel:"Fonts",previewLabel:"Preview",fontsTitleLabel:"Titles",fontsBodyLabel:"Body",loremTitle:"Lorem Ipsum",loremBody:"Lorem ipsum dolor sit amet, consectetur adipiscing elit sed do eiusmod tempor. Mauris consequat orci nec magna facilisis bibendum at eget libero."}},share:{btnPrivate:"Private",btnOrg:"Organization",btnPublic:"Public",btnEveryone:"Everyone"},builderPanel:{builderNamePrefix:"",builderNameSuffix:"Builder",buttonSaving:"Saving",buttonSaved:"Saved",buttonError:"Save failed",buttonShare:"Share",buttonSettings:"Settings",settingsLogoError:"Your logo has an issue. Click to learn more.",buttonHelp:"Get Help or Submit Feedback on GeoNet",buttonPreview:"View Story",buttonHealth:"Health Report",manageStories:"Manage My Stories",closeWithPendingChange:"Are you sure to want to confirm this action? Your changes will be lost.",coverLabel:"Cover",creditsLabel:"Credits",betaFeedback:"Feedback",betaNote:"Please let us know what you think about ${APP_NAME} or if something is not working as you expected.",notSharedNote:"Your story isn't shared, only you can see it",organizationWarning:"To ensure this story can be viewed by others you must also share its scenes, scene layers, and embedded apps with your organization. Maps and map layers are shared automatically.",publicWarning:"To ensure this story can be viewed by others you must also share its scenes, scene layers, and embedded apps with Everyone. Maps and map layers are shared automatically.",addTitleNote:"Add a title on the cover to save",saveError:"There was an error saving your story.",duplicate:"Duplicate",organize:"Organize",done:"Done",invite:"As you build your story, the sections will appear here...",mystoriestooltip:"Cascade Builder alerts you to issues in your story and helps you fix them. Scenes and embedded apps are not checked, so please check those manually."},immersiveViewPanel:{transition:"Transition",chooseTransition:"Choose Transition",fade:"Fade",fadeSlow:"Fade Slow",swipeVertical:"Swipe Vertical",swipeHorizontal:"Swipe Horizontal",none:"None",disabledConsecutiveSameMedia:"Not available when consecutive views use the same media",disabledTooltipMap:"To use this transition the visible layers in both views must be different and the other map properties must be the same",disabledConsecutiveSameMap:"Not available when consecutive views use the same map",disabledNotInBeta:"Not available when consecutive views use the same map",disabledNonConsecutive:"Not available as there is another occurence of this media that is non consecutive",addMedia:"Add media",invite:"As you build your immersive section, the views will appear here..."},mediaConfig:{tabs:{appearance:"Appearance",manage:"Manage",size:"Size",background:"Background",mobile:"Mobile",issues:"Issues",fixIssues:"Fix Issues"},manage:{changeMedia:"Change media",edit:"Edit",editAside:"Opens in a new browser tab. After saving your edits, save and reload this story to see your changes.",remove:"Remove",altTextPlaceholder:"Add a description of this media for visually impaired readers...",altTextHelptip:"Alternative text is a description of visual media used by assistive technologies such as screen reader software. This is optional but recommended to meet web accessibility guidelines such as WCAG and Section 508."},appearance:{homeView:"Initial view",audio:"Audio",on:"On",muted:"Muted",volumeAside:"The video will autoplay when a reader arrives at this view. If you mute the sound, the reader will not be able to enable it.",view:"View",resetLocation:"Reset Location",resetLayers:"Reset Layers",clearPopup:"Clear Pop-Up",interaction:"Interaction",interactionDisabled:"Interaction Disabled",buttonToEnable:"Button to Enable",interactionEnabled:"Interaction Enabled",interactionAside:"*Touch devices will show an interaction button.",slide:"Slide",noSlides:"No slides available.",mapExtentPrompt:"Update the map to tell your story, click the checkmark to save the changes"},sectionAppearance:{layout:"Layout",theme:"Theme"},size:{small:"Small",medium:"Medium",large:"Large",noCrop:"Do not crop tall images",noCropTallTooltip:"Not cropping a tall image produces a dramatic effect for readers that requires scrolling to see the entire image."},background:{noCrop:"Do not crop",mostImportantPart:"Choose the most important point",cropExplanationImmersive:"Select a point on the image to choose how it will be cropped at different screen sizes. The point you select will always be visible. Check 'Do Not Crop' if your image needs to be fully visible.",cropExplanation:"Select a point on the image to choose how it will be cropped at different screen sizes. The point you select will always be visible.",color:"Color",previews:"Previews"},altMedia:{alternativeMedia:"Alternate Image for Mobile",explanation:"Some media are not supported or may not work well on mobile devices. Use this panel to specify an image that will be shown in place of this media when your story is viewed on a phone or tablet.",changeAltImage:"Change image",uploadAltImage:"Add alternate image"}},mediaPicker:{browseToggle:{urls:"Link to Content",urls_short:"Link",contentType:{error:"No authorized media.",imageOnly:"In this part of the story, you can add an image.",imageAndVideo:"In this part of the story, you can add an image or a video.",imageVideoWebpage:"In this part of the story, you can add audio, an image, a video, or a webpage."}},browsePanel:{providers:{searchingFor:'Searching for "${searchterm}"...',searchedFor:'Search results for "${searchterm}"',albumsOf:"${username}'s albums",noPhotosFound:"No photos matched your search. Please try again.",noItemsFound:"No items matched your search. Please try again.",noItemsInThisStory:"No content from ArcGIS has been added to this story yet.",limitReached:"Showing 100 items. If you didn't find what you need, try a keyword search.",galleryItems:{uploadError:"Sorry, this item failed to upload."},agol:{remove1:"Delete this unused image from your ArcGIS account.",remove2:"(You'll need to upload it again if you decide to use it later.)",removeFailed:"Remove this inaccessible image from this list.",modified:"Modified ${date}",uploaded:"Uploaded ${date}",contentByAuthor:"${contentType} by ${author}"},googlePhotos:{searchAndBrowse:"Browse photos on ${Picasa} or ${Google+}"},flickr:{photostream:"Photostream",searchAndBrowse:"Search and browse photos on ${Flickr}",captionStarter:"Photo by ${USERNAME} on ${Flickr}"},unsplash:{searchAndBrowse:"Search photos on ${Unsplash}",photoBy:"Photo by ${username}",userLink:"Go to ${username}'s ${Unsplash} page",captionStarter:"Photo by ${USERNAME} on ${Unsplash}"},urlContent:{uploadHeaders:{generic:"Link to content on the web",imageOnly:"Link to an image on the web",imageAndVideo:"Link to an image or video on the web"},linkText:{imageOnly:"In the box above, you can link directly to a photo.",imageAndVideo1:"In the box above, you can paste a link or iframe code for a video on ${YouTube} or ${Vimeo}.",imageAndVideo2:"You can also link directly to a photo.",imageVideoWebpage1:"In the box above, you can paste a link or iframe code for web content like a dynamic chart or video on ${YouTube} or ${Vimeo}.",imageVideoWebpage2:"You can also link directly to a photo, video, audio file, web page, or web app.",ender:"Always use secure (https) links. If your content does not support https add a link to it in the text of your story so readers can view it in a new browser tab.",httpsError:"Link must begin with HTTPS"},embedProtocol:{embedProtocolLabel:"Load page over a secure connection (https)",embedProtocolWarning1:"If this page does not load in your story, it can't be embedded for web security reasons.",embedProtocolWarning2:"If this page does not load in your story, uncheck this option and try again. If the page still does not load, it can't be embedded for web security reasons.",embedProtocolWarning3:"As an alternative, add a link in your narrative to open the page in a new browser tab. ${linkText}",linkText:"Learn More."},placeholder:"${https://}... or ${<iframe>}",uploadErrors:{generic:"Something went wrong with the address entered. Please try again.",imageOnly1:"You must use an image in this part of the story.",imageOnly2:"Please provide a link to an image (.jpg, .png, .gif), or choose an image from ${ArcGIS}, ${Flickr}, ${Google+}, or ${Unsplash}.",imageAndVideo1:"You must use an image or video in this part of the story.",imageAndVideo2:"Please provide a link to an image (.jpg, .png, .gif) or a video on ${YouTube} or ${Vimeo}, or choose an image from ${ArcGIS}, ${Flickr}, ${Google+}, or ${Unsplash}.",badFormat:"The link to the file you are trying to add is formatted incorrectly.",inaccessible:"The file you are trying to add is missing or not accessible.",tryAgain:"Please check the address and try again.",mediaTypes:{VIDEO:"video",IMAGE:"image",generic:"media"}}}},sidePanel:{thirdPartyTerms:"By using a third-party service, you agree to its terms of service: ",googlePhotos:{placeholder:"Email or ${Picasa}/${Google+} ID",helpText:"You can add photos uploaded to ${Picasa} or ${Google+} to your story. ${helpLinkText} about using images stored in your ${Google} account in your stories.",helpLinkText:"Learn more",cannotFindUser:"Cannot find user ${username}. Please try again."},unsplash:{placeholder:"Search for photos",aboutText:"${Unsplash} is a curated collection of free, high-quality photos.",copyrightText:"All photos are licensed under the ${Unsplash} License. Find more information ${moreInfoLink}.",moreInfoLink:"here"},flickr:{searchType:{account:"${Flickr} Account",text:"All ${Flickr}"},placeholders:{user:"Search for account",userText:"Search this account for photos",text:"Search for photos"},errors:{cannotFindUser:"Cannot find user ${username}.",noUserPhotos:"${username} does not have any public photos.",didYouMean:"Did you mean ${username}?",generalUserError:"Something went wrong when searching for user ${username}."},licenses:{licenseLabel:"License: ",public:"Public Domain",commercial:"OK for Commercial Use",nonCommercial:"OK for Non-Commercial Use",reserved:"All Rights Reserved",any:"Any License"}},agol:{searchLocation:{thisStory:"This Story",agol:"ArcGIS Online",portalArcGIS:"Portal for ArcGIS",portal:"Portal",myOrg:"${orgname} Organization",myContent:"My Content"},createContent:{createNewMap:"Create a New Map",or:"OR",dragAndDropImage:"Drop images",dragAndDropImageAudio:"Drop images or audio",uploadButton:"Browse",agolInfo:"Uploaded images and audio will be accessible only within this story.",saveBeforeUpload:"Once you save this story, you can upload images and audio to ArcGIS here.",fileExtsImage:"Supported types: png, jpg, gif, bmp.",fileExtsImageAudio:"Supported types: png, jpg, gif, bmp, mp3.",maxSize:"Max 10 MB per file."},filterAndSort:{webmap:"Web Map",webscene:"Web Scene",image:"Image",audio:"Audio",date:"Date",sortByDate:"Sort by date",title:"Title",sortByTitle:"Sort by title",views:"Views",search:"Search by keyword or ID"}}}}},mapEditor:{dialogTitle:"Edit map",unauthorizedDomain:"You are not on an authorized domain to use the map editor",loading:"Please wait while the map editor is loading",saving:"Saving the map",success:"Map saved",cancelTitle:"Discard any unsaved changes?",errorSave:"Unable to save map. Please try again.",loadFail:"Sorry, the map editor cannot be loaded",close:"Close",save:"Save",confirm:"Yes, close map",deny:"No, keep working"},textEditor:{placeholder:{continueStory:"Continue your story here..."},blockAdd:{text:"Text",media:"Media",title:"Title",immersive:"Immersive"},link:{invite:"Paste or type a link..."},color:{choose:"choose",cancel:"cancel",clear:"Clear color"}},imageGallery:{addImage:"Add another image",moveBackward:"Move backward",moveForward:"Move forward"},cover:{titlePrompt:"Enter your story title...",subtitlePrompt:"Scroll down to get started or enter an optional subtitle",mediaPlaceholder:"Add your image or video",saveError:"Save failed, you already have an item with this title"},credits:{sectionInvite:"Add a credits section",warning:"Both fields must be filled out",content:"Content...",source:"Source...",linkPrompt:"Optional link...",introductionPlaceholder:"Enter an optional introduction to your credits section..."},immersive:{titleConfig:{theme:"Theme"},panelConfig:{position:"Position",theme:"Theme",size:"Size",background:"Background",layout:"Scrolling (for all panels)"}},title:{placeholder:"Enter a title..."},media:{mediaUpload:"Media upload in progress...",mediaUploadSuccess:"Media uploaded successfully",mediaUploadFail:"Media upload failed"},controller:{sectionOrganize:"You organized the sections",immersiveOrganize:"You organized the views",sectionDelete:"You deleted a section",viewDelete:"You deleted a view"},notification:{cancel:"Cancel",close:"Close",undo:"Undo"},sections:{sequence:"Narrative",immersive:"Immersive",title:"Title"},mediaErrors:{mediaTypes:{image:"image",audio:"audio",webmap:"map",webscene:"scene",video:"video",content:"content",webpage:"web page"},placeholders:{generic:"This content is not accessible.",deleted:"This item has been deleted.",inaccessible:"This content is not accessible.",unauthorized:"You are not authorized to view this content.",unshared:"This item is not shared the same as your story.",othersUnshared:"This item is not shared the same as your story.",subscriptionContent:"This map contains a subscriber layer.",premiumContent:"This map contains a premium layer.",secureService:"This map contains a secure layer."},contentIssues:{noAltImage:"Media May Not Work on Mobile",noAltImageUnsupported:"Media Not Supported on Mobile",noAltImageWarning:"Media May Not Work on Mobile",altImageBroken:"The alternate image defined for this media item is not accessible",httpMedia:"Insecure Media",httpContent:"Insecure Content"},contentWarnings:{noAltImage:"Be sure to test your story on mobile devices before sharing it. If this media does not work as expected, use the button below to add an alternate image that will be shown when the story is viewed on a phone or tablet.",noAltImageUnsupported:"This media will not work on mobile devices. Use the button below to add an alternate image that will be shown when the story is viewed on a phone or tablet.",noAltImageWarning:"Be sure to test your story on mobile devices before sharing it. If this media does not work as expected, use the button below to add an alternate image that will be shown when the story is viewed on a phone or tablet.",noAltImageAlt:"This type of media is not supported or may not work well on mobile devices. On the mobile tab, provide an alternate image that will be shown when the story is viewed on a phone or tablet."},descriptions:{httpAudioUnfixable:"This audio does not support HTTPS. Remove it from your story or replace it with a link.",httpAudioUncheckable:"This audio has an insecure (HTTP) URL. Click the button below to try using an HTTPS URL for this audio. If that doesnât work, remove the audio from your story or replace it with a hyperlink.",httpAudioFixable:"This audio has an insecure (HTTP) URL. Click the button below to use a secure HTTPS URL for this audio.",httpWebpageUnfixable:"This web page does not support HTTPS. Remove it from your story or replace it with a screenshot or link.",httpWebpageUncheckable:"This web page has an insecure (HTTP) URL. Click the button below to try using an HTTPS URL for this web page. If that doesnât work, remove the web page from your story or replace it with a screenshot or hyperlink.",httpWebpageFixable:"This web page has an insecure (HTTP) URL. Click the button below to use a secure HTTPS URL for this web page.",httpVideoUnfixable:"This video does not support HTTPS. Remove it from your story or replace it with a screenshot or link.",httpVideoUncheckable:"This video has an insecure (HTTP) URL. Click the button below to try using an HTTPS URL for this video. If that doesnât work, remove the video from your story or replace it with a screenshot or hyperlink.",httpVideoFixable:"This video has an insecure (HTTP) URL. Click the button below to use a secure HTTPS URL for this video.",httpImageUnfixable:"This image does not support HTTPS. Remove it from your story or replace it with a link.",httpImageUncheckable:"This image has an insecure (HTTP) URL. Click the button below to try using an HTTPS URL for this image. If that doesnât work, remove the image from your story or replace it with a hyperlink.",httpImageFixable:"This image has an insecure (HTTP) URL. Click the button below to use a secure HTTPS URL for this image.",httpLayer:"This layer has an insecure (HTTP) URL.",inaccessibleLogo:"This logo is not accessible. Replace it with another image.",httpLogoUnfixable:"This logo does not support HTTPS. Replace it with another image.",httpLogoFixable:"This logo has an insecure (HTTP) URL. Use an HTTPS URL for the logo.",httpLogoUncheckable:"This logo has an insecure (HTTP) URL. Use an HTTPS URL for the logo, or replace it with another image."},tooltips:{httpAudioFixable:"Click the button to use a secure HTTPS URL for this audio.",httpAudioUncheckable:"Try using an HTTPS URL for this audio. If that doesnât work, remove the audio from your story or replace it with a link.",httpWebpageFixable:"Click the button to use a secure HTTPS URL for this web page.",httpWebpageUncheckable:"Try using an HTTPS URL for this web page. If that doesnât work, remove the web page from your story or replace it with a screenshot or link.",httpVideoFixable:"Click the button to use a secure HTTPS URL for this video.",httpVideoUncheckable:"Try using an HTTPS URL for this video. If that doesnât work, remove the video from your story or replace it with a screenshot or link.",httpImageFixable:"Click the button to use a secure HTTPS URL for this image.",httpImageUncheckable:"Try using an HTTPS URL for this image. If that doesnât work, remove the image from your story or replace it with a link.",httpLayerMyMap:"Visit the map's item page to update this layer to use HTTPS. If the layer cannot be updated, remove it from the map.",httpLayerNotMyMap:"Make a copy of the map and update this layer to use HTTPS. If the layer cannot be updated, remove it from the map.",clickLearnMore:"Click to learn more."},fixButtons:{agolItemPage:"Item Page",openTheMap:"Open Map",updateAudio:"Fix Audio URL",updateWebpages:"Fix Web Page URL",updateVideos:"Fix Video URL",updateImages:"Fix Image URL"},mapIssues:{fixButton:"Fix Issues",nofixButton:"Issues",mapLabel:"Map:",summaries:{unshared:"Unshared Content",othersUnshared:"Someone Else's Unshared Content",subscriptionContent:"Subscriber Content",premiumContent:"Premium Content",secureContent:"Secure Content",deleted:"Deleted Content",inaccessible:"Inaccessible Content",unauthorized:"Unauthorized Content"},descriptions:{unshared:"This content is not shared the same as your story.",othersUnshared:"This content is owned by someone else and not shared the same as your story.",othersUnsharedAuthorized:"This content is owned by someone else, but you are authorized to share it.",inaccessible:"This content is not accessible.",deleted:"This content has been deleted.",unauthorized:"You are not authorized to view this content.",popupFeatureLayer:"A tiled layer's pop-ups come from a feature layer that is not shared the same as your story.",subscriptionContent:"You must authorize subscriber content for public use.",premiumContent:"You must authorize premium content for public use.",secureService:"Secure content is not accessible to your readers.",missingItemWarning:"The item associated with this layer has been deleted."},tooltips:{unshared:"Click to learn more about sharing.",othersUnshared:"You do not have permissions to share content owned by others. Ask the owner to share it, remove the map from your story, or edit the map to remove the layers that aren't yours. Click to learn more about edting maps.",inaccessible:"Remove this map from your story or edit it to remove the inaccessible layers. Click to learn more about editing maps.",deleted:"Remove this map from your story or edit it to remove the missing layers. Click to learn more about editing maps.",unauthorized:"Remove this map from your story or edit it to remove the unauthorized layers. Click to learn more about editing maps.",popupFeatureLayer:"A tiled layer's pop-ups come from a feature layer that is not shared the same as your story.",subscriptionContent:"Subscriber content does not consume credits. Click to learn more.",premiumContent:"Credits will be charged to your organization each time someone views a premium layer in your story. Click to learn more.",secureService:"Remove the secure content from your story, or click to learn how to authorize secure content for use by others.",missingItemWarning:"This layer still works, but its symbols, pop-ups, or name may have changed. Confirm the layer appears as expected, or remove it from your story."},fixButtons:{share:"Share",hide:"Hide",authorize:"Authorize",remove:"Remove",help:"Get Help",ignore:"Ignore",confirm:"Confirm",edit:"Edit Map"},shareNotifications:{alsoSharedMapsAndLayers:"Some maps and layers were also shared.",alsoSharedMaps:"Some maps were also shared.",alsoSharedLayers:"Some layers were also shared.",sharedOthersContent:"You've used your administrative privileges to share someone else's content."}},storyHealth:{healthy:"No issues",notHealthy:"Fix issues",warnings:"See warnings"}},saveErrorSocial:{title:"Social media sharing",panel1:"Your story may not appear properly on social media as your ArcGIS web application item title is not the same as your story title.",panel1tooltip:"By defining a title, summary and thumbnail image, your story will look like this:",panel2:"Which title would you like to use on social media:",panel2q1:"Story title (recommended)",panel2q1tooltip:"By choosing this option, your item title will be modified to match your story title and further changes in the builder will be synchronized.",panel2q2:"Item title",panel3:"To further improve how your story looks on social media use ${MYSTORIES} to add a summary and a thumbnail image.",panel4:"Do not warn me again for this story",save:"Save",mystories:"My Stories"},httpsTransitionMessage:{bannerMsg:"Important Message about Web Security and Story Maps",s1h1:"Esri is enhancing the security of Story Maps",s1p1:"Your Story Maps live on the web, and the web community is always working to establish and implement better security. HTTPS, which provides a secure connection for content transmitted over the internet, is emerging as the expected way to access web content. Most modern browsers now show warning messages when HTTP instead of HTTPS is used. Because of this emerging standard, we strongly recommend you use HTTPS links for authoring and sharing Story Maps, and only use HTTPS URLs when embedding web content or linking to images within a Story Map.",
s1p2:"Practically speaking, this means a Story Map and all its content (including images, layers, embedded apps and websites) should be accessed using links that start with HTTPS rather than HTTP. This ensures the best experience for your readers because most web browsers will indicate that your stories are secure.",s2h1:"What do I need to do?",s2p1:"Esri is working to make this an easy transition for Story Map authors and readers. Tools are available now in Story Map builders and My Stories that help you find insecure content (HTTP) in your stories and provide recommendations for how to address it. Please check your stories for insecure content and update to HTTPS as soon as possible.",action1:"Close",action2:"Check my stories now",action3:"Learn more",floatingNotification:"This story contains insecure (HTTP) content. Please review and address these issues."}}},ar:1,bs:1,ca:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sl:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("storymaps/tpl/utils/UI",[],function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return{isMobileBrowser:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)},hasWebGL:function(e){if(window.WebGLRenderingContext){for(var t=document.createElement("canvas"),n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],i=!1,o=0;o<4;o++)try{if((i=t.getContext(n[o]))&&"function"==typeof i.getParameter)return!e||{name:n[o],gl:i}}catch(e){}return!1}return!1},addCSSRule:function(e,t,n){var i="head";if(n&&(i=n.contents().find("head")),t){var o=$(i).find("#"+t).eq(0);if(o.length)return void o.html(e)}$("<style>").prop("type","text/css").attr("id",t).html(e).appendTo(i)},getUID:function(){return Date.now()+"-"+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}),define("storymaps/tpl/builder/BuilderHelper",["dojo/_base/lang","dojo/_base/array","esri/arcgis/utils","esri/IdentityManager","esri/request"],function(e,t,n,i,o){function r(){return n.arcgisUrl.split("/sharing/")[0]}function a(t){var n=r(),a=e.clone(app.data.appItem.item),s=e.clone(app.data.appItem.data),l=a.owner||i.findCredential(n).userId,u=i.findCredential(n).token;delete a.avgRating,delete a.modified,delete a.numComments,delete a.numRatings,delete a.numViews,delete a.size,a.typeKeywords||(a.typeKeywords=[]),a.typeKeywords=a.typeKeywords.concat(app.cfg.WEBAPP_KEYWORD_APP),a.typeKeywords=a.typeKeywords.concat(app.cfg.WEBAPP_KEYWORD_GENERIC);var c=$.map(app.cfg.LAYOUTS,function(e){return"layout-"+e.id});a.typeKeywords=$.grep(a.typeKeywords,function(e){return-1==$.inArray(e,c)}),a.typeKeywords.push("layout-cascade-1"),a.typeKeywords=$.grep(a.typeKeywords,function(e,t){return t==$.inArray(e,a.typeKeywords)}),a.tags=a.tags?a.tags.join(","):"",a.typeKeywords=a.typeKeywords.join(","),a.serviceProxyParams=JSON.stringify(a.serviceProxyParams),t||(a.title=app.data.title),a.properties&&(a.properties=JSON.stringify(a.properties)),a.url&&a.url.match(/apps\/[a-zA-Z]+\/\?appid=/)&&(a.url=a.url.replace("/?appid=","/index.html?appid=")),a=e.mixin(a,{f:"json",token:u,overwrite:!0,text:JSON.stringify(s)});var d=n+"/sharing/rest/content/users/"+l+(a.ownerFolder?"/"+a.ownerFolder:"");return a.id?d+="/items/"+a.id+"/update":d+="/addItem",o({url:d,handleAs:"json",content:a},{usePost:!0})}function s(){if(!app.portal)return void console.error("Fatal error - not signed in")}function l(){return{itemType:"text",guid:null,name:null,type:"Web Mapping Application",typeKeywords:app.cfg.WEBAPP_KEYWORD_GENERIC.concat(app.cfg.WEBAPP_KEYWORD_APP),description:null,tags:app.cfg.WEBAPP_TAG,snippet:null,thumbnail:null,documentation:null,extent:[],lastModified:-1,spatialReference:null,accessInformation:null,licenseInfo:null,culture:"en-us",properties:null,size:1,appCategories:[],industries:[],languages:[],largeThumbnail:null,banner:null,screenshots:[],listed:!1,ownerFolder:null,protected:!1,commentsEnabled:!0,numComments:0,numRatings:0,avgRating:0,numViews:1}}function u(e){return this.getPortalURL()+"/home/webmap/viewer.html?webmap="+e}function c(e){return this.getPortalURL()+"/home/webscene/viewer.html?webscene="+e}function d(){return app.isPortal?this.getPortalURL()+"/apps/MyStories/":"//storymaps.arcgis.com/en/my-stories/"}return{getPortalURL:r,saveApp:a,getBlankAppJSON:l,cleanApp:s,getMapViewerLink:u,getSceneViewerLink:c,getMyStoriesURL:d}}),define("storymaps-react/tpl/view/media/builder/Tab",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.title="",this.selectedClass="selected",this.hasBeenRendered=!1,this._isActive=!1,this._options=t,this._sectionOptions=t.sectionOptions,this._onSectionChange=t.onSectionChange,this._onOpen=t.onOpen,this.showErrors=t.showErrors,this.showWarnings=t.showWarnings,this.mobileSupported=t.mobileSupported}return i(e,[{key:"onChange",value:function(){this._onChange()}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.container&&e.media&&e.onChange&&e.rootNode&&(this._onOpen&&this._onOpen(),this._isActive=!0,this.hasBeenRendered=!0,this._node=e.container,this._media=e.media,this._onChange=e.onChange,this._onAction=e.onAction,this._rootNode=e.rootNode)}},{key:"beforePanelDestroy",value:function(){}},{key:"destroy",value:function(){this._isActive=!1}},{key:"setConfig",value:function(e,t){this._media.options[e]=t,this.onChange()}},{key:"setMedia",value:function(e,t){this._media[e]=t,this.onChange()}},{key:"setSectionConfig",value:function(e,t){this._sectionOptions[e]=t,this._onSectionChange()}}]),e}();t.default=o,e.exports=t.default}),define("text",{}),define("handlebars/safe-string",["exports"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return""+this.string},e.default=t}),define("handlebars/utils",["./safe-string","exports"],function(e,t){function n(e){return l[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function o(e){return e instanceof s?e.toString():null==e?"":e?(e=""+e,c.test(e)?e.replace(u,n):e):e+""}function r(e){return!e&&0!==e||!(!f(e)||0!==e.length)}function a(e,t){return(e?e+".":"")+t}var s=e.default,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;t.extend=i;var d=Object.prototype.toString;t.toString=d;var p=function(e){return"function"==typeof e};p(/x/)&&(p=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var p;t.isFunction=p;var f=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===d.call(e)};t.isArray=f,t.escapeExpression=o,t.isEmpty=r,t.appendContextPath=a}),define("handlebars/exception",["exports"],function(e){function t(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var o=Error.prototype.constructor.call(this,e),r=0;r<n.length;r++)this[n[r]]=o[n[r]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var n=["description","fileName","lineNumber","message","name","number","stack"];t.prototype=new Error,e.default=t}),define("handlebars/base",["./utils","./exception","exports"],function(e,t,n){function i(e,t){this.helpers=e||{},this.partials=t||{},o(this)}function o(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,o=n.fn;if(!0===t)return o(this);if(!1===t||null==t)return i(this);if(l(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=f(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new a("Must pass iterator to #each");var n,i,o=t.fn,s=t.inverse,c=0,d="";if(t.data&&t.ids&&(i=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),u(e)&&(e=e.call(this)),t.data&&(n=f(t.data)),e&&"object"==typeof e)if(l(e))for(var p=e.length;c<p;c++)n&&(n.index=c,n.first=0===c,n.last=c===e.length-1,i&&(n.contextPath=i+c)),d+=o(e[c],{data:n});else for(var h in e)e.hasOwnProperty(h)&&(n&&(n.key=h,n.index=c,n.first=0===c,i&&(n.contextPath=i+h)),d+=o(e[h],{data:n}),c++);return 0===c&&(d=s(this)),d}),e.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){u(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=f(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var r=e,a=t.default;n.VERSION="2.0.0";n.COMPILER_REVISION=6;var s={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=s;var l=r.isArray,u=r.isFunction,c=r.toString;n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:d,log:p,registerHelper:function(e,t){if("[object Object]"===c.call(e)){if(t)throw new a("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){"[object Object]"===c.call(e)?r.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=d;var p=d.log;n.log=p;var f=function(e){var t=r.extend({},e);return t._parent=e,t};n.createFrame=f}),define("handlebars/runtime",["./utils","./exception","./base","exports"],function(e,t,n,i){function o(e){var t=e&&e[0]||1,n=p;if(t!==n){if(t<n){var i=f[n],o=f[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+o+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new d("No environment passed to template");if(!e||!e.main)throw new d("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,o,r,a,s,l,u,p){a&&(r=c.extend({},r,a));var f=t.VM.invokePartial.call(this,n,o,r,s,l,u,p);if(null==f&&t.compile){var h={helpers:s,partials:l,data:u,depths:p};l[o]=t.compile(n,{data:void 0!==u,compat:e.compat},t),f=l[o](r,h)}if(null!=f){if(i){for(var m=f.split("\n"),g=0,v=m.length;g<v&&(m[g]||g+1!==v);g++)m[g]=i+m[g];f=m.join("\n")}return f}throw new d("The partial "+o+" could not be compiled when running in runtime-only mode")},i={lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var i=this.programs[e],o=this.fn(e);return t||n?i=a(this,e,o,t,n):i||(i=this.programs[e]=a(this,e,o)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=c.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},o=function(t,n){n=n||{};var r=n.data;o._setup(n),!n.partial&&e.useData&&(r=u(t,r));var a;return e.useDepths&&(a=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,r,a)};return o.isTop=!0,o._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},o._child=function(t,n,o){if(e.useDepths&&!o)throw new d("must pass parent depths");return a(i,t,e[t],n,o)},o}function a(e,t,n,i,o){var r=function(t,r){return r=r||{},n.call(e,t,e.helpers,e.partials,r.data||i,o&&[t].concat(o))};return r.program=t,r.depth=o?o.length:0,r}function s(e,t,n,i,o,r,a){var s={partial:!0,helpers:i,partials:o,data:r,depths:a};if(void 0===e)throw new d("The partial "+t+" could not be found");if(e instanceof Function)return e(n,s)}function l(){return""}function u(e,t){return t&&"root"in t||(t=t?h(t):{},t.root=e),t}var c=e,d=t.default,p=n.COMPILER_REVISION,f=n.REVISION_CHANGES,h=n.createFrame;i.checkRevision=o,i.template=r,i.program=a,i.invokePartial=s,i.noop=l}),define("handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(e,t,n,i,o,r){var a=e,s=t.default,l=n.default,u=i,c=o,d=function(){var e=new a.HandlebarsEnvironment;return u.extend(e,a),e.SafeString=s,e.Exception=l,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},p=d();return p.create=d,p.default=p,p.default}),define("lib-build/hbars",["text","Handlebars"],function(e,t){"use strict";var n={};return{version:"0.0.2",load:function(i,o,r,a){if(a=a||{},n[i])r(n[i]);else{var s=a.hbars&&a.hbars.extension||".hbs",l=a.hbars&&a.hbars.path||"",u=a.hbars&&a.hbars.compileOptions||{},c=function(e){a.isBuild?(n[i]=t.precompile(e,u),r()):(n[i]=t.compile(e),r(n[i]))};c.error=r.error,e.load(l+i+s,o,c,a)}},write:function(e,t,i,o){var r=n[t];r&&i.asModule(e+"!"+t,"define('{pluginName}!{moduleName}', ['Handlebars'], function (Handlebars) { return Handlebars.template({content}); });\n".replace("{pluginName}",e).replace("{moduleName}",t).replace("{content}",r))}}}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabIssues",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" map-issue-summary"},3:function(e,t,n,i,o){var r,a='          <ol class="carousel-indicators">\n';return r=t.each.call(e,null!=e?e.issueMessages:e,{name:"each",hash:{},fn:this.program(4,i,o),inverse:this.noop,data:i}),null!=r&&(a+=r),a+"          </ol>\n"},4:function(e,t,n,i,o){var r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing;return'              <li data-target="#'+s(a(null!=o[1]?o[1].carouselId:o[1],e))+'" data-slide-to="'+s((r=null!=(r=t.index||(null!=e?e.index:e))?r:l,"function"==typeof r?r.call(e,{name:"index",hash:{},data:i}):r))+'"></li>\n'},6:function(e,t,n,i){return"is-carousel"},8:function(e,t,n,i,o){var r,a,s=this.lambda,l=this.escapeExpression,u=t.helperMissing,c='            <div class="single-issue-summary item';return r=t.if.call(e,null!=e?e.isError:e,{name:"if",hash:{},fn:this.program(9,i,o),inverse:this.program(11,i,o),data:i}),null!=r&&(c+=r),c+='" data-target="#'+l(s(null!=o[1]?o[1].carouselId:o[1],e))+'" data-slide-to="'+l((a=null!=(a=t.index||(null!=e?e.index:e))?a:u,"function"==typeof a?a.call(e,{name:"index",hash:{},data:i}):a))+'">\n              <div class="title-wrapper">\n                <div class="title">'+l((a=null!=(a=t.banner||(null!=e?e.banner:e))?a:u,"function"==typeof a?a.call(e,{name:"banner",hash:{},data:i}):a))+'</div>\n                <div class="description">'+l((a=null!=(a=t.description||(null!=e?e.description:e))?a:u,"function"==typeof a?a.call(e,{name:"description",hash:{},data:i}):a))+"</div>\n              </div>\n",r=t.if.call(e,null!=e?e.button:e,{name:"if",hash:{},fn:this.program(13,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t.if.call(e,null!=e?e.tooltip:e,{name:"if",hash:{},fn:this.program(15,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),c+"            </div>\n"},9:function(e,t,n,i){return" error"},11:function(e,t,n,i){return" warning"},13:function(e,t,n,i){var o,r=t.helperMissing;return'                <div class="fix-btn btn btn-primary">\n                  <span class="small-loader hidden"></span>\n                  <span>'+(0,this.escapeExpression)((o=null!=(o=t.button||(null!=e?e.button:e))?o:r,"function"==typeof o?o.call(e,{name:"button",hash:{},data:i}):o))+"</span>\n                </div>\n"},15:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'                <div class="media-info">\n                  <div class="media-info-background"></div>\n                  <i class="fix-tooltip fa fa-info-circle" aria-hidden="true" title="'+a((o=null!=(o=t.tooltip||(null!=e?e.tooltip:e))?o:r,"function"==typeof o?o.call(e,{name:"tooltip",hash:{},data:i}):o))+'" data-link='+a((o=null!=(o=t.helpLink||(null!=e?e.helpLink:e))?o:r,"function"==typeof o?o.call(e,{name:"helpLink",hash:{},data:i}):o))+"></i>\n                </div>\n"},17:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'          <div class="carousel-control left" href="#'+a((o=null!=(o=t.carouselId||(null!=e?e.carouselId:e))?o:r,"function"==typeof o?o.call(e,{name:"carouselId",hash:{},data:i}):o))+'" role="button" data-slide="prev">\n            <span class="fa fa-arrow-left arrow icon-prev"></span>\n          </div>\n          <div class="carousel-control right" href="#'+a((o=null!=(o=t.carouselId||(null!=e?e.carouselId:e))?o:r,"function"==typeof o?o.call(e,{name:"carouselId",hash:{},data:i}):o))+'" role="button" data-slide="next">\n            <span class="fa fa-arrow-right arrow icon-next"></span>\n          </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,o){var r,a,s=t.helperMissing,l=this.escapeExpression,u='<div class="builder-config-section issues">\n  <div class="section-content horizontal">\n    <div class="issue-summary';return r=t.if.call(e,null!=e?e.isMap:e,{name:"if",hash:{},fn:this.program(1,i,o),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='">\n\n      <div id="'+l((a=null!=(a=t.carouselId||(null!=e?e.carouselId:e))?a:s,"function"==typeof a?a.call(e,{name:"carouselId",hash:{},data:i}):a))+'" class="issue-summary-wrapper carousel slide" data-interval="false" data-wrap="false" data-ride="carousel">\n\n        \x3c!-- Indicators if needed --\x3e\n',r=t.if.call(e,null!=e?e.needsCarousel:e,{name:"if",hash:{},fn:this.program(3,i,o),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='\n        \x3c!-- Content --\x3e\n        <div class="carousel-inner ',r=t.if.call(e,null!=e?e.needsCarousel:e,{name:"if",hash:{},fn:this.program(6,i,o),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='">\n',r=t.each.call(e,null!=e?e.issueMessages:e,{name:"each",hash:{},fn:this.program(8,i,o),inverse:this.noop,data:i}),null!=r&&(u+=r),u+="        </div>\n\n        \x3c!-- arrows if needed --\x3e\n",r=t.if.call(e,null!=e?e.needsCarousel:e,{name:"if",hash:{},fn:this.program(17,i,o),inverse:this.noop,data:i}),null!=r&&(u+=r),u+="\n      </div>\n    </div>\n    ",a=null!=(a=t.issueItemsTemplate||(null!=e?e.issueItemsTemplate:e))?a:s,r="function"==typeof a?a.call(e,{name:"issueItemsTemplate",hash:{},data:i}):a,null!=r&&(u+=r),u+"\n  </div>\n</div>\n"},useData:!0,useDepths:!0})}),define("issue-checker/IssueTypes",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={maps:{deleted:"maps/deleted",inaccessible:"maps/inaccessible",unauthorized:"maps/unauthorized",unshared:"maps/unshared",othersUnshared:"maps/othersUnshared"},content:{unshared:"content/unshared",othersUnshared:"content/othersUnshared"},layers:{deleted:"layers/deleted",inaccessible:"layers/inaccessible",unauthorized:"layers/unauthorized",unshared:"layers/unshared",othersUnshared:"layers/othersUnshared",premiumContent:"layers/premiumContent",subscriptionContent:"layers/subscriptionContent",secureService:"layers/secureService"},images:{inaccessible:"images/inaccessible",httpContentFixable:"images/httpContentFixable",httpContentUnfixable:"images/httpContentUnfixable",httpContentIndeterminate:"images/httpContentIndeterminate"},audio:{inaccessible:"audio/inaccessible",httpContentFixable:"audio/httpContentFixable",httpContentUnfixable:"audio/httpContentUnfixable",httpContentIndeterminate:"audio/httpContentIndeterminate"},videos:{inaccessible:"videos/inaccessible",httpContentFixable:"videos/httpContentFixable",httpContentUnfixable:"videos/httpContentUnfixable",httpContentIndeterminate:"videos/httpContentIndeterminate"},webpages:{httpContentFixable:"webpages/httpContentFixable",httpContentUnfixable:"webpages/httpContentUnfixable",httpContentIndeterminate:"webpages/httpContentIndeterminate"}},e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/builder/TabIssues",[],function(){}),define("lib-build/less!storymaps-react/tpl/view/media/builder/Common",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabIssues",["module","exports","./Tab","lib-build/hbars!./TabIssues","issue-checker/IssueTypes","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./TabIssues","lib-build/less!./Common"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=f.default.builder,v=app.cfg.BUILDER_LINKS.issueHelps,b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=f.default.builder.mediaConfig.tabs.issues,n.type="issues",n.icon="fa-exclamation-triangle",n.scanResults=e.scanResults,n.issues=e.issues,n.instanceID=e.instanceID,n.showErrors=e.scanResults.errors.length,n.showWarnings=!e.scanResults.errors.length&&e.scanResults.warnings.length,n}return u(t,e),h(t,[{key:"render",value:function(e){if(this.scanResults&&this.issues&&this.issues.length){var t=this.getIssueMessages(e&&e.showDefaultButton);return(0,d.default)({issueMessages:t,needsCarousel:t.length>1,carouselId:this.getCarouselId(),issueItemsTemplate:e?e.itemsTemplate:null,isMap:e&&e.isMap||!1})}}},{key:"postCreate",value:function(e){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var n=this._node.find(".fix-tooltip");n.tooltip({container:this._node}),n.on("click",function(){var e=$(this).data("link");e&&window.open(e,"_blank")});var i=this._node.find(".carousel");i.find(".carousel-control.left").addClass("hidden"),i.find(".item").eq(0).addClass("active"),i.find(".carousel-indicators li").eq(0).addClass("active"),i.on("slide.bs.carousel",function(e){var t=parseInt($(e.relatedTarget).data("slide-to"));this.updateCarouselArrows(i,this,t)}.bind(this)),this._addFixButtonEvents()}},{key:"_addFixButtonEvents",value:function(){var e=this;this._node.find(".fix-btn").each(function(t,n){var i=e.issues[t];$(n).on("click",function(){switch(i.id){case p.default.webpages.httpContentUnfixable:case p.default.webpages.httpContentIndeterminate:case p.default.images.httpContentUnfixable:case p.default.images.httpContentIndeterminate:case p.default.audio.httpContentUnfixable:case p.default.audio.httpContentIndeterminate:case p.default.videos.httpContentUnfixable:case p.default.videos.httpContentIndeterminate:e._onAction("https-open-picker");break;case p.default.webpages.httpContentFixable:case p.default.images.httpContentFixable:case p.default.audio.httpContentFixable:case p.default.videos.httpContentFixable:e._onAction("https-swap")}})})}},{key:"updateCarouselArrows",value:function(e,t,n){e.find(".carousel-control").removeClass("hidden"),0===n?e.find(".carousel-control.left").addClass("hidden"):n+1===t.scanResults.errors.length&&e.find(".carousel-control.right").addClass("hidden")}},{key:"getCarouselId",value:function(){return this.instanceID+"_carousel"}},{key:"updateCarouselId",value:function(){var e=this.getCarouselId();this._node.find(".issue-summary-wrapper.carousel").prop("id",e),this._node.find(".carousel-indicators li").data("target","#"+e),this._node.find(".carousel-inner .item").data("target","#"+e),this._node.find(".carousel-control").attr("href","#"+e)}},{key:"getIssueMessages",value:function(e){var t=this;return this.issues.map(function(n,i){var o=void 0,r=void 0,a=void 0,s=void 0,l=void 0,u=g.mediaErrors;if(n.id===p.default.maps.unshared||n.id===p.default.layers.unshared||n.id===p.default.content.unshared?(o=u.mapIssues.summaries.unshared,s=u.mapIssues.descriptions.unshared,r=u.mapIssues.tooltips.unshared,a=u.mapIssues.fixButtons.share,l=v.unshared):n.id===p.default.maps.othersUnshared||n.id===p.default.layers.othersUnshared||n.id===p.default.content.othersUnshared?(o=u.mapIssues.summaries.othersUnshared,s=u.mapIssues.descriptions.othersUnshared,r=u.mapIssues.tooltips.othersUnshared,a=u.mapIssues.fixButtons.help,l=v.othersUnshared):n.id===p.default.layers.deleted?(o=u.mapIssues.summaries.deleted,s=u.mapIssues.descriptions.descriptions,r=u.mapIssues.tooltips.deleted,a=u.mapIssues.fixButtons.remove,l=v.deleted):n.id===p.default.layers.inaccessible?(o=u.mapIssues.summaries.inaccessible,s=u.mapIssues.descriptions.inaccessible,r=u.mapIssues.tooltips.inaccessible,a=u.mapIssues.fixButtons.remove,l=v.inaccessible):n.id===p.default.layers.unauthorized?(o=u.mapIssues.summaries.unauthorized,s=u.mapIssues.descriptions.unauthorized,r=u.mapIssues.tooltips.unauthorized,a=u.mapIssues.fixButtons.remove,l=v.unauthorized):n.id===p.default.layers.premiumContent?(o=u.mapIssues.summaries.premiumContent,s=u.mapIssues.descriptions.premiumContent,r=u.mapIssues.tooltips.premiumContent,a=u.mapIssues.fixButtons.authorize,l=v.premiumContent):n.id===p.default.layers.subscriptionContent?(o=u.mapIssues.summaries.subscriptionContent,s=u.mapIssues.descriptions.subscriptionContent,r=u.mapIssues.tooltips.subscriptionContent,a=u.mapIssues.fixButtons.authorize,l=v.subscriptionContent):n.id===p.default.layers.secureService?(o=u.mapIssues.summaries.secureContent,s=u.mapIssues.descriptions.secureContent,r=u.mapIssues.tooltips.secureService,a=u.mapIssues.fixButtons.authorize,l=v.secureContent):n.id===p.default.webpages.httpContentFixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpWebpageFixable,a=u.fixButtons.updateWebpages,l=""):n.id===p.default.webpages.httpContentUnfixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpWebpageUncheckable,a=u.fixButtons.updateWebpages,l=""):n.id===p.default.webpages.httpContentIndeterminate?(o=u.contentIssues.httpMedia,s=u.descriptions.httpWebpageUncheckable,a=u.fixButtons.updateWebpages,l=""):n.id===p.default.audio.httpContentFixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpAudioFixable,a=u.fixButtons.updateAudio,l=""):n.id===p.default.audio.httpContentUnfixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpAudioUncheckable,a=u.fixButtons.updateAudio,l=""):n.id===p.default.audio.httpContentIndeterminate?(o=u.contentIssues.httpMedia,s=u.descriptions.httpAudioUncheckable,a=u.fixButtons.updateAudio,l=""):n.id===p.default.videos.httpContentFixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpVideoFixable,a=u.fixButtons.updateVideos,l=""):n.id===p.default.videos.httpContentUnfixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpVideoUncheckable,a=u.fixButtons.updateVideos,l=""):n.id===p.default.videos.httpContentIndeterminate?(o=u.contentIssues.httpMedia,s=u.descriptions.httpVideoUncheckable,a=u.fixButtons.updateVideos,l=""):n.id===p.default.images.httpContentFixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpImageFixable,a=u.fixButtons.updateImages,l=""):n.id===p.default.images.httpContentUnfixable?(o=u.contentIssues.httpMedia,s=u.descriptions.httpImageUncheckable,a=u.fixButtons.updateImages,l=""):n.id===p.default.images.httpContentIndeterminate?(o=u.contentIssues.httpMedia,s=u.descriptions.httpImageUncheckable,a=u.fixButtons.updateImages,l=""):(o=u.mapIssues.summaries.uncaught,s=u.mapIssues.descriptions.uncaught,r=u.mapIssues.tooltips.uncaught,a=u.mapIssues.fixButtons.edit,l=v.edit),e){var c=t.scanResults.errors[i];c&&!c.actions.length&&(a=u.mapIssues.fixButtons.edit)}return{index:i,issueId:n.id,banner:o,description:s,tooltip:r,button:a,helpLink:l,isError:"error"===n.severity}})}},{key:"destroy",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(c.default);t.default=b,e.exports=t.default}),define("storymaps-react/tpl/builder/Issues",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={content:{noAlternateMedia:"content/noAlternateMedia"}},e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/MediaError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing;return'<div class="loading-error">\n    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n    <span>'+(0,this.escapeExpression)((o=null!=(o=t.message||(null!=e?e.message:e))?o:r,"function"==typeof o?o.call(e,{name:"message",hash:{},data:i}):o))+"</span>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/MediaError",[],function(){}),define("storymaps-react/tpl/view/media/Media",["module","exports","storymaps/tpl/utils/UI","storymaps/tpl/utils/CommonHelper","dojo/topic","dojo/_base/lang","esri/IdentityManager","storymaps/tpl/builder/BuilderHelper","./builder/TabIssues","../../builder/Issues","lib-build/hbars!./MediaError","lib-build/i18n!resources/tpl/viewer/nls/app","lib-build/less!./MediaError"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var m=p(n),g=p(i),v=p(o),b=p(r),y=p(a),_=p(s),w=p(l),C=p(u),k=p(c),x=p(d),E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.type=t.type,
this.id=t.id,this.previewThumb=t.previewThumb,this.previewIcon=t.previewIcon,this.scanResults={hasErrors:!1,hasWarnings:!1},this._scanListener=null,this._cache={},this._isLoaded=!1,this._alternateMedia=null,this._isAlternate=!1,this._node=null,this._domID=m.default.getUID(),this._instanceID=m.default.getUID(),this._isUploadPending=!1,this._builderConfigurationTabs=[],this._builderConfigPanel=null,this._onConfigAction=null,this._sectionType=null}return T(e,[{key:"postCreate",value:function(e){this._builderConfigurationTabs=e.builderConfigurationTabs||[],this._onConfigAction=e.onConfigAction,this._onConfigChangeCallback=e.onConfigChange,this._sectionType=e.sectionType,this._container=e.container;var t=this.getAlternate();app.isInBuilder&&t&&t.postCreate()}},{key:"setCache",value:function(e){this._cache=e}},{key:"setAlternate",value:function(e){this._alternateMedia=e,this._alternateMedia._isAlternate=!0}},{key:"getAlternate",value:function(){return this._alternateMedia}},{key:"removeAlternate",value:function(){this._alternateMedia=null}},{key:"getPreviewThumbnail",value:function(){return e.addToken(this.previewThumb)}},{key:"getPreviewIcon",value:function(){return this.previewIcon}},{key:"isSameMedia",value:function(e){return this.id==e.id}},{key:"_applyConfig",value:function(e){if("block"==this._placement){e.size=e.size||"medium";var t=$.map(this._node.attr("class").split(" "),function(e){return e.match(/block-size-/)?e:null}).join(" ");this._node.removeClass(t).addClass("block-size-"+e.size)}}},{key:"_fadeInMedia",value:function(){var e=this;this._node&&(this._node.removeClass("media-is-loading"),this._node.find(".media-loading .large-loader").hide(),setTimeout(function(){e._node.find(".media-loading").hide(),e._node.find(".media-loading .large-loader").show()},1e3),this._node.find(".media-item").addClass("bring-in"))}},{key:"_onEnableButtonClick",value:function(e){$(e.currentTarget).toggleClass("enabled"),this._node.toggleClass("interaction-enabled")}},{key:"_createAlternateTab",value:function(){}},{key:"_createManageTab",value:function(){}},{key:"checkErrors",value:function(e,t){if(this.scanResults.hasErrors=!1,this.scanResults.hasWarnings=!1,Object.assign(this.scanResults,e),this.scanResults.errors.length){var n=void 0,i=this.scanResults.errors.map(function(e){return e.id}),o={};"image-gallery"===this.type&&(o.index=t.index);var r=this.isUnfixableError(i,o);r&&(n=r),this.setError(n)}else this.scanResults.warnings.length&&(this.scanResults.hasWarnings=!0),this.errorMessage=null,this.updateErrorUI();this._updateConfigPanel()}},{key:"isUnfixableError",value:function(){}},{key:"setError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.scanResults.hasErrors=!0,this.scanResults.unfixable=e.unfixable||!1,e.msg?this.errorMessage=e.msg:e.msg=this.errorMessage,this.updateErrorUI(e)}},{key:"setAlternateError",value:function(){}},{key:"removeAlternateError",value:function(){}},{key:"updateErrorUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.scanResults.hasErrors,n=this.scanResults.hasWarnings,i=e.minimizeInViewer||!1,o=e.showLoadingError||!1,r=void 0,a=void 0;if(e.galleryIndex||0===e.galleryIndex){var s=this._node.find(".ug-thumb-wrapper").eq(e.galleryIndex);r=s,a=s}else r=this._node.find(".block, .background").addBack(".block, .background"),a=r.hasClass(".background")?r:r.find(".block-media");r.removeClass("error warning"),a.toggleClass("minimize-on-viewer",i).toggleClass("show-loading-error",o),a.find(".loading-error").remove(),t?(r.addClass("error"),this.errorMessage=e.msg||this.errorMessage||x.default.viewer.media.loadingError,a.append((0,k.default)({message:this.errorMessage}))):n&&r.addClass("warning")}},{key:"getArcGISContent",value:function(){var e=[],t=void 0;if("webmap"==this.type||"webscene"==this.type)e=[{type:this.type,id:this.id}];else if("image"==this.type&&this._image)t=this.getMediaArcGISContent(this._image.url,"image");else if("image-gallery"==this.type){var n=!0,i=!1,o=void 0;try{for(var r,a=this._images.images[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;t=this.getMediaArcGISContent(s.url,"image"),t&&e.push(t)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}t=null}else"audio"==this.type&&(t=this.getMediaArcGISContent(this._audio.url,"audio"));var l=this.getAlternate();return l&&l._image&&(t=this.getMediaArcGISContent(l._image.url,"image")),t&&e.push(t),e}},{key:"getMediaArcGISContent",value:function(t,n){var i=e.getArcGISItemResourceURL(t);return i?{type:"item-resource",mediaType:n,url:i.url,file:i.file}:null}},{key:"resize",value:function(){}},{key:"postLoad",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"getAuthorizedTransitionsWith",value:function(){return[]}},{key:"initBuilderUI",value:function(){"block"==this._placement&&(this._node.find(".media-delete").html('<div class="media-delete-background"></div><i class="media-delete-icon config-icon fa fa-trash-o"></i>'),this._node.find(".media-delete-icon").click(function(){this._onAction("remove")}.bind(this)))}},{key:"isConfigActive",value:function(){return this._node.hasClass("config-panel-active")}},{key:"closeConfigPanel",value:function(){this._node.removeClass("config-panel-active")}},{key:"destroy",value:function(){this._node&&this._node.remove()}},{key:"remove",value:function(){this._node&&this._node.remove()}},{key:"serialize",value:function(e,t,n){var i=b.default.clone(f({type:e},e,t)),o=this.getAlternate();return o&&(i.alternate=o.serialize(n),i.alternate&&i.alternate.image&&(this._addAlternateCaption(i[e],i.alternate.image),this._addAlternateSize(i[e],i.alternate.image))),n&&"object"===E(i[e])&&(i[e].instanceID=this._instanceID),i}},{key:"isPlaceholder",value:function(){return!1}},{key:"convertToHttps",value:function(){this._onToggleMediaConfig(this),this.serialize(),this._makeUrlsHttps(),this._isLoaded=!1,this._cache&&this._cache[this.id]&&(this._cache[this.id]=null),this._scanListener.remove();var e=this.render({placement:this._placement});"background"===this._placement?this._node.empty().html(e):this._node.replaceWith(e),this.postCreate({container:this._container,onToggleMediaConfig:this._onToggleMediaConfig,builderConfigurationTabs:this._builderConfigurationTabs,onConfigAction:this._onConfigAction,onConfigChange:this._onConfigChangeCallback,sectionType:this._sectionType,foregroundOptions:this._foregroundOptions,applySectionConfig:this._applySectionConfig}),this.load(),this.closeConfigPanel(),this._node.removeClass("builder-config-open")}},{key:"_onAction",value:function(e,t){if("remove"===e||"swap"===e||"alternate-media-swap"===e||"alternate-media-add"===e||"alternate-media-remove"===e||"image-to-image-gallery"===e||"image-gallery-to-image"===e||"arcgis-edit"===e||"https-open-picker"===e){var n=this,i=-1!==e.indexOf("alternate-");i&&(n=this.getAlternate()),this._onConfigAction({action:e,media:n,newMedia:t,mainMedia:i?this:null})}"arcgis-edit-external"===e&&window.open(_.default.getMapViewerLink(this.id),"_blank"),"https-swap"===e&&this.convertToHttps(),"remove"!==e&&"alternate-media-remove"!==e&&"https-swap"!==e||v.default.publish("builder-should-check-story"),this._onConfigChange()}},{key:"_onConfigChange",value:function(){v.default.publish("builder-media-update"),this._onConfigChangeCallback&&this._onConfigChangeCallback()}},{key:"_initConfigPanel",value:function(){}},{key:"_initConfigTabs",value:function(){}},{key:"_destroyConfigTabs",value:function(){if(this._builderConfigPanel&&this._builderConfigPanel._tabs){var e=this._builderConfigPanel._tabs.find(function(e){return e._isActive});e&&this._builderConfigPanel.destroyTab(e)}}},{key:"_refreshConfigTabs",value:function(){var e=this._initConfigTabs();this._builderConfigPanel.refreshTabs(e)}},{key:"_updateConfigPanel",value:function(){var e=this._node.hasClass("builder-config-open");this._builderConfigPanel&&this._destroyConfigTabs(),this._builderConfigPanel&&this._refreshConfigTabs(),e&&this._builderConfigPanel&&this._builderConfigPanel.openPanel(!0)}},{key:"_createIssuesTab",value:function(e){var t=null,n=b.default.getObject("scanResults.errors",!1,this),i=b.default.getObject("scanResults.warnings",!1,this),o=n&&n.filter(function(e){return!e.isAlternate}).length&&!this.scanResults.unfixable,r=i&&i.filter(function(e){return e.id!==C.default.content.noAlternateMedia}).length&&!this.scanResults.unfixable;if(o||r){var a=[],s=[];o&&(a=n.map(function(e){return{id:e.id,severity:"error"}})),r&&(s=i.map(function(e){return{id:e.id,severity:"warning"}}).filter(function(e){return e.id!==C.default.content.noAlternateMedia})),t=new w.default({map:this._cache[this.id],scanResults:this.scanResults,issues:a.concat(s),instanceID:this._instanceID})}t&&e.push(t)}},{key:"_addAlternateCaption",value:function(e,t){e&&e.caption&&(t.caption=e.caption)}},{key:"_addAlternateSize",value:function(e,t){e&&e.options&&e.options.size&&(t.options||(t.options={}),t.options.size=e.options.size)}}],[{key:"getArcGISItemResourceURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=decodeURIComponent(e),n=t.match(new RegExp("/sharing/rest/content/items/"+app.data.appItem.item.id+"/resources/(.*)$"));return n&&2==n.length?{url:t,file:n[1]}:null}},{key:"addToken",value:function(e){if(!(app.data.appItem&&"public"!=app.data.appItem.item.access&&app.data.appItem.item.id&&e))return e;var t="",n=g.default.getPortalURL(),i=y.default.findCredential(n);return t=app.portal&&app.portal.getPortalUser()?app.portal.getPortalUser().credential.token:i?i.token:g.default.getCookieToken(),e.match(new RegExp("/sharing/rest/content/items/"+app.data.appItem.item.id+"/resources/"))?g.default.forceHttpsUrl(e)+"?token="+t:e}},{key:"findCropDistance",value:function(e,t,n){var i=t.width(),o=t.height(),r=i/o,a=e.width/e.height,s={x:0,y:0},l=0,u=a>r;if(a<r){var c=i/a;l=this.getDimensionAmount(c,o,n.y),s.x=0,s.y=l}else if(u){var d=o*a;l=this.getDimensionAmount(d,i,n.x),s.x=l,s.y=0}else s.x=0,s.y=0;return s}},{key:"getDimensionAmount",value:function(e,t,n){var i=e*n,o=-1*(i-t/2);return o>0?o=0:e- -1*o<t&&(o=-1*(e-t)),o}},{key:"getTargetDimensions",value:function(e,t){var n={width:0,height:0},i=e.width/e.height;return i>t.width/t.height?(n.height=t.height,n.width=t.height*i):(n.width=t.width,n.height=t.width/i),n}}]),e}();t.default=S,e.exports=t.default}),define("storymaps-react/tpl/core/WebSceneCache",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){n(this,e),this._items=[],this._IDEAL_MAX_ITEMS=2}return i(e,[{key:"add",value:function(e,t){if(this._items.length<this._IDEAL_MAX_ITEMS){var n=this._findInstanceIndex(e);-1!==n?this._replaceItem(e,n):this._addItem(e)}else if(t){var i=this._findInstanceIndex(e);-1!==i?this._replaceItem(e,i):this._bumpOnItem(e)}}},{key:"_bumpOnItem",value:function(e){this._addItem(e);var t=this._findInstanceIndex(e),n=this._items[0],i=this._items[this._items.length-1];0===t?i.canRemove()&&this._removeItem(i):t===this._items.length-1?n.canRemove()&&this._removeItem(n):n.canRemove()?this._removeItem(n):i.canRemove()&&this._removeItem(i)}},{key:"_addSameID",value:function(e,t){this._items[t].item._domID!==e.item._domID&&this._replaceItem(e,t)}},{key:"_removeItem",value:function(e){var t=this._findInstanceIndex(e);this._items.splice(t,1),e.item.unload()}},{key:"_replaceItem",value:function(e,t){this._items[t]=e,e.item.setLoaded(!0)}},{key:"_addItem",value:function(e){e.item.load(),this._items.push(e),this._sort()}},{key:"_sort",value:function(){this._items.sort(function(e,t){var n=e.item._node.offset().top-t.item._node.offset().top;return 0===n&&e.hasOwnProperty("viewIndex")&&t.hasOwnProperty("viewIndex")?e.viewIndex-t.viewIndex:n})}},{key:"_findInstanceIndex",value:function(e){return this._items.findIndex(function(t){return t.item.id===e.item.id&&t.item._node.is(e.item._node)})}}]),e}();t.default=o,e.exports=t.default}),define("storymaps-react/tpl/core/Controller",["module","exports","dojo/_base/lang","dojo/topic","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps-react/tpl/view/media/Media","storymaps-react/tpl/core/WebSceneCache","storymaps/tpl/utils/UI","storymaps/tpl/utils/CommonHelper"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var p=u(n),f=u(i),h=u(o),m=u(r),g=u(a),v=u(s),b=u(l),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){function e(){d(this,e)}return y(e,null,[{key:"getStoryTitle",value:function(){var e=this._sections&&this._sections[0];return e?e.getPreviewText():""}},{key:"getStoryURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url||document.location.href;return t=t.replace(/\?edit(=.*)*&/,"?"),t=t.replace(/\&edit(=.*)*/,""),t=t.replace(/\?edit/,""),t=t.replace(/\?locale(=[a-zA-Z\-]+)+&/,"?"),t=t.replace(/\&locale(=[a-zA-Z\-]+)+/,""),e.urlEncoding?encodeURIComponent(t):t}},{key:"isStoryBlank",value:function(){return!(app.data.appItem&&app.data.appItem.data&&app.data.appItem.data.values&&app.data.appItem.data.values.config&&app.data.appItem.data.values.settings&&app.data.appItem.data.values.sections&&app.data.appItem.data.values.template)}},{key:"renderHeader",value:function(){var t=app.data.appItem,n=t?t.data.values.settings.header:null;n&&n.logo&&n.link||(n=e.DEFAULT_HEADER_SETTINGS),app.ui.header.render({logo:n.logo,link:n.link,social:n.social,bookmarks:this.getBookmarks(),title:this.getStoryTitle()})}},{key:"changeTheme",value:function(){var e=p.default.getObject("app.data.appItem.data.values.settings.theme");if(e){var t=e.colors;if(t){if($("body").removeClass("theme-major-dark theme-major-light theme-contrast-dark theme-contrast-light"),t.themeMajor&&$("body").addClass("theme-major-"+t.themeMajor),t.bgMain||t.themeContrast){var n=t.themeContrast||b.default.getLightOrDarkText(t.bgMain);$("body").addClass("theme-contrast-"+n)}var i=t.textMain?".section-layout-sequence {color: "+t.textMain+";}":"";v.default.addCSSRule(i,"text-color")}var o=e.fonts;if(o){var r=o.titleFont?".sections h1, .sections h2, .sections h3, .sections h4, .sections h5, .sections h6 { font-family: "+o.titleFont.fontFamily+";}":"";v.default.addCSSRule(r,"title-font");var a=o.bodyFont?".sections { font-family: "+o.bodyFont.fontFamily+";}":"";v.default.addCSSRule(a,"body-font")}}}},{key:"renderStory",value:function(e,t){this._sections=[],this._webSceneCache=new g.default,this._currentSection=null,this._$currentSection=null,this._currentSectionIndex=null,this._container=$(".sections");var n=!1,i=t.length;app.data.errorWebGL=!1,app.data.errorVideoMobile=!1;for(var o="",r=t.length-1;r>=0;r--){var a=t[r];"sequence"==a.type&&"sequence"==o&&(a.foreground.blocks=a.foreground.blocks.concat(t[r+1].foreground.blocks),t.splice(r+1,1)),o=a.type}$.each(t,function(e,o){var r=!1,a=app.ui.SectionFactory.createInstance(o);if(a){if(!0===o.alternate&&!n)return;try{this._container.append(a.render(e))}catch(e){console.error(e),r=!0,n=!0,"RUNTIME-NO-WEBGL"==e&&(app.data.errorWebGL=!0)}r||this._sections.push(a)}if((app.data.errorWebGL||app.data.errorVideoMobile)&&(app.isInBuilder&&(e==i-3&&"credits-placeholder"==t[e+1].type||e==i-2&&"credits-placeholder"==t[e+1].type)||!app.isInBuilder&&(e==i-2&&"credits"==t[e+1].type||e==i-1&&"credits"!=o.type))){var s="";app.data.errorWebGL?s="WEBGL":app.data.errorVideoMobile&&(s="VIDEO_MOBILE");var l=this.getErrorSection({type:s});l&&(this._sections.push(l),this._container.append(l.render(e)))}}.bind(this)),app.data.sections=this._sections,app.data.sectionsJSON=t,app.data.title=app.Controller.getStoryTitle(),document.title=app.data.title;var s=[];return $(".section").each(function(e,t){var n=this._sections[e].postCreate($(t));Array.isArray(n)&&(s=s.concat(n))}.bind(this)),Promise.all(s)}},{key:"getBookmarks",value:function(){var e=[];return $.each(this._sections,function(t,n){if(n.getBookmark){var i=n.getBookmark();i&&"visible"==i.status&&e.push({index:t,title:i.bookmark})}}),e}},{key:"preloadSectionByIndex",value:function(e){this.preloadSection(this._sections[e],{})}},{key:"preloadSection",value:function(e,t){e&&window.requestAnimationFrame(function(){e.onScroll(p.default.mixin(t,{status:"preload"}))})}},{key:"toggleScrollEvents",value:function(e){this._disableScrollEvents=!e}},{key:"onScroll",value:function(e){var t=this._sections[e.currentSectionIndex];if(t&&!this._disableScrollEvents){if(t.onScroll(p.default.mixin(e,{status:"current",webSceneCache:this._webSceneCache})),e.currentSectionIndex!=this._currentSectionIndex){e.$currentSection.addClass("active"),f.default.publish("story-navigated-section",{index:e.currentSectionIndex,data:this._currentSection});var n=this._sections[e.currentSectionIndex+1];n&&e.currentSectionIndex!=this._currentSectionIndex&&this.preloadSection(n,e);var i=this._currentSection,o=this._$currentSection;o&&window.requestAnimationFrame(function(){o.removeClass("active"),i.onScroll({status:"unload"})})}$.each(e.visibleSections,function(t,n){var i=this._sections[n];n!=e.currentSectionIndex&&i.onScroll(p.default.mixin(e,{status:"visible",webSceneCache:this._webSceneCache}))}.bind(this)),this._$currentSection=e.$currentSection,this._currentSectionIndex=e.currentSectionIndex,this._currentSection=t,app.isInBuilder||e.initialUpdate||this._showSections()}}},{key:"_showSections",value:function(){for(var e=0;e<app.display.sections.length;e++){var t=app.display.sections[e],n=t.node;if(n&&("title"===t.type||"immersive"===t.type)){var i=app.display.scrollTop,o=i+app.display.windowHeight;n.hasClass("bring-in")?t.top>o&&n.removeClass("bring-in"):t.top<o+100&&n.addClass("bring-in");var r=app.display.sections[e+1],a=r?r.top:app.display.storyHeight,s=t.top<o+1e3,l=a>i-1e3;s&&l?n.addClass("section-on-screen"):n.removeClass("section-on-screen")}}}},{key:"onResize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._sections[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){o.value.resize(p.default.mixin(e,{webSceneCache:this._webSceneCache}))}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"navigateToSection",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){if(void 0!=t.index&&void 0!=t.animate&&!(t.index>app.display.sections.length-1)){var i=e._sections[t.index].type,o=app.display.sections[t.index].top,r=1,a=0;"immersive"==i&&(r=app.display.windowHeight-250+50,app.isInBuilder&&(r+=125)),a=Math.floor(o-50+r),t.animate?(e.toggleScrollEvents(!1),$("html,body").animate({scrollTop:a},{duration:t.animateSpeed||400}).promise().then(function(){this.toggleScrollEvents(!0),app.ui.update({forceUpdate:!0}),n(t.index)}.bind(e))):(document.body.scrollTop=a,document.documentElement.scrollTop=a,n(t.index))}})}},{key:"getSectionById",value:function(e){for(var t in this._sections){if(this._sections[t].id==e)return parseInt(t,10)}return-1}},{key:"getSectionIndexById",value:function(e){return this._sections[e].id}},{key:"getErrorSection",value:function(e){e=e||{};var t=null;if("WEBGL"===e.type||"VIDEO_MOBILE"===e.type){var n="mailto:?to=&subject=Check%20out%20this%20story&body="+document.location.href;t=app.ui.SectionFactory.createInstance({type:"sequence",layout:"sequence-2",background:{type:"color",color:{value:"#FFF"}},foreground:{blocks:[{type:"text",text:{value:'<div class="block bring-in"><table><tr><td style="padding-bottom: 10px;"> <img src="resources/tpl/viewer/icons/warning-mobile-smartphone.png" /></td><td style="padding-bottom: 10px; padding-left: 13px;">'+h.default.viewer.mobileWarning.message1+'</td></tr><tr><td colspan="2" style="font-family: open_sans, sans-serif; padding-top: 10px; border-top: 1px solid white; text-align: center;"><a class="btn btn-warning-email" style="background-color: white !important; color: rgb(171, 60, 22);white-space: normal;" href="'+n+'"><i class="fa fa-envelope-o" style="margin-right: 5px;color: rgb(171, 60, 22);"></i>'+h.default.viewer.mobileWarning.email+"</a></td></tr></table></div>"}}]}})}return t}},{key:"getArcGISContent",value:function(){var e=[],t=app.data.appItem&&app.data.appItem.data&&app.data.appItem.data.values,n=t&&t.settings&&t.settings.header&&t.settings.header.logo;if(n&&n.enabled&&n.url){var i=m.default.getArcGISItemResourceURL(n.url);i&&e.push({type:"item-resource",mediaType:"image",url:i.url,file:i.file})}var o=!0,r=!1,a=void 0;try{for(var s,l=this._sections[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;e.push.apply(e,c(u.getArcGISContent()))}}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}return e}},{key:"DEFAULT_HEADER_SETTINGS",get:function(){return{logo:{enabled:!0,url:"resources/tpl/viewer/icons/esri-logo.png",link:"https://www.esri.com"},link:{url:"https://storymaps.arcgis.com",title:h.default.viewer.headerFromCommon.defaultTagline.replace(/\${STORY_MAP}/g,"Story Map")},social:{enabled:!0}}}},{key:"SHARED_STYLE_HEADER_SETTINGS",get:function(){if(!app.portal.isOrganization)return null;var e=p.default.getObject("portal.portalProperties.sharedTheme.logo.small",!1,app),t=p.default.getObject("portal.portalProperties.sharedTheme.logo.link",!1,app);return e?{logo:{enabled:!0,url:e,link:t},link:{url:"https://storymaps.arcgis.com",title:h.default.viewer.headerFromCommon.defaultTagline.replace(/\${STORY_MAP}/g,"Story Map")},social:{enabled:!0}}:null}},{key:"THEME_COLOR_OPTIONS",get:function(){var e=[{id:"black-on-white-1",label:h.default.viewer.theme.lightLabel,themeMajor:"light",themeContrast:"dark",bgMain:"white",textMain:"#4c4c4c"},{id:"white-on-black-1",label:h.default.viewer.theme.darkLabel,themeMajor:"dark",themeContrast:"light",bgMain:"#0E0E0E",textMain:"#DDD"}],t=p.default.getObject("app.data.appItem.data.values.settings.theme.colors");if(t){e.some(function(e){return e.id===t.id})||e.push(p.default.clone(t))}return e}},{key:"THEME_DEFAULT_COLORS",get:function(){var e=this.THEME_COLOR_OPTIONS,t=void 0;return e.some(function(e){return"black-on-white-1"===e.id&&(t=e,!0)}),t||{}}},{key:"THEME_FONT_OPTIONS",get:function(){var e=[{label:"Open Sans",fontFamily:"'open_sans', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif"},{label:"Noto Serif",fontFamily:"'noto_serif', 'Georgia', 'Hoefler Text', 'Palatino', cursive"},{label:"Georgia",fontFamily:"'Georgia', 'Hoefler Text', 'Palatino', serif"},{label:"Arial",fontFamily:"'Arial', 'Helvetica Neue', 'Helvetica', sans-serif"}],t=p.default.getObject("app.data.appItem.data.values.settings.theme.fonts");if(t){t.titleFont&&(e.some(function(e){return e.label===t.titleFont.label})||e.push(p.default.clone(t.titleFont))),t.bodyFont&&(e.some(function(e){return e.label===t.bodyFont.label})||e.push(p.default.clone(t.bodyFont)))}return e}},{key:"THEME_DEFAULT_FONTS",get:function(){var e=this.THEME_FONT_OPTIONS,t=void 0,n=void 0;return e.forEach(function(e){"Noto Serif"===e.label&&(t=p.default.clone(e)),"Open Sans"===e.label&&(n=p.default.clone(e))}),{bodyFont:t,titleFont:n}}}]),e}();t.default=_,e.exports=t.default}),define("storymaps/tpl/utils/EmbedBar",[],function(){"use strict";return function(e){function t(){var t=document.location.href;$.getJSON("https://arcg.is/prod/shorten?callback=?",{format:"json",apiKey:e.bitlyCreds[0],login:e.bitlyCreds[1],longUrl:t},function(e){e&&e&&e.data.url&&(document.querySelector(".embed-bitlylink").value=e.data.url)})}if(this.initiated=!1,!(e.isBuilder||e.classicEmbedMode||e.appCreationDate<e.june2018ReleaseDate)&&(window.app.isEsriStoryMap=!0,window.top!==window.self)){try{parent.window.app.isEsriStoryMap&&(window.app.isEmbeddedInEsriStoryMap=!0)}catch(e){window.app.isEmbeddedInEsriStoryMap=!1}if(!window.app.isEmbeddedInEsriStoryMap){var n='      <div class="embed-left">        <div class="esri-logo-embed">          <a target="_blank" href="https://www.esri.com">\t\t\t\t\t\t<img alt="Esri logo" class="embedLogoImg" src='+e.logoPath+' style="outline: none;">          </a>        </div>        <div class="esri-tagline-embed"><a href="https://storymaps.arcgis.com" target="_blank">'+e.strings.tagline+'</a></div>      </div>      <div class="embed-right">        <div class="share-embed" title="'+e.strings.share+'">          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="shareIcon" fill="#505050" d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg>        </div>        <div class="open-newtab-embed" title="'+e.strings.newTab+'">          <a href='+window.location.href+' target="_blank">          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 572 512" style=""><path id="newTabIcon" fill="#505050" d="M576 24v127.984c0 21.461-25.96 31.98-40.971 16.971l-35.707-35.709-243.523 243.523c-9.373 9.373-24.568 9.373-33.941 0l-22.627-22.627c-9.373-9.373-9.373-24.569 0-33.941L442.756 76.676l-35.703-35.705C391.982 25.9 402.656 0 424.024 0H552c13.255 0 24 10.745 24 24zM407.029 270.794l-16 16A23.999 23.999 0 0 0 384 303.765V448H64V128h264a24.003 24.003 0 0 0 16.97-7.029l16-16C376.089 89.851 365.381 64 344 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V287.764c0-21.382-25.852-32.09-40.971-16.97z"></path></svg>          </a>        </div>        <div class="fullscreen-embed " title="'+e.strings.fullScreen+'">          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="fullscreenIcon" fill="#505050" d="M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"/></svg>          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="compressIcon" fill="#505050" d="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"/></svg>        </div>      </div>    ',i='      <div class="embed-share-modal">        <div class="embed-modal-content">          <div class="embed-modal-logo">            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="shareIconLogo" fill="#fff" d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg>          </div>          <div class="embed-modal-header">            <h4 class="embed-modal-title">'+e.strings.share+'</h4>          </div>          <div class="embed-modal-body">            <div class="embed-share-url-social">              <div class="embed-share-url-panel">                <div class="embed-share-url-container">                  <input type="text" id="embed-bitlylink" class="form-control embed-bitlylink" aria-label="bitly link">                  <a class="btn embed-bar-btn btn-primary btn-bitlylink-open" target="_blank" href="'+window.location.href+'">'+e.strings.open+'</a>                </div>              </div>            </div>            <div class="embed-share-social-container">              <div class="social-icon embed-share-facebook" title="'+e.strings.shareFacebook+'" aria-label="Share on Facebook button">                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="facebookIcon" fill="#505050" d="M448 80v352c0 26.5-21.5 48-48 48h-85.3V302.8h60.6l8.7-67.6h-69.3V192c0-19.6 5.4-32.9 33.5-32.9H384V98.7c-6.2-.8-27.4-2.7-52.2-2.7-51.6 0-87 31.5-87 89.4v49.9H184v67.6h60.9V480H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48z"/></svg>              </div>              <div class="social-icon embed-share-twitter" title="'+e.strings.shareTwitter+'" aria-label="Share on Twitter button">                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path id="twitterIcon" fill="#505050" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>              </div>            </div>          </div>          <div class="embed-modal-footer">            <button type="button" class="btn embed-bar-btn btnCancel btn-naked btn-close" data-dismiss="modal">'+e.strings.close+"</button>          </div>        </div>      </div>    ",o=function(){document.querySelector("body").appendChild(h),document.querySelector("body").appendChild(g),!e.disableFullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)?document.querySelector(".open-newtab-embed").style.display="none":document.querySelector(".fullscreen-embed").style.display="none",r(),a()},r=function(){if(e.isEsriLogo)for(var t=0;t<e.logoElements.length;t++)document.querySelector(e.logoElements[t].selector).style.display="none";for(var n=0;n<e.shareElements.length;n++)if(e.shareElements[n].length>1)for(var i=0;i<e.shareElements[n].length;i++)e.shareElements[n][i].style.display="none";else document.querySelector(e.shareElements[n].selector).style.display="none"
;for(var o=0;o<e.taglineElements.length;o++)if(e.taglineElements[o].length>1)for(var r=0;r<e.taglineElements[o].length;r++)e.taglineElements[o][r].textContent&&"a story map"==e.taglineElements[o][r].textContent.toLowerCase()&&(e.taglineElements[o][r].style.display="none");else e.taglineElements[o].text()&&"a story map"==e.taglineElements[o].text().toLowerCase()&&(document.querySelector(e.taglineElements[o].selector).style.display="none")},a=function(){document.querySelector(".fullscreen-embed").addEventListener("click",l),document.querySelector(".share-embed").addEventListener("click",u),document.querySelector(".embed-modal-footer .btn-close").addEventListener("click",c),document.querySelector(".embed-share-facebook").addEventListener("click",d),document.querySelector(".embed-share-twitter").addEventListener("click",p),window.addEventListener("fullscreenchange",s),window.addEventListener("webkitfullscreenchange",s),window.addEventListener("mozfullscreenchange",s),window.addEventListener("msfullscreenchange",s)},s=function(){(document.fullscreenEnabled&&!document.fullscreenElement||document.webkitFullscreenEnabled&&!document.webkitFullscreenElement||document.mozFullScreenEnabled&&!document.mozFullScreenElement||document.msFullscreenEnabled&&!document.msFullscreenElement)&&(document.querySelector("body").classList.contains("fullscreen")&&document.querySelector("body").classList.toggle("fullscreen"),document.querySelectorAll(".fullscreen-embed svg")[0].style.display="block",document.querySelectorAll(".fullscreen-embed svg")[1].style.display="none")},l=function(){var e=document.querySelector("body");document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?e.classList.contains("fullscreen")?(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),document.querySelectorAll(".fullscreen-embed svg")[0].style.display="block",document.querySelectorAll(".fullscreen-embed svg")[1].style.display="none"):(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),e.classList.toggle("fullscreen"),document.querySelectorAll(".fullscreen-embed svg")[1].style.display="block",document.querySelectorAll(".fullscreen-embed svg")[0].style.display="none"):(document.querySelector(".fullscreen-embed").style.display="none",document.querySelector(".open-newtab-embed").style.display="block",console.log("Full screen not available"))},u=function(){"block"==document.querySelector(".embed-share-modal").style.display?document.querySelector(".embed-share-modal").style.display="none":document.querySelector(".embed-share-modal").style.display="block",t()},c=function(){document.querySelector(".embed-share-modal").style.display="none"},d=function(){window.open("http://www.facebook.com/sharer/sharer.php?u="+document.location.href,"","toolbar=0,status=0,width=626,height=436")},p=function(){var t="text="+e.appTitle+"&url="+document.location.href+"&related=EsriStoryMaps&hashtags=StoryMaps";window.open("https://twitter.com/intent/tweet?"+t,"","toolbar=0,status=0,width=626,height=436")},f='      <style type="text/css">        .embed-bar {          position: fixed;          bottom: 0;          left: 0;          width: 100%;          height: 26px;          font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;          background-color: #f1f1f1;          color: #505050;          z-index: 99999;          line-height: normal;        }        .embed-left {          position: absolute;          left: 10px;          margin-top: 5px;        }        .embed-right {          position: absolute;          right: 10px;          margin-top: 4px;        }        .embedLogoImg {          position: absolute;          top: 50%;          bottom: 50%;          left: 0px;          max-width: 250px;          max-height: 20px;          margin: auto 0;        }        .esri-tagline-embed {          margin-left: 70px;        }        .esri-tagline-embed :hover{          color: #036765;        }        .esri-tagline-embed a {          font-size: 15px;          font-weight: normal;          color: #505050;        }        .share-embed {          position: absolute;          top: 2px;          right: 22px;          padding-right: 8px;          outline: none;          cursor: pointer;        }        .open-newtab-embed {          position: absolute;          top: 2px;          right: 0px;          outline: none;        }        .fullscreen-embed {          position: absolute;          top: 2px;          right: 0px;          outline: none;          cursor: pointer;        }        .fullScreen {          width: 100%;          height: 100%;          position: absolute;          top: 0;          left: 0;        }        .embed-right svg {          width: 16px;          height: 16px;          cursor: pointer;        }        svg:hover #shareIcon,        svg:hover #newTabIcon,        svg:hover #fullscreenIcon,        svg:hover #compressIcon {          fill: #036765;        }      </style>    '+n,h=document.createElement("div");h.className="embed-bar",h.innerHTML=f;var m='      <style type="text/css">        .embed-share-modal {          display: none;          position: fixed;          z-index: 9999;          left: 0;          top: 0;          width: 100%;          height: 100%;          overflow: auto;          background-color: rgba(0,0,0, 0.4);        }        .embed-modal-content {          background-color: #fff;          margin: 15% auto;          padding: 20px;          border: 1px solid #888;          width: 80%;          max-width: 500px;          display: flex;          flex-direction: column;        }        .embed-modal-logo {          margin-top: -40px;          margin-left: -40px;          width: 40px;          height: 40px;          border: 4px solid #FFF;          border-radius: 24px;          background-color: #196fa6;          color: white;          font-size: 16px;          box-sizing: content-box;        }        .embed-modal-logo i{          margin-left: 8px;          margin-top: 7px;          font-size: 24px;        }        .embed-modal-header {          padding-bottom: 15px;        }        .embed-modal-title {          line-height: 1.1;          font-size: 19px;          font-weight: 200;          margin-top: -4px;        }        .embed-modal-body {          height: 60px;        }        .embed-share-url-social {          font-size: 10px;        }        .embed-share-social-container {          font-size: 2.5em;          color: #4c4c4c;        }        .embed-share-social-container i:hover {          cursor: pointer;          color: #036765;        }        .embed-share-facebook {          float: left;        }        .embed-share-twitter {          margin-left: 5px;          float: left;        }        #embed-bitlylink {          display: inline-block;          height: 38px;          width: 240px;          text-align: left;          font-size: 20px;          cursor: text;          padding: 0 0 0 10px;          line-height: 20px;          border: 1px solid #959595;          border-radius: 0;          background-color: #f8f8f8;          opacity: 1;        }        .embed-bar-btn {          background-image: none;          border: 1px solid transparent;          padding: 6px 12px;          font-size: 15px;          line-height: 1.5;          border-radius: 0;          margin-bottom: 0;          font-weight: 400;        }        .btn-bitlylink-open {          margin-bottom: 11px;          margin-left: 10px;          color: #fff;          background-color: #196fa6;          border-color: #166090;          text-transform: uppercase;        }        .btn-bitlylink-open:hover {          background-color: #005e95;          border-color: #005e95;        }        .embed-modal-footer {          margin-left: auto;          text-align: right;        }        .embed-modal-footer .btn-close {          background-color: #eee;          color: #6e6e6e;          margin-top: 20px;        }        .embed-modal-footer .btn-close:hover {          background-color: #ccc;          color: #6e6e6e;        }        .embed-modal-body svg {          width: 36px;          height: 36px;          cursor: pointer;        }        svg:hover #facebookIcon,        svg:hover #twitterIcon {          fill: #036765;        }        .embed-modal-logo svg  {          width: 24px;          height: 24px;          margin-top: 8px;          margin-left: 6px;        }        @media(max-width: 580px) {          #embed-bitlylink {            font-size: 16px;            width: 190px;          }        }        @media(max-width: 530px) {          .embed-modal-content {            width: 86%;            margin-top: 75px;          }          .embed-share-url-container {            display: flex;            justify-content: flex-start;            align-items: stretch;            margin-bottom: 11px;          }          #embed-bitlylink {            font-size: 12px;            width: auto;            min-width: 0;            max-width: 200px;            flex-grow: 1;            flex-shrink: 1;            flex-basis: 0;            padding-right: 10px;          }          .btn-bitlylink-open {            flex: 0 0 auto;            margin-bottom: 0;          }        }      </style>    '+i,g=document.createElement("div");g.className="embedbar-share-modal",g.innerHTML=m,setTimeout(function(){o()},0),this.initiated=!0}}}}),define("storymaps-react/tpl/utils/IOSEmbedFix",["module","exports","jquery","storymaps/tpl/utils/UI"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n),a=o(i),s=function(){var e=(0,r.default)('<div style="position: fixed; width: 0; height: '+window.innerHeight+'px"></div>').appendTo("body"),t=function(){if(a.default.isMobileBrowser())return".section-layout-cover {\n        height: "+e.height()+"px;\n      }\n\n      .section-layout-cover .wrapper {\n        height: "+e.height()+"px;\n      }\n\n      .ios-embed .embed-wrapper {\n         position: fixed;\n         width: 100%;\n         height: 100%;\n         overflow: hidden;\n      }\n\n      .ios-embed .story-header .share {\n         display: none;\n      }"};a.default.isMobileBrowser()&&navigator.userAgent.match(/iPhone|iPad|iPod/i)&&window.top!==window.self&&((0,r.default)("body").addClass("ios-embed"),e.css({width:"100%",zIndex:9999}).click(function(){window.open(window.location.href,"_blank")}));!function(){e.html("<style>"+t()+"</style>")}()};t.default={setStyles:s},e.exports=t.default}),function(e,t){"object"==typeof exports?t(exports):"function"==typeof define&&define.amd?define("lib/progress.js/minified/progress.min",["exports"],t):t(e)}(this,function(e){function t(e){this._targetElement=void 0!==e.length?e:[e],void 0===window._progressjsId&&(window._progressjsId=1),void 0===window._progressjsIntervals&&(window._progressjsIntervals={}),this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function n(e,t){var n=this;100<=t&&(t=100),e.hasAttribute("data-progressjs")&&setTimeout(function(){void 0!==n._onProgressCallback&&n._onProgressCallback.call(n,e,t);var o=i(e);o.style.width=parseInt(t)+"%";var o=o.querySelector(".progressjs-percent"),r=parseInt(o.innerHTML.replace("%","")),a=parseInt(t),s=function(e,t,n){var i=Math.abs(t-n);3>i?u=30:20>i?u=20:intervanIn=1,0!=t-n&&(e.innerHTML=(l?++t:--t)+"%",setTimeout(function(){s(e,t,n)},u))},l=!0;r>a&&(l=!1);var u=10;s(o,r,a)},50)}function i(e){return e=parseInt(e.getAttribute("data-progressjs")),document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+e+'"] > .progressjs-inner')}function o(e){for(var t=0,o=this._targetElement.length;t<o;t++){var r=this._targetElement[t];if(r.hasAttribute("data-progressjs")){var a=i(r);(a=parseInt(a.style.width.replace("%","")))&&n.call(this,r,a+(e||1))}}}function r(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}var a=function(e){if("object"==typeof e)return new t(e);if("string"==typeof e){if(e=document.querySelectorAll(e))return new t(e);throw Error("There is no element with given selector.")}return new t(document.body)};return a.version="0.1.0",a.fn=t.prototype={clone:function(){return new t(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){var t,n=this._options,i={};for(t in n)i[t]=n[t];for(t in e)i[t]=e[t];return this._options=i,this},start:function(){if(void 0!==this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this),!document.querySelector(".progressjs-container")){var e=document.createElement("div");e.className="progressjs-container",document.body.appendChild(e)}for(var e=0,t=this._targetElement.length;e<t;e++){var i=this._targetElement[e];if(!i.hasAttribute("data-progressjs")){var o,r,a,s=i;"body"===s.tagName.toLowerCase()?(o=s.clientWidth,r=s.clientHeight):(o=s.offsetWidth,r=s.offsetHeight);for(var l=a=0;s&&!isNaN(s.offsetLeft)&&!isNaN(s.offsetTop);)a+=s.offsetLeft,l+=s.offsetTop,s=s.offsetParent;s=l,i.setAttribute("data-progressjs",window._progressjsId),l=document.createElement("div"),l.className="progressjs-progress progressjs-theme-"+this._options.theme,l.style.position="body"===i.tagName.toLowerCase()?"fixed":"absolute",l.setAttribute("data-progressjs",window._progressjsId);var u=document.createElement("div");u.className="progressjs-inner";var c=document.createElement("div");c.className="progressjs-percent",c.innerHTML="1%",u.appendChild(c),this._options.overlayMode&&"body"===i.tagName.toLowerCase()?(l.style.left=0,l.style.right=0,l.style.top=0,l.style.bottom=0):(l.style.left=a+"px",l.style.top=s+"px",l.style.width=o+"px",this._options.overlayMode&&(l.style.height=r+"px")),l.appendChild(u),document.querySelector(".progressjs-container").appendChild(l),n(i,1),++window._progressjsId}}return this},set:function(e){for(var t=0,i=this._targetElement.length;t<i;t++)n.call(this,this._targetElement[t],e);return this},increase:function(e){return o.call(this,e),this},autoIncrease:function(e,t){var n=this,i=parseInt(this._targetElement[0].getAttribute("data-progressjs"));return void 0!==window._progressjsIntervals[i]&&clearInterval(window._progressjsIntervals[i]),window._progressjsIntervals[i]=setInterval(function(){o.call(n,e)},t),this},end:function(){e:{void 0!==this._onBeforeEndCallback&&(!0===this._options.considerTransition?i(this._targetElement[0]).addEventListener(r(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));for(var e=parseInt(this._targetElement[0].getAttribute("data-progressjs")),t=0,o=this._targetElement.length;t<o;t++){var a=this._targetElement[t],s=i(a);if(!s)break e;var l=1;100>parseInt(s.style.width.replace("%",""))&&(n.call(this,a,100),l=500),function(e,t){setTimeout(function(){e.parentNode.className+=" progressjs-end",setTimeout(function(){e.parentNode.parentNode.removeChild(e.parentNode),t.removeAttribute("data-progressjs")},1e3)},l)}(s,a)}if(window._progressjsIntervals[e])try{clearInterval(window._progressjsIntervals[e]),window._progressjsIntervals[e]=null,delete window._progressjsIntervals[e]}catch(e){}}return this},onbeforeend:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforeend was not a function");return this._onBeforeEndCallback=e,this},onbeforestart:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforestart was not a function");return this._onBeforeStartCallback=e,this},onprogress:function(e){if("function"!=typeof e)throw Error("Provided callback for onprogress was not a function");return this._onProgressCallback=e,this}},e.progressJs=a}),define("lib-build/css!lib/progress.js/minified/progressjs.min",[],function(){}),define("lib-build/less!storymaps/tpl/view/ui/ProgressBar",[],function(){}),define("storymaps/tpl/view/ui/ProgressBar",["lib/progress.js/minified/progress.min","lib-build/css!lib/progress.js/minified/progressjs.min","lib-build/less!./ProgressBar"],function(e){return function(){var t=new e;this.start=function(){t.start()},this.update=function(e){t.set(e)}}}),define("lib-build/hbars!storymaps-react/tpl/view/ui/Bookmark",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<li class="bookmark" data-index="'+a((o=null!=(o=t.index||(null!=e?e.index:e))?o:r,"function"==typeof o?o.call(e,{name:"index",hash:{},data:i}):o))+'">'+a((o=null!=(o=t.title||(null!=e?e.title:e))?o:r,"function"==typeof o?o.call(e,{name:"title",hash:{},data:i}):o))+"</li>\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/ui/BookmarksMore",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s='<li class="dropdown bookmark-dropdown">\n\t<a class="dropdown-toggle" data-toggle="dropdown">\n\t\t<span class="glyphicon glyphicon-th-list"></span> <span class="caret"></span>\n\t</a>\n\t<ul class="dropdown-menu dropdown-menu-right">\n\t\t';return r=null!=(r=t.bookmarks||(null!=e?e.bookmarks:e))?r:a,o="function"==typeof r?r.call(e,{name:"bookmarks",hash:{},data:i}):r,null!=o&&(s+=o),s+"\n\t</ul>\n</li>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/ui/Bookmarks",[],function(){}),define("storymaps-react/tpl/view/ui/Bookmarks",["module","exports","lib-build/hbars!./Bookmark","lib-build/hbars!./BookmarksMore","lib-build/less!./Bookmarks"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){r(this,e),this.container=t,this.bookmarkIndex=0,this.bookmarkNavigationInProgress=!1}return l(e,[{key:"update",value:function(e){this.showBookmarkIndex(e)}},{key:"resize",value:function(){var e=this,t=this.container.width();this.container.children("li").addClass("visible"),this.container.find(".dropdown").removeClass("visible"),this.container.find(".dropdown-menu li").removeClass("visible");var n=0,i=0,o=!1,r=this.container.children(".bookmark"),a=this.container.find("li.dropdown").outerWidth(!0);r.each(function(s,l){var u=$(l);i++,n+=u.outerWidth(!0);var c=n>t,d=n+a>t,p=i<r.length;(c||d&&p)&&(o=!0,u.removeClass("visible"),e.container.find(".dropdown-menu li").eq(u.index()).addClass("visible"))});var s=this.container.children(".bookmark.active"),l=this.container.find(".dropdown-menu li.active");s.length&&!s.hasClass("visible")?(s.removeClass("active"),this.container.find(".nav-tabs .dropdown-menu li").eq(s.index()).addClass("active"),this.container.find(".nav-tabs > .dropdown").addClass("active")):l.length&&!l.hasClass("visible")&&(l.removeClass("active"),this.container.find(".nav-tabs > .bookmark").eq(l.index()).addClass("active"),this.container.find(".nav-tabs > .dropdown").removeClass("active")),o&&this.container.find(".dropdown").addClass("visible")}},{key:"updateVisibleBookmark",value:function(e){var t=this.container.find(".bookmark.visible").filter(function(t,n){return $(n).data("index")<=e});t.length&&$(t[t.length-1]).addClass("active")}},{key:"showBookmarkIndex",value:function(e){if(!this.bookmarkNavigationInProgress){e||0===e||(e=this.bookmarkIndex),this.container.find("li, .bookmark").removeClass("active"),this.updateVisibleBookmark(e);this.container.find(".bookmark.active").closest(".bookmark-dropdown").length>0?(this.container.find(".dropdown").addClass("active"),app.isLoading||this.container.find(".dropdown").hasClass("open")||this.container.find(".dropdown-toggle").click()):app.isLoading||this.container.find(".dropdown").hasClass("open")&&this.container.find(".dropdown-toggle").click(),this.bookmarkIndex=e}}},{key:"render",value:function(e){e||(e=[]);var t="",n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var u=r.value;t+=(0,a.default)(u)}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}this.container.html(t+(0,s.default)({bookmarks:t})),this.addEvents(),this.resize(),this.showBookmarkIndex()}},{key:"addEvents",value:function(){var e=this;this.container.find(".bookmark").off("click").on("click",function(t){e.onBookmarkNavigate($(t.currentTarget))})}},{key:"onBookmarkNavigate",value:function(e){var t=this,n=e.data("index");this.bookmarkNavigationInProgress=!0,app.Controller.navigateToSection({index:n,animate:!0}).then(function(){t.bookmarkNavigationInProgress=!1,t.showBookmarkIndex(n)})}}]),e}();t.default=u,e.exports=t.default}),define("lib-build/tpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("lib-build/tpl!storymaps/tpl/view/ui/share/ShareDialog",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal-dialog">\n  <div class="modal-content">\n\n    <div class="modal-logo"></div>\n    <div class="modal-header">\n      <h4 class="modal-title"></h4>\n    </div>\n\n    <div class="modal-body">\n      <div class="share-url-social">\n        <div class="share-url-panel"></div>\n        <div class="share-social-container">\n          <i class="social-icon share_print fa fa-print" tabindex="0" aria-label="Print button"></i>\n          <i class="social-icon share_facebook fa fa-facebook-square" tabindex="0" aria-label="Share on Facebook button"></i>\n          <i class="social-icon share_twitter fa fa-twitter" tabindex="0" aria-label="Share on Twitter button"></i>\n        </div>\n      </div>\n\n      <div class="embed-title"></div>\n      <div class="share-embed-panel"></div>\n\n      <div class="checkbox autoplay-container">\n        <label>\n          <input type="checkbox" class="autoplay-checkbox" value="autoplay" />\n          <span class="autoplay-label"></span>\n        </label>\n        <span class="help autoplay-help" data-toggle="tooltip">\n          <i class="fa fa-question-circle" aria-hidden="true"></i>\n        </span>\n        <span class="autoplay-notification"></span>\n      </div>\n    </div>\n\n    <div class="modal-footer">\n      <button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal"></button>\n    </div>\n  </div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/tpl/view/ui/share/ShareDialog",[],function(){}),define("lib-build/less!storymaps/tpl/view/ui/share/ShareDialog",[],function(){}),define("lib-build/tpl!storymaps/tpl/view/ui/share/ShareURLPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="share-url-container">\n\t<span class="share-btn glyphicon glyphicon-copy" data-clipboard-text="" tabindex="0" aria-label="Copy bitly link"></span>\n  <input type="text" class="form-control bitlylink" readonly="true" aria-label="bitly link"/>\n\t<a class="btn btn-primary btn-bitlylink-open" target="_blank"></a>\n\t<div class="share-status-wrapper"><span class="share-status"></span></div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/tpl/view/ui/share/ShareURLPanel",[],function(){}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("lib/clipboard/dist/clipboard",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){function i(e,t){for(;e&&e.nodeType!==o;){if(e.matches(t))return e;e=e.parentNode}}var o=9;if(Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=i},{}],2:[function(e,t,n){function i(e,t,n,i,r){var a=o.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}function o(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}var r=e("./closest");t.exports=i},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return o(e,t,n);if(s.nodeList(e))return r(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function r(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var s=e("./is"),l=e("delegate");t.exports=i},{"./is":3,delegate:2}],5:[function(e,t,n){function i(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}t.exports=i},{}],6:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){o.off(e,i),t.apply(n,arguments)}var o=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;for(i;i<o;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var r=0,a=i.length;r<a;r++)i[r].fn!==t&&i[r].fn._!==t&&o.push(i[r]);return o.length?n[e]=o:delete n[e],this}},t.exports=i},{}],7:[function(t,n,i){!function(o,r){if("function"==typeof e&&e.amd)e(["module","select"],r);else if(void 0!==i)r(n,t("select"));else{var a={exports:{}};r(a,o.select),o.clipboardAction=a.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(e){return e&&e.__esModule?e:{default:e}}(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return r(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,n)),this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a})},{select:5}],8:[function(t,n,i){!function(o,r){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if(void 0!==i)r(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var a={exports:{}};r(a,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=a.exports}}(this,function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=o(t),c=o(n),d=o(i),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return s(t,e),p(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,d.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}(c.default);e.exports=f})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),define("storymaps/tpl/view/ui/share/ShareURLPanel",["lib-build/tpl!./ShareURLPanel","lib-build/css!./ShareURLPanel","storymaps/tpl/utils/SocialSharing","dojo/has","lib/clipboard/dist/clipboard"],function(e,t,n,i,o){return function(t){function r(e){a.val(e),t.find(".btn-bitlylink-open").attr("href",e),n.requestShortUrl(e).then(function(e){t.find(".share-btn").data("clipboardText",e),a.val(e).select()});var i=new o(t.find(".share-btn")[0],{text:function(e){return $(e).data("clipboardText")}});t.find(".share-btn").off("keypress").on("keypress",function(e){13===e.keyCode&&$(this).trigger("click")}),i.on("success",function(){t.find(".share-btn").removeClass("glyphicon-copy").addClass("glyphicon-ok"),t.find(".share-status").show(),t.find(".bitlylink")[0].selectionStart=t.find(".bitlylink")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("glyphicon-copy").removeClass("glyphicon-ok"),t.find(".share-status").hide()},2e3)})}t.append(e({}));var a=t.find(".bitlylink"),s=null;!function(){t.find(".bitlylink").click(function(){this.setSelectionRange(0,this.value.length)})}(),this.present=function(e){s=n.cleanURL(e,!0),r(e),t.find(".btn-bitlylink-open").html(i18n.viewer.shareFromCommon.open),t.find(".share-url-container").toggleClass("touch",!!i("touch")),t.find(".share-btn").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)},this.focus=function(){a.select()},this.setAutoplay=function(e){var t=s;e&&(t+=t.match(/\?/)?"&":"?",t+="autoplay"),r(t)}}}),define("lib-build/tpl!storymaps/tpl/view/ui/share/ShareEmbedPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="share-embed-container">\n\t<div class="embed-explain"></div>\n\n\t<div class="share-embed-wrapper">\n\t\t<div class="share-btn glyphicon glyphicon-copy" data-clipboard-text="" tabindex="0" aria-label="Copy embed code"></div>\n\t\t<textarea class="form-control embedTextarea" readonly="true" tabindex="0" aria-label="Embed code"></textarea>\n\t</div>\n\t<div class="share-status-wrapper"><span class="share-status"></span></div>\n\n\t<div>\n\t\t<span id="embed-lbl" class="embed-lbl-size"></span>\n\t\t<div class="btn-group" aria-labelled-by="embed-lbl">\n\t\t\t<button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">\n\t\t\t\t<span class="embed-sizes-btn"></span>&nbsp;<span class="caret"></span>\n\t\t\t</button>\n\t\t\t<ul class="dropdown-menu embed-sizes" role="menu"></ul>\n\t\t</div>\n\t</div>\n</div>\n';return __p}}),define("lib-build/css!storymaps/tpl/view/ui/share/ShareEmbedPanel",[],function(){}),define("storymaps/tpl/view/ui/share/ShareEmbedPanel",["lib-build/tpl!./ShareEmbedPanel","lib-build/css!./ShareEmbedPanel","dojo/has","lib/clipboard/dist/clipboard"],function(e,t,n,i){return function(t){function o(e,n){var o=t.find(".embedTextarea");o.val(r.replace("%URL%",s).replace("%WIDTH%",e).replace("%HEIGHT%",n)),t.find(".share-btn").data("clipboardText",o.val());var a=new i(t.find(".share-btn")[0],{text:function(e){return $(e).data("clipboardText")}});t.find(".share-btn").off("keypress").on("keypress",function(e){13===e.keyCode&&$(this).trigger("click")}),a.on("success",function(){t.find(".share-btn").removeClass("glyphicon-copy").addClass("glyphicon-ok"),t.find(".share-status").show(),t.find(".embedTextarea")[0].selectionStart=t.find(".embedTextarea")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("glyphicon-copy").removeClass("glyphicon-ok"),t.find(".share-status").hide()},2e3)})}var r='<iframe width="%WIDTH%" height="%HEIGHT%" src="%URL%" frameborder="0" scrolling="yes"></iframe>',a=[{width:"100%",height:"800px"},{width:"100%",height:"640px"},{width:"800px",height:"600px"},{width:"640px",height:"480px"}],s=null,l=null;t.append(e({})),function(){$.each(a,function(e,n){t.find(".embed-sizes").append('<li><a data-width="'+n.width+'" data-height="'+n.height+'">'+n.width+" / "+n.height+"</a></li>")}),t.find(".embed-sizes a").click(function(){var e=$(this);e.parents(".btn-group").find(".embed-sizes-btn").text(e.text()),o(e.data("width"),e.data("height"))})}(),function(){t.find(".embedTextarea").click(function(){this.setSelectionRange(0,this.value.length)})}(),this.present=function(e){s=e,l=e,t.find(".embed-explain").html(i18n.viewer.shareFromCommon.embedExplain),t.find(".embed-lbl-size").html(i18n.viewer.shareFromCommon.size),t.find(".embed-sizes a").eq(0).click(),t.find(".share-embed-wrapper").toggleClass("touch",!!n("touch")),t.find(".share-clipboard").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)},this.setAutoplay=function(e){var n=l;e&&(n+=n.match(/\?/)?"&":"?",n+="autoplay"),s=n,t.find(".embed-sizes a").eq(0).click()}}}),define("storymaps/tpl/view/ui/share/ShareDialog",["lib-build/tpl!./ShareDialog","lib-build/css!./ShareDialog","lib-build/less!./ShareDialog","./ShareURLPanel","./ShareEmbedPanel","storymaps/tpl/utils/SocialSharing"],function(e,t,n,i,o,r){return function(t){function n(e){t.find(".share_facebook").toggle(e.facebook),e.facebook&&t.find(".share_facebook").off("click").click(function(){a($(this).data("url"))}).on("keypress",function(e){13===e.keyCode&&a($(this).data("url"))}),t.find(".share_twitter").toggle(e.twitter),e.twitter&&t.find(".share_twitter").off("click").click(function(){s($(this).data("url"))}).on("keypress",function(e){13===e.keyCode&&s($(this).data("url"))}),t.find(".share_print").off("click").on("click keypress",function(e){if("keypress"!==e.type||32===e.charCode||13===e.charCode){var t=window.location.href;window.location.search?(t=t.replace(/[\&|\?]edit(=true)?/,""),t+="&print"):t+="?print",window.open(t,"_blank")}})}function a(e){r.shareFacebook("","",null,e)}function s(e){var t=$("<div>"+app.data.title+"</div>").text();r.shareTwitter(t,e)}t.append(e({}));var l=new i(t.find(".share-url-panel")),u=new o(t.find(".share-embed-panel"));t.on("shown.bs.modal",function(){l.focus()}),t.find(".autoplay-checkbox").change(function(){l.setAutoplay(!!this.checked),u.setAutoplay(!!this.checked),t.find(".autoplay-notification").html(i18n.viewer.shareFromCommon.linksupdated).fadeIn(),setTimeout(function(){t.find(".autoplay-notification").fadeOut()},1e3)}),this.present=function(e,i){i=i||{facebook:!1,twitter:!1},t.find(".social-container").toggle(i.facebook||i.twitter),n(i),l.present(e),u.present(e),t.find(".modal-title").html(i18n.viewer.headerFromCommon.share),t.find(".embed-title").html(i18n.viewer.shareFromCommon.embed),t.find(".btn-close").html(i18n.viewer.common.close),t.find(".autoplay-label").html(i18n.viewer.shareFromCommon.autoplayLabel),t.find(".autoplay-help").tooltip({title:i18n.viewer.shareFromCommon.autoplayExplain1+"<br /><br />"+i18n.viewer.shareFromCommon.autoplayExplain2,html:!0}),t.find(".autoplay-checkbox").prop("checked",!1),t.modal({keyboard:!0})}}}),define("lib-build/less!storymaps-react/tpl/view/ui/Header",[],function(){}),define("storymaps-react/tpl/view/ui/Header",["module","exports","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/utils/CommonHelper","storymaps-react/tpl/view/media/Media","storymaps/tpl/view/ui/ProgressBar","./Bookmarks","storymaps/tpl/view/ui/share/ShareDialog","storymaps/tpl/utils/SocialSharing","dojo/has","lib-build/less!./Header"],function(e,t,n,i,o,r,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var f=d(n),h=d(i),m=d(o),g=d(r),v=d(a),b=d(s),y=d(l),_=d(u),w=d(c),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(){function e(){p(this,e),this._node=$(".story-header"),this._bookmarksNode=this._node.find(".bookmarks"),this._shareDialog=new y.default($("#shareDialog")),this._progressBar=new v.default,this._bookmarks=new b.default(this._node.find(".bookmarks")),this._isCompact=null,this._currentSection=null,this.initShareTooltip()}return C(e,[{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.logo,i=t.link,o=t.social,r=t.title,a={logoEnabled:n.enabled,logoURL:g.default.addToken(n.url),logoTarget:n.link,linkURL:i.url,linkText:i.title};this.setLogo(this._node,a).then(function(){e._bookmarks.render(t.bookmarks)},function(){e._bookmarks.render(t.bookmarks)}),this.setLink(this._node,a),this._node.find(".title").html(r),this._node.find(".title").off("click").on("click",function(){app.Controller.navigateToSection({index:0,animate:!1})}),this._node.find(".share-btn").off("click").click(this._onShareBtnClick.bind(this)).toggleClass("active",!!o.enabled).off("keypress").attr("title",h.default.viewer.headerFromCommon.share).attr("aria-label",h.default.viewer.headerFromCommon.share).on("keypress",function(e){13===e.keyCode&&o.enabled&&this._onShareBtnClick()}.bind(this)),this._progressBar.start(),this._bookmarks.render(t.bookmarks),this.toggleShareButton()}},{key:"initShareTooltip",value:function(){var e=this._node.find('.share-btn-container[data-toggle="tooltip"]');e.tooltip({title:f.default.builder.header.sharingNotAvailable,placement:"auto left"}),e.on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("custom-share-tooltip")}),e.tooltip("disable")}},{key:"toggleShareButton",value:function(){var e=!0;window.app.data.appItem&&window.app.data.appItem.item&&window.app.data.appItem.item.access&&"private"!==app.data.appItem.item.access&&"shared"!==app.data.appItem.item.access&&(e=!1);var t=this._node.find(".share-btn"),n=this._node.find('.share-btn-container[data-toggle="tooltip"]');e||app.builder&&app.builder.isDirectCreationFirstSave?(t.addClass("share-disabled"),n.tooltip("enable")):(t.removeClass("share-disabled"),n.tooltip("disable"))}},{key:"disableShareButtonAutoplay",value:function(){var e=this._node.find(".share-btn"),t=this._node.find('.share-btn-container[data-toggle="tooltip"]');e.addClass("share-disabled"),t.tooltip("destroy").tooltip({title:window.i18n.viewer.headerFromCommon.tooltipAutoplayDisabled,trigger:"hover",placement:"left"})}},{key:"setLogo",value:function(e,t){return new Promise(function(n,i){if(t.logoEnabled&&t.logoURL&&"NO_LOGO"!=t.logoURL){if(m.default.uploadedImageNeedsFixing(t.logoURL)){t.logoURL=m.default.fixUploadedImageUrl(t.logoURL);var o=app.data.appItem.data.values.settings.header.logo;o.url=m.default.fixUploadedImageUrl(o.url)}e.find(".logoLink").css("cursor",t.logoTarget?"pointer":"default"),t.logoTarget?(e.find(".logoLink").attr("href",t.logoTarget),e.find(".logoLink").removeClass("logoLink-disabled")):e.find(".logoLink").addClass("logoLink-disabled");var r=e.find(".logoImg");r.on("error",function(){r.hide(),i()}),r.on("load",function(){n()}),r.attr("src",t.logoURL).show()}else e.find(".logoImg").hide(),i()})}},{key:"setLink",value:function(e,t){t.linkURL&&t.linkText?e.find(".linkContainer").html('<a href="'+t.linkURL+'" class="link" target="_blank">'+t.linkText+"</a>"):e.find(".linkContainer").html(t.linkText)}},{key:"update",value:function(e){this._progressBar.update(e.storyProgress),this._isCompact!==e.headerCompact&&(this._isCompact=e.headerCompact,this._node.toggleClass("compact",this._isCompact),this._bookmarksNode.toggleClass("bookmarks-hidden",this._isCompact),this._isCompact||this._node.css("background-color","rgba(0,0,0,1)")),this._currentSection!==e.sectionIndex&&(this._currentSection=e.sectionIndex,this._bookmarks.update(e.sectionIndex))}},{key:"resize",value:function(){this._bookmarks.resize()}},{key:"getHeight",value:function(){return 50}},{key:"_onShareBtnClick",value:function(){this._shareDialog.present(_.default.cleanURL(document.location.href,!0),{facebook:!0,twitter:!0})}},{key:"showEditButton",value:function(){this._node.find(".header-edit-button").html('<i class="header-edit-icon fa fa-pencil"></i>'+f.default.builder.header.edit+'<span aria-hidden="true" class="header-edit-close">Ã</span>').show().off("click").click(m.default.switchToBuilder),(0,w.default)("ie")||7==(0,w.default)("trident")?this._node.find(".header-edit-close").hide():this._node.find(".header-edit-close").click(function(){return this._node.find(".header-edit-button").hide(),$(window).resize(),!1}.bind(this))}}]),e}();t.default=k,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/ui/Autoplay",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="autoplay-controls">\n  <i class="autoplay-btn fa fa-pause" aria-hidden="true"></i>\n  <div class="slider-container ">\n\t\t<input type="text" />\n\t</div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/ui/Autoplay",[],function(){});var windowIsDefined="object"===("undefined"==typeof window?"undefined":_typeof(window));if(function(e){if("function"==typeof define&&define.amd)define("lib/seiyria-bootstrap-slider/dist/bootstrap-slider.min",["jquery"],e);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var t;try{t=require("jquery")}catch(e){t=null}module.exports=e(t)}else window&&(window.Slider=e(window.jQuery))}(function(e){var t="slider",n="bootstrapSlider";windowIsDefined&&!window.console&&(window.console={}),windowIsDefined&&!window.console.log&&(window.console.log=function(){}),windowIsDefined&&!window.console.warn&&(window.console.warn=function(){});var i;return function(e){function t(){}var n=Array.prototype.slice;!function(e){function i(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function o(t,i){e.fn[t]=function(o){if("string"==typeof o){for(var a=n.call(arguments,1),s=0,l=this.length;l>s;s++){var u=this[s],c=e.data(u,t);if(c)if(e.isFunction(c[o])&&"_"!==o.charAt(0)){var d=c[o].apply(c,a);if(void 0!==d&&d!==c)return d}else r("no such method '"+o+"' for "+t+" instance");else r("cannot call methods on "+t+" prior to initialization; attempted to call '"+o+"'")}return this}var p=this.map(function(){var n=e.data(this,t);return n?(n.option(o),n._init()):(n=new i(this,o),e.data(this,t,n)),e(this)});return!p||p.length>1?p:p[0]}}if(e){var r="undefined"==typeof console?t:function(e){console.error(e)};e.bridget=function(e,t){i(t),o(e,t)},e.bridget}}(e)}(e),function(e){function o(t,n){this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof t?this.element=document.querySelector(t):t instanceof HTMLElement&&(this.element=t),n=n||{};for(var i=Object.keys(this.defaultOptions),o=0;o<i.length;o++){var r=i[o],s=n[r];s=void 0!==s?s:function(e,t){var n="data-slider-"+t.replace(/_/g,"-"),i=e.getAttribute(n);try{return JSON.parse(i)}catch(e){return i}}(this.element,r),s=null!==s?s:this.defaultOptions[r],this.options||(this.options={}),this.options[r]=s}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var l,u,c,d,p,f=this.element.style.width,h=!1,m=this.element.parentNode;if(this.sliderElem)h=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var g=document.createElement("div");if(g.className="slider-track",u=document.createElement("div"),u.className="slider-track-low",l=document.createElement("div"),l.className="slider-selection",c=document.createElement("div"),c.className="slider-track-high",d=document.createElement("div"),d.className="slider-handle min-slider-handle",d.setAttribute("role","slider"),d.setAttribute("aria-valuemin",this.options.min),d.setAttribute("aria-valuemax",this.options.max),p=document.createElement("div"),p.className="slider-handle max-slider-handle",p.setAttribute("role","slider"),p.setAttribute("aria-valuemin",this.options.min),p.setAttribute("aria-valuemax",this.options.max),g.appendChild(u),g.appendChild(l),g.appendChild(c),this.rangeHighlightElements=[],Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var v=0;v<this.options.rangeHighlights.length;v++){var b=document.createElement("div");b.className="slider-rangeHighlight slider-selection",this.rangeHighlightElements.push(b),g.appendChild(b)}var y=Array.isArray(this.options.labelledby);if(y&&this.options.labelledby[0]&&d.setAttribute("aria-labelledby",this.options.labelledby[0]),y&&this.options.labelledby[1]&&p.setAttribute("aria-labelledby",this.options.labelledby[1]),!y&&this.options.labelledby&&(d.setAttribute("aria-labelledby",this.options.labelledby),p.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",o=0;o<this.options.ticks.length;o++){var _=document.createElement("div");_.className="slider-tick",this.ticks.push(_),this.ticksContainer.appendChild(_)}l.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",o=0;o<this.options.ticks_labels.length;o++){var w=document.createElement("div"),C=0===this.options.ticks_positions.length,k=this.options.reversed&&C?this.options.ticks_labels.length-(o+1):o;w.className="slider-tick-label",w.innerHTML=this.options.ticks_labels[k],this.tickLabels.push(w),this.tickLabelContainer.appendChild(w)}var x=function(e){var t=document.createElement("div");t.className="tooltip-arrow";var n=document.createElement("div");n.className="tooltip-inner",e.appendChild(t),e.appendChild(n)},E=document.createElement("div");E.className="tooltip tooltip-main",E.setAttribute("role","presentation"),x(E);var T=document.createElement("div");T.className="tooltip tooltip-min",T.setAttribute("role","presentation"),x(T);var S=document.createElement("div");S.className="tooltip tooltip-max",S.setAttribute("role","presentation"),x(S),this.sliderElem.appendChild(g),this.sliderElem.appendChild(E),this.sliderElem.appendChild(T),this.sliderElem.appendChild(S),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(d),this.sliderElem.appendChild(p),m.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(e&&(this.$element=e(this.element),this.$sliderElem=e(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),a[this.options.scale]&&(this.options.scale=a[this.options.scale]),!0===h&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(e){this._removeProperty(this.trackLow,e),this._removeProperty(this.trackSelection,e),this._removeProperty(this.trackHigh,e)},this),[this.handle1,this.handle2].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top"),this._removeProperty(e,"margin-left"),this._removeProperty(e,"margin-top"),this._removeClass(e,"right"),this._removeClass(e,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=f,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=u||this.trackLow,this.trackSelection=l||this.trackSelection,this.trackHigh=c||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=p||this.handle2,!0===h)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),o=0;o<this.ticks.length;o++)this._removeClass(this.ticks[o],"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),o=0;o<this.ticks.length;o++)this._addClass(this.ticks[o],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var r={formatInvalidInputErrorMsg:function(e){return"Invalid input value '"+e+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},a={linear:{toValue:function(e){var t=e/100*(this.options.max-this.options.min),n=!0;if(this.options.ticks_positions.length>0){for(var i,o,r,a=0,s=1;s<this.options.ticks_positions.length;s++)if(e<=this.options.ticks_positions[s]){i=this.options.ticks[s-1],r=this.options.ticks_positions[s-1],o=this.options.ticks[s],a=this.options.ticks_positions[s];break}t=i+(e-r)/(a-r)*(o-i),n=!1}var l=n?this.options.min:0,u=l+Math.round(t/this.options.step)*this.options.step;return u<this.options.min?this.options.min:u>this.options.max?this.options.max:u},toPercentage:function(e){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var t,n,i,o=0,r=0;r<this.options.ticks.length;r++)if(e<=this.options.ticks[r]){t=r>0?this.options.ticks[r-1]:0,i=r>0?this.options.ticks_positions[r-1]:0,n=this.options.ticks[r],o=this.options.ticks_positions[r];break}if(r>0){return i+(e-t)/(n-t)*(o-i)}}return 100*(e-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(e){var t=0===this.options.min?0:Math.log(this.options.min),n=Math.log(this.options.max),i=Math.exp(t+(n-t)*e/100);return i=this.options.min+Math.round((i-this.options.min)/this.options.step)*this.options.step,i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(e){if(this.options.max===this.options.min)return 0;var t=Math.log(this.options.max),n=0===this.options.min?0:Math.log(this.options.min);return 100*((0===e?0:Math.log(e))-n)/(t-n)}}};i=function(e,t){return o.call(this,e,t),this},i.prototype={_init:function(){},constructor:i,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(e){return Array.isArray(e)?e[0]+" : "+e[1]:e},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(e,t,n){e||(e=0);var i=this.getValue();this._state.value=this._validateInputValue(e);var o=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=o(this._state.value[0]),this._state.value[1]=o(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=o(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var r=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(r),!0===t&&this._trigger("slide",r),i!==r&&!0===n&&this._trigger("change",{oldValue:i,newValue:r}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),e&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(e,t){return this._bindNonQueryEventHandler(e,t),this},off:function(t,n){e?(this.$element.off(t,n),this.$sliderElem.off(t,n)):this._unbindNonQueryEventHandler(t,n)},getAttribute:function(e){return e?this.options[e]:this.options},setAttribute:function(e,t){return this.options[e]=t,this},refresh:function(){return this._removeSliderEventHandlers(),o.call(this,this.element,this.options),e&&e.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(e,t){void 0===this.eventToCallbackMap[e]&&(this.eventToCallbackMap[e]=[]),this.eventToCallbackMap[e].push(t)},_unbindNonQueryEventHandler:function(e,t){var n=this.eventToCallbackMap[e];if(void 0!==n)for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}},_cleanUpEventCallbacksMap:function(){for(var e=Object.keys(this.eventToCallbackMap),t=0;t<e.length;t++){var n=e[t];this.eventToCallbackMap[n]=null}},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},
_hideTooltip:function(){!1===this._state.inDrag&&!0!==this.alwaysShowTooltip&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var e;if(e=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=e[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=e[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),this.rangeHighlightElements.length>0&&Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var t=0;t<this.options.rangeHighlights.length;t++){var n=this._toPercentage(this.options.rangeHighlights[t].start),i=this._toPercentage(this.options.rangeHighlights[t].end);if(this.options.reversed){var o=100-i;i=100-n,n=o}var r=this._createHighlightRange(n,i);r?"vertical"===this.options.orientation?(this.rangeHighlightElements[t].style.top=r.start+"%",this.rangeHighlightElements[t].style.height=r.size+"%"):(this.rangeHighlightElements[t].style.left=r.start+"%",this.rangeHighlightElements[t].style.width=r.size+"%"):this.rangeHighlightElements[t].style.display="none"}if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var a="vertical"===this.options.orientation?"height":"width",s="vertical"===this.options.orientation?"marginTop":"marginLeft",l=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var u=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[s]=-l/2+"px"),u=this.tickLabelContainer.offsetHeight;else for(c=0;c<this.tickLabelContainer.childNodes.length;c++)this.tickLabelContainer.childNodes[c].offsetHeight>u&&(u=this.tickLabelContainer.childNodes[c].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=u+"px")}for(var c=0;c<this.options.ticks.length;c++){var d=this.options.ticks_positions[c]||this._toPercentage(this.options.ticks[c]);this.options.reversed&&(d=100-d),this.ticks[c].style[this.stylePos]=d+"%",this._removeClass(this.ticks[c],"in-selection"),this.options.range?d>=e[0]&&d<=e[1]&&this._addClass(this.ticks[c],"in-selection"):"after"===this.options.selection&&d>=e[0]?this._addClass(this.ticks[c],"in-selection"):"before"===this.options.selection&&d<=e[0]&&this._addClass(this.ticks[c],"in-selection"),this.tickLabels[c]&&(this.tickLabels[c].style[a]=l+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[c]?(this.tickLabels[c].style.position="absolute",this.tickLabels[c].style[this.stylePos]=d+"%",this.tickLabels[c].style[s]=-l/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[c].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var p;if(this.options.range){p=this.options.formatter(this._state.value),this._setText(this.tooltipInner,p),this.tooltip.style[this.stylePos]=(e[1]+e[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var f=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,f);var h=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,h),this.tooltip_min.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=e[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else p=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,p),this.tooltip.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(e[0],e[1])+"%",this.trackSelection.style.top=Math.min(e[0],e[1])+"%",this.trackSelection.style.height=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(e[0],e[1])+"%",this.trackSelection.style.left=Math.min(e[0],e[1])+"%",this.trackSelection.style.width=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";var m=this.tooltip_min.getBoundingClientRect(),g=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?m.right>g.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):m.right>g.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_createHighlightRange:function(e,t){return this._isHighlightRange(e,t)?e>t?{start:t,size:e-t}:{start:e,size:t-e}:null},_isHighlightRange:function(e,t){return e>=0&&100>=e&&t>=0&&100>=t},_resize:function(e){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},_mousedown:function(e){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var t=this._getPercentage(e);if(this.options.range){var n=Math.abs(this._state.percentage[0]-t),i=Math.abs(this._state.percentage[1]-t);this._state.dragged=i>n?0:1,this._adjustPercentageForRangeSliders(t)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=t,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var o=this._calculateValue();return this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!1,!0),this._pauseEvent(e),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(e){if(void 0===e.changedTouches)return void this._mousedown(e);var t=e.changedTouches[0];this.touchX=t.pageX,this.touchY=t.pageY},_triggerFocusOnHandle:function(e){0===e&&this.handle1.focus(),1===e&&this.handle2.focus()},_keydown:function(e,t){if(!this._state.enabled)return!1;var n;switch(t.keyCode){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){if(this.options.natural_arrow_keys){var i="vertical"===this.options.orientation&&!this.options.reversed,o="horizontal"===this.options.orientation&&this.options.reversed;(i||o)&&(n=-n)}var r=this._state.value[e]+n*this.options.step;return this.options.range&&(r=[e?this._state.value[0]:r,e?r:this._state.value[1]]),this._trigger("slideStart",r),this._setDataVal(r),this.setValue(r,!0,!0),this._setDataVal(r),this._trigger("slideStop",r),this._layout(),this._pauseEvent(t),!1}},_pauseEvent:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},_mousemove:function(e){if(!this._state.enabled)return!1;var t=this._getPercentage(e);this._adjustPercentageForRangeSliders(t),this._state.percentage[this._state.dragged]=t,this._layout();var n=this._calculateValue(!0);return this.setValue(n,!0,!0),!1},_touchmove:function(e){if(void 0!==e.changedTouches){var t=e.changedTouches[0],n=t.pageX-this.touchX,i=t.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&5>=n&&n>=-5&&(i>=15||-15>=i)?this._mousedown(e):5>=i&&i>=-5&&(n>=15||-15>=n)&&this._mousedown(e))}},_adjustPercentageForRangeSliders:function(e){if(this.options.range){var t=this._getNumDigitsAfterDecimalPlace(e);t=t?t-1:0;var n=this._applyToFixedAndParseFloat(e,t);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],t)<n?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],t)>n&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,!1===this._state.over&&this._hideTooltip();var e=this._calculateValue(!0);return this._layout(),this._setDataVal(e),this._trigger("slideStop",e),!1},_calculateValue:function(e){var t;if(this.options.range?(t=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(t[0]=this._toValue(this._state.percentage[0]),t[0]=this._applyPrecision(t[0])),100!==this._state.percentage[1]&&(t[1]=this._toValue(this._state.percentage[1]),t[1]=this._applyPrecision(t[1]))):(t=this._toValue(this._state.percentage[0]),t=parseFloat(t),t=this._applyPrecision(t)),e){for(var n=[t,1/0],i=0;i<this.options.ticks.length;i++){var o=Math.abs(this.options.ticks[i]-t);o<=n[1]&&(n=[this.options.ticks[i],o])}if(n[1]<=this.options.ticks_snap_bounds)return n[0]}return t},_applyPrecision:function(e){var t=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(e,t)},_getNumDigitsAfterDecimalPlace:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},_applyToFixedAndParseFloat:function(e,t){var n=e.toFixed(t);return parseFloat(n)},_getPercentage:function(e){!this.touchCapable||"touchstart"!==e.type&&"touchmove"!==e.type||(e=e.touches[0]);var t=e[this.mousePos],n=this._state.offset[this.stylePos],i=t-n,o=i/this._state.size*100;return o=Math.round(o/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(o=100-o),Math.max(0,Math.min(100,o))},_validateInputValue:function(e){if("number"==typeof e)return e;if(Array.isArray(e))return this._validateArray(e),e;throw new Error(r.formatInvalidInputErrorMsg(e))},_validateArray:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("number"!=typeof n)throw new Error(r.formatInvalidInputErrorMsg(n))}},_setDataVal:function(e){this.element.setAttribute("data-value",e),this.element.setAttribute("value",e),this.element.value=e},_trigger:function(t,n){n=n||0===n?n:void 0;var i=this.eventToCallbackMap[t];if(i&&i.length)for(var o=0;o<i.length;o++){var r=i[o];r(n)}e&&this._triggerJQueryEvent(t,n)},_triggerJQueryEvent:function(e,t){var n={type:e,value:t};this.$element.trigger(n),this.$sliderElem.trigger(n)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(e,t){void 0!==e.textContent?e.textContent=t:void 0!==e.innerText&&(e.innerText=t)},_removeClass:function(e,t){for(var n=t.split(" "),i=e.className,o=0;o<n.length;o++){var r=n[o],a=new RegExp("(?:\\s|^)"+r+"(?:\\s|$)");i=i.replace(a," ")}e.className=i.trim()},_addClass:function(e,t){for(var n=t.split(" "),i=e.className,o=0;o<n.length;o++){var r=n[o];new RegExp("(?:\\s|^)"+r+"(?:\\s|$)").test(i)||(i+=" "+r)}e.className=i.trim()},_offsetLeft:function(e){return e.getBoundingClientRect().left},_offsetTop:function(e){for(var t=e.offsetTop;(e=e.offsetParent)&&!isNaN(e.offsetTop);)t+=e.offsetTop,"BODY"!==e.tagName&&(t-=e.scrollTop);return t},_offset:function(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}},_css:function(t,n,i){if(e)e.style(t,n,i);else{var o=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()});t.style[o]=i}},_toValue:function(e){return this.options.scale.toValue.apply(this,[e])},_toPercentage:function(e){return this.options.scale.toPercentage.apply(this,[e])},_setTooltipPosition:function(){var e=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var t=this.options.tooltip_position||"right",n="left"===t?"right":"left";e.forEach(function(e){this._addClass(e,t),e.style[n]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?e.forEach(function(e){this._addClass(e,"bottom"),e.style.top="22px"}.bind(this)):e.forEach(function(e){this._addClass(e,"top"),e.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},e&&function(){var o=void 0;e.fn.slider?(windowIsDefined&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),o=n):(e.bridget(t,i),o=t),e.bridget(n,i),e(function(){e("input[data-provide=slider]")[o]()})}()}(e),i}),define("lib-build/css!lib/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min",[],function(){}),define("storymaps-react/tpl/view/ui/Autoplay",["module","exports","lib-build/hbars!./Autoplay","lib-build/i18n!resources/tpl/viewer/nls/app","dojo/has","lib-build/less!./Autoplay","lib/seiyria-bootstrap-slider/dist/bootstrap-slider.min","lib-build/css!lib/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=r(o),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(){a(this,e),this._node=null,this._autoplayBtn=null,this._inProgress=!1,this._scrollAmount=null,this._slider=null,this._isHoverContainer=!1,this._mouseMoveTime=Date.now(),this._init()}return c(e,[{key:"start",value:function(){var e=this;this._scrollAmount=12*this._slider.slider("getValue"),this._inProgress||(this._inProgress=!0,0===$(document).scrollTop()?setTimeout(function(){e._next()},3e3):this._next(),this._updatePlayPauseButton(!0))}},{key:"stop",value:function(){this._inProgress=!1,this._updatePlayPauseButton(!1)}},{key:"isPlaying",value:function(){return this._inProgress}},{key:"_next",value:function(){var e=app.Controller._currentSectionIndex,t=app.display.sections[e],n=this._scrollAmount,i=$(document).scrollTop();if("immersive"===t.type){t.top+t.node.height()-i>app.display.windowHeight&&(n=1.5*this._scrollAmount)}this._inProgress&&$("html,body").animate({scrollTop:i+n},{duration:200,easing:"linear"}).promise().then(function(){$(document).scrollTop()+app.display.windowHeight>=$("body").height()?setTimeout(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,app.ui.update({forceUpdate:!0}),setTimeout(this._next.bind(this),3e3)}.bind(this),2e3):this._next()}.bind(this))}},{key:"_showContainer",value:function(){var e=Date.now();this._mouseMoveTime>e-150&&this._node.removeClass("fade"),this._mouseMoveTime=e}},{key:"_hideContainer",value:function(){!this._isHoverContainer&&Date.now()>this._mouseMoveTime+3e3&&this._node.addClass("fade")}},{key:"_updatePlayPauseButton",value:function(e){e?this._autoplayBtn.removeClass("fa-play").addClass("fa-pause"):this._autoplayBtn.removeClass("fa-pause").addClass("fa-play")}},{key:"_init",value:function(){var e=this;$("body").append(s.default),this._node=$(".autoplay-controls"),this._autoplayBtn=this._node.find(".autoplay-btn"),(0,u.default)("ios")||($(".sections").mousemove(this._showContainer.bind(this)),setInterval(this._hideContainer.bind(this),1e3),this._node.hover(function(){e._isHoverContainer=!0},function(){e._isHoverContainer=!1,e._hideContainer()}));var t={1:l.default.viewer.autoplay.speedSlow,2:l.default.viewer.autoplay.speedMedium,3:l.default.viewer.autoplay.speedFast};this._slider=this._node.find(".slider-container input").slider({min:1,max:3,value:2,formatter:function(e){return t[e]}}),this._node.find(".slider-container input").on("slideStop",function(){e.isPlaying()&&e.start()}),this._autoplayBtn.click(function(){e._autoplayBtn.hasClass("fa-play")?e.start():e.stop()}),$(window).bind("mousewheel DOMMouseScroll",function(){e._inProgress&&(e.stop(),e._mouseMoveTime=Date.now(),e._autoplayBtn.removeClass("fa-pause").addClass("fa-play"),e._node.removeClass("fade"))})}}]),e}();t.default=d,e.exports=t.default}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof t&&o[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var o=e(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=e(r);t&&t.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.button"),r="object"==typeof t&&t;o||i.data("bs.button",o=new n(this,r)),"toggle"==t?o.toggle():t&&o.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",r=i.data();t+="Text",null==r.resetText&&i.data("resetText",i[o]()),setTimeout(e.proxy(function(){i[o](null==r[t]?this.options[t]:r[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.carousel"),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),a="string"==typeof t?t:r.slide;o||i.data("bs.carousel",o=new n(this,r)),"number"==typeof t?o.to(t):a?o[a]():r.interval&&o.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var i="prev"==e?-1:1,o=(n+i)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var o=this.$element.find(".item.active"),r=i||this.getItemForDirection(t,o),a=this.interval,s="next"==t?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var u=r[0],c=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(r)]);d&&d.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,o.addClass(s),r.addClass(s),o.one("bsTransitionEnd",function(){r.removeClass([t,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var o=function(n){var i,o=e(this),r=e(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var a=e.extend({},r.data(),o.data()),s=o.attr("data-slide-to");s&&(a.interval=!1),t.call(r,a),s&&r.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),r=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!o&&r.toggle&&/show|hide/.test(t)&&(r.toggle=!1),o||n.data("bs.collapse",o=new i(this,r)),"string"==typeof t&&o[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.6",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"))&&t.transitioning)){var r=e.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),t||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var o=e(i);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=e(this);o.attr("data-target")||i.preventDefault();var r=t(o),a=r.data("bs.collapse"),s=a?"toggle":o.data();n.call(r,s)})}(jQuery),function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function n(n){n&&3===n.which||(e(o).remove(),e(r).each(function(){var i=e(this),o=t(i),r={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(o[0],n.target)||(o.trigger(n=e.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger(e.Event("hidden.bs.dropdown",r)))))}))}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof t&&i[t].call(n)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.6",a.prototype.toggle=function(i){var o=e(this);if(!o.is(".disabled, :disabled")){var r=t(o),a=r.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(r.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=e(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=t(i),a=o.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&o.find(r).trigger("focus"),i.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,a.prototype.toggle).on("keydown.bs.dropdown.data-api",r,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,i){return this.each(function(){var o=e(this),r=o.data("bs.modal"),a=e.extend({},n.DEFAULTS,o.data(),"object"==typeof t&&t);r||o.data("bs.modal",r=new n(this,a)),"string"==typeof t?r[t](i):a.show&&r.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}
;n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),o=i.attr("href"),r=e(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(r,a,this)})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tooltip"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||i.data("bs.tooltip",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var a=o[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var o=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=r[0].offsetWidth,p=r[0].offsetHeight;if(u){var f=s,h=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+p>h.bottom?"top":"top"==s&&c.top-p<h.top?"bottom":"right"==s&&c.right+d>h.width?"left":"left"==s&&c.left-d<h.left?"right":s,r.removeClass(f).addClass(s)}var m=this.getCalculatedOffset(s,c,d,p);this.applyPlacement(m,s);var g=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=r&&(t.top=t.top+r-u);var c=this.getViewportAdjustedDelta(n,t,l,u);c.left?t.left+=c.left:t.top+=c.top;var d=/top|bottom/.test(n),p=d?2*c.left-o+l:2*c.top-r+u,f=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][f],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=o.hoverState&&r.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,r=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=i?{top:0,left:0}:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,a,s,r)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-r-a.scroll,l=t.top+r-a.scroll+i;s<a.top?o.top=a.top-s:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var u=t.left-r,c=t.left+r+n;u<a.left?o.left=a.left-u:c>a.right&&(o.left=a.left+a.width-c)}return o},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.popover"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||i.data("bs.popover",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.6",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new t(this,r)),"string"==typeof n&&o[n]()})}t.VERSION="3.3.6",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),o=t.data("target")||t.attr("href"),r=/^#./.test(o)&&e(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,r=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=r[r.length-1])&&this.activate(e);if(a&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)a!=r[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof t&&o[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=n.find(".active:last a"),r=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),t.trigger(a),!a.isDefaultPrevented()&&!r.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(t,i,o){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=i.find("> .active"),s=o&&e.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),a.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var o=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.affix"),r="object"==typeof t&&t;o||i.data("bs.affix",o=new n(this,r)),"string"==typeof t&&o[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.6",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var o=this.$target.scrollTop(),r=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=r.top)&&"bottom":!(e-i>=o+a)&&"bottom";var s=null==this.affixed,l=s?o:r.top,u=s?a:t;return null!=n&&n>=o?"top":null!=i&&l+u>=e-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,o=i.top,r=i.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(r=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var s=this.getState(a,t,o,r);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=e.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-r})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),define("lib/calcite-bootstrap/js/bootstrap.min",function(){}),define("lib-build/css!storymaps/tpl/utils/SocialSharing",[],function(){}),define("storymaps/tpl/core/MainView",["lib/babel-polyfill/browser-polyfill","lib/jquery/dist/jquery.min","lib-build/less!./MainView","lib-build/css!../view/media/Common","lib-build/i18n!resources/tpl/viewer/nls/app","lib-build/i18n!resources/tpl/builder/nls/app","storymaps-react/tpl/core/Controller","storymaps/tpl/core/Core","storymaps/tpl/utils/CommonHelper","storymaps/tpl/utils/UI","storymaps/tpl/utils/EmbedBar","storymaps-react/tpl/utils/IOSEmbedFix","storymaps-react/tpl/view/ui/Header","storymaps-react/tpl/view/ui/Autoplay","lib/calcite-bootstrap/js/bootstrap.min","lib-build/css!storymaps/tpl/utils/SocialSharing","esri/arcgis/utils","esri/urlUtils","dojo/_base/Color","dojo/_base/lang","dojo/on","dojo/has","dojo/topic"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h,m,g,v,b,y,_,w,C){return function(){function e(e){return E=e,!0}function t(e,t,n){d.setStyles(),a(),app.display.browserWidth<768?($("body").addClass("mobile-view"),app.isMobileView=!0):app.display.browserWidth<1025&&($("body").addClass("tablet-view"),app.isMobileView=!0),w("touch")&&$("body").addClass("touch"),app.Controller.renderStory(e,n).then(function(){app.Controller.renderHeader(),app.Controller.changeTheme();var e=o.viewer.embedBar;y.mixin(e,{open:o.viewer.shareFromCommon.open,close:o.viewer.common.close,shareFacebook:o.viewer.embedBar.facebook,shareTwitter:o.viewer.embedBar.twitter});var t=v.urlToObject(window.location.search).query||{},n=!!t.classicEmbedMode||(""===t.classicEmbedMode||(!!t.classicembedmode||""===t.classicembedmode)),i=y.getObject("data.appItem.data.values.settings.header.logo",!0,app),r=!i.enabled&&!i.url||i.enabled&&"resources/tpl/viewer/icons/esri-logo.png"===i.url;new c({classicEmbedMode:n,strings:e,disableFullscreen:!0,appCreationDate:app.data.appItem.item.created,june2018ReleaseDate:app.cfg.JUNE_CREATED_DATE,isBuilder:app.isInBuilder,isEsriLogo:r,logoPath:"resources/tpl/viewer/icons/esri-logo-black.png",logoElements:[$(".story-header .logoImg")],taglineElements:[$(".story-header .linkContainer .link")],shareElements:[$(".story-header .share-btn-container")],appTitle:app.data.title,bitlyCreds:[app.cfg.HEADER_SOCIAL.bitly.key,app.cfg.HEADER_SOCIAL.bitly.login]}).initiated&&$("body").addClass("embed-mode-bar"),s(),setTimeout(function(){a()},100),setTimeout(function(){a()},300),setTimeout(function(){a()},500)})}function n(e){e=e||{};var t=app.display.scrollTop;if(app.isInBuilder&&a(),app.display.scrollTop=t,x!=t||e.forceUpdate){var n=t-x;x=t;var o=i(t,t+app.display.windowHeight),r=o.activeSection;if(r){var s=r.index,l=r.node,u=t-r.top;app.Controller.onScroll({currentSectionIndex:s,scrollTop:t,scrollDifference:n,windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight,$currentSection:l,sectionHeight:app.display.sectionHeight,currentSectionScroll:u,visibleSections:o.visibleSections,initialUpdate:e&&e.initialUpdate});var c=!1;if(t<=app.display.windowHeight){var d=app.display.windowHeight-t-50;d<40&&(d=0),c=0!==d}_.update({headerCompact:c,storyProgress:(t+app.display.windowHeight)/app.display.storyHeight*100,sectionIndex:s})}}}function i(e,t){for(var n=app.display.sections,i=n.length,o=null,r=[],a=0,s=0,l=null,u=e+50,c=0;c<i;c++)a=n[c].top,s=c-1,l=n[c+1]?n[c+1].top:-1,a>u&&(o||(o={index:s,top:n[s].top,node:n[s].node})),c!=i-1||o||"credits"==n[c].type||(o={index:c,top:n[c].top,node:n[c].node}),u>=a&&u<l?r.push(s+1):t>a&&u<a&&r.push(s+1);return{activeSection:o,visibleSections:r}}function a(){var e=[];$(".section").each(function(t){var n=$(this);e.push({top:n.hasClass("hidden")?Number.MAX_VALUE:n.position().top,node:n,type:app.data.sections[t].type})});var t=[],n=$(window),i=n.width(),o=n.height(),r=_.getHeight();app.display={browserWidth:i,windowWidth:i-(app.isInBuilder?$(".section-builder-panel").width():0),windowHeight:o,headerHeight:r,sectionHeight:o-r,storyHeight:$("body").height(),scrollTop:app.display?app.display.scrollTop:0,sections:e,inlineVideos:t}}function s(){var e=!0,t=l.getUrlParams();"false"===t.forceScrollTop&&(e=!1),e&&$(window).on("beforeunload",function(){$(window).scrollTop(0)});var i=l.throttle(function(){u()},50);$(window).resize(i).trigger("resize"),C.subscribe("media-dynamic-resize",u);var o=!0,r=$(document);if("false"===t.useRafLoop&&(o=!1),o)window.requestAnimationFrame(function e(){var t=!1;$("body").hasClass("modal-open")&&(t=!0),t||(app.display.scrollTop=r.scrollTop(),n()),window.requestAnimationFrame(e)});else{var a=!1,s=function(){n(),a=!1};$(window).scroll(function(){app.isInBuilder&&$("body").hasClass("modal-open")||(app.display.scrollTop=r.scrollTop(),a||(window.requestAnimationFrame(s),a=!0))})}$(".modal").on("show.bs.modal",function(){k=app.display.scrollTop,$("body").css({position:"fixed",top:-app.display.scrollTop}),$(".sections").css({position:"fixed"})}),$(".modal").on("hide.bs.modal",function(){$("body").css({position:"",top:""}),$(".sections").css({position:""}),$("html,body").scrollTop(k)}),E.hasSwitchBuilderButton()&&app.ui.header.showEditButton(),app.isInBuilder||void 0===l.getUrlParams().autoplay||"false"===l.getUrlParams().autoplay||(app.ui.autoplay=new f,C.subscribe("tpl-ready",function(){$("body").hasClass("mobile-view")||($(".section-layout-cover .scroll-invite").hide(),app.ui.header.disableShareButtonAutoplay(),app.ui.autoplay.start())})),n({initialUpdate:!0}),C.publish("tpl-ready"),g()}function u(){var e=app.display.browserWidth<768;a(),_.resize(),app.Controller.onResize({windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight,sectionHeight:app.display.sectionHeight}),app.isInBuilder&&($("body").toggleClass("error modal-open",e),$("#loadingOverlay").toggleClass("error",e),$("#fatalError").toggle(e),$(".progressjs-container").toggle(!e)),app.ui.autoplay&&e&&app.ui.autoplay.stop()}function h(){return app.Controller.isStoryBlank()}function m(){if(app.data.appItem&&app.data.appItem.data){var e=app.data.appItem.data.values;t(e.config,e.settings,e.sections)}}function g(){setTimeout(function(){$("#loadingIndicator, #loadingMessage").addClass("fadeOut").fadeOut(300),$("#loadingOverlay").fadeOut(600)},0)}function b(e){e||alert(o.viewer.errors.noConfigName),$.ajax({type:"GET",url:"stories/"+e+".json",dataType:"json"}).then(function(e){e&&e.config&&e.sections&&e.sections.length?t(e.config,e.settings,e.sections):alert(o.viewer.errors.configFormatError)},function(){alert(o.viewer.errors.configNotFound)})}y.mixin(o,r);var _=new p,k=null,x=null,E=null;return app.ui.header=_,app.ui.update=n,{init:e,isStoryBlank:h,getConfig:b,appInitComplete:m,updateUI:n}}}),define("lib-build/hbars!storymaps-react/tpl/builder/panel/BuilderPanel",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing;return'<div class="builder-panel-tools">\n\n  <div class="builder-panel-tools-row-1">\n    <button class="builder-title">\n      <span class="white-text">'+s(a(null!=(o=null!=e?e.strings:e)?o.builderNamePrefix:o,e))+'</span>\n      <span class="blue-text">Cascade</span>\n      <span class="white-text">'+s(a(null!=(o=null!=e?e.strings:e)?o.builderNameSuffix:o,e))+'</span>\n    </button>\n    <button id="feedback-button" class="btn-feedback btn btn-clear lightest" data-title="'+s(a(null!=(o=null!=e?e.strings:e)?o.betaFeedback:o,e))+'" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.buttonHelp:o,e))+'" onClick="window.open(\'http://links.esri.com/storymaps/cascade-feedback\')">\n      <i class="btn-feedback-icon fa fa-commenting" aria-hidden="true"></i>\n    </button>\n  </div>\n\n  <div class="builder-panel-tools-row-2">\n\n    <button class="btn btn-preview">\n        <span class="btn-preview-wrapper">\n          <i class="fa fa-eye fa-lg" aria-hidden="true" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.buttonPreview:o,e))+'"></i>\n          <i class="fa fa-caret-up" aria-hidden="true"></i>\n        </span>\n      <span class="btn-preview-label"></span>\n    </button>\n\n    <button class="btn btn-settings">\n      <i class="fa fa-cog fa-lg" aria-hidden="true" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.buttonSettings:o,e))+'"></i>\n      <span class="btn-settings-label"></span>\n    </button>\n\n    <button class="btn btn-check">\n      <span class="error-icon-wrapper">\n        <i class="fa fa-exclamation-triangle fa-lg" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.buttonHealth:o,e))+'"></i>\n        <span class="issue-count super"></span>\n      </span>\n      <span class="warning-icon-wrapper">\n        <i class="fa fa-heartbeat fa-lg" aria-hidden="true" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.buttonHealth:o,e))+'"></i>\n      </span>\n      <span class="checking-icon-wrapper">\n        <span class="small-loader"></span>\n      </span>\n      <span class="no-issues-icon-wrapper">\n        <i class="fa fa-heartbeat fa-lg" aria-hidden="true" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.buttonHealth:o,e))+'"></i>\n        <i class="fa fa-check super"></i>\n      </span>\n    </button>\n\n  </div>\n\n  <div class="builder-panel-tools-row-3">\n\n    <button id="save-button" class="btn btn-save" data-toggle="tooltip" data-placement="top" data-title="'+s(a(null!=(o=null!=e?e.strings:e)?o.saveError:o,e))+'">\n      <i class="btn-save-icon fa fa-floppy-o fa-lg" aria-hidden="true" title="'+s((r=null!=(r=t.btnSave||(null!=e?e.btnSave:e))?r:l,"function"==typeof r?r.call(e,{name:"btnSave",hash:{},data:i
}):r))+'"></i>\n      <span class="btn-save-loader small-loader"></span>\n      <span class="btn-save-success fa fa-check"></span>\n      <span class="btn-save-error glyphicon glyphicon-exclamation-sign"></span>\n    </button>\n\n    <div class="btn-share-container">\n      <div class="btn-share-outer-tooltip" data-level="private">\n        <div class="btn-share-wrapper" data-level="private" data-title="'+s(a(null!=(o=null!=e?e.sharingLevelStrings:e)?o.btnPrivate:o,e))+'">\n    \t\t\t<span class="small-loader"></span>\n    \t\t\t<i class="share-icon fa fa-lock fa-lg" aria-hidden="true"></i>\n    \t\t</div>\n      </div>\n      <div class="btn-share-outer-tooltip tooltip-enabled" data-level="org" data-title="'+s((r=null!=(r=t.organizationWarning||(null!=e?e.organizationWarning:e))?r:l,"function"==typeof r?r.call(e,{name:"organizationWarning",hash:{},data:i}):r))+'">\n        <div class="btn-share-wrapper" data-level="org" data-title="'+s(a(null!=(o=null!=e?e.sharingLevelStrings:e)?o.btnOrg:o,e))+'">\n    \t\t\t<span class="small-loader"></span>\n    \t\t\t<i class="share-icon fa fa-building fa-lg" aria-hidden="true"></i>\n    \t\t</div>\n      </div>\n      <div class="btn-share-outer-tooltip tooltip-enabled" data-level="public" data-title="'+s((r=null!=(r=t.publicWarning||(null!=e?e.publicWarning:e))?r:l,"function"==typeof r?r.call(e,{name:"publicWarning",hash:{},data:i}):r))+'">\n        <div class="btn-share-wrapper" data-level="public" data-title="'+s(a(null!=(o=null!=e?e.sharingLevelStrings:e)?o.btnPublic:o,e))+'">\n    \t\t\t<span class="small-loader"></span>\n    \t\t\t<i class="share-icon fa fa-globe fa-lg" aria-hidden="true"></i>\n    \t\t</div>\n      </div>\n    </div>\n\n  </div>\n\n</div>\n\n<div class="overview"></div>\n'},useData:!0})}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";var i=e(40),o=e(148),r={focusDOMComponent:function(){o(i.getNodeFromInstance(this))}};t.exports=r},{148:148,40:40}],2:[function(e,t,n){"use strict";function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case S.topCompositionStart:return P.compositionStart;case S.topCompositionEnd:return P.compositionEnd;case S.topCompositionUpdate:return P.compositionUpdate}}function r(e,t){return e===S.topKeyDown&&t.keyCode===_}function a(e,t){switch(e){case S.topKeyUp:return-1!==y.indexOf(t.keyCode);case S.topKeyDown:return t.keyCode!==_;case S.topKeyPress:case S.topMouseDown:case S.topBlur:return!0;default:return!1}}function s(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function l(e,t,n,i){var l,u;if(w?l=o(e):I?a(e,n)&&(l=P.compositionEnd):r(e,n)&&(l=P.compositionStart),!l)return null;x&&(I||l!==P.compositionStart?l===P.compositionEnd&&I&&(u=I.getData()):I=m.getPooled(i));var c=g.getPooled(l,t,n,i);if(u)c.data=u;else{var d=s(n);null!==d&&(c.data=d)}return f.accumulateTwoPhaseDispatches(c),c}function u(e,t){switch(e){case S.topCompositionEnd:return s(t);case S.topKeyPress:return t.which!==E?null:(O=!0,T);case S.topTextInput:var n=t.data;return n===T&&O?null:n;default:return null}}function c(e,t){if(I){if(e===S.topCompositionEnd||!w&&a(e,t)){var n=I.getData();return m.release(I),I=null,n}return null}switch(e){case S.topPaste:return null;case S.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case S.topCompositionEnd:return x?null:t.data;default:return null}}function d(e,t,n,i){var o;if(!(o=k?u(e,n):c(e,n)))return null;var r=v.getPooled(P.beforeInput,t,n,i);return r.data=o,f.accumulateTwoPhaseDispatches(r),r}var p=e(16),f=e(20),h=e(140),m=e(21),g=e(95),v=e(99),b=e(158),y=[9,13,27,32],_=229,w=h.canUseDOM&&"CompositionEvent"in window,C=null;h.canUseDOM&&"documentMode"in document&&(C=document.documentMode);var k=h.canUseDOM&&"TextEvent"in window&&!C&&!function(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}(),x=h.canUseDOM&&(!w||C&&C>8&&C<=11),E=32,T=String.fromCharCode(E),S=p.topLevelTypes,P={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[S.topCompositionEnd,S.topKeyPress,S.topTextInput,S.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[S.topBlur,S.topCompositionEnd,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[S.topBlur,S.topCompositionStart,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[S.topBlur,S.topCompositionUpdate,S.topKeyDown,S.topKeyPress,S.topKeyUp,S.topMouseDown]}},O=!1,I=null,M={eventTypes:P,extractEvents:function(e,t,n,i){return[l(e,t,n,i),d(e,t,n,i)]}};t.exports=M},{140:140,158:158,16:16,20:20,21:21,95:95,99:99}],3:[function(e,t,n){"use strict";function i(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var o={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(e){r.forEach(function(t){o[i(t,e)]=o[e]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:o,shorthandPropertyExpansions:a};t.exports=s},{}],4:[function(e,t,n){"use strict";var i=e(3),o=e(140),r=(e(66),e(142),e(113)),a=e(153),s=e(159),l=(e(161),s(function(e){return a(e)})),u=!1,c="cssFloat";if(o.canUseDOM){var d=document.createElement("div").style;try{d.font=""}catch(e){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var p={createMarkupForStyles:function(e,t){var n="";for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];null!=o&&(n+=l(i)+":",n+=r(i,o,t)+";")}return n||null},setValueForStyles:function(e,t,n){var o=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=r(a,t[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)o[a]=s;else{var l=u&&i.shorthandPropertyExpansions[a];if(l)for(var d in l)o[d]="";else o[a]=""}}}};t.exports=p},{113:113,140:140,142:142,153:153,159:159,161:161,3:3,66:66}],5:[function(e,t,n){"use strict";function i(){this._callbacks=null,this._contexts=null}var o=e(132),r=e(162),a=e(25);e(154),r(i.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length&&o("24"),this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(e){this._callbacks&&(this._callbacks.length=e,this._contexts.length=e)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(i),t.exports=i},{132:132,154:154,162:162,25:25}],6:[function(e,t,n){"use strict";function i(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function o(e){var t=x.getPooled(I.change,A,e,E(e));_.accumulateTwoPhaseDispatches(t),k.batchedUpdates(r,t)}function r(e){y.enqueueEvents(e),y.processEventQueue(!1)}function a(e,t){M=e,A=t,M.attachEvent("onchange",o)}function s(){M&&(M.detachEvent("onchange",o),M=null,A=null)}function l(e,t){if(e===O.topChange)return t}function u(e,t,n){e===O.topFocus?(s(),a(t,n)):e===O.topBlur&&s()}function c(e,t){M=e,A=t,N=e.value,j=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(M,"value",R),M.attachEvent?M.attachEvent("onpropertychange",p):M.addEventListener("propertychange",p,!1)}function d(){M&&(delete M.value,M.detachEvent?M.detachEvent("onpropertychange",p):M.removeEventListener("propertychange",p,!1),M=null,A=null,N=null,j=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==N&&(N=t,o(e))}}function f(e,t){if(e===O.topInput)return t}function h(e,t,n){e===O.topFocus?(d(),c(t,n)):e===O.topBlur&&d()}function m(e,t){if((e===O.topSelectionChange||e===O.topKeyUp||e===O.topKeyDown)&&M&&M.value!==N)return N=M.value,A}function g(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function v(e,t){if(e===O.topClick)return t}var b=e(16),y=e(17),_=e(20),w=e(140),C=e(40),k=e(88),x=e(97),E=e(121),T=e(128),S=e(129),P=e(158),O=b.topLevelTypes,I={change:{phasedRegistrationNames:{bubbled:P({onChange:null}),captured:P({onChangeCapture:null})},dependencies:[O.topBlur,O.topChange,O.topClick,O.topFocus,O.topInput,O.topKeyDown,O.topKeyUp,O.topSelectionChange]}},M=null,A=null,N=null,j=null,L=!1;w.canUseDOM&&(L=T("change")&&(!document.documentMode||document.documentMode>8));var D=!1;w.canUseDOM&&(D=T("input")&&(!document.documentMode||document.documentMode>11));var R={get:function(){return j.get.call(this)},set:function(e){N=""+e,j.set.call(this,e)}},F={eventTypes:I,extractEvents:function(e,t,n,o){var r,a,s=t?C.getNodeFromInstance(t):window;if(i(s)?L?r=l:a=u:S(s)?D?r=f:(r=m,a=h):g(s)&&(r=v),r){var c=r(e,t);if(c){var d=x.getPooled(I.change,c,n,o);return d.type="change",_.accumulateTwoPhaseDispatches(d),d}}a&&a(e,s,t)}};t.exports=F},{121:121,128:128,129:129,140:140,158:158,16:16,17:17,20:20,40:40,88:88,97:97}],7:[function(e,t,n){"use strict";function i(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function o(e,t,n){c.insertTreeBefore(e,t,n)}function r(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):g(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,i){for(var o=t;;){var r=o.nextSibling;if(g(e,o,i),o===n)break;o=r}}function l(e,t,n){for(;;){var i=t.nextSibling;if(i===n)break;e.removeChild(i)}}function u(e,t,n){var i=e.parentNode,o=e.nextSibling;o===t?n&&g(i,document.createTextNode(n),o):n?(m(o,n),l(i,o,t)):l(i,e,t)}var c=e(8),d=e(12),p=e(70),f=(e(40),e(66),e(112)),h=e(134),m=e(135),g=f(function(e,t,n){e.insertBefore(t,n)}),v=d.dangerouslyReplaceNodeWithMarkup,b={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:u,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case p.INSERT_MARKUP:o(e,s.content,i(e,s.afterNode));break;case p.MOVE_EXISTING:r(e,s.fromNode,i(e,s.afterNode));break;case p.SET_MARKUP:h(e,s.content);break;case p.TEXT_CONTENT:m(e,s.content);break;case p.REMOVE_NODE:a(e,s.fromNode)}}}};t.exports=b},{112:112,12:12,134:134,135:135,40:40,66:66,70:70,8:8}],8:[function(e,t,n){"use strict";function i(e){if(h){var t=e.node,n=e.children;if(n.length)for(var i=0;i<n.length;i++)m(t,n[i],null);else null!=e.html?d(t,e.html):null!=e.text&&f(t,e.text)}}function o(e,t){e.parentNode.replaceChild(t.node,e),i(t)}function r(e,t){h?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){h?e.html=t:d(e.node,t)}function s(e,t){h?e.text=t:f(e.node,t)}function l(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=e(9),d=e(134),p=e(112),f=e(135),h="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),m=p(function(e,t,n){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(i(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),i(t))});u.insertTreeBefore=m,u.replaceChildWithTree=o,u.queueChild=r,u.queueHTML=a,u.queueText=s,t.exports=u},{112:112,134:134,135:135,9:9}],9:[function(e,t,n){"use strict";var i={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=i},{}],10:[function(e,t,n){"use strict";function i(e,t){return(e&t)===t}var o=e(132),r=(e(154),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=r,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in n){s.properties.hasOwnProperty(d)&&o("48",d);var p=d.toLowerCase(),f=n[d],h={attributeName:p,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseProperty:i(f,t.MUST_USE_PROPERTY),hasBooleanValue:i(f,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(f,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(f,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(f,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1||o("50",d),l.hasOwnProperty(d)){var m=l[d];h.attributeName=m}a.hasOwnProperty(d)&&(h.attributeNamespace=a[d]),u.hasOwnProperty(d)&&(h.propertyName=u[d]),c.hasOwnProperty(d)&&(h.mutationMethod=c[d]),s.properties[d]=h}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){if((0,s._isCustomAttributeFunctions[t])(e))return!0}return!1},injection:r};t.exports=s},{132:132,154:154}],11:[function(e,t,n){"use strict";function i(e){return!!u.hasOwnProperty(e)||!l.hasOwnProperty(e)&&(s.test(e)?(u[e]=!0,!0):(l[e]=!0,!1))}function o(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var r=e(10),a=(e(40),e(66),e(131)),s=(e(161),new RegExp("^["+r.ATTRIBUTE_NAME_START_CHAR+"]["+r.ATTRIBUTE_NAME_CHAR+"]*$")),l={},u={},c={createMarkupForID:function(e){return r.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(r.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return r.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(r.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=r.properties.hasOwnProperty(e)?r.properties[e]:null;if(n){if(o(n,t))return"";var i=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?i+'=""':i+"="+a(t)}return r.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return i(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var i=r.properties.hasOwnProperty(t)?r.properties[t]:null;if(i){var a=i.mutationMethod;if(a)a(e,n);else{if(o(i,n))return void this.deleteValueForProperty(e,t);if(i.mustUseProperty)e[i.propertyName]=n;else{var s=i.attributeName,l=i.attributeNamespace;l?e.setAttributeNS(l,s,""+n):i.hasBooleanValue||i.hasOverloadedBooleanValue&&!0===n?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(r.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){i(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=r.properties.hasOwnProperty(t)?r.properties[t]:null;if(n){var i=n.mutationMethod;if(i)i(e,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?e[o]=!1:e[o]=""}else e.removeAttribute(n.attributeName)}else r.isCustomAttribute(t)&&e.removeAttribute(t)}};t.exports=c},{10:10,131:131,161:161,40:40,66:66}],12:[function(e,t,n){"use strict";var i=e(132),o=e(8),r=e(140),a=e(145),s=e(146),l=(e(154),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(r.canUseDOM||i("56"),t||i("57"),"HTML"===e.nodeName&&i("58"),"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else o.replaceChildWithTree(e,t)}});t.exports=l},{132:132,140:140,145:145,146:146,154:154,8:8}],13:[function(e,t,n){"use strict";var i=e(158),o=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null})];t.exports=o},{158:158}],14:[function(e,t,n){"use strict";var i={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},o={getHostProps:function(e,t){if(!t.disabled)return t;var n={};for(var o in t)!i[o]&&t.hasOwnProperty(o)&&(n[o]=t[o]);return n}};t.exports=o},{}],15:[function(e,t,n){"use strict";var i=e(16),o=e(20),r=e(40),a=e(101),s=e(158),l=i.topLevelTypes,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:u,extractEvents:function(e,t,n,i){if(e===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var s;if(i.window===i)s=i;else{var c=i.ownerDocument;s=c?c.defaultView||c.parentWindow:window}var d,p;if(e===l.topMouseOut){d=t;var f=n.relatedTarget||n.toElement;p=f?r.getClosestInstanceFromNode(f):null}else d=null,p=t;if(d===p)return null;var h=null==d?s:r.getNodeFromInstance(d),m=null==p?s:r.getNodeFromInstance(p),g=a.getPooled(u.mouseLeave,d,n,i);g.type="mouseleave",g.target=h,g.relatedTarget=m;var v=a.getPooled(u.mouseEnter,p,n,i);return v.type="mouseenter",v.target=m,v.relatedTarget=h,o.accumulateEnterLeaveDispatches(g,v,d,p),[g,v]}};t.exports=c},{101:101,158:158,16:16,20:20,40:40}],16:[function(e,t,n){"use strict";var i=e(157),o=i({bubbled:null,captured:null}),r=i({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:r,PropagationPhases:o};t.exports=a},{157:157}],17:[function(e,t,n){"use strict";var i=e(132),o=e(18),r=e(19),a=e(58),s=e(108),l=e(117),u=(e(154),{}),c=null,d=function(e,t){e&&(r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},p=function(e){return d(e,!0)},f=function(e){return d(e,!1)},h=function(e){return"."+e._rootNodeID},m={injection:{injectEventPluginOrder:o.injectEventPluginOrder,injectEventPluginsByName:o.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n&&i("94",t,typeof n);var r=h(e);(u[t]||(u[t]={}))[r]=n;var a=o.registrationNameModules[t];a&&a.didPutListener&&a.didPutListener(e,t,n)},getListener:function(e,t){var n=u[t],i=h(e);return n&&n[i]},deleteListener:function(e,t){var n=o.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var i=u[t];if(i){delete i[h(e)]}},deleteAllListeners:function(e){var t=h(e);for(var n in u)if(u.hasOwnProperty(n)&&u[n][t]){var i=o.registrationNameModules[n];i&&i.willDeleteListener&&i.willDeleteListener(e,n),delete u[n][t]}},extractEvents:function(e,t,n,i){for(var r,a=o.plugins,l=0;l<a.length;l++){var u=a[l];if(u){var c=u.extractEvents(e,t,n,i);c&&(r=s(r,c))}}return r},enqueueEvents:function(e){e&&(c=s(c,e))},processEventQueue:function(e){var t=c;c=null,e?l(t,p):l(t,f),c&&i("95"),a.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=m},{108:108,117:117,132:132,154:154,18:18,19:19,58:58}],18:[function(e,t,n){"use strict";function i(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(n>-1||a("96",e),!u.plugins[n]){t.extractEvents||a("97",e),u.plugins[n]=t;var i=t.eventTypes;for(var r in i)o(i[r],t,r)||a("98",r,e)}}}function o(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)&&a("99",n),u.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];r(s,t,n)}return!0}return!!e.registrationName&&(r(e.registrationName,t,n),!0)}function r(e,t,n){u.registrationNameModules[e]&&a("100",e),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=e(132),s=(e(154),null),l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s&&a("101"),s=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];l.hasOwnProperty(n)&&l[n]===o||(l[n]&&a("102",n),l[n]=o,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var i=u.registrationNameModules[t.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){s=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=u.registrationNameModules;for(var o in i)i.hasOwnProperty(o)&&delete i[o]}};t.exports=u},{132:132,154:154}],19:[function(e,t,n){"use strict";function i(e){return e===b.topMouseUp||e===b.topTouchEnd||e===b.topTouchCancel}function o(e){return e===b.topMouseMove||e===b.topTouchMove}function r(e){return e===b.topMouseDown||e===b.topTouchStart}function a(e,t,n,i){var o=e.type||"unknown-event";e.currentTarget=y.getNodeFromInstance(i),t?g.invokeGuardedCallbackWithCatch(o,n,e):g.invokeGuardedCallback(o,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)a(e,t,n[o],i[o]);else n&&a(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function u(e){var t=l(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&h("103"),e.currentTarget=t?y.getNodeFromInstance(n):null;var i=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,i}function d(e){return!!e._dispatchListeners}var p,f,h=e(132),m=e(16),g=e(58),v=(e(154),e(161),{injectComponentTree:function(e){p=e},injectTreeTraversal:function(e){f=e}}),b=m.topLevelTypes,y={isEndish:i,isMoveish:o,isStartish:r,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:d,getInstanceFromNode:function(e){return p.getInstanceFromNode(e)},getNodeFromInstance:function(e){return p.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,i,o){return f.traverseEnterLeave(e,t,n,i,o)},injection:v};t.exports=y},{132:132,154:154,16:16,161:161,58:58}],20:[function(e,t,n){"use strict";function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return y(e,i)}function o(e,t,n){var o=t?b.bubbled:b.captured,r=i(e,n,o);r&&(n._dispatchListeners=g(n._dispatchListeners,r),n._dispatchInstances=g(n._dispatchInstances,e))}function r(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(e._targetInst,o,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?m.getParentInstance(t):null;m.traverseTwoPhase(n,o,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,o=y(e,i);o&&(n._dispatchListeners=g(n._dispatchListeners,o),n._dispatchInstances=g(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function u(e){v(e,r)}function c(e){v(e,a)}function d(e,t,n,i){m.traverseEnterLeave(n,i,s,e,t)}function p(e){v(e,l)}var f=e(16),h=e(17),m=e(19),g=e(108),v=e(117),b=(e(161),f.PropagationPhases),y=h.getListener,_={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:d};t.exports=_},{108:108,117:117,16:16,161:161,17:17,19:19}],21:[function(e,t,n){"use strict";function i(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var o=e(162),r=e(25),a=e(125);o(i.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,i=n.length,o=this.getText(),r=o.length;for(e=0;e<i&&n[e]===o[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===o[r-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=o.slice(e,s),this._fallbackText}}),r.addPoolingTo(i),t.exports=i},{125:125,162:162,25:25}],22:[function(e,t,n){"use strict";var i=e(10),o=i.injection.MUST_USE_PROPERTY,r=i.injection.HAS_BOOLEAN_VALUE,a=i.injection.HAS_NUMERIC_VALUE,s=i.injection.HAS_POSITIVE_NUMERIC_VALUE,l=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:r,allowTransparency:0,alt:0,as:0,async:r,autoComplete:0,autoPlay:r,capture:r,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:o|r,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:r,coords:0,crossOrigin:0,data:0,dateTime:0,default:r,defer:r,dir:0,disabled:r,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:r,formTarget:0,frameBorder:0,headers:0,height:0,hidden:r,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:r,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:o|r,muted:o|r,name:0,nonce:0,noValidate:r,open:r,optimum:0,pattern:0,placeholder:0,playsInline:r,poster:0,preload:0,profile:0,radioGroup:0,readOnly:r,referrerPolicy:0,rel:0,required:r,reversed:r,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:r,scrolling:0,seamless:r,selected:o|r,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:r,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=u},{10:10}],23:[function(e,t,n){"use strict";function i(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function o(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var r={escape:i,unescape:o};t.exports=r},{}],24:[function(e,t,n){"use strict";function i(e){null!=e.checkedLink&&null!=e.valueLink&&s("87")}function o(e){i(e),(null!=e.value||null!=e.onChange)&&s("88")}function r(e){i(e),(null!=e.checked||null!=e.onChange)&&s("89")}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=e(132),l=e(76),u=e(75),c=e(77),d=(e(154),e(161),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func},f={},h={checkPropTypes:function(e,t,n){for(var i in p){if(p.hasOwnProperty(i))var o=p[i](t,i,e,u.prop,null,c);o instanceof Error&&!(o.message in f)&&(f[o.message]=!0,a(n))}},getValue:function(e){return e.valueLink?(o(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(r(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(o(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(r(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};t.exports=h},{132:132,154:154,161:161,75:75,76:76,77:77}],25:[function(e,t,n){"use strict";var i=e(132),o=(e(154),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}
return new t(e)}),r=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},a=function(e,t,n){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n),o}return new i(e,t,n)},s=function(e,t,n,i){var o=this;if(o.instancePool.length){var r=o.instancePool.pop();return o.call(r,e,t,n,i),r}return new o(e,t,n,i)},l=function(e,t,n,i,o){var r=this;if(r.instancePool.length){var a=r.instancePool.pop();return r.call(a,e,t,n,i,o),a}return new r(e,t,n,i,o)},u=function(e){var t=this;e instanceof t||i("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=o,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||c,n.poolSize||(n.poolSize=10),n.release=u,n},p={addPoolingTo:d,oneArgumentPooler:o,twoArgumentPooler:r,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:l};t.exports=p},{132:132,154:154}],26:[function(e,t,n){"use strict";var i=e(162),o=e(29),r=e(31),a=e(78),s=e(30),l=e(43),u=e(56),c=e(76),d=e(89),p=e(130),f=(e(161),u.createElement),h=u.createFactory,m=u.cloneElement,g=i,v={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:p},Component:r,PureComponent:a,createElement:f,cloneElement:m,isValidElement:u.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:h,createMixin:function(e){return e},DOM:l,version:d,__spread:g};t.exports=v},{130:130,161:161,162:162,29:29,30:30,31:31,43:43,56:56,76:76,78:78,89:89}],27:[function(e,t,n){"use strict";function i(e){return Object.prototype.hasOwnProperty.call(e,g)||(e[g]=h++,p[e[g]]={}),p[e[g]]}var o,r=e(162),a=e(16),s=e(18),l=e(59),u=e(107),c=e(126),d=e(128),p={},f=!1,h=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},g="_reactListenersID"+String(Math.random()).slice(2),v=r({},l,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=i(n),r=s.registrationNameDependencies[e],l=a.topLevelTypes,u=0;u<r.length;u++){var c=r[u];o.hasOwnProperty(c)&&o[c]||(c===l.topWheel?d("wheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):d("mousewheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):v.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?d("scroll",!0)?v.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):v.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(d("focus",!0)?(v.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),v.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):d("focusin")&&(v.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),v.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),o[l.topBlur]=!0,o[l.topFocus]=!0):m.hasOwnProperty(c)&&v.ReactEventListener.trapBubbledEvent(c,m[c],n),o[c]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===o&&(o=v.supportsEventPageXY()),!o&&!f){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),f=!0}}});t.exports=v},{107:107,126:126,128:128,16:16,162:162,18:18,59:59}],28:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i){var o=void 0===e[n];null!=t&&o&&(e[n]=r(t,!0))}var o=e(80),r=e(127),a=(e(23),e(136)),s=e(137);e(161),void 0!==n&&n.env;var l={instantiateChildren:function(e,t,n,o){if(null==e)return null;var r={};return s(e,i,r),r},updateChildren:function(e,t,n,i,s,l,u,c,d){if(t||e){var p,f;for(p in t)if(t.hasOwnProperty(p)){f=e&&e[p];var h=f&&f._currentElement,m=t[p];if(null!=f&&a(h,m))o.receiveComponent(f,m,s,c),t[p]=f;else{f&&(i[p]=o.getHostNode(f),o.unmountComponent(f,!1));var g=r(m,!0);t[p]=g;var v=o.mountComponent(g,s,l,u,c,d);n.push(v)}}for(p in e)!e.hasOwnProperty(p)||t&&t.hasOwnProperty(p)||(f=e[p],i[p]=o.getHostNode(f),o.unmountComponent(f,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];o.unmountComponent(i,t)}}};t.exports=l}).call(this,void 0)},{127:127,136:136,137:137,161:161,23:23,80:80}],29:[function(e,t,n){"use strict";function i(e){return(""+e).replace(_,"$&/")}function o(e,t){this.func=e,this.context=t,this.count=0}function r(e,t,n){var i=e.func,o=e.context;i.call(o,t,e.count++)}function a(e,t,n){if(null==e)return e;var i=o.getPooled(t,n);v(e,r,i),o.release(i)}function s(e,t,n,i){this.result=e,this.keyPrefix=t,this.func=n,this.context=i,this.count=0}function l(e,t,n){var o=e.result,r=e.keyPrefix,a=e.func,s=e.context,l=a.call(s,t,e.count++);Array.isArray(l)?u(l,o,n,g.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,r+(!l.key||t&&t.key===l.key?"":i(l.key)+"/")+n)),o.push(l))}function u(e,t,n,o,r){var a="";null!=n&&(a=i(n)+"/");var u=s.getPooled(t,a,o,r);v(e,l,u),s.release(u)}function c(e,t,n){if(null==e)return e;var i=[];return u(e,i,null,t,n),i}function d(e,t,n){return null}function p(e,t){return v(e,d,null)}function f(e){var t=[];return u(e,t,null,g.thatReturnsArgument),t}var h=e(25),m=e(56),g=e(146),v=e(137),b=h.twoArgumentPooler,y=h.fourArgumentPooler,_=/\/+/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(o,b),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,y);var w={forEach:a,map:c,mapIntoWithKeyPrefixInternal:u,count:p,toArray:f};t.exports=w},{137:137,146:146,25:25,56:56}],30:[function(e,t,n){"use strict";function i(e,t){var n=C.hasOwnProperty(t)?C[t]:null;x.hasOwnProperty(t)&&n!==_.OVERRIDE_BASE&&d("73",t),e&&n!==_.DEFINE_MANY&&n!==_.DEFINE_MANY_MERGED&&d("74",t)}function o(e,t){if(t){"function"==typeof t&&d("75"),h.isValidElement(t)&&d("76");var n=e.prototype,o=n.__reactAutoBindPairs;t.hasOwnProperty(y)&&k.mixins(e,t.mixins);for(var r in t)if(t.hasOwnProperty(r)&&r!==y){var a=t[r],u=n.hasOwnProperty(r);if(i(u,r),k.hasOwnProperty(r))k[r](e,a);else{var c=C.hasOwnProperty(r),p="function"==typeof a,f=p&&!c&&!u&&!1!==t.autobind;if(f)o.push(r,a),n[r]=a;else if(u){var m=C[r];(!c||m!==_.DEFINE_MANY_MERGED&&m!==_.DEFINE_MANY)&&d("77",m,r),m===_.DEFINE_MANY_MERGED?n[r]=s(n[r],a):m===_.DEFINE_MANY&&(n[r]=l(n[r],a))}else n[r]=a}}}}function r(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var o=n in k;o&&d("78",n);var r=n in e;r&&d("79",n),e[n]=i}}}function a(e,t){e&&t&&"object"==typeof e&&"object"==typeof t||d("80");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]&&d("81",n),e[n]=t[n]);return e}function s(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return a(o,n),a(o,i),o}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function u(e,t){return t.bind(e)}function c(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[i]=u(e,o)}}var d=e(132),p=e(162),f=e(31),h=e(56),m=(e(75),e(74),e(72)),g=e(147),v=(e(154),e(157)),b=e(158),y=(e(161),b({mixins:null})),_=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),w=[],C={mixins:_.DEFINE_MANY,statics:_.DEFINE_MANY,propTypes:_.DEFINE_MANY,contextTypes:_.DEFINE_MANY,childContextTypes:_.DEFINE_MANY,getDefaultProps:_.DEFINE_MANY_MERGED,getInitialState:_.DEFINE_MANY_MERGED,getChildContext:_.DEFINE_MANY_MERGED,render:_.DEFINE_ONCE,componentWillMount:_.DEFINE_MANY,componentDidMount:_.DEFINE_MANY,componentWillReceiveProps:_.DEFINE_MANY,shouldComponentUpdate:_.DEFINE_ONCE,componentWillUpdate:_.DEFINE_MANY,componentDidUpdate:_.DEFINE_MANY,componentWillUnmount:_.DEFINE_MANY,updateComponent:_.OVERRIDE_BASE},k={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)o(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=p({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=p({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=s(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=p({},e.propTypes,t)},statics:function(e,t){r(e,t)},autobind:function(){}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},E=function(){};p(E.prototype,f.prototype,x);var T={createClass:function(e){var t=function(e,n,i){this.__reactAutoBindPairs.length&&c(this),this.props=e,this.context=n,this.refs=g,this.updater=i||m,this.state=null;var o=this.getInitialState?this.getInitialState():null;("object"!=typeof o||Array.isArray(o))&&d("82",t.displayName||"ReactCompositeComponent"),this.state=o};t.prototype=new E,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],w.forEach(o.bind(null,t)),o(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render||d("83");for(var n in C)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){w.push(e)}}};t.exports=T},{132:132,147:147,154:154,157:157,158:158,161:161,162:162,31:31,56:56,72:72,74:74,75:75}],31:[function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||r}var o=e(132),r=e(72),a=(e(110),e(147));e(154),e(161),i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&o("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")},t.exports=i},{110:110,132:132,147:147,154:154,161:161,72:72}],32:[function(e,t,n){"use strict";var i=e(7),o=e(45),r={processChildrenUpdates:o.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup};t.exports=r},{45:45,7:7}],33:[function(e,t,n){"use strict";var i=e(132),o=(e(154),!1),r={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){o&&i("104"),r.replaceNodeWithMarkup=e.replaceNodeWithMarkup,r.processChildrenUpdates=e.processChildrenUpdates,o=!0}}};t.exports=r},{132:132,154:154}],34:[function(e,t,n){"use strict";function i(e){}function o(e){return!(!e.prototype||!e.prototype.isReactComponent)}function r(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var a=e(132),s=e(162),l=e(33),u=e(35),c=e(56),d=e(58),p=e(65),f=(e(66),e(71)),h=(e(75),e(80)),m=e(111),g=e(147),v=(e(154),e(160)),b=e(136),y=(e(161),{ImpureClass:0,PureClass:1,StatelessFunctional:2});i.prototype.render=function(){var e=p.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return t};var _=1,w={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,s){this._context=s,this._mountOrder=_++,this._hostParent=t,this._hostContainerInfo=n;var l,u=this._currentElement.props,d=this._processContext(s),f=this._currentElement.type,h=e.getUpdateQueue(),m=o(f),v=this._constructComponent(m,u,d,h);m||null!=v&&null!=v.render?r(f)?this._compositeType=y.PureClass:this._compositeType=y.ImpureClass:(l=v,null===v||!1===v||c.isValidElement(v)||a("105",f.displayName||f.name||"Component"),v=new i(f),this._compositeType=y.StatelessFunctional),v.props=u,v.context=d,v.refs=g,v.updater=h,this._instance=v,p.set(v,this);var b=v.state;void 0===b&&(v.state=b=null),("object"!=typeof b||Array.isArray(b))&&a("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var w;return w=v.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,s):this.performInitialMount(l,t,n,e,s),v.componentDidMount&&e.getReactMountReady().enqueue(v.componentDidMount,v),w},_constructComponent:function(e,t,n,i){return this._constructComponentWithoutOwner(e,t,n,i)},_constructComponentWithoutOwner:function(e,t,n,i){var o=this._currentElement.type;return e?new o(t,n,i):o(t,n,i)},performInitialMountWithErrorHandling:function(e,t,n,i,o){var r,a=i.checkpoint();try{r=this.performInitialMount(e,t,n,i,o)}catch(s){i.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=i.checkpoint(),this._renderedComponent.unmountComponent(!0),i.rollback(a),r=this.performInitialMount(e,t,n,i,o)}return r},performInitialMount:function(e,t,n,i,o){var r=this._instance;r.componentWillMount&&(r.componentWillMount(),this._pendingStateQueue&&(r.state=this._processPendingState(r.props,r.context))),void 0===e&&(e=this._renderValidatedComponent());var a=f.getType(e);this._renderedNodeType=a;var s=this._instantiateReactComponent(e,a!==f.EMPTY);return this._renderedComponent=s,h.mountComponent(s,i,t,n,this._processChildContext(o),0)},getHostNode:function(){return h.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";d.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,p.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return g;var i={};for(var o in n)i[o]=e[o];return i},_processContext:function(e){return this._maskContext(e)},_processChildContext:function(e){var t,n=this._currentElement.type,i=this._instance;if(i.getChildContext&&(t=i.getChildContext()),t){"object"!=typeof n.childContextTypes&&a("107",this.getName()||"ReactCompositeComponent");for(var o in t)o in n.childContextTypes||a("108",this.getName()||"ReactCompositeComponent",o);return s({},e,t)}return e},_checkContextTypes:function(e,t,n){m(e,t,n,this.getName(),null,this._debugID)},receiveComponent:function(e,t,n){var i=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(t,i,e,o,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,i,o){var r=this._instance;null==r&&a("136",this.getName()||"ReactCompositeComponent");var s,l=!1;this._context===o?s=r.context:(s=this._processContext(o),l=!0);var u=t.props,c=n.props;t!==n&&(l=!0),l&&r.componentWillReceiveProps&&r.componentWillReceiveProps(c,s);var d=this._processPendingState(c,s),p=!0;this._pendingForceUpdate||(r.shouldComponentUpdate?p=r.shouldComponentUpdate(c,d,s):this._compositeType===y.PureClass&&(p=!v(u,c)||!v(r.state,d))),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,d,s,e,o)):(this._currentElement=n,this._context=o,r.props=c,r.state=d,r.context=s)},_processPendingState:function(e,t){var n=this._instance,i=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(o&&1===i.length)return i[0];for(var r=s({},o?i[0]:n.state),a=o?1:0;a<i.length;a++){var l=i[a];s(r,"function"==typeof l?l.call(n,r,e,t):l)}return r},_performComponentUpdate:function(e,t,n,i,o,r){var a,s,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(a=u.props,s=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(t,n,i),this._currentElement=e,this._context=r,u.props=t,u.state=n,u.context=i,this._updateRenderedComponent(o,r),c&&o.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,a,s,l),u)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,i=n._currentElement,o=this._renderValidatedComponent();if(b(i,o))h.receiveComponent(n,o,e,this._processChildContext(t));else{var r=h.getHostNode(n);h.unmountComponent(n,!1);var a=f.getType(o);this._renderedNodeType=a;var s=this._instantiateReactComponent(o,a!==f.EMPTY);this._renderedComponent=s;var l=h.mountComponent(s,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),0);this._replaceNodeWithMarkup(r,l,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==y.StatelessFunctional){u.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{u.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||c.isValidElement(e)||a("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&a("110");var i=t.getPublicInstance();(n.refs===g?n.refs={}:n.refs)[e]=i},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===y.StatelessFunctional?null:e},_instantiateReactComponent:null},C={Mixin:w};t.exports=C},{111:111,132:132,136:136,147:147,154:154,160:160,161:161,162:162,33:33,35:35,56:56,58:58,65:65,66:66,71:71,75:75,80:80}],35:[function(e,t,n){"use strict";var i={current:null};t.exports=i},{}],36:[function(e,t,n){"use strict";var i=e(40),o=e(55),r=e(68),a=e(80),s=e(88),l=e(89),u=e(115),c=e(122),d=e(133);e(161),o.inject();var p={findDOMNode:u,render:r.render,unmountComponentAtNode:r.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:i.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?i.getNodeFromInstance(e):null}},Mount:r,Reconciler:a}),t.exports=p},{115:115,122:122,133:133,161:161,40:40,55:55,68:68,80:80,88:88,89:89}],37:[function(e,t,n){"use strict";var i=e(14),o={getHostProps:i.getHostProps};t.exports=o},{14:14}],38:[function(e,t,n){"use strict";function i(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function o(e,t){t&&(X[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&m("60"),"object"==typeof t.dangerouslySetInnerHTML&&V in t.dangerouslySetInnerHTML||m("61")),null!=t.style&&"object"!=typeof t.style&&m("62",i(e)))}function r(e,t,n,i){if(!(i instanceof L)){var o=e._hostContainerInfo,r=o._node&&o._node.nodeType===q,s=r?o._node:o._ownerDocument;H(t,s),i.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;x.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;I.postMountWrapper(e)}function l(){var e=this;N.postMountWrapper(e)}function u(){var e=this;M.postMountWrapper(e)}function c(){var e=this;e._rootNodeID||m("63");var t=U(e);switch(t||m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[T.trapBubbledEvent(k.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in K)K.hasOwnProperty(n)&&e._wrapperState.listeners.push(T.trapBubbledEvent(k.topLevelTypes[n],K[n],t));break;case"source":e._wrapperState.listeners=[T.trapBubbledEvent(k.topLevelTypes.topError,"error",t)];break;case"img":e._wrapperState.listeners=[T.trapBubbledEvent(k.topLevelTypes.topError,"error",t),T.trapBubbledEvent(k.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[T.trapBubbledEvent(k.topLevelTypes.topReset,"reset",t),T.trapBubbledEvent(k.topLevelTypes.topSubmit,"submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[T.trapBubbledEvent(k.topLevelTypes.topInvalid,"invalid",t)]}}function d(){A.postUpdateWrapper(this)}function p(e){ee.call(Z,e)||(J.test(e)||m("65",e),Z[e]=!0)}function f(e,t){return e.indexOf("-")>=0||null!=t.is}function h(e){var t=e.type;p(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=e(132),g=e(162),v=e(1),b=e(4),y=e(8),_=e(9),w=e(10),C=e(11),k=e(16),x=e(17),E=e(18),T=e(27),S=e(37),P=e(39),O=e(40),I=e(46),M=e(47),A=e(48),N=e(52),j=(e(66),e(69)),L=e(84),D=(e(146),e(114)),R=(e(154),e(128),e(158)),F=(e(160),e(138),e(161),P),B=x.deleteListener,U=O.getNodeFromInstance,H=T.listenTo,$=E.registrationNameModules,z={string:!0,number:!0},W=R({style:null}),V=R({__html:null}),G={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},q=11,K={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Q={listing:!0,pre:!0,textarea:!0},X=g({menuitem:!0},Y),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Z={},ee={}.hasOwnProperty,te=1;h.displayName="ReactDOMComponent",h.Mixin={mountComponent:function(e,t,n,i){this._rootNodeID=te++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var r=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"button":r=S.getHostProps(this,r,t);break;case"input":I.mountWrapper(this,r,t),r=I.getHostProps(this,r),e.getReactMountReady().enqueue(c,this);break;case"option":M.mountWrapper(this,r,t),r=M.getHostProps(this,r);break;case"select":A.mountWrapper(this,r,t),r=A.getHostProps(this,r),e.getReactMountReady().enqueue(c,this);break;case"textarea":N.mountWrapper(this,r,t),r=N.getHostProps(this,r),e.getReactMountReady().enqueue(c,this)}o(this,r);var a,d;null!=t?(a=t._namespaceURI,d=t._tag):n._tag&&(a=n._namespaceURI,d=n._tag),(null==a||a===_.svg&&"foreignobject"===d)&&(a=_.html),a===_.html&&("svg"===this._tag?a=_.svg:"math"===this._tag&&(a=_.mathml)),this._namespaceURI=a;var p;if(e.useCreateElement){var f,h=n._ownerDocument;if(a===_.html)if("script"===this._tag){var m=h.createElement("div"),g=this._currentElement.type;m.innerHTML="<"+g+"></"+g+">",f=m.removeChild(m.firstChild)}else f=r.is?h.createElement(this._currentElement.type,r.is):h.createElement(this._currentElement.type);else f=h.createElementNS(a,this._currentElement.type);O.precacheNode(this,f),this._flags|=F.hasCachedChildNodes,this._hostParent||C.setAttributeForRoot(f),this._updateDOMProperties(null,r,e);var b=y(f);this._createInitialChildren(e,r,i,b),p=b}else{var w=this._createOpenTagMarkupAndPutListeners(e,r),k=this._createContentMarkup(e,r,i);p=!k&&Y[this._tag]?w+"/>":w+">"+k+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),r.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(l,this),r.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"select":case"button":r.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(u,this)}return p},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(null!=o)if($.hasOwnProperty(i))o&&r(this,i,o,e);else{i===W&&(o&&(o=this._previousStyleCopy=g({},t.style)),o=b.createMarkupForStyles(o,this));var a=null;null!=this._tag&&f(this._tag,t)?G.hasOwnProperty(i)||(a=C.createMarkupForCustomAttribute(i,o)):a=C.createMarkupForProperty(i,o),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+C.createMarkupForRoot()),n+=" "+C.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var i="",o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(i=o.__html);else{var r=z[typeof t.children]?t.children:null,a=null!=r?null:t.children;if(null!=r)i=D(r);else if(null!=a){var s=this.mountChildren(a,e,n);i=s.join("")}}return Q[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(e,t,n,i){var o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&y.queueHTML(i,o.__html);else{var r=z[typeof t.children]?t.children:null,a=null!=r?null:t.children;if(null!=r)y.queueText(i,r);else if(null!=a)for(var s=this.mountChildren(a,e,n),l=0;l<s.length;l++)y.queueChild(i,s[l])}},receiveComponent:function(e,t,n){var i=this._currentElement;this._currentElement=e,this.updateComponent(t,i,e,n)},updateComponent:function(e,t,n,i){var r=t.props,a=this._currentElement.props;switch(this._tag){case"button":r=S.getHostProps(this,r),a=S.getHostProps(this,a);break;case"input":r=I.getHostProps(this,r),a=I.getHostProps(this,a);break;case"option":r=M.getHostProps(this,r),a=M.getHostProps(this,a);break;case"select":r=A.getHostProps(this,r),a=A.getHostProps(this,a);break;case"textarea":r=N.getHostProps(this,r),a=N.getHostProps(this,a)}switch(o(this,a),this._updateDOMProperties(r,a,e),this._updateDOMChildren(r,a,e,i),this._tag){case"input":I.updateWrapper(this);break;case"textarea":N.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(d,this)}},_updateDOMProperties:function(e,t,n){var i,o,a;for(i in e)if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&null!=e[i])if(i===W){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(a=a||{},a[o]="");this._previousStyleCopy=null}else $.hasOwnProperty(i)?e[i]&&B(this,i):f(this._tag,e)?G.hasOwnProperty(i)||C.deleteValueForAttribute(U(this),i):(w.properties[i]||w.isCustomAttribute(i))&&C.deleteValueForProperty(U(this),i);for(i in t){var l=t[i],u=i===W?this._previousStyleCopy:null!=e?e[i]:void 0;if(t.hasOwnProperty(i)&&l!==u&&(null!=l||null!=u))if(i===W)if(l?l=this._previousStyleCopy=g({},l):this._previousStyleCopy=null,u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(a=a||{},a[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(a=a||{},a[o]=l[o])}else a=l;else if($.hasOwnProperty(i))l?r(this,i,l,n):u&&B(this,i);else if(f(this._tag,t))G.hasOwnProperty(i)||C.setValueForAttribute(U(this),i,l);else if(w.properties[i]||w.isCustomAttribute(i)){var c=U(this);null!=l?C.setValueForProperty(c,i,l):C.deleteValueForProperty(c,i)}}a&&b.setValueForStyles(U(this),a,this)},_updateDOMChildren:function(e,t,n,i){var o=z[typeof e.children]?e.children:null,r=z[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=o?null:e.children,u=null!=r?null:t.children,c=null!=o||null!=a,d=null!=r||null!=s;null!=l&&null==u?this.updateChildren(null,n,i):c&&!d&&this.updateTextContent(""),null!=r?o!==r&&this.updateTextContent(""+r):null!=s?a!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,i)},getHostNode:function(){return U(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),O.uncacheNode(this),x.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return U(this)}},g(h.prototype,h.Mixin,j.Mixin),t.exports=h},{1:1,10:10,11:11,114:114,128:128,132:132,138:138,146:146,154:154,158:158,16:16,160:160,161:161,162:162,17:17,18:18,27:27,37:37,39:39,4:4,40:40,46:46,47:47,48:48,52:52,66:66,69:69,8:8,84:84,9:9}],39:[function(e,t,n){"use strict";var i={hasCachedChildNodes:1};t.exports=i},{}],40:[function(e,t,n){"use strict";function i(e){for(var t;t=e._renderedComponent;)e=t;return e}function o(e,t){var n=i(e);n._hostNode=t,t[m]=n}function r(e){var t=e._hostNode;t&&(delete t[m],e._hostNode=null)}function a(e,t){if(!(e._flags&h.hasCachedChildNodes)){var n=e._renderedChildren,r=t.firstChild;e:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],l=i(s)._domID;if(0!==l){for(;null!==r;r=r.nextSibling)if(1===r.nodeType&&r.getAttribute(f)===String(l)||8===r.nodeType&&r.nodeValue===" react-text: "+l+" "||8===r.nodeType&&r.nodeValue===" react-empty: "+l+" "){o(s,r);continue e}c("32",l)}}e._flags|=h.hasCachedChildNodes}}function s(e){
if(e[m])return e[m];for(var t=[];!e[m];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,i;e&&(i=e[m]);e=t.pop())n=i,t.length&&a(i,e);return n}function l(e){var t=s(e);return null!=t&&t._hostNode===e?t:null}function u(e){if(void 0===e._hostNode&&c("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||c("34"),e=e._hostParent;for(;t.length;e=t.pop())a(e,e._hostNode);return e._hostNode}var c=e(132),d=e(10),p=e(39),f=(e(154),d.ID_ATTRIBUTE_NAME),h=p,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:s,getInstanceFromNode:l,getNodeFromInstance:u,precacheChildNodes:a,precacheNode:o,uncacheNode:r};t.exports=g},{10:10,132:132,154:154,39:39}],41:[function(e,t,n){"use strict";function i(e,t){return{_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===o?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null}}var o=(e(138),9);t.exports=i},{138:138}],42:[function(e,t,n){"use strict";var i=e(162),o=e(8),r=e(40),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};i(a.prototype,{mountComponent:function(e,t,n,i){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return r.precacheNode(this,u),o(u)}return e.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return r.getNodeFromInstance(this)},unmountComponent:function(){r.uncacheNode(this)}}),t.exports=a},{162:162,40:40,8:8}],43:[function(e,t,n){"use strict";var i=e(56),o=i.createFactory,r={a:o("a"),abbr:o("abbr"),address:o("address"),area:o("area"),article:o("article"),aside:o("aside"),audio:o("audio"),b:o("b"),base:o("base"),bdi:o("bdi"),bdo:o("bdo"),big:o("big"),blockquote:o("blockquote"),body:o("body"),br:o("br"),button:o("button"),canvas:o("canvas"),caption:o("caption"),cite:o("cite"),code:o("code"),col:o("col"),colgroup:o("colgroup"),data:o("data"),datalist:o("datalist"),dd:o("dd"),del:o("del"),details:o("details"),dfn:o("dfn"),dialog:o("dialog"),div:o("div"),dl:o("dl"),dt:o("dt"),em:o("em"),embed:o("embed"),fieldset:o("fieldset"),figcaption:o("figcaption"),figure:o("figure"),footer:o("footer"),form:o("form"),h1:o("h1"),h2:o("h2"),h3:o("h3"),h4:o("h4"),h5:o("h5"),h6:o("h6"),head:o("head"),header:o("header"),hgroup:o("hgroup"),hr:o("hr"),html:o("html"),i:o("i"),iframe:o("iframe"),img:o("img"),input:o("input"),ins:o("ins"),kbd:o("kbd"),keygen:o("keygen"),label:o("label"),legend:o("legend"),li:o("li"),link:o("link"),main:o("main"),map:o("map"),mark:o("mark"),menu:o("menu"),menuitem:o("menuitem"),meta:o("meta"),meter:o("meter"),nav:o("nav"),noscript:o("noscript"),object:o("object"),ol:o("ol"),optgroup:o("optgroup"),option:o("option"),output:o("output"),p:o("p"),param:o("param"),picture:o("picture"),pre:o("pre"),progress:o("progress"),q:o("q"),rp:o("rp"),rt:o("rt"),ruby:o("ruby"),s:o("s"),samp:o("samp"),script:o("script"),section:o("section"),select:o("select"),small:o("small"),source:o("source"),span:o("span"),strong:o("strong"),style:o("style"),sub:o("sub"),summary:o("summary"),sup:o("sup"),table:o("table"),tbody:o("tbody"),td:o("td"),textarea:o("textarea"),tfoot:o("tfoot"),th:o("th"),thead:o("thead"),time:o("time"),title:o("title"),tr:o("tr"),track:o("track"),u:o("u"),ul:o("ul"),var:o("var"),video:o("video"),wbr:o("wbr"),circle:o("circle"),clipPath:o("clipPath"),defs:o("defs"),ellipse:o("ellipse"),g:o("g"),image:o("image"),line:o("line"),linearGradient:o("linearGradient"),mask:o("mask"),path:o("path"),pattern:o("pattern"),polygon:o("polygon"),polyline:o("polyline"),radialGradient:o("radialGradient"),rect:o("rect"),stop:o("stop"),svg:o("svg"),text:o("text"),tspan:o("tspan")};t.exports=r},{56:56}],44:[function(e,t,n){"use strict";var i={useCreateElement:!0};t.exports=i},{}],45:[function(e,t,n){"use strict";var i=e(7),o=e(40),r={dangerouslyProcessChildrenUpdates:function(e,t){var n=o.getNodeFromInstance(e);i.processUpdates(n,t)}};t.exports=r},{40:40,7:7}],46:[function(e,t,n){"use strict";function i(){this._rootNodeID&&p.updateWrapper(this)}function o(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);d.asap(i,this);var o=t.name;if("radio"===t.type&&null!=o){for(var a=c.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),p=0;p<l.length;p++){var f=l[p];if(f!==a&&f.form===a.form){var h=c.getInstanceFromNode(f);h||r("90"),d.asap(i,h)}}}return n}var r=e(132),a=e(162),s=e(14),l=e(11),u=e(24),c=e(40),d=e(88),p=(e(154),e(161),{getHostProps:function(e,t){var n=u.getValue(t),i=u.getChecked(t);return a({type:void 0,step:void 0,min:void 0,max:void 0},s.getHostProps(e,t),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=i?i:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var i=c.getNodeFromInstance(e),o=u.getValue(t);if(null!=o){var r=""+o;r!==i.value&&(i.value=r)}else null==t.value&&null!=t.defaultValue&&(i.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(i.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var i=n.name;""!==i&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==i&&(n.name=i)}});t.exports=p},{11:11,132:132,14:14,154:154,161:161,162:162,24:24,40:40,88:88}],47:[function(e,t,n){"use strict";function i(e){var t="";return r.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:l||(l=!0))}),t}var o=e(162),r=e(29),a=e(40),s=e(48),l=(e(161),!1),u={mountWrapper:function(e,t,n){var o=null;if(null!=n){var r=n;"optgroup"===r._tag&&(r=r._hostParent),null!=r&&"select"===r._tag&&(o=s.getSelectValueContext(r))}var a=null;if(null!=o){var l;if(l=null!=t.value?t.value+"":i(t.children),a=!1,Array.isArray(o)){for(var u=0;u<o.length;u++)if(""+o[u]===l){a=!0;break}}else a=""+o===l}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){a.getNodeFromInstance(e).setAttribute("value",t.value)}},getHostProps:function(e,t){var n=o({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var r=i(t.children);return r&&(n.children=r),n}};t.exports=u},{161:161,162:162,29:29,40:40,48:48}],48:[function(e,t,n){"use strict";function i(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=l.getValue(e);null!=t&&o(this,Boolean(e.multiple),t)}}function o(e,t,n){var i,o,r=u.getNodeFromInstance(e).options;if(t){for(i={},o=0;o<n.length;o++)i[""+n[o]]=!0;for(o=0;o<r.length;o++){var a=i.hasOwnProperty(r[o].value);r[o].selected!==a&&(r[o].selected=a)}}else{for(i=""+n,o=0;o<r.length;o++)if(r[o].value===i)return void(r[o].selected=!0);r.length&&(r[0].selected=!0)}}function r(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(i,this),n}var a=e(162),s=e(14),l=e(24),u=e(40),c=e(88),d=(e(161),!1),p={getHostProps:function(e,t){return a({},s.getHostProps(e,t),{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=l.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:r.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||d||(d=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var i=l.getValue(t);null!=i?(e._wrapperState.pendingUpdate=!1,o(e,Boolean(t.multiple),i)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?o(e,Boolean(t.multiple),t.defaultValue):o(e,Boolean(t.multiple),t.multiple?[]:""))}};t.exports=p},{14:14,161:161,162:162,24:24,40:40,88:88}],49:[function(e,t,n){"use strict";function i(e,t,n,i){return e===n&&t===i}function o(e){var t=document.selection,n=t.createRange(),i=n.text.length,o=n.duplicate();o.moveToElementText(e),o.setEndPoint("EndToStart",n);var r=o.text.length;return{start:r,end:r+i}}function r(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,r=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var l=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),u=l?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(e),c.setEnd(s.startContainer,s.startOffset);var d=i(c.startContainer,c.startOffset,c.endContainer,c.endOffset),p=d?0:c.toString().length,f=p+u,h=document.createRange();h.setStart(n,o),h.setEnd(r,a);var m=h.collapsed;return{start:m?f:p,end:m?p:f}}function a(e,t){var n,i,o=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),o.moveToElementText(e),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",i-n),o.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),i=e[c()].length,o=Math.min(t.start,i),r=void 0===t.end?o:Math.min(t.end,i);if(!n.extend&&o>r){var a=r;r=o,o=a}var s=u(e,o),l=u(e,r);if(s&&l){var d=document.createRange();d.setStart(s.node,s.offset),n.removeAllRanges(),o>r?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d))}}}var l=e(140),u=e(124),c=e(125),d=l.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:d?o:r,setOffsets:d?a:s};t.exports=p},{124:124,125:125,140:140}],50:[function(e,t,n){"use strict";var i=e(55),o=e(83),r=e(89);i.inject();var a={renderToString:o.renderToString,renderToStaticMarkup:o.renderToStaticMarkup,version:r};t.exports=a},{55:55,83:83,89:89}],51:[function(e,t,n){"use strict";var i=e(132),o=e(162),r=e(7),a=e(8),s=e(40),l=e(114),u=(e(154),e(138),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});o(u.prototype,{mountComponent:function(e,t,n,i){var o=n._idCounter++,r=" react-text: "+o+" ",u=" /react-text ";if(this._domID=o,this._hostParent=t,e.useCreateElement){var c=n._ownerDocument,d=c.createComment(r),p=c.createComment(u),f=a(c.createDocumentFragment());return a.queueChild(f,a(d)),this._stringText&&a.queueChild(f,a(c.createTextNode(this._stringText))),a.queueChild(f,a(p)),s.precacheNode(this,d),this._closingComment=p,f}var h=l(this._stringText);return e.renderToStaticMarkup?h:"\x3c!--"+r+"--\x3e"+h+"\x3c!--"+u+"--\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var i=this.getHostNode();r.replaceDelimitedText(i[0],i[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n&&i("67",this._domID),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=u},{114:114,132:132,138:138,154:154,162:162,40:40,7:7,8:8}],52:[function(e,t,n){"use strict";function i(){this._rootNodeID&&d.updateWrapper(this)}function o(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return c.asap(i,this),n}var r=e(132),a=e(162),s=e(14),l=e(24),u=e(40),c=e(88),d=(e(154),e(161),{getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),a({},s.getHostProps(e,t),{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=l.getValue(t),i=n;if(null==n){var a=t.defaultValue,s=t.children;null!=s&&(null!=a&&r("92"),Array.isArray(s)&&(s.length<=1||r("93"),s=s[0]),a=""+s),null==a&&(a=""),i=a}e._wrapperState={initialValue:""+i,listeners:null,onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e),i=l.getValue(t);if(null!=i){var o=""+i;o!==n.value&&(n.value=o),null==t.defaultValue&&(n.defaultValue=o)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=u.getNodeFromInstance(e);t.value=t.textContent}});t.exports=d},{132:132,14:14,154:154,161:161,162:162,24:24,40:40,88:88}],53:[function(e,t,n){"use strict";function i(e,t){"_hostNode"in e||l("33"),"_hostNode"in t||l("33");for(var n=0,i=e;i;i=i._hostParent)n++;for(var o=0,r=t;r;r=r._hostParent)o++;for(;n-o>0;)e=e._hostParent,n--;for(;o-n>0;)t=t._hostParent,o--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function o(e,t){"_hostNode"in e||l("35"),"_hostNode"in t||l("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function r(e){return"_hostNode"in e||l("36"),e._hostParent}function a(e,t,n){for(var i=[];e;)i.push(e),e=e._hostParent;var o;for(o=i.length;o-- >0;)t(i[o],!1,n);for(o=0;o<i.length;o++)t(i[o],!0,n)}function s(e,t,n,o,r){for(var a=e&&t?i(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var l=[];t&&t!==a;)l.push(t),t=t._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],!0,o);for(u=l.length;u-- >0;)n(l[u],!1,r)}var l=e(132);e(154),t.exports={isAncestor:o,getLowestCommonAncestor:i,getParentInstance:r,traverseTwoPhase:a,traverseEnterLeave:s}},{132:132,154:154}],54:[function(e,t,n){"use strict";function i(){this.reinitializeTransaction()}var o=e(162),r=e(88),a=e(106),s=e(146),l={initialize:s,close:function(){p.isBatchingUpdates=!1}},u={initialize:s,close:r.flushBatchedUpdates.bind(r)},c=[u,l];o(i.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var d=new i,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,i,o,r){var a=p.isBatchingUpdates;p.isBatchingUpdates=!0,a?e(t,n,i,o,r):d.perform(e,null,t,n,i,o,r)}};t.exports=p},{106:106,146:146,162:162,88:88}],55:[function(e,t,n){"use strict";function i(){C||(C=!0,v.EventEmitter.injectReactEventListener(g),v.EventPluginHub.injectEventPluginOrder(a),v.EventPluginUtils.injectComponentTree(d),v.EventPluginUtils.injectTreeTraversal(f),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:s,ChangeEventPlugin:r,SelectEventPlugin:_,BeforeInputEventPlugin:o}),v.HostComponent.injectGenericComponentClass(c),v.HostComponent.injectTextComponentClass(h),v.DOMProperty.injectDOMPropertyConfig(l),v.DOMProperty.injectDOMPropertyConfig(y),v.EmptyComponent.injectEmptyComponentFactory(function(e){return new p(e)}),v.Updates.injectReconcileTransaction(b),v.Updates.injectBatchingStrategy(m),v.Component.injectEnvironment(u))}var o=e(2),r=e(6),a=e(13),s=e(15),l=e(22),u=e(32),c=e(38),d=e(40),p=e(42),f=e(53),h=e(51),m=e(54),g=e(60),v=e(63),b=e(79),y=e(90),_=e(91),w=e(92),C=!1;t.exports={inject:i}},{13:13,15:15,2:2,22:22,32:32,38:38,40:40,42:42,51:51,53:53,54:54,6:6,60:60,63:63,79:79,90:90,91:91,92:92}],56:[function(e,t,n){"use strict";function i(e){return void 0!==e.ref}function o(e){return void 0!==e.key}var r=e(162),a=e(35),s=(e(161),e(110),Object.prototype.hasOwnProperty),l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,u={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,i,o,r,a){return{$$typeof:l,type:e,key:t,ref:n,props:a,_owner:r}};c.createElement=function(e,t,n){var r,l={},d=null,p=null;if(null!=t){i(t)&&(p=t.ref),o(t)&&(d=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source;for(r in t)s.call(t,r)&&!u.hasOwnProperty(r)&&(l[r]=t[r])}var f=arguments.length-2;if(1===f)l.children=n;else if(f>1){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];l.children=h}if(e&&e.defaultProps){var g=e.defaultProps;for(r in g)void 0===l[r]&&(l[r]=g[r])}return c(e,d,p,0,0,a.current,l)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){return c(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},c.cloneElement=function(e,t,n){var l,d=r({},e.props),p=e.key,f=e.ref,h=(e._self,e._source,e._owner);if(null!=t){i(t)&&(f=t.ref,h=a.current),o(t)&&(p=""+t.key);var m;e.type&&e.type.defaultProps&&(m=e.type.defaultProps);for(l in t)s.call(t,l)&&!u.hasOwnProperty(l)&&(void 0===t[l]&&void 0!==m?d[l]=m[l]:d[l]=t[l])}var g=arguments.length-2;if(1===g)d.children=n;else if(g>1){for(var v=Array(g),b=0;b<g;b++)v[b]=arguments[b+2];d.children=v}return c(e.type,p,f,0,0,h,d)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===l},c.REACT_ELEMENT_TYPE=l,t.exports=c},{110:110,161:161,162:162,35:35}],57:[function(e,t,n){"use strict";var i,o={injectEmptyComponentFactory:function(e){i=e}},r={create:function(e){return i(e)}};r.injection=o,t.exports=r},{}],58:[function(e,t,n){"use strict";function i(e,t,n,i){try{return t(n,i)}catch(e){return void(null===o&&(o=e))}}var o=null,r={invokeGuardedCallback:i,invokeGuardedCallbackWithCatch:i,rethrowCaughtError:function(){if(o){var e=o;throw o=null,e}}};t.exports=r},{}],59:[function(e,t,n){"use strict";function i(e){o.enqueueEvents(e),o.processEventQueue(!1)}var o=e(17),r={handleTopLevel:function(e,t,n,r){i(o.extractEvents(e,t,n,r))}};t.exports=r},{17:17}],60:[function(e,t,n){"use strict";function i(e){for(;e._hostParent;)e=e._hostParent;var t=d.getNodeFromInstance(e),n=t.parentNode;return d.getClosestInstanceFromNode(n)}function o(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function r(e){var t=f(e.nativeEvent),n=d.getClosestInstanceFromNode(t),o=n;do{e.ancestors.push(o),o=o&&i(o)}while(o);for(var r=0;r<e.ancestors.length;r++)n=e.ancestors[r],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function a(e){e(h(window))}var s=e(162),l=e(139),u=e(140),c=e(25),d=e(40),p=e(88),f=e(121),h=e(151);s(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(o,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var i=n;return i?l.listen(i,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var i=n;return i?l.capture(i,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=o.getPooled(e,t);try{p.batchedUpdates(r,n)}finally{o.release(n)}}}};t.exports=m},{121:121,139:139,140:140,151:151,162:162,25:25,40:40,88:88}],61:[function(e,t,n){"use strict";var i={logTopLevelRenders:!1};t.exports=i},{}],62:[function(e,t,n){"use strict";function i(e){return l||a("111",e.type),new l(e)}function o(e){return new c(e)}function r(e){return e instanceof c}var a=e(132),s=e(162),l=(e(154),null),u={},c=null,d={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){c=e},injectComponentClasses:function(e){s(u,e)}},p={createInternalComponent:i,createInstanceForText:o,isTextComponent:r,injection:d};t.exports=p},{132:132,154:154,162:162}],63:[function(e,t,n){"use strict";var i=e(10),o=e(17),r=e(19),a=e(33),s=e(30),l=e(57),u=e(27),c=e(62),d=e(88),p={Component:a.injection,Class:s.injection,DOMProperty:i.injection,EmptyComponent:l.injection,EventPluginHub:o.injection,EventPluginUtils:r.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:d.injection};t.exports=p},{10:10,17:17,19:19,27:27,30:30,33:33,57:57,62:62,88:88}],64:[function(e,t,n){"use strict";function i(e){return r(document.documentElement,e)}var o=e(49),r=e(143),a=e(148),s=e(149),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,o=e.selectionRange;t!==n&&i(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,o),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=o.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if(void 0===i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",i-n),r.select()}else o.setOffsets(e,t)}};t.exports=l},{143:143,148:148,149:149,49:49}],65:[function(e,t,n){"use strict";var i={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=i},{}],66:[function(e,t,n){"use strict";t.exports={debugTool:null}},{}],67:[function(e,t,n){"use strict";var i=e(109),o=/\/?>/,r=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return r.test(e)?e:e.replace(o," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),i(e)===n}};t.exports=a},{109:109}],68:[function(e,t,n){"use strict";function i(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++)if(e.charAt(i)!==t.charAt(i))return i;return e.length===t.length?-1:n}function o(e){return e?e.nodeType===j?e.documentElement:e.firstChild:null}function r(e){return e.getAttribute&&e.getAttribute(M)||""}function a(e,t,n,i,o){var r;if(w.logTopLevelRenders){var a=e._currentElement.props,s=a.type;r="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(r)}var l=x.mountComponent(e,n,null,b(e,t),o,0);r&&console.timeEnd(r),e._renderedComponent._topLevelWrapper=e,B._mountImageIntoNode(l,t,e,i,n)}function s(e,t,n,i){var o=T.ReactReconcileTransaction.getPooled(!n&&y.useCreateElement);o.perform(a,null,e,t,o,n,i),T.ReactReconcileTransaction.release(o)}function l(e,t,n){for(x.unmountComponent(e,n),t.nodeType===j&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=o(e);if(t){var n=v.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==N&&e.nodeType!==j&&e.nodeType!==L)}function d(e){var t=o(e),n=t&&v.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function p(e){var t=d(e);return t?t._hostContainerInfo._topLevelWrapper:null}var f=e(132),h=e(8),m=e(10),g=e(27),v=(e(35),e(40)),b=e(41),y=e(44),_=e(56),w=e(61),C=e(65),k=(e(66),e(67)),x=e(80),E=e(87),T=e(88),S=e(147),P=e(127),O=(e(154),e(134)),I=e(136),M=(e(161),m.ID_ATTRIBUTE_NAME),A=m.ROOT_ATTRIBUTE_NAME,N=1,j=9,L=11,D={},R=1,F=function(){this.rootID=R++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props};var B={TopLevelWrapper:F,_instancesByReactRootID:D,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,i,o){return B.scrollMonitor(i,function(){E.enqueueElementInternal(e,t,n),o&&E.enqueueCallbackInternal(e,o)}),e},_renderNewRootComponent:function(e,t,n,i){c(t)||f("37"),g.ensureScrollValueMonitoring();var o=P(e,!1);T.batchedUpdates(s,o,t,n,i);var r=o._instance.rootID;return D[r]=o,o},renderSubtreeIntoContainer:function(e,t,n,i){return null!=e&&C.has(e)||f("38"),B._renderSubtreeIntoContainer(e,t,n,i)},_renderSubtreeIntoContainer:function(e,t,n,i){E.validateCallback(i,"ReactDOM.render"),_.isValidElement(t)||f("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=_(F,null,null,null,null,null,t);if(e){var l=C.get(e);a=l._processChildContext(l._context)}else a=S;var c=p(n);if(c){var d=c._currentElement,h=d.props;if(I(h,t)){var m=c._renderedComponent.getPublicInstance(),g=i&&function(){i.call(m)};return B._updateRootComponent(c,s,a,n,g),m}B.unmountComponentAtNode(n)}var v=o(n),b=v&&!!r(v),y=u(n),w=b&&!c&&!y,k=B._renderNewRootComponent(s,n,w,a)._renderedComponent.getPublicInstance();return i&&i.call(k),k},render:function(e,t,n){return B._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)||f("40");var t=p(e);return t?(delete D[t._instance.rootID],T.batchedUpdates(l,t,e,!1),!0):(u(e),1===e.nodeType&&e.hasAttribute(A),!1)},_mountImageIntoNode:function(e,t,n,r,a){if(c(t)||f("41"),r){var s=o(t);if(k.canReuseMarkup(e,s))return void v.precacheNode(n,s);var l=s.getAttribute(k.CHECKSUM_ATTR_NAME);s.removeAttribute(k.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(k.CHECKSUM_ATTR_NAME,l);var d=e,p=i(d,u),m=" (client) "+d.substring(p-20,p+20)+"\n (server) "+u.substring(p-20,p+20);t.nodeType===j&&f("42",m)}if(t.nodeType===j&&f("43"),a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);h.insertTreeBefore(t,e,null)}else O(t,e),v.precacheNode(n,t.firstChild)}};t.exports=B},{10:10,127:127,132:132,134:134,136:136,147:147,154:154,161:161,27:27,35:35,40:40,41:41,44:44,56:56,61:61,65:65,66:66,67:67,8:8,80:80,87:87,88:88}],69:[function(e,t,n){"use strict";function i(e,t,n){return{type:p.INSERT_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function o(e,t,n){return{type:p.MOVE_EXISTING,content:null,fromIndex:e._mountIndex,fromNode:f.getHostNode(e),toIndex:n,afterNode:t}}function r(e,t){return{type:p.REMOVE_NODE,content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:p.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:p.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){d.processChildrenUpdates(e,t)}var c=e(132),d=e(33),p=(e(65),e(66),e(70)),f=(e(35),e(80)),h=e(28),m=(e(146),e(116)),g=(e(154),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return h.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,i,o,r){var a;return a=m(t,0),h.updateChildren(e,a,n,i,o,this,this._hostContainerInfo,r,0),a},mountChildren:function(e,t,n){var i=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=i;var o=[],r=0;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a],l=f.mountComponent(s,t,this,this._hostContainerInfo,n,0);s._mountIndex=r++,o.push(l)}return o},updateTextContent:function(e){var t=this._renderedChildren;h.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");u(this,[s(e)])},updateMarkup:function(e){var t=this._renderedChildren;h.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");u(this,[a(e)])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var i=this._renderedChildren,o={},r=[],a=this._reconcilerUpdateChildren(i,e,r,o,t,n);if(a||i){var s,c=null,d=0,p=0,h=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var g=i&&i[s],v=a[s];g===v?(c=l(c,this.moveChild(g,m,d,p)),p=Math.max(g._mountIndex,p),g._mountIndex=d):(g&&(p=Math.max(g._mountIndex,p)),c=l(c,this._mountChildAtIndex(v,r[h],m,d,t,n)),h++),d++,m=f.getHostNode(v)}for(s in o)o.hasOwnProperty(s)&&(c=l(c,this._unmountChild(i[s],o[s])));c&&u(this,c),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;h.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,i){if(e._mountIndex<i)return o(e,t,n)},createChild:function(e,t,n){return i(n,t,e._mountIndex)},removeChild:function(e,t){return r(e,t)},_mountChildAtIndex:function(e,t,n,i,o,r){return e._mountIndex=i,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});t.exports=g},{116:116,132:132,146:146,154:154,28:28,33:33,35:35,65:65,66:66,70:70,80:80}],70:[function(e,t,n){"use strict";var i=e(157),o=i({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=o},{157:157}],71:[function(e,t,n){"use strict";var i=e(132),o=e(56),r=(e(154),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?r.EMPTY:o.isValidElement(e)?"function"==typeof e.type?r.COMPOSITE:r.HOST:void i("26",e)}});t.exports=r},{132:132,154:154,56:56}],72:[function(e,t,n){"use strict";var i=(e(161),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}});t.exports=i},{161:161}],73:[function(e,t,n){"use strict";var i=e(132),o=(e(154),{isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){o.isValidOwner(n)||i("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){o.isValidOwner(n)||i("120");var r=n.getPublicInstance();r&&r.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});t.exports=o},{132:132,154:154}],74:[function(e,t,n){"use strict";var i={};t.exports=i},{}],75:[function(e,t,n){"use strict";var i=e(157),o=i({prop:null,context:null,childContext:null});t.exports=o},{157:157}],76:[function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function o(e){this.message=e,this.stack=""}function r(e){function t(t,n,i,r,a,s,l){if(r=r||k,s=s||i,null==n[i]){var u=y[a];return t?new o("Required "+u+" `"+s+"` was not specified in `"+r+"`."):null}return e(n,i,r,a,s)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){function t(t,n,i,r,a,s){var l=t[n];if(m(l)!==e)return new o("Invalid "+y[r]+" `"+a+"` of type `"+g(l)+"` supplied to `"+i+"`, expected `"+e+"`.");return null}return r(t)}function s(e){function t(t,n,i,r,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new o("Invalid "+y[r]+" `"+a+"` of type `"+m(s)+"` supplied to `"+i+"`, expected an array.")}for(var l=0;l<s.length;l++){var u=e(s,l,i,r,a+"["+l+"]",_);if(u instanceof Error)return u}return null}return r(t)}function l(e){function t(t,n,i,r,a){if(!(t[n]instanceof e)){var s=y[r],l=e.name||k;return new o("Invalid "+s+" `"+a+"` of type `"+v(t[n])+"` supplied to `"+i+"`, expected instance of `"+l+"`.")}return null}return r(t)}function u(e){function t(t,n,r,a,s){for(var l=t[n],u=0;u<e.length;u++)if(i(l,e[u]))return null;return new o("Invalid "+y[a]+" `"+s+"` of value `"+l+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?r(t):w.thatReturnsNull}function c(e){function t(t,n,i,r,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+i+"` has invalid PropType notation inside objectOf.")
;var s=t[n],l=m(s);if("object"!==l){return new o("Invalid "+y[r]+" `"+a+"` of type `"+l+"` supplied to `"+i+"`, expected an object.")}for(var u in s)if(s.hasOwnProperty(u)){var c=e(s,u,i,r,a+"."+u,_);if(c instanceof Error)return c}return null}return r(t)}function d(e){function t(t,n,i,r,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,i,r,a,_))return null}return new o("Invalid "+y[r]+" `"+a+"` supplied to `"+i+"`.")}return Array.isArray(e)?r(t):w.thatReturnsNull}function p(e){function t(t,n,i,r,a){var s=t[n],l=m(s);if("object"!==l){return new o("Invalid "+y[r]+" `"+a+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.")}for(var u in e){var c=e[u];if(c){var d=c(s,u,i,r,a+"."+u,_);if(d)return d}}return null}return r(t)}function f(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(f);if(null===e||b.isValidElement(e))return!0;var t=C(e);if(!t)return!1;var n,i=t.call(e);if(t!==e.entries){for(;!(n=i.next()).done;)if(!f(n.value))return!1}else for(;!(n=i.next()).done;){var o=n.value;if(o&&!f(o[1]))return!1}return!0;default:return!1}}function h(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":h(t,e)?"symbol":t}function g(e){var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){return e.constructor&&e.constructor.name?e.constructor.name:k}var b=e(56),y=e(74),_=e(77),w=e(146),C=e(123),k=(e(161),"<<anonymous>>"),x={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:function(){return r(w.thatReturns(null))}(),arrayOf:s,element:function(){function e(e,t,n,i,r){var a=e[t];if(!b.isValidElement(a)){return new o("Invalid "+y[i]+" `"+r+"` of type `"+m(a)+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return r(e)}(),instanceOf:l,node:function(){function e(e,t,n,i,r){if(!f(e[t])){return new o("Invalid "+y[i]+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")}return null}return r(e)}(),objectOf:c,oneOf:u,oneOfType:d,shape:p};o.prototype=Error.prototype,t.exports=x},{123:123,146:146,161:161,56:56,74:74,77:77}],77:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],78:[function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||s}function o(){}var r=e(162),a=e(31),s=e(72),l=e(147);o.prototype=a.prototype,i.prototype=new o,i.prototype.constructor=i,r(i.prototype,a.prototype),i.prototype.isPureReactComponent=!0,t.exports=i},{147:147,162:162,31:31,72:72}],79:[function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.useCreateElement=e}var o=e(162),r=e(5),a=e(25),s=e(27),l=e(64),u=(e(66),e(106)),c=e(87),d={initialize:l.getSelectionInformation,close:l.restoreSelection},p={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[d,p,f],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null}};o(i.prototype,u.Mixin,m),a.addPoolingTo(i),t.exports=i},{106:106,162:162,25:25,27:27,5:5,64:64,66:66,87:87}],80:[function(e,t,n){"use strict";function i(){o.attachRefs(this,this._currentElement)}var o=e(81),r=(e(66),e(161),{mountComponent:function(e,t,n,o,r,a){var s=e.mountComponent(t,n,o,r,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(i,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){o.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,r){var a=e._currentElement;if(t!==a||r!==e._context){var s=o.shouldUpdateRefs(a,t);s&&o.detachRefs(e,a),e.receiveComponent(t,n,r),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(i,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});t.exports=r},{161:161,66:66,81:81}],81:[function(e,t,n){"use strict";function i(e,t,n){"function"==typeof e?e(t.getPublicInstance()):r.addComponentAsRefTo(t,e,n)}function o(e,t,n){"function"==typeof e?e(null):r.removeComponentAsRefFrom(t,e,n)}var r=e(73),a={};a.attachRefs=function(e,t){if(null!==t&&!1!==t){var n=t.ref;null!=n&&i(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null===e||!1===e,i=null===t||!1===t;return n||i||t.ref!==e.ref||"string"==typeof t.ref&&t._owner!==e._owner},a.detachRefs=function(e,t){if(null!==t&&!1!==t){var n=t.ref;null!=n&&o(n,e,t._owner)}},t.exports=a},{73:73}],82:[function(e,t,n){"use strict";var i={isBatchingUpdates:!1,batchedUpdates:function(e){}};t.exports=i},{}],83:[function(e,t,n){"use strict";function i(e,t){var n;try{return h.injection.injectBatchingStrategy(p),n=f.getPooled(t),v++,n.perform(function(){var i=g(e,!0),o=d.mountComponent(i,n,null,s(),m,0);return t||(o=c.addChecksumToMarkup(o)),o},null)}finally{v--,f.release(n),v||h.injection.injectBatchingStrategy(l)}}function o(e){return u.isValidElement(e)||a("46"),i(e,!1)}function r(e){return u.isValidElement(e)||a("47"),i(e,!0)}var a=e(132),s=e(41),l=e(54),u=e(56),c=(e(66),e(67)),d=e(80),p=e(82),f=e(84),h=e(88),m=e(147),g=e(127),v=(e(154),0);t.exports={renderToString:o,renderToStaticMarkup:r}},{127:127,132:132,147:147,154:154,41:41,54:54,56:56,66:66,67:67,80:80,82:82,84:84,88:88}],84:[function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var o=e(162),r=e(25),a=e(106),s=(e(66),e(85)),l=[],u={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};o(i.prototype,a.Mixin,c),r.addPoolingTo(i),t.exports=i},{106:106,162:162,25:25,66:66,85:85}],85:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e(87),r=(e(106),e(161),function(){function e(t){i(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&o.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&o.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&o.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&o.enqueueSetState(e,t)},e}());t.exports=r},{106:106,161:161,87:87}],86:[function(e,t,n){"use strict";var i=e(162),o=e(36),r=e(50),a=e(26),s=i({__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:o,__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:r},a);t.exports=s},{162:162,26:26,36:36,50:50}],87:[function(e,t,n){"use strict";function i(e){l.enqueueUpdate(e)}function o(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,i=Object.keys(e);return i.length>0&&i.length<20?n+" (keys: "+i.join(", ")+")":n}function r(e,t){var n=s.get(e);return n||null}var a=e(132),s=(e(35),e(65)),l=(e(66),e(88)),u=(e(154),e(161),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){u.validateCallback(t,n);var o=r(e);return o?(o._pendingCallbacks?o._pendingCallbacks.push(t):o._pendingCallbacks=[t],void i(o)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],i(e)},enqueueForceUpdate:function(e){var t=r(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,i(t))},enqueueReplaceState:function(e,t){var n=r(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,i(n))},enqueueSetState:function(e,t){var n=r(e,"setState");if(n){(n._pendingStateQueue||(n._pendingStateQueue=[])).push(t),i(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,i(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&a("122",t,o(e))}});t.exports=u},{132:132,154:154,161:161,35:35,65:65,66:66,88:88}],88:[function(e,t,n){"use strict";function i(){S.ReactReconcileTransaction&&w||c("123")}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=p.getPooled(),this.reconcileTransaction=S.ReactReconcileTransaction.getPooled(!0)}function r(e,t,n,o,r,a){i(),w.batchedUpdates(e,t,n,o,r,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==v.length&&c("124",t,v.length),v.sort(a),b++;for(var n=0;n<t;n++){var i=v[n],o=i._pendingCallbacks;i._pendingCallbacks=null;var r;if(h.logTopLevelRenders){var s=i;i._currentElement.props===i._renderedComponent._currentElement&&(s=i._renderedComponent),r="React update: "+s.getName(),console.time(r)}if(m.performUpdateIfNecessary(i,e.reconcileTransaction,b),r&&console.timeEnd(r),o)for(var l=0;l<o.length;l++)e.callbackQueue.enqueue(o[l],i.getPublicInstance())}}function l(e){return i(),w.isBatchingUpdates?(v.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=b+1))):void w.batchedUpdates(l,e)}function u(e,t){w.isBatchingUpdates||c("125"),y.enqueue(e,t),_=!0}var c=e(132),d=e(162),p=e(5),f=e(25),h=e(61),m=e(80),g=e(106),v=(e(154),[]),b=0,y=p.getPooled(),_=!1,w=null,C={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),E()):v.length=0}},k={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},x=[C,k];d(o.prototype,g.Mixin,{getTransactionWrappers:function(){return x},destructor:function(){this.dirtyComponentsLength=null,p.release(this.callbackQueue),this.callbackQueue=null,S.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return g.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(o);var E=function(){for(;v.length||_;){if(v.length){var e=o.getPooled();e.perform(s,null,e),o.release(e)}if(_){_=!1;var t=y;y=p.getPooled(),t.notifyAll(),p.release(t)}}},T={injectReconcileTransaction:function(e){e||c("126"),S.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||c("127"),"function"!=typeof e.batchedUpdates&&c("128"),"boolean"!=typeof e.isBatchingUpdates&&c("129"),w=e}},S={ReactReconcileTransaction:null,batchedUpdates:r,enqueueUpdate:l,flushBatchedUpdates:E,injection:T,asap:u};t.exports=S},{106:106,132:132,154:154,162:162,25:25,5:5,61:61,80:80}],89:[function(e,t,n){"use strict";t.exports="15.3.2"},{}],90:[function(e,t,n){"use strict";var i={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},o={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},r={Properties:{},DOMAttributeNamespaces:{xlinkActuate:i.xlink,xlinkArcrole:i.xlink,xlinkHref:i.xlink,xlinkRole:i.xlink,xlinkShow:i.xlink,xlinkTitle:i.xlink,xlinkType:i.xlink,xmlBase:i.xml,xmlLang:i.xml,xmlSpace:i.xml},DOMAttributeNames:{}};Object.keys(o).forEach(function(e){r.Properties[e]=0,o[e]&&(r.DOMAttributeNames[e]=o[e])}),t.exports=r},{}],91:[function(e,t,n){"use strict";function i(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(e,t){if(w||null==b||b!==d())return null;var n=i(b);if(!_||!h(_,n)){_=n;var o=c.getPooled(v.select,y,e,t);return o.type="select",o.target=b,a.accumulateTwoPhaseDispatches(o),o}return null}var r=e(16),a=e(20),s=e(140),l=e(40),u=e(64),c=e(97),d=e(149),p=e(129),f=e(158),h=e(160),m=r.topLevelTypes,g=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,v={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topKeyUp,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},b=null,y=null,_=null,w=!1,C=!1,k=f({onSelect:null}),x={eventTypes:v,extractEvents:function(e,t,n,i){if(!C)return null;var r=t?l.getNodeFromInstance(t):window;switch(e){case m.topFocus:(p(r)||"true"===r.contentEditable)&&(b=r,y=t,_=null);break;case m.topBlur:b=null,y=null,_=null;break;case m.topMouseDown:w=!0;break;case m.topContextMenu:case m.topMouseUp:return w=!1,o(n,i);case m.topSelectionChange:if(g)break;case m.topKeyDown:case m.topKeyUp:return o(n,i)}return null},didPutListener:function(e,t,n){t===k&&(C=!0)}};t.exports=x},{129:129,140:140,149:149,158:158,16:16,160:160,20:20,40:40,64:64,97:97}],92:[function(e,t,n){"use strict";function i(e){return"."+e._rootNodeID}var o=e(132),r=e(16),a=e(139),s=e(20),l=e(40),u=e(93),c=e(94),d=e(97),p=e(98),f=e(100),h=e(101),m=e(96),g=e(102),v=e(103),b=e(104),y=e(105),_=e(146),w=e(118),C=(e(154),e(158)),k=r.topLevelTypes,x={abort:{phasedRegistrationNames:{bubbled:C({onAbort:!0}),captured:C({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:C({onAnimationEnd:!0}),captured:C({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:C({onAnimationIteration:!0}),captured:C({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:C({onAnimationStart:!0}),captured:C({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:C({onBlur:!0}),captured:C({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:C({onCanPlay:!0}),captured:C({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:C({onCanPlayThrough:!0}),captured:C({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:C({onClick:!0}),captured:C({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:C({onContextMenu:!0}),captured:C({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:C({onCopy:!0}),captured:C({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:C({onCut:!0}),captured:C({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:C({onDoubleClick:!0}),captured:C({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:C({onDrag:!0}),captured:C({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:C({onDragEnd:!0}),captured:C({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:C({onDragEnter:!0}),captured:C({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:C({onDragExit:!0}),captured:C({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:C({onDragLeave:!0}),captured:C({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:C({onDragOver:!0}),captured:C({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:C({onDragStart:!0}),captured:C({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:C({onDrop:!0}),captured:C({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:C({onDurationChange:!0}),captured:C({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:C({onEmptied:!0}),captured:C({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:C({onEncrypted:!0}),captured:C({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:C({onEnded:!0}),captured:C({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:C({onError:!0}),captured:C({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:C({onFocus:!0}),captured:C({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:C({onInput:!0}),captured:C({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:C({onInvalid:!0}),captured:C({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:C({onKeyDown:!0}),captured:C({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:C({onKeyPress:!0}),captured:C({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:C({onKeyUp:!0}),captured:C({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:C({onLoad:!0}),captured:C({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:C({onLoadedData:!0}),captured:C({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:C({onLoadedMetadata:!0}),captured:C({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:C({onLoadStart:!0}),captured:C({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:C({onMouseDown:!0}),captured:C({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:C({onMouseMove:!0}),captured:C({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:C({onMouseOut:!0}),captured:C({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:C({onMouseOver:!0}),captured:C({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:C({onMouseUp:!0}),captured:C({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:C({onPaste:!0}),captured:C({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:C({onPause:!0}),captured:C({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:C({onPlay:!0}),captured:C({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:C({onPlaying:!0}),captured:C({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:C({onProgress:!0}),captured:C({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:C({onRateChange:!0}),captured:C({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:C({onReset:!0}),captured:C({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:C({onScroll:!0}),captured:C({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:C({onSeeked:!0}),captured:C({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:C({onSeeking:!0}),captured:C({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:C({onStalled:!0}),captured:C({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:C({onSubmit:!0}),captured:C({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:C({onSuspend:!0}),captured:C({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:C({onTimeUpdate:!0}),captured:C({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:C({onTouchCancel:!0}),captured:C({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:C({onTouchEnd:!0}),captured:C({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:C({onTouchMove:!0}),captured:C({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:C({onTouchStart:!0}),captured:C({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:C({onTransitionEnd:!0}),captured:C({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:C({onVolumeChange:!0}),captured:C({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:C({onWaiting:!0}),captured:C({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:C({onWheel:!0}),captured:C({onWheelCapture:!0})}}},E={topAbort:x.abort,topAnimationEnd:x.animationEnd,topAnimationIteration:x.animationIteration,topAnimationStart:x.animationStart,topBlur:x.blur,topCanPlay:x.canPlay,topCanPlayThrough:x.canPlayThrough,topClick:x.click,topContextMenu:x.contextMenu,topCopy:x.copy,topCut:x.cut,topDoubleClick:x.doubleClick,topDrag:x.drag,topDragEnd:x.dragEnd,topDragEnter:x.dragEnter,topDragExit:x.dragExit,topDragLeave:x.dragLeave,topDragOver:x.dragOver,topDragStart:x.dragStart,topDrop:x.drop,topDurationChange:x.durationChange,topEmptied:x.emptied,topEncrypted:x.encrypted,topEnded:x.ended,topError:x.error,topFocus:x.focus,topInput:x.input,topInvalid:x.invalid,topKeyDown:x.keyDown,topKeyPress:x.keyPress,topKeyUp:x.keyUp,topLoad:x.load,topLoadedData:x.loadedData,topLoadedMetadata:x.loadedMetadata,topLoadStart:x.loadStart,topMouseDown:x.mouseDown,topMouseMove:x.mouseMove,topMouseOut:x.mouseOut,topMouseOver:x.mouseOver,topMouseUp:x.mouseUp,topPaste:x.paste,topPause:x.pause,topPlay:x.play,topPlaying:x.playing,topProgress:x.progress,topRateChange:x.rateChange,topReset:x.reset,topScroll:x.scroll,topSeeked:x.seeked,topSeeking:x.seeking,topStalled:x.stalled,topSubmit:x.submit,topSuspend:x.suspend,topTimeUpdate:x.timeUpdate,topTouchCancel:x.touchCancel,topTouchEnd:x.touchEnd,topTouchMove:x.touchMove,topTouchStart:x.touchStart,topTransitionEnd:x.transitionEnd,topVolumeChange:x.volumeChange,topWaiting:x.waiting,topWheel:x.wheel};for(var T in E)E[T].dependencies=[T];var S=C({onClick:null}),P={},O={eventTypes:x,extractEvents:function(e,t,n,i){var r=E[e];if(!r)return null;var a;switch(e){case k.topAbort:case k.topCanPlay:case k.topCanPlayThrough:case k.topDurationChange:case k.topEmptied:case k.topEncrypted:case k.topEnded:case k.topError:case k.topInput:case k.topInvalid:case k.topLoad:case k.topLoadedData:case k.topLoadedMetadata:case k.topLoadStart:case k.topPause:case k.topPlay:case k.topPlaying:case k.topProgress:case k.topRateChange:case k.topReset:case k.topSeeked:case k.topSeeking:case k.topStalled:case k.topSubmit:case k.topSuspend:case k.topTimeUpdate:case k.topVolumeChange:case k.topWaiting:a=d;break;case k.topKeyPress:if(0===w(n))return null;case k.topKeyDown:case k.topKeyUp:a=f;break;case k.topBlur:case k.topFocus:a=p;break;case k.topClick:if(2===n.button)return null;case k.topContextMenu:case k.topDoubleClick:case k.topMouseDown:case k.topMouseMove:case k.topMouseOut:case k.topMouseOver:case k.topMouseUp:a=h;break;case k.topDrag:case k.topDragEnd:case k.topDragEnter:case k.topDragExit:case k.topDragLeave:case k.topDragOver:case k.topDragStart:case k.topDrop:a=m;break;case k.topTouchCancel:case k.topTouchEnd:case k.topTouchMove:case k.topTouchStart:a=g;break;case k.topAnimationEnd:case k.topAnimationIteration:case k.topAnimationStart:a=u;break;case k.topTransitionEnd:a=v;break;case k.topScroll:a=b;break;case k.topWheel:a=y;break;case k.topCopy:case k.topCut:case k.topPaste:a=c}a||o("86",e);var l=a.getPooled(r,t,n,i);return s.accumulateTwoPhaseDispatches(l),l},didPutListener:function(e,t,n){if(t===S){var o=i(e),r=l.getNodeFromInstance(e);P[o]||(P[o]=a.listen(r,"click",_))}},willDeleteListener:function(e,t){if(t===S){var n=i(e);P[n].remove(),delete P[n]}}};t.exports=O},{100:100,101:101,102:102,103:103,104:104,105:105,118:118,132:132,139:139,146:146,154:154,158:158,16:16,20:20,40:40,93:93,94:94,96:96,97:97,98:98}],93:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(97),r={animationName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(i,r),t.exports=i},{97:97}],94:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(97),r={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};o.augmentClass(i,r),t.exports=i},{97:97}],95:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(97),r={data:null};o.augmentClass(i,r),t.exports=i},{97:97}],96:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(101),r={dataTransfer:null};o.augmentClass(i,r),t.exports=i},{101:101}],97:[function(e,t,n){"use strict";function i(e,t,n,i){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var o=this.constructor.Interface;for(var r in o)if(o.hasOwnProperty(r)){var s=o[r];s?this[r]=s(n):"target"===r?this.target=i:this[r]=n[r]}var l=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=l?a.thatReturnsTrue:a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var o=e(162),r=e(25),a=e(146),s=(e(161),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),i.Interface=l,i.augmentClass=function(e,t){var n=this,i=function(){};i.prototype=n.prototype;var a=new i;o(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.fourArgumentPooler)},r.addPoolingTo(i,r.fourArgumentPooler),t.exports=i},{146:146,161:161,162:162,25:25}],98:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(104),r={relatedTarget:null};o.augmentClass(i,r),t.exports=i},{104:104}],99:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(97),r={data:null};o.augmentClass(i,r),t.exports=i},{97:97}],100:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(104),r=e(118),a=e(119),s=e(120),l={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?r(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?r(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};o.augmentClass(i,l),t.exports=i},{104:104,118:118,119:119,120:120}],101:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(104),r=e(107),a=e(120),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+r.currentScrollLeft},pageY:function(e){
return"pageY"in e?e.pageY:e.clientY+r.currentScrollTop}};o.augmentClass(i,s),t.exports=i},{104:104,107:107,120:120}],102:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(104),r=e(120),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:r};o.augmentClass(i,a),t.exports=i},{104:104,120:120}],103:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(97),r={propertyName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(i,r),t.exports=i},{97:97}],104:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(97),r=e(121),a={view:function(e){if(e.view)return e.view;var t=r(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};o.augmentClass(i,a),t.exports=i},{121:121,97:97}],105:[function(e,t,n){"use strict";function i(e,t,n,i){return o.call(this,e,t,n,i)}var o=e(101),r={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(i,r),t.exports=i},{101:101}],106:[function(e,t,n){"use strict";var i=e(132),o=(e(154),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,o,r,a,s,l){this.isInTransaction()&&i("27");var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=e.call(t,n,o,r,a,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||i("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var o,a=t[n],s=this.wrapperInitData[n];try{o=!0,s!==r.OBSERVED_ERROR&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}}),r={Mixin:o,OBSERVED_ERROR:{}};t.exports=r},{132:132,154:154}],107:[function(e,t,n){"use strict";var i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){i.currentScrollLeft=e.x,i.currentScrollTop=e.y}};t.exports=i},{}],108:[function(e,t,n){"use strict";function i(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var o=e(132);e(154),t.exports=i},{132:132,154:154}],109:[function(e,t,n){"use strict";function i(e){for(var t=1,n=0,i=0,r=e.length,a=-4&r;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=o,n%=o}for(;i<r;i++)n+=t+=e.charCodeAt(i);return t%=o,n%=o,t|n<<16}var o=65521;t.exports=i},{}],110:[function(e,t,n){"use strict";t.exports=!1},{}],111:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i,l,u){for(var c in e)if(e.hasOwnProperty(c)){var d;try{"function"!=typeof e[c]&&o("84",i||"React class",r[n],c),d=e[c](t,c,i,n,null,a)}catch(e){d=e}d instanceof Error&&!(d.message in s)&&(s[d.message]=!0)}}var o=e(132),r=e(74),a=e(77);e(154),e(161),void 0!==n&&n.env;var s={};t.exports=i}).call(this,void 0)},{132:132,154:154,161:161,74:74,77:77}],112:[function(e,t,n){"use strict";var i=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,o)})}:e};t.exports=i},{}],113:[function(e,t,n){"use strict";function i(e,t,n){return null==t||"boolean"==typeof t||""===t?"":isNaN(t)||0===t||r.hasOwnProperty(e)&&r[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var o=e(3),r=(e(161),o.isUnitlessNumber);t.exports=i},{161:161,3:3}],114:[function(e,t,n){"use strict";function i(e){var t=""+e,n=r.exec(t);if(!n)return t;var i,o="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#x27;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=i}return s!==a?o+t.substring(s,a):o}function o(e){return"boolean"==typeof e||"number"==typeof e?""+e:i(e)}var r=/["'&<>]/;t.exports=o},{}],115:[function(e,t,n){"use strict";function i(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);return t?(t=s(t),t?r.getNodeFromInstance(t):null):void("function"==typeof e.render?o("44"):o("45",Object.keys(e)))}var o=e(132),r=(e(35),e(40)),a=e(65),s=e(122);e(154),e(161),t.exports=i},{122:122,132:132,154:154,161:161,35:35,40:40,65:65}],116:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i){if(e&&"object"==typeof e){var o=e;void 0===o[n]&&null!=t&&(o[n]=t)}}function o(e,t){if(null==e)return e;var n={};return r(e,i,n),n}var r=(e(23),e(137));e(161),void 0!==n&&n.env,t.exports=o}).call(this,void 0)},{137:137,161:161,23:23}],117:[function(e,t,n){"use strict";function i(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}t.exports=i},{}],118:[function(e,t,n){"use strict";function i(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}t.exports=i},{}],119:[function(e,t,n){"use strict";function i(e){if(e.key){var t=r[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=o(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var o=e(118),r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=i},{118:118}],120:[function(e,t,n){"use strict";function i(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=r[e];return!!i&&!!n[i]}function o(e){return i}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=o},{}],121:[function(e,t,n){"use strict";function i(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}t.exports=i},{}],122:[function(e,t,n){"use strict";function i(e){for(var t;(t=e._renderedNodeType)===o.COMPOSITE;)e=e._renderedComponent;return t===o.HOST?e._renderedComponent:t===o.EMPTY?null:void 0}var o=e(71);t.exports=i},{71:71}],123:[function(e,t,n){"use strict";function i(e){var t=e&&(o&&e[o]||e[r]);if("function"==typeof t)return t}var o="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";t.exports=i},{}],124:[function(e,t,n){"use strict";function i(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function r(e,t){for(var n=i(e),r=0,a=0;n;){if(3===n.nodeType){if(a=r+n.textContent.length,r<=t&&a>=t)return{node:n,offset:t-r};r=a}n=i(o(n))}}t.exports=r},{}],125:[function(e,t,n){"use strict";function i(){return!r&&o.canUseDOM&&(r="textContent"in document.documentElement?"textContent":"innerText"),r}var o=e(140),r=null;t.exports=i},{140:140}],126:[function(e,t,n){"use strict";function i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function o(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in l)return s[e]=t[n];return""}var r=e(140),a={animationend:i("Animation","AnimationEnd"),animationiteration:i("Animation","AnimationIteration"),animationstart:i("Animation","AnimationStart"),transitionend:i("Transition","TransitionEnd")},s={},l={};r.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=o},{140:140}],127:[function(e,t,n){"use strict";function i(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function r(e,t){var n;if(null===e||!1===e)n=u.create(r);else if("object"==typeof e){var s=e;(!s||"function"!=typeof s.type&&"string"!=typeof s.type)&&a("130",null==s.type?s.type:typeof s.type,i(s._owner)),"string"==typeof s.type?n=c.createInternalComponent(s):o(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new d(s)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=e(132),s=e(162),l=e(34),u=e(57),c=e(62),d=(e(154),e(161),function(e){this.construct(e)});s(d.prototype,l.Mixin,{_instantiateReactComponent:r}),t.exports=r},{132:132,154:154,161:161,162:162,34:34,57:57,62:62}],128:[function(e,t,n){"use strict";function i(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"==typeof a[n]}return!i&&o&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var o,r=e(140);r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=i},{140:140}],129:[function(e,t,n){"use strict";function i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!o[e.type]:"textarea"===t}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=i},{}],130:[function(e,t,n){"use strict";function i(e){return r.isValidElement(e)||o("143"),e}var o=e(132),r=e(56);e(154),t.exports=i},{132:132,154:154,56:56}],131:[function(e,t,n){"use strict";function i(e){return'"'+o(e)+'"'}var o=e(114);t.exports=i},{114:114}],132:[function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}t.exports=i},{}],133:[function(e,t,n){"use strict";var i=e(68);t.exports=i.renderSubtreeIntoContainer},{68:68}],134:[function(e,t,n){"use strict";var i,o=e(140),r=e(9),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=e(112),u=l(function(e,t){if(e.namespaceURI!==r.svg||"innerHTML"in e)e.innerHTML=t;else{i=i||document.createElement("div"),i.innerHTML="<svg>"+t+"</svg>";for(var n=i.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(o.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}t.exports=u},{112:112,140:140,9:9}],135:[function(e,t,n){"use strict";var i=e(140),o=e(114),r=e(134),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};i.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){r(e,o(t))})),t.exports=a},{114:114,134:134,140:140}],136:[function(e,t,n){"use strict";function i(e,t){var n=null===e||!1===e,i=null===t||!1===t;if(n||i)return n===i;var o=typeof e,r=typeof t;return"string"===o||"number"===o?"string"===r||"number"===r:"object"===r&&e.type===t.type&&e.key===t.key}t.exports=i},{}],137:[function(e,t,n){"use strict";function i(e,t){return e&&"object"==typeof e&&null!=e.key?u.escape(e.key):t.toString(36)}function o(e,t,n,r){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||s.isValidElement(e))return n(r,e,""===t?c+i(e,0):t),1;var f,h,m=0,g=""===t?c:t+d;if(Array.isArray(e))for(var v=0;v<e.length;v++)f=e[v],h=g+i(f,v),m+=o(f,h,n,r);else{var b=l(e);if(b){var y,_=b.call(e);if(b!==e.entries)for(var w=0;!(y=_.next()).done;)f=y.value,h=g+i(f,w++),m+=o(f,h,n,r);else for(;!(y=_.next()).done;){var C=y.value;C&&(f=C[1],h=g+u.escape(C[0])+d+i(f,0),m+=o(f,h,n,r))}}else if("object"===p){var k=String(e);a("31","[object Object]"===k?"object with keys {"+Object.keys(e).join(", ")+"}":k,"")}}return m}function r(e,t,n){return null==e?0:o(e,"",t,n)}var a=e(132),s=(e(35),e(56)),l=e(123),u=(e(154),e(23)),c=(e(161),"."),d=":";t.exports=r},{123:123,132:132,154:154,161:161,23:23,35:35,56:56}],138:[function(e,t,n){"use strict";var i=(e(162),e(146)),o=(e(161),i);t.exports=o},{146:146,161:161,162:162}],139:[function(e,t,n){"use strict";var i=e(146),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:i}},registerDefault:function(){}};t.exports=o},{146:146}],140:[function(e,t,n){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=o},{}],141:[function(e,t,n){"use strict";function i(e){return e.replace(o,function(e,t){return t.toUpperCase()})}var o=/-(.)/g;t.exports=i},{}],142:[function(e,t,n){"use strict";function i(e){return o(e.replace(r,"ms-"))}var o=e(141),r=/^-ms-/;t.exports=i},{141:141}],143:[function(e,t,n){"use strict";function i(e,t){return!(!e||!t)&&(e===t||!o(e)&&(o(t)?i(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var o=e(156);t.exports=i},{156:156}],144:[function(e,t,n){"use strict";function i(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&a(!1),"number"!=typeof t&&a(!1),0===t||t-1 in e||a(!1),"function"==typeof e.callee&&a(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}function o(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return o(e)?Array.isArray(e)?e.slice():i(e):[e]}var a=e(154);t.exports=r},{154:154}],145:[function(e,t,n){"use strict";function i(e){var t=e.match(c);return t&&t[1].toLowerCase()}function o(e,t){var n=u;u||l(!1);var o=i(e),r=o&&s(o);if(r){n.innerHTML=r[1]+e+r[2];for(var c=r[0];c--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(t||l(!1),a(d).forEach(t));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var r=e(140),a=e(144),s=e(150),l=e(154),u=r.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=o},{140:140,144:144,150:150,154:154}],146:[function(e,t,n){"use strict";function i(e){return function(){return e}}var o=function(){};o.thatReturns=i,o.thatReturnsFalse=i(!1),o.thatReturnsTrue=i(!0),o.thatReturnsNull=i(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],147:[function(e,t,n){"use strict";var i={};t.exports=i},{}],148:[function(e,t,n){"use strict";function i(e){try{e.focus()}catch(e){}}t.exports=i},{}],149:[function(e,t,n){"use strict";function i(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=i},{}],150:[function(e,t,n){"use strict";function i(e){return a||r(!1),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(a.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?p[e]:null}var o=e(140),r=e(154),a=o.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){p[e]=d,s[e]=!0}),t.exports=i},{140:140,154:154}],151:[function(e,t,n){"use strict";function i(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=i},{}],152:[function(e,t,n){"use strict";function i(e){return e.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;t.exports=i},{}],153:[function(e,t,n){"use strict";function i(e){return o(e).replace(r,"-ms-")}var o=e(152),r=/^ms-/;t.exports=i},{152:152}],154:[function(e,t,n){"use strict";function i(e,t,n,i,o,r,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,o,r,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}t.exports=i},{}],155:[function(e,t,n){"use strict";function i(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=i},{}],156:[function(e,t,n){"use strict";function i(e){return o(e)&&3==e.nodeType}var o=e(155);t.exports=i},{155:155}],157:[function(e,t,n){"use strict";var i=e(154),o=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)||i(!1);for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=o},{154:154}],158:[function(e,t,n){"use strict";var i=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=i},{}],159:[function(e,t,n){"use strict";function i(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=i},{}],160:[function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function o(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}var r=Object.prototype.hasOwnProperty;t.exports=o},{}],161:[function(e,t,n){"use strict";var i=e(146),o=i;t.exports=o},{146:146}],162:[function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(s[u]=n[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var c=0;c<a.length;c++)r.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},{}]},{},[86])(86)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define("react-dom",["react"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ReactDOM=e(t.React)}}(function(e){return e.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("redux",[],t):"object"==typeof exports?exports.Redux=t():e.Redux=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var o=n(2),r=i(o),a=n(7),s=i(a),l=n(6),u=i(l),c=n(5),d=i(c),p=n(1),f=i(p);i(n(3)),t.createStore=r.default,t.combineReducers=s.default,t.bindActionCreators=u.default,t.applyMiddleware=d.default,t.compose=f.default},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){if(0===t.length)return arguments.length>0?arguments[0]:void 0;var e=t[t.length-1];return t.slice(0,-1).reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function i(e,t,n){function o(){h===f&&(h=f.slice())}function s(){return p}function l(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return o(),h.push(e),function(){if(t){t=!1,o();var n=h.indexOf(e);h.splice(n,1)}}}function u(e){if(!(0,r.default)(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw Error("Reducers may not dispatch actions.");try{m=!0,p=d(p,e)}finally{m=!1}for(var t=f=h,n=0;t.length>n;n++)t[n]();return e}function c(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");d=e,u({type:a.INIT})}if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var d=e,p=t,f=[],h=f,m=!1;return u({type:a.INIT}),{dispatch:u,subscribe:l,getState:s,replaceReducer:c}}t.__esModule=!0,t.ActionTypes=void 0,t.default=i;var o=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t,n){function i(e){if(!r(e)||c.call(e)!=a||o(e))return!1;var t=s;if("function"==typeof e.constructor&&(t=d(e)),null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}var o=n(8),r=n(9),a="[object Object]",s=Object.prototype,l=Function.prototype.toString,u=l.call(Object),c=s.toString,d=Object.getPrototypeOf;e.exports=i},function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,i,r){var s=e(n,i,r),l=s.dispatch,u=[],c={getState:s.getState,dispatch:function(e){return l(e)}};return u=t.map(function(e){return e(c)}),l=a.default.apply(void 0,u)(s.dispatch),o({},s,{dispatch:l})}}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.__esModule=!0,t.default=i;var r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),o={},r=0;i.length>r;r++){var a=i[r],s=e[a];"function"==typeof s&&(o[a]=n(s,t))}return o}t.__esModule=!0,t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=t&&t.type;return'Reducer "'+e+'" returned undefined handling '+(n&&'"'+n+'"'||"an action")+". To ignore an action, you must explicitly return the previous state."}function r(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:s.ActionTypes.INIT}))throw Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function a(e){for(var t=Object.keys(e),n={},i=0;t.length>i;i++){var a=t[i];"function"==typeof e[a]&&(n[a]=e[a])}var s,l=Object.keys(n);try{r(n)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var i=!1,r={},a=0;l.length>a;a++){var u=l[a],c=n[u],d=e[u],p=c(d,t);if(void 0===p){var f=o(u,t);throw Error(f)}r[u]=p,i=i||p!==d}return i?r:e}}t.__esModule=!0,t.default=a;var s=n(2);i((i(n(4)),n(3)))},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n}])}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("redux")):"function"==typeof define&&define.amd?define("react-redux",["react","redux"],t):"object"==typeof exports?exports.ReactRedux=t(require("react"),require("redux")):e.ReactRedux=t(e.React,e.Redux)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var o=n(3),r=i(o),a=n(4),s=i(a);t.Provider=r.default,t.connect=s.default},function(t,n){t.exports=e},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1);t.default=i.PropTypes.shape({subscribe:i.PropTypes.func.isRequired,dispatch:i.PropTypes.func.isRequired,getState:i.PropTypes.func.isRequired})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){c||(c=!0,"undefined"!=typeof console&&"function"==typeof console.error&&console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}t.__esModule=!0,t.default=void 0;var s=n(1),l=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=!1,d=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.store=n.store,a}return r(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return s.Children.only(e)},t}(s.Component);t.default=d,d.prototype.componentWillReceiveProps=function(e){this.store!==e.store&&a()},d.propTypes={store:u.default.isRequired,children:s.PropTypes.element.isRequired},d.childContextTypes={store:u.default.isRequired}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function l(e,t){return(0,k.default)((0,y.default)(e),"`%sToProps` must return an object. Instead received %s.",t?"mapDispatch":"mapState",e),e}function u(e,t,n){function i(e,t,n){var i=b(e,t,n);return(0,k.default)((0,y.default)(i),"`mergeProps` must return an object. Instead received %s.",i),i}var u=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],p=Boolean(e),h=e||x,g=(0,y.default)(t)?(0,v.default)(t):t||E,b=n||T,_=b!==T,C=u.pure,P=void 0===C||C,O=u.withRef,I=void 0!==O&&O,M=S++;return function(e){var t=function(t){function n(e,i){o(this,n);var a=r(this,t.call(this,e,i));a.version=M,a.store=e.store||i.store,(0,k.default)(a.store,'Could not find "store" in either the context or props of "'+a.constructor.displayName+'". Either wrap the root component in a <Provider>, or explicitly pass "store" as a prop to "'+a.constructor.displayName+'".');var s=a.store.getState();return a.state={storeState:s},a.clearCache(),a}return a(n,t),n.prototype.shouldComponentUpdate=function(){return!P||this.haveOwnPropsChanged||this.hasStoreStateChanged},n.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState();return l(this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n))},n.prototype.configureFinalMapState=function(e,t){var n=h(e.getState(),t),i="function"==typeof n;return this.finalMapStateToProps=i?n:h,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,
i?this.computeStateProps(e,t):l(n)},n.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch;return l(this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n),!0)},n.prototype.configureFinalMapDispatch=function(e,t){var n=g(e.dispatch,t),i="function"==typeof n;return this.finalMapDispatchToProps=i?n:g,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,i?this.computeDispatchProps(e,t):l(n,!0)},n.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,m.default)(e,this.stateProps))&&(this.stateProps=e,!0)},n.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,m.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},n.prototype.updateMergedPropsIfNeeded=function(){var e=i(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&_&&(0,m.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){p&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillReceiveProps=function(e){P&&(0,m.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},n.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},n.prototype.handleChange=function(){if(this.unsubscribe){var e=this.state.storeState,t=this.store.getState();P&&e===t||(this.hasStoreStateChanged=!0,this.setState({storeState:t}))}},n.prototype.getWrappedInstance=function(){return(0,k.default)(I,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,i=this.renderedElement;this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1;var o=!0,r=!0;P&&i&&(o=n||t&&this.doStatePropsDependOnOwnProps,r=t&&this.doDispatchPropsDependOnOwnProps);var a=!1,s=!1;o&&(a=this.updateStatePropsIfNeeded()),r&&(s=this.updateDispatchPropsIfNeeded());return!(!!(a||s||t)&&this.updateMergedPropsIfNeeded())&&i?i:(this.renderedElement=I?(0,d.createElement)(e,c({},this.mergedProps,{ref:"wrappedInstance"})):(0,d.createElement)(e,this.mergedProps),this.renderedElement)},n}(d.Component);return t.displayName="Connect("+s(e)+")",t.WrappedComponent=e,t.contextTypes={store:f.default},t.propTypes={store:f.default},t.prototype.componentWillUpdate=function(){this.version!==M&&(this.version=M,this.trySubscribe(),this.clearCache())},(0,w.default)(t,e)}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.__esModule=!0,t.default=u;var d=n(1),p=n(2),f=i(p),h=n(5),m=i(h),g=n(6),v=i(g),b=n(11),y=i(b),_=n(7),w=i(_),C=n(8),k=i(C),x=function(e){return{}},E=function(e){return{dispatch:e}},T=function(e,t,n){return c({},n,e,t)},S=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=Object.prototype.hasOwnProperty,r=0;r<n.length;r++)if(!o.call(t,n[r])||e[n[r]]!==t[n[r]])return!1;return!0}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function i(e){return function(t){return(0,o.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=i;var o=n(12)},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var o=Object.getOwnPropertyNames(t),r=0;r<o.length;++r)n[o[r]]||i[o[r]]||(e[o[r]]=t[o[r]]);return e}},function(e,t,n){"use strict";var i=function(e,t,n,i,o,r,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,o,r,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){if(!r(e)||c.call(e)!=a||o(e))return!1;var t=s;if("function"==typeof e.constructor&&(t=d(e)),null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}var o=n(9),r=n(10),a="[object Object]",s=Object.prototype,l=Function.prototype.toString,u=l.call(Object),c=s.toString,d=Object.getPrototypeOf;e.exports=i},function(e,n){e.exports=t}])}),define("storymaps-react/tpl/builder/overviewPanel/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TOGGLE_ORGANIZE="TOGGLE_ORGANIZE",e.CHANGE_SELECTED_ITEM="CHANGE_SELECTED_ITEM",e.UPDATE_ITEMS="UPDATE_ITEMS",e.UPDATE_ORDER="UPDATE_ORDER"}),define("storymaps-react/tpl/builder/overviewPanel/reducer",["module","exports","./actionTypes"],function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case o.CHANGE_SELECTED_ITEM:return Object.assign({},e,{selectedItem:t.value});case o.TOGGLE_ORGANIZE:return Object.assign({},e,{organize:!e.organize});case o.UPDATE_ITEMS:return Object.assign({},e,{items:t.value});case o.UPDATE_ORDER:return Object.assign({},e,{order:t.value});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n);t.default=i,e.exports=t.default}),define("storymaps-react/tpl/builder/overviewPanel/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(){return{type:a.TOGGLE_ORGANIZE,value:null}}function i(e){return{type:a.CHANGE_SELECTED_ITEM,value:e}}function o(e){return{type:a.UPDATE_ITEMS,value:e}}function r(e){return{type:a.UPDATE_ORDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.toggleOrganize=n,e.changeSelectedItem=i,e.updateItems=o,e.updateOrder=r;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t)}),function(e){"use strict";"function"==typeof define&&define.amd?define("lib/Sortable/Sortable",e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[R]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in t)&&(t[i]=n[i]);q(t);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&H,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),V.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){w&&w.state!==e&&(s(w,"display",e?"none":""),!e&&w.state&&C.insertBefore(w,b),w.state=e)}function n(e,t,n){if(e){n=n||B,t=t.split(".");var i=t.shift().toUpperCase(),o=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do{if(">*"===i&&e.parentNode===n||(""===i||e.nodeName.toUpperCase()==i)&&(!t.length||((" "+e.className+" ").match(o)||[]).length==t.length))return e}while(e!==n&&(e=e.parentNode))}return null}function i(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function o(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}function a(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(D," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(D," ")}}function s(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return B.defaultView&&B.defaultView.getComputedStyle?n=B.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var i=e.getElementsByTagName(t),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function u(e,t,n,i,o,r,a){var s=B.createEvent("Event"),l=(e||t[R]).options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=t,s.from=o||t,s.item=i||t,s.clone=w,s.oldIndex=r,s.newIndex=a,t.dispatchEvent(s),l[u]&&l[u].call(e,s)}function c(e,t,n,i,o,r){var a,s,l=e[R],u=l.options.onMove;return a=B.createEvent("Event"),a.initEvent("move",!0,!0),a.to=t,a.from=e,a.dragged=n,a.draggedRect=i,a.related=o||t,a.relatedRect=r||t.getBoundingClientRect(),e.dispatchEvent(a),u&&(s=u.call(l,a)),s}function d(e){e.draggable=!1}function p(){z=!1}function f(e,t){var n=e.lastElementChild,i=n.getBoundingClientRect();return(t.clientY-(i.top+i.height)>5||t.clientX-(i.right+i.width)>5)&&n}function h(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function m(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function g(e,t){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?e.call(i,n[0]):e.apply(i,n),n=void 0},t))}}function v(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var b,y,_,w,C,k,x,E,T,S,P,O,I,M,A,N,j,L={},D=/\s+/g,R="Sortable"+(new Date).getTime(),F=window,B=F.document,U=F.parseInt,H=!!("draggable"in B.createElement("div")),$=function(e){return e=B.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),z=!1,W=Math.abs,V=[],G=g(function(e,t,n){if(n&&t.scroll){var i,o,r,a,s=t.scrollSensitivity,l=t.scrollSpeed,u=e.clientX,c=e.clientY,d=window.innerWidth,p=window.innerHeight;if(E!==n&&(x=t.scroll,E=n,!0===x)){x=n;do{if(x.offsetWidth<x.scrollWidth||x.offsetHeight<x.scrollHeight)break}while(x=x.parentNode)}x&&(i=x,o=x.getBoundingClientRect(),r=(W(o.right-u)<=s)-(W(o.left-u)<=s),a=(W(o.bottom-c)<=s)-(W(o.top-c)<=s)),r||a||(r=(d-u<=s)-(u<=s),a=(p-c<=s)-(c<=s),(r||a)&&(i=F)),L.vx===r&&L.vy===a&&L.el===i||(L.el=i,L.vx=r,L.vy=a,clearInterval(L.pid),i&&(L.pid=setInterval(function(){i===F?F.scrollTo(F.pageXOffset+r*l,F.pageYOffset+a*l):(a&&(i.scrollTop+=a*l),r&&(i.scrollLeft+=r*l))},24)))}},30),q=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,i=this.el,o=this.options,r=e.type,a=e.touches&&e.touches[0],s=(a||e).target,l=s,c=o.filter;if(!("mousedown"===r&&0!==e.button||o.disabled)&&(s=n(s,o.draggable,i))){if(O=m(s),"function"==typeof c){if(c.call(this,e,s,this))return u(t,l,"filter",s,i,O),void e.preventDefault()}else if(c&&(c=c.split(",").some(function(e){if(e=n(l,e.trim(),i))return u(t,e,"filter",s,i,O),!0})))return void e.preventDefault();o.handle&&!n(l,o.handle,i)||this._prepareDragStart(e,a,s)}},_prepareDragStart:function(e,t,n){var i,r=this,s=r.el,u=r.options,c=s.ownerDocument;n&&!b&&n.parentNode===s&&(A=e,C=s,b=n,y=b.parentNode,k=b.nextSibling,M=u.group,i=function(){r._disableDelayedDrag(),b.draggable=!0,a(b,r.options.chosenClass,!0),r._triggerDragStart(t)},u.ignore.split(",").forEach(function(e){l(b,e.trim(),d)}),o(c,"mouseup",r._onDrop),o(c,"touchend",r._onDrop),o(c,"touchcancel",r._onDrop),u.delay?(o(c,"mouseup",r._disableDelayedDrag),o(c,"touchend",r._disableDelayedDrag),o(c,"touchcancel",r._disableDelayedDrag),o(c,"mousemove",r._disableDelayedDrag),o(c,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(i,u.delay)):i())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(A={target:b,clientX:e.clientX,clientY:e.clientY},this._onDragStart(A,"touch")):this.nativeDraggable?(o(b,"dragend",this),o(C,"dragstart",this._onDragStart)):this._onDragStart(A,!0);try{B.selection?B.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){C&&b&&(a(b,this.options.ghostClass,!0),e.active=this,u(this,C,"start",b,C,O))},_emulateDragOver:function(){if(N){if(this._lastX===N.clientX&&this._lastY===N.clientY)return;this._lastX=N.clientX,this._lastY=N.clientY,$||s(_,"display","none");var e=B.elementFromPoint(N.clientX,N.clientY),t=e,n=" "+this.options.group.name,i=V.length;if(t)do{if(t[R]&&t[R].options.groups.indexOf(n)>-1){for(;i--;)V[i]({clientX:N.clientX,clientY:N.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);$||s(_,"display","")}},_onTouchMove:function(t){if(A){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,i=n.clientX-A.clientX,o=n.clientY-A.clientY,r=t.touches?"translate3d("+i+"px,"+o+"px,0)":"translate("+i+"px,"+o+"px)";j=!0,N=n,s(_,"webkitTransform",r),s(_,"mozTransform",r),s(_,"msTransform",r),s(_,"transform",r),t.preventDefault()}},_appendGhost:function(){if(!_){var e,t=b.getBoundingClientRect(),n=s(b),i=this.options;_=b.cloneNode(!0),a(_,i.ghostClass,!1),a(_,i.fallbackClass,!0),s(_,"top",t.top-U(n.marginTop,10)),s(_,"left",t.left-U(n.marginLeft,10)),s(_,"width",t.width),s(_,"height",t.height),s(_,"opacity","0.8"),s(_,"position","fixed"),s(_,"zIndex","100000"),s(_,"pointerEvents","none"),i.fallbackOnBody&&B.body.appendChild(_)||C.appendChild(_),e=_.getBoundingClientRect(),s(_,"width",2*t.width-e.width),s(_,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,i=this.options;this._offUpEvents(),"clone"==M.pull&&(w=b.cloneNode(!0),s(w,"display","none"),C.insertBefore(w,b)),t?("touch"===t?(o(B,"touchmove",this._onTouchMove),o(B,"touchend",this._onDrop),o(B,"touchcancel",this._onDrop)):(o(B,"mousemove",this._onTouchMove),o(B,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,b)),o(B,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var i,o,r,a=this.el,l=this.options,u=l.group,d=u.put,h=M===u,m=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),j=!0,M&&!l.disabled&&(h?m||(r=!C.contains(b)):M.pull&&d&&(M.name===u.name||d.indexOf&&~d.indexOf(M.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(G(e,l,this.el),z)return;if(i=n(e.target,l.draggable,a),o=b.getBoundingClientRect(),r)return t(!0),void(w||k?C.insertBefore(b,w||k):m||C.appendChild(b));if(0===a.children.length||a.children[0]===_||a===e.target&&(i=f(a,e))){if(i){if(i.animated)return;v=i.getBoundingClientRect()}t(h),!1!==c(C,a,b,o,i,v)&&(b.contains(a)||(a.appendChild(b),y=a),this._animate(o,b),i&&this._animate(v,i))}else if(i&&!i.animated&&i!==b&&void 0!==i.parentNode[R]){T!==i&&(T=i,S=s(i),P=s(i.parentNode));var g,v=i.getBoundingClientRect(),x=v.right-v.left,E=v.bottom-v.top,O=/left|right|inline/.test(S.cssFloat+S.display)||"flex"==P.display&&0===P["flex-direction"].indexOf("row"),I=i.offsetWidth>b.offsetWidth,A=i.offsetHeight>b.offsetHeight,N=(O?(e.clientX-v.left)/x:(e.clientY-v.top)/E)>.5,L=i.nextElementSibling,D=c(C,a,b,o,i,v);if(!1!==D){if(z=!0,setTimeout(p,30),t(h),1===D||-1===D)g=1===D;else if(O){var F=b.offsetTop,B=i.offsetTop;g=F===B?i.previousElementSibling===b&&!I||N&&I:B>F}else g=L!==b&&!A||N&&A;b.contains(a)||(g&&!L?a.appendChild(b):i.parentNode.insertBefore(b,g?L:i)),y=b.parentNode,this._animate(o,b),this._animate(v,i)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var i=t.getBoundingClientRect();s(t,"transition","none"),s(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,s(t,"transition","all "+n+"ms"),s(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){s(t,"transition",""),s(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(B,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(L.pid),clearTimeout(this._dragStartTimer),r(B,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(B,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(j&&(t.preventDefault(),!i.dropBubble&&t.stopPropagation()),_&&_.parentNode.removeChild(_),b&&(this.nativeDraggable&&r(b,"dragend",this),d(b),a(b,this.options.ghostClass,!1),a(b,this.options.chosenClass,!1),C!==y?(I=m(b))>=0&&(u(null,y,"sort",b,C,O,I),u(this,C,"sort",b,C,O,I),u(null,y,"add",b,C,O,I),u(this,C,"remove",b,C,O,I)):(w&&w.parentNode.removeChild(w),b.nextSibling!==k&&(I=m(b))>=0&&(u(this,C,"update",b,C,O,I),u(this,C,"sort",b,C,O,I))),e.active&&(null!==I&&-1!==I||(I=O),u(this,C,"end",b,C,O,I),this.save())),C=b=y=_=k=w=x=E=A=N=j=I=T=S=M=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?b&&(this._onDragOver(e),i(e)):"drop"!==t&&"dragend"!==t||this._onDrop(e)},toArray:function(){for(var e,t=[],i=this.el.children,o=0,r=i.length,a=this.options;o<r;o++)e=i[o],n(e,a.draggable,this.el)&&t.push(e.getAttribute(a.dataIdAttr)||h(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,o){var r=i.children[o];n(r,this.options.draggable,i)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&q(n)},destroy:function(){var e=this.el;e[R]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),V.splice(V.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:o,off:r,css:s,find:l,is:function(e,t){return!!n(e,t,e)},extend:v,throttle:g,closest:n,toggleClass:a,index:m},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("react-bootstrap",["react","react-dom"],t):"object"==typeof exports?exports.ReactBootstrap=t(require("react"),require("react-dom")):e.ReactBootstrap=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.utils=t.Well=t.Tooltip=t.Thumbnail=t.Tabs=t.TabPane=t.Table=t.TabContent=t.TabContainer=t.Tab=t.SplitButton=t.SafeAnchor=t.Row=t.ResponsiveEmbed=t.Radio=t.ProgressBar=t.Popover=t.PanelGroup=t.Panel=t.PaginationButton=t.Pagination=t.Pager=t.PageItem=t.PageHeader=t.OverlayTrigger=t.Overlay=t.NavItem=t.NavDropdown=t.NavbarBrand=t.Navbar=t.Nav=t.ModalTitle=t.ModalHeader=t.ModalFooter=t.ModalBody=t.Modal=t.MenuItem=t.Media=t.ListGroupItem=t.ListGroup=t.Label=t.Jumbotron=t.InputGroup=t.Image=t.HelpBlock=t.Grid=t.Glyphicon=t.FormGroup=t.FormControl=t.Form=t.Fade=t.DropdownButton=t.Dropdown=t.Collapse=t.Col=t.ControlLabel=t.Clearfix=t.Checkbox=t.CarouselItem=t.Carousel=t.ButtonToolbar=t.ButtonGroup=t.Button=t.BreadcrumbItem=t.Breadcrumb=t.Badge=t.Alert=t.Accordion=void 0;var o=n(120),r=i(o),a=n(121),s=i(a),l=n(122),u=i(l),c=n(123),d=i(c),p=n(76),f=i(p),h=n(32),m=i(h),g=n(77),v=i(g),b=n(124),y=i(b),_=n(125),w=i(_),C=n(78),k=i(C),x=n(127),E=i(x),T=n(128),S=i(T),P=n(130),O=i(P),I=n(129),M=i(I),A=n(50),N=i(A),j=n(39),L=i(j),D=n(131),R=i(D),F=n(40),B=i(F),U=n(133),H=i(U),$=n(134),z=i($),W=n(137),V=i(W),G=n(51),q=i(G),K=n(80),Y=i(K),Q=n(138),X=i(Q),J=n(139),Z=i(J),ee=n(140),te=i(ee),ne=n(143),ie=i(ne),oe=n(144),re=i(oe),ae=n(145),se=i(ae),le=n(81),ue=i(le),ce=n(52),de=i(ce),pe=n(152),fe=i(pe),he=n(153),me=i(he),ge=n(82),ve=i(ge),be=n(83),ye=i(be),_e=n(84),we=i(_e),Ce=n(85),ke=i(Ce),xe=n(86),Ee=i(xe),Te=n(156),Se=i(Te),Pe=n(88),Oe=i(Pe),Ie=n(155),Me=i(Ie),Ae=n(87),Ne=i(Ae),je=n(89),Le=i(je),De=n(160),Re=i(De),Fe=n(161),Be=i(Fe),Ue=n(162),He=i(Ue),$e=n(163),ze=i($e),We=n(164),Ve=i(We),Ge=n(91),qe=i(Ge),Ke=n(165),Ye=i(Ke),Qe=n(92),Xe=i(Qe),Je=n(166),Ze=i(Je),et=n(167),tt=i(et),nt=n(168),it=i(nt),ot=n(169),rt=i(ot),at=n(170),st=i(at),lt=n(16),ut=i(lt),ct=n(171),dt=i(ct),pt=n(173),ft=i(pt),ht=n(53),mt=i(ht),gt=n(54),vt=i(gt),bt=n(174),yt=i(bt),_t=n(93),wt=i(_t),Ct=n(175),kt=i(Ct),xt=n(176),Et=i(xt),Tt=n(177),St=i(Tt),Pt=n(178),Ot=i(Pt),It=n(182),Mt=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(It);t.Accordion=r.default,t.Alert=s.default,t.Badge=u.default,t.Breadcrumb=d.default,t.BreadcrumbItem=f.default,t.Button=m.default,t.ButtonGroup=v.default,t.ButtonToolbar=y.default,t.Carousel=w.default,t.CarouselItem=k.default,t.Checkbox=E.default,t.Clearfix=S.default,t.ControlLabel=O.default,t.Col=M.default,t.Collapse=N.default,t.Dropdown=L.default,t.DropdownButton=R.default,t.Fade=B.default,t.Form=H.default,t.FormControl=z.default,t.FormGroup=V.default,t.Glyphicon=q.default,t.Grid=Y.default,t.HelpBlock=X.default,t.Image=Z.default,t.InputGroup=te.default,t.Jumbotron=ie.default,t.Label=re.default,t.ListGroup=se.default,t.ListGroupItem=ue.default,t.Media=de.default,t.MenuItem=fe.default,t.Modal=me.default,t.ModalBody=ve.default,t.ModalFooter=ye.default,t.ModalHeader=we.default,t.ModalTitle=ke.default,t.Nav=Ee.default,t.Navbar=Se.default,t.NavbarBrand=Oe.default,t.NavDropdown=Me.default,t.NavItem=Ne.default,t.Overlay=Le.default,t.OverlayTrigger=Re.default,t.PageHeader=Be.default,t.PageItem=He.default,t.Pager=ze.default,t.Pagination=Ve.default,t.PaginationButton=qe.default,t.Panel=Ye.default,t.PanelGroup=Xe.default,t.Popover=Ze.default,t.ProgressBar=tt.default,t.Radio=it.default,t.ResponsiveEmbed=rt.default,t.Row=st.default,t.SafeAnchor=ut.default,t.SplitButton=dt.default,t.Tab=ft.default,t.TabContainer=mt.default,t.TabContent=vt.default,t.Table=yt.default,t.TabPane=wt.default,t.Tabs=kt.default,t.Thumbnail=Et.default,t.Tooltip=St.default,t.Well=Ot.default,t.utils=Mt},function(t,n){t.exports=e},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(185),r=i(o),a=n(184),s=i(a),l=n(55),u=i(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(55),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(95),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}},function(e,t,n){var i,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===o)for(var a in i)r.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var r={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(i=[],void 0!==(o=function(){return n}.apply(t,i))&&(e.exports=o))}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return"function"==typeof n[n.length-1]?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function r(e,t){return null==e.bsClass&&(0,v.default)(!1),e.bsClass+(t?"-"+t:"")}function a(e){var t,n=(t={},t[r(e)]=!0,t);if(e.bsSize){n[r(e,_.SIZE_MAP[e.bsSize]||e.bsSize)]=!0}return e.bsStyle&&(n[r(e,e.bsStyle)]=!0),n}function s(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function l(e){return"bsClass"===e||"bsSize"===e||"bsStyle"===e||"bsRole"===e}function u(e){var t={};return(0,f.default)(e).forEach(function(e){var n=e[0],i=e[1];l(n)||(t[n]=i)}),[s(e),t]}function c(e,t){var n={};t.forEach(function(e){n[e]=!0});var i={};return(0,f.default)(e).forEach(function(e){var t=e[0],o=e[1];l(t)||n[t]||(i[t]=o)}),[s(e),i]}function d(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];w(n,e)}t.__esModule=!0,t._curry=t.bsSizes=t.bsStyles=t.bsClass=void 0;var p=n(96),f=i(p),h=n(5),m=i(h);t.prefix=r,t.getClassSet=a,t.splitBsProps=u,t.splitBsPropsAndOmit=c,t.addStyle=d;var g=n(72),v=i(g),b=n(9),y=i(b),_=n(12),w=(t.bsClass=o(function(e,t){var n=t.propTypes||(t.propTypes={}),i=t.defaultProps||(t.defaultProps={});return n.bsClass=y.default.string,i.bsClass=e,t}),t.bsStyles=o(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var i=n.STYLES||[],o=n.propTypes||{};e.forEach(function(e){-1===i.indexOf(e)&&i.push(e)});var r=y.default.oneOf(i);if(n.STYLES=r._values=i,n.propTypes=(0,m.default)({},o,{bsStyle:r}),void 0!==t){(n.defaultProps||(n.defaultProps={})).bsStyle=t}return n}));t.bsSizes=o(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var i=n.SIZES||[],o=n.propTypes||{};e.forEach(function(e){-1===i.indexOf(e)&&i.push(e)});var r=[];i.forEach(function(e){var t=_.SIZE_MAP[e];t&&t!==e&&r.push(t),r.push(e)});var a=y.default.oneOf(r);return a._values=r,n.SIZES=i,n.propTypes=(0,m.default)({},o,{bsSize:a}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n}),t._curry=o},function(e,t,n){e.exports=n(249)()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i,o){var a=e[t],l=void 0===a?"undefined":r(a);return s.default.isValidElement(a)?new Error("Invalid "+i+" `"+o+"` of type ReactElement supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):"function"!==l&&"string"!==l?new Error("Invalid "+i+" `"+o+"` of value `"+a+"` supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):null}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=n(1),s=i(a),l=n(48),u=i(l);t.default=(0,u.default)(o)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return null!=e}).reduce(function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];e.apply(this,i),t.apply(this,i)}},null)}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.Size={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},t.SIZE_MAP={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"},t.DEVICE_SIZES=["lg","md","sm","xs"],t.State={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},t.Style={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"}},function(e,t,n){"use strict";function i(e,t,n){var i=0;return p.default.Children.map(e,function(e){return p.default.isValidElement(e)?t.call(n,e,i++):e})}function o(e,t,n){var i=0;p.default.Children.forEach(e,function(e){p.default.isValidElement(e)&&t.call(n,e,i++)})}function r(e){var t=0;return p.default.Children.forEach(e,function(e){p.default.isValidElement(e)&&++t}),t}function a(e,t,n){var i=0,o=[];return p.default.Children.forEach(e,function(e){p.default.isValidElement(e)&&t.call(n,e,i++)&&o.push(e)}),o}function s(e,t,n){var i=0,o=void 0;return p.default.Children.forEach(e,function(e){o||p.default.isValidElement(e)&&t.call(n,e,i++)&&(o=e)}),o}function l(e,t,n){var i=0,o=!0;return p.default.Children.forEach(e,function(e){o&&p.default.isValidElement(e)&&(t.call(n,e,i++)||(o=!1))}),o}function u(e,t,n){var i=0,o=!1;return p.default.Children.forEach(e,function(e){o||p.default.isValidElement(e)&&t.call(n,e,i++)&&(o=!0)}),o}function c(e){var t=[];return p.default.Children.forEach(e,function(e){p.default.isValidElement(e)&&t.push(e)}),t}t.__esModule=!0;var d=n(1),p=function(e){return e&&e.__esModule?e:{default:e}}(d);t.default={map:i,forEach:o,count:r,find:s,filter:a,every:l,some:u,toArray:c},e.exports=t.default},function(e,n){e.exports=t},function(e,t,n){"use strict";var i=function(){};e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return!e||"#"===e.trim()}t.__esModule=!0;var r=n(5),a=i(r),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(1),g=i(m),v=n(9),b=i(v),y=n(10),_=i(y),w={href:b.default.string,onClick:b.default.func,disabled:b.default.bool,role:b.default.string,tabIndex:b.default.oneOfType([b.default.number,b.default.string]),componentClass:_.default},C={componentClass:"a"},k=function(e){function t(n,i){(0,c.default)(this,t);var o=(0,p.default)(this,e.call(this,n,i));return o.handleClick=o.handleClick.bind(o),o}return(0,h.default)(t,e),t.prototype.handleClick=function(e){var t=this.props,n=t.disabled,i=t.href,r=t.onClick;return(n||o(i))&&e.preventDefault(),n?void e.stopPropagation():void(r&&r(e))},t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.disabled,i=(0,l.default)(e,["componentClass","disabled"]);return o(i.href)&&(i.role=i.role||"button",i.href=i.href||"#"),n&&(i.tabIndex=-1,i.style=(0,a.default)({pointerEvents:"none"
},i.style)),g.default.createElement(t,(0,a.default)({},i,{onClick:this.handleClick}))},t}(g.default.Component);k.propTypes=w,k.defaultProps=C,t.default=k,e.exports=t.default},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(65)("wks"),o=n(42),r=n(20).Symbol,a="function"==typeof r;(e.exports=function(e){return i[e]||(i[e]=a&&r[e]||(a?r:o)("Symbol."+e))}).store=i},function(e,t,n){var i=n(20),o=n(17),r=n(57),a=n(28),s="prototype",l=function(e,t,n){var u,c,d,p=e&l.F,f=e&l.G,h=e&l.S,m=e&l.P,g=e&l.B,v=e&l.W,b=f?o:o[t]||(o[t]={}),y=b[s],_=f?i:h?i[t]:(i[t]||{})[s];f&&(n=t);for(u in n)(c=!p&&_&&void 0!==_[u])&&u in b||(d=c?_[u]:n[u],b[u]=f&&"function"!=typeof _[u]?n[u]:g&&c?r(d,i):v&&_[u]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):m&&"function"==typeof d?r(Function.call,d):d,m&&((b.virtual||(b.virtual={}))[u]=d,e&l.R&&y&&!y[u]&&a(y,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(99),o=n(58);e.exports=function(e){return i(o(e))}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(26),o=n(98),r=n(68),a=Object.defineProperty;t.f=n(27)?Object.defineProperty:function(e,t,n){if(i(e),t=r(t,!0),i(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports={default:n(193),__esModule:!0}},function(e,t,n){var i=n(34);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(33)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(24),o=n(37);e.exports=n(27)?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(103),o=n(59);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t){"use strict";function n(e){return e&&e.ownerDocument||document}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(){return r.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):i(e,t)}:i}(),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(25),r=i(o),a=n(6),s=i(a),l=n(5),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(1),y=i(b),_=n(9),w=i(_),C=n(10),k=i(C),x=n(8),E=n(12),T=n(16),S=i(T),P={active:w.default.bool,disabled:w.default.bool,block:w.default.bool,onClick:w.default.func,componentClass:k.default,href:w.default.string,type:w.default.oneOf(["button","reset","submit"])},O={active:!1,block:!1,disabled:!1},I=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.renderAnchor=function(e,t){return y.default.createElement(S.default,(0,u.default)({},e,{className:(0,v.default)(t,e.disabled&&"disabled")}))},t.prototype.renderButton=function(e,t){var n=e.componentClass,i=(0,s.default)(e,["componentClass"]),o=n||"button";return y.default.createElement(o,(0,u.default)({},i,{type:i.type||"button",className:t}))},t.prototype.render=function(){var e,t=this.props,n=t.active,i=t.block,o=t.className,r=(0,s.default)(t,["active","block","className"]),a=(0,x.splitBsProps)(r),l=a[0],c=a[1],d=(0,u.default)({},(0,x.getClassSet)(l),(e={active:n},e[(0,x.prefix)(l,"block")]=i,e)),p=(0,v.default)(o,d);return c.href?this.renderAnchor(c,p):this.renderButton(c,p)},t}(y.default.Component);I.propTypes=P,I.defaultProps=O,t.default=(0,x.bsClass)("btn",(0,x.bsSizes)([E.Size.LARGE,E.Size.SMALL,E.Size.XSMALL],(0,x.bsStyles)([].concat((0,r.default)(E.State),[E.Style.DEFAULT,E.Style.PRIMARY,E.Style.LINK]),E.Style.DEFAULT,I))),e.exports=t.default},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.default)(r.default.findDOMNode(e))};var o=n(14),r=i(o),a=n(30),s=i(a);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(5),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(108),v=i(g),b=n(31),y=i(b),_=n(73),w=i(_),C=n(1),k=i(C),x=n(9),E=i(x),T=n(14),S=i(T),P=n(46),O=i(P),I=n(10),M=i(I),A=n(47),N=i(A),j=n(49),L=i(j),D=n(15),R=(i(D),n(77)),F=i(R),B=n(132),U=i(B),H=n(79),$=i(H),z=n(8),W=n(11),V=i(W),G=n(179),q=n(13),K=i(q),Y=$.default.defaultProps.bsRole,Q=U.default.defaultProps.bsRole,X={dropup:E.default.bool,id:(0,N.default)(E.default.oneOfType([E.default.string,E.default.number])),componentClass:M.default,children:(0,O.default)((0,G.requiredRoles)(Y,Q),(0,G.exclusiveRoles)(Q)),disabled:E.default.bool,pullRight:E.default.bool,open:E.default.bool,onClose:E.default.func,onToggle:E.default.func,onSelect:E.default.func,role:E.default.string,rootCloseEvent:E.default.oneOf(["click","mousedown"]),onMouseEnter:E.default.func,onMouseLeave:E.default.func},J={componentClass:F.default},Z=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handleClick=o.handleClick.bind(o),o.handleKeyDown=o.handleKeyDown.bind(o),o.handleClose=o.handleClose.bind(o),o._focusInDropdown=!1,o.lastOpenEventType=null,o}return(0,f.default)(t,e),t.prototype.componentDidMount=function(){this.focusNextOnOpen()},t.prototype.componentWillUpdate=function(e){!e.open&&this.props.open&&(this._focusInDropdown=(0,y.default)(S.default.findDOMNode(this.menu),(0,v.default)(document)))},t.prototype.componentDidUpdate=function(e){var t=this.props.open,n=e.open;t&&!n&&this.focusNextOnOpen(),!t&&n&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},t.prototype.handleClick=function(e){this.props.disabled||this.toggleOpen(e,{source:"click"})},t.prototype.handleKeyDown=function(e){if(!this.props.disabled)switch(e.keyCode){case w.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(e,{source:"keydown"}),e.preventDefault();break;case w.default.codes.esc:case w.default.codes.tab:this.handleClose(e,{source:"keydown"})}},t.prototype.toggleOpen=function(e,t){var n=!this.props.open;n&&(this.lastOpenEventType=t.source),this.props.onToggle&&this.props.onToggle(n,e,t)},t.prototype.handleClose=function(e,t){this.props.open&&this.toggleOpen(e,t)},t.prototype.focusNextOnOpen=function(){var e=this.menu;e.focusNext&&("keydown"!==this.lastOpenEventType&&"menuitem"!==this.props.role||e.focusNext())},t.prototype.focus=function(){var e=S.default.findDOMNode(this.toggle);e&&e.focus&&e.focus()},t.prototype.renderToggle=function(e,t){var n=this,i=function(e){n.toggle=e};return"string"==typeof e.ref||(i=(0,V.default)(e.ref,i)),(0,C.cloneElement)(e,(0,s.default)({},t,{ref:i,bsClass:(0,z.prefix)(t,"toggle"),onClick:(0,V.default)(e.props.onClick,this.handleClick),onKeyDown:(0,V.default)(e.props.onKeyDown,this.handleKeyDown)}))},t.prototype.renderMenu=function(e,t){var n=this,i=t.id,o=t.onClose,a=t.onSelect,l=t.rootCloseEvent,u=(0,r.default)(t,["id","onClose","onSelect","rootCloseEvent"]),c=function(e){n.menu=e};return"string"==typeof e.ref||(c=(0,V.default)(e.ref,c)),(0,C.cloneElement)(e,(0,s.default)({},u,{ref:c,labelledBy:i,bsClass:(0,z.prefix)(u,"menu"),onClose:(0,V.default)(e.props.onClose,o,this.handleClose),onSelect:(0,V.default)(e.props.onSelect,a,function(e,t){return n.handleClose(t,{source:"select"})}),rootCloseEvent:l}))},t.prototype.render=function(){var e,t=this,n=this.props,i=n.componentClass,o=n.id,a=n.dropup,l=n.disabled,u=n.pullRight,c=n.open,d=n.onClose,p=n.onSelect,f=n.role,h=n.bsClass,g=n.className,v=n.rootCloseEvent,b=n.children,y=(0,r.default)(n,["componentClass","id","dropup","disabled","pullRight","open","onClose","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete y.onToggle;var _=(e={},e[h]=!0,e.open=c,e.disabled=l,e);return a&&(_[h]=!1,_.dropup=!0),k.default.createElement(i,(0,s.default)({},y,{className:(0,m.default)(g,_)}),K.default.map(b,function(e){switch(e.props.bsRole){case Y:return t.renderToggle(e,{id:o,disabled:l,open:c,role:f,bsClass:h});case Q:return t.renderMenu(e,{id:o,open:c,pullRight:u,bsClass:h,onClose:d,onSelect:p,rootCloseEvent:v});default:return e}}))},t}(k.default.Component);Z.propTypes=X,Z.defaultProps=J,(0,z.bsClass)("dropdown",Z);var ee=(0,L.default)(Z,{open:"onToggle"});ee.Toggle=$.default,ee.Menu=U.default,t.default=ee,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(7),f=i(p),h=n(1),m=i(h),g=n(9),v=i(g),b=n(117),y=i(b),_={in:v.default.bool,mountOnEnter:v.default.bool,unmountOnExit:v.default.bool,transitionAppear:v.default.bool,timeout:v.default.number,onEnter:v.default.func,onEntering:v.default.func,onEntered:v.default.func,onExit:v.default.func,onExiting:v.default.func,onExited:v.default.func},w={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,transitionAppear:!1},C=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){return m.default.createElement(y.default,(0,r.default)({},this.props,{className:(0,f.default)(this.props.className,"fade"),enteredClassName:"in",enteringClassName:"in"}))},t}(m.default.Component);C.propTypes=_,C.defaultProps=w,t.default=C,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){var n=t.propTypes,i={},o={};return(0,r.default)(e).forEach(function(e){var t=e[0],r=e[1];n[t]?i[t]=r:o[t]=r}),[i,o]}t.__esModule=!0;var o=n(96),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i,e.exports=t.default},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=function(){};o.default&&(r=function(){return document.addEventListener?function(e,t,n,i){return e.addEventListener(t,n,i||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,function(t){t=t||window.event,t.target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)})}:void 0}()),t.default=r,e.exports=t.default},function(e,t){"use strict";function n(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i="",o="",r=t;if("string"==typeof t){if(void 0===n)return e.style[(0,a.default)(t)]||(0,c.default)(e).getPropertyValue((0,l.default)(t));(r={})[t]=n}Object.keys(r).forEach(function(t){var n=r[t];n||0===n?(0,m.default)(t)?o+=t+"("+n+") ":i+=(0,l.default)(t)+": "+n+";":(0,p.default)(e,(0,l.default)(t))}),o&&(i+=f.transform+": "+o+";"),e.style.cssText+=";"+i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(113),a=i(r),s=n(246),l=i(s),u=n(241),c=i(u),d=n(242),p=i(d),f=n(112),h=n(243),m=i(h);e.exports=t.default},function(e,t,n){"use strict";function i(){function e(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=null;return n.forEach(function(e){if(null==o){var n=e.apply(void 0,t);null!=n&&(o=n)}}),o}for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(0,r.default)(e)}t.__esModule=!0,t.default=i;var o=n(48),r=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t){"use strict";function n(e){return function(t,n,i,o,r){var a=i||"<<anonymous>>",s=r||n;if(null==t[n])return new Error("The "+o+" `"+s+"` is required to make `"+a+"` accessible for users of assistive technologies such as screen readers.");for(var l=arguments.length,u=Array(l>5?l-5:0),c=5;c<l;c++)u[c-5]=arguments[c];return e.apply(void 0,[t,n,i,o,r].concat(u))}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e){function t(t,n,i,o,r,a){var s=o||"<<anonymous>>",l=a||i;if(null==n[i])return t?new Error("Required "+r+" `"+l+"` was not specified in `"+s+"`."):null;for(var u=arguments.length,c=Array(u>6?u-6:0),d=6;d<u;d++)c[d-6]=arguments[d];return e.apply(void 0,[n,i,s,r,l].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function i(e,t,n,i,o){n&&(e._notifying=!0,n.call.apply(n,[e,i].concat(o)),e._notifying=!1),e._values[t]=i,e.isMounted()&&e.forceUpdate()}t.__esModule=!0;var o=n(257),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a={shouldComponentUpdate:function(){return!this._notifying}};t.default=(0,r.default)([a],i),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){e.offsetHeight}function r(e,t){var n=t["offset"+(0,S.default)(e)],i=I[e];return n+parseInt((0,y.default)(t,i[0]),10)+parseInt((0,y.default)(t,i[1]),10)}t.__esModule=!0;var a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(45),y=i(b),_=n(1),w=i(_),C=n(9),k=i(C),x=n(117),E=i(x),T=n(94),S=i(T),P=n(11),O=i(P),I={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]},M={in:k.default.bool,mountOnEnter:k.default.bool,unmountOnExit:k.default.bool,transitionAppear:k.default.bool,timeout:k.default.number,onEnter:k.default.func,onEntering:k.default.func,onEntered:k.default.func,onExit:k.default.func,onExiting:k.default.func,onExited:k.default.func,dimension:k.default.oneOfType([k.default.oneOf(["height","width"]),k.default.func]),getDimensionValue:k.default.func,role:k.default.string},A={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,transitionAppear:!1,dimension:"height",getDimensionValue:r},N=function(e){function t(n,i){(0,d.default)(this,t);var o=(0,f.default)(this,e.call(this,n,i));return o.handleEnter=o.handleEnter.bind(o),o.handleEntering=o.handleEntering.bind(o),o.handleEntered=o.handleEntered.bind(o),o.handleExit=o.handleExit.bind(o),o.handleExiting=o.handleExiting.bind(o),o}return(0,m.default)(t,e),t.prototype.handleEnter=function(e){var t=this._dimension();e.style[t]="0"},t.prototype.handleEntering=function(e){var t=this._dimension();e.style[t]=this._getScrollDimensionValue(e,t)},t.prototype.handleEntered=function(e){var t=this._dimension();e.style[t]=null},t.prototype.handleExit=function(e){var t=this._dimension();e.style[t]=this.props.getDimensionValue(t,e)+"px",o(e)},t.prototype.handleExiting=function(e){var t=this._dimension();e.style[t]="0"},t.prototype._dimension=function(){return"function"==typeof this.props.dimension?this.props.dimension():this.props.dimension},t.prototype._getScrollDimensionValue=function(e,t){return e["scroll"+(0,S.default)(t)]+"px"},t.prototype.render=function(){var e=this.props,t=e.onEnter,n=e.onEntering,i=e.onEntered,o=e.onExit,r=e.onExiting,a=e.className,l=(0,u.default)(e,["onEnter","onEntering","onEntered","onExit","onExiting","className"]);delete l.dimension,delete l.getDimensionValue;var c=(0,O.default)(this.handleEnter,t),d=(0,O.default)(this.handleEntering,n),p=(0,O.default)(this.handleEntered,i),f=(0,O.default)(this.handleExit,o),h=(0,O.default)(this.handleExiting,r),m={width:"width"===this._dimension()};return w.default.createElement(E.default,(0,s.default)({},l,{"aria-expanded":l.role?l.in:null,className:(0,v.default)(a,m),exitedClassName:"collapse",exitingClassName:"collapsing",enteredClassName:"collapse in",enteringClassName:"collapsing",onEnter:c,onEntering:d,onEntered:p,onExit:f,onExiting:h}))},t}(w.default.Component);N.propTypes=M,N.defaultProps=A,t.default=N,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w={glyph:y.default.string.isRequired},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.glyph,i=t.className,o=(0,s.default)(t,["glyph","className"]),a=(0,_.splitBsProps)(o),l=a[0],u=a[1],c=(0,r.default)({},(0,_.getClassSet)(l),(e={},e[(0,_.prefix)(l,n)]=!0,e));return v.default.createElement("span",(0,r.default)({},u,{className:(0,m.default)(i,c)}))},t}(v.default.Component);C.propTypes=w,t.default=(0,_.bsClass)("glyphicon",C),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(146),w=i(_),C=n(147),k=i(C),x=n(148),E=i(x),T=n(149),S=i(T),P=n(150),O=i(P),I=n(151),M=i(I),A=n(8),N={componentClass:y.default},j={componentClass:"div"},L=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,A.splitBsProps)(i),a=o[0],l=o[1],u=(0,A.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);L.propTypes=N,L.defaultProps=j,L.Heading=k.default,L.Body=w.default,L.Left=E.default,L.Right=M.default,L.List=S.default,L.ListItem=O.default,t.default=(0,A.bsClass)("media",L),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(1),f=i(p),h=n(9),m=i(h),g=n(49),v=i(g),b=m.default.oneOfType([m.default.string,m.default.number]),y={id:function(e){var t=null;if(!e.generateChildId){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(t=b.apply(void 0,[e].concat(i)))||e.id||(t=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return t},generateChildId:m.default.func,onSelect:m.default.func,activeKey:m.default.any},_={$bs_tabContainer:m.default.shape({activeKey:m.default.any,onSelect:m.default.func.isRequired,getTabId:m.default.func.isRequired,getPaneId:m.default.func.isRequired})},w=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.activeKey,n=e.onSelect,i=e.generateChildId,o=e.id,r=i||function(e,t){return o?o+"-"+t+"-"+e:null};return{$bs_tabContainer:{activeKey:t,onSelect:n,getTabId:function(e){return r(e,"tab")},getPaneId:function(e){return r(e,"pane")}}}},t.prototype.render=function(){var e=this.props,t=e.children,n=(0,r.default)(e,["children"]);return delete n.generateChildId,delete n.onSelect,delete n.activeKey,f.default.cloneElement(f.default.Children.only(t),n)},t}(f.default.Component);w.propTypes=y,w.childContextTypes=_,t.default=(0,v.default)(w,{activeKey:"onSelect"}),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(8),k={componentClass:w.default,animation:y.default.oneOfType([y.default.bool,w.default]),mountOnEnter:y.default.bool,unmountOnExit:y.default.bool},x={componentClass:"div",animation:!0,mountOnEnter:!1,unmountOnExit:!1},E={$bs_tabContainer:y.default.shape({activeKey:y.default.any})},T={$bs_tabContent:y.default.shape({bsClass:y.default.string,animation:y.default.oneOfType([y.default.bool,w.default]),activeKey:y.default.any,mountOnEnter:y.default.bool,unmountOnExit:y.default.bool,onPaneEnter:y.default.func.isRequired,onPaneExited:y.default.func.isRequired,exiting:y.default.bool.isRequired})},S=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handlePaneEnter=o.handlePaneEnter.bind(o),o.handlePaneExited=o.handlePaneExited.bind(o),o.state={activeKey:null,activeChild:null},o}return(0,f.default)(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.bsClass,n=e.animation,i=e.mountOnEnter,o=e.unmountOnExit,r=this.state.activeKey,a=this.getContainerActiveKey(),s=null!=r?r:a,l=null!=r&&r!==a;return{$bs_tabContent:{bsClass:t,animation:n,activeKey:s,mountOnEnter:i,unmountOnExit:o,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:l}}},t.prototype.componentWillReceiveProps=function(e){!e.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},t.prototype.componentWillUnmount=function(){this.isUnmounted=!0},t.prototype.handlePaneEnter=function(e,t){return!!this.props.animation&&t===this.getContainerActiveKey()&&(this.setState({activeKey:t,activeChild:e}),!0)},t.prototype.handlePaneExited=function(e){this.isUnmounted||this.setState(function(t){return t.activeChild!==e?null:{activeKey:null,activeChild:null}})},t.prototype.getContainerActiveKey=function(){var e=this.context.$bs_tabContainer;return e&&e.activeKey},t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,C.splitBsPropsAndOmit)(i,["animation","mountOnEnter","unmountOnExit"]),a=o[0],l=o[1];return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,(0,C.prefix)(a,"content"))}))},t}(v.default.Component);S.propTypes=k,S.defaultProps=x,S.contextTypes=E,S.childContextTypes=T,t.default=(0,C.bsClass)("tab",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(187),r=i(o),a=n(186),s=i(a),l="function"==typeof s.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(r.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":l(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(196);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=!0},function(e,t,n){var i=n(26),o=n(212),r=n(59),a=n(64)("IE_PROTO"),s=function(){},l="prototype",u=function(){var e,t=n(97)("iframe"),i=r.length;for(t.style.display="none",n(202).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;i--;)delete u[l][r[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[l]=i(e),n=new s,s[l]=null,n[a]=e):n=u(),void 0===t?n:o(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(24).f,o=n(23),r=n(18)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},function(e,t,n){var i=n(65)("keys"),o=n(42);e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var i=n(20),o="__core-js_shared__",r=i[o]||(i[o]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(58);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(34);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(20),o=n(17),r=n(60),a=n(70),s=n(24).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){t.f=n(18)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=function(){};o.default&&(r=function(){return document.addEventListener?function(e,t,n,i){return e.removeEventListener(t,n,i||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0}()),t.default=r,e.exports=t.default},function(e,t,n){"use strict";var i=function(e,t,n,i,o,r,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,o,r,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=i},function(e,t){t=e.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return r[e];var o=String(e),a=n[o.toLowerCase()];if(a)return a;var a=i[o.toLowerCase()];return a||(1===o.length?o.charCodeAt(0):void 0)};var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"â§":16,"â¥":18,"â":17,"â":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)n[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)n[o-48]=o;for(o=1;o<13;o++)n["f"+o]=o+111;for(o=0;o<10;o++)n["numpad "+o]=o+96;var r=t.names=t.title={};for(o in n)r[n[o]]=o;for(var a in i)n[a]=i[a]},function(e,t,n){"use strict";function i(e,t){return e="function"==typeof e?e():e,r.default.findDOMNode(e)||t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i,o){var a=e[t],l=void 0===a?"undefined":r(a);return s.default.isValidElement(a)?new Error("Invalid "+i+" `"+o+"` of type ReactElement supplied to `"+n+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===l&&"function"==typeof a.render||1===a.nodeType?null:new Error("Invalid "+i+" `"+o+"` of value `"+a+"` supplied to `"+n+"`, expected a ReactComponent or a DOMElement.")}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=n(1),s=i(a),l=n(48),u=i(l);t.default=(0,u.default)(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(16),w=i(_),C={active:y.default.bool,href:y.default.string,title:y.default.node,target:y.default.string},k={active:!1},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.href,i=e.title,o=e.target,a=e.className,l=(0,s.default)(e,["active","href","title","target","className"]),u={href:n,title:i,target:o};return v.default.createElement("li",{className:(0,m.default)(a,{active:t})},t?v.default.createElement("span",l):v.default.createElement(w.default,(0,r.default)({},l,u)))},t}(v.default.Component);x.propTypes=C,x.defaultProps=k,t.default=x,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(46),w=i(_),C=n(32),k=i(C),x=n(8),E={vertical:y.default.bool,justified:y.default.bool,block:(0,w.default)(y.default.bool,function(e){var t=e.block,n=e.vertical;return t&&!n?new Error("`block` requires `vertical` to be set to have any effect"):null})},T={block:!1,justified:!1,vertical:!1},S=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.block,i=t.justified,o=t.vertical,a=t.className,l=(0,s.default)(t,["block","justified","vertical","className"]),u=(0,x.splitBsProps)(l),c=u[0],d=u[1],p=(0,r.default)({},(0,x.getClassSet)(c),(e={},e[(0,x.prefix)(c)]=!o,e[(0,x.prefix)(c,"vertical")]=o,e[(0,x.prefix)(c,"justified")]=i,e[(0,x.prefix)(k.default.defaultProps,"block")]=n,e));return v.default.createElement("div",(0,r.default)({},d,{className:(0,m.default)(a,p)}))},t}(v.default.Component);S.propTypes=E,S.defaultProps=T,t.default=(0,x.bsClass)("btn-group",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(14),w=i(_),C=n(180),k=i(C),x={direction:y.default.oneOf(["prev","next"]),onAnimateOutEnd:y.default.func,active:y.default.bool,animateIn:y.default.bool,animateOut:y.default.bool,index:y.default.number},E={active:!1,animateIn:!1,animateOut:!1},T=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handleAnimateOutEnd=o.handleAnimateOutEnd.bind(o),o.state={direction:null},o.isUnmounted=!1,o}return(0,f.default)(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.active!==e.active&&this.setState({direction:null})},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props.active,i=e.active;!n&&i&&k.default.addEndEventListener(w.default.findDOMNode(this),this.handleAnimateOutEnd),n!==i&&setTimeout(function(){return t.startAnimation()},20)},t.prototype.componentWillUnmount=function(){this.isUnmounted=!0},t.prototype.handleAnimateOutEnd=function(){
this.isUnmounted||this.props.onAnimateOutEnd&&this.props.onAnimateOutEnd(this.props.index)},t.prototype.startAnimation=function(){this.isUnmounted||this.setState({direction:"prev"===this.props.direction?"right":"left"})},t.prototype.render=function(){var e=this.props,t=e.direction,n=e.active,i=e.animateIn,o=e.animateOut,a=e.className,l=(0,s.default)(e,["direction","active","animateIn","animateOut","className"]);delete l.onAnimateOutEnd,delete l.index;var u={item:!0,active:n&&!i||o};return t&&n&&i&&(u[t]=!0),this.state.direction&&(i||o)&&(u[this.state.direction]=!0),v.default.createElement("div",(0,r.default)({},l,{className:(0,m.default)(a,u)}))},t}(v.default.Component);T.propTypes=x,T.defaultProps=E,t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(1),m=i(h),g=n(9),v=i(g),b=n(7),y=i(b),_=n(32),w=i(_),C=n(16),k=i(C),x=n(8),E={noCaret:v.default.bool,open:v.default.bool,title:v.default.string,useAnchor:v.default.bool},T={open:!1,useAnchor:!1,bsRole:"toggle"},S=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.noCaret,n=e.open,i=e.useAnchor,o=e.bsClass,a=e.className,l=e.children,u=(0,s.default)(e,["noCaret","open","useAnchor","bsClass","className","children"]);delete u.bsRole;var c=i?k.default:w.default,d=!t;return m.default.createElement(c,(0,r.default)({},u,{role:"button",className:(0,y.default)(a,o),"aria-haspopup":!0,"aria-expanded":n}),l||u.title,d&&" ",d&&m.default.createElement("span",{className:"caret"}))},t}(m.default.Component);S.propTypes=E,S.defaultProps=T,t.default=(0,x.bsClass)("dropdown-toggle",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(8),k={fluid:y.default.bool,componentClass:w.default},x={componentClass:"div",fluid:!1},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.fluid,n=e.componentClass,i=e.className,o=(0,s.default)(e,["fluid","componentClass","className"]),a=(0,C.splitBsProps)(o),l=a[0],u=a[1],c=(0,C.prefix)(l,t&&"fluid");return v.default.createElement(n,(0,r.default)({},u,{className:(0,m.default)(i,c)}))},t}(v.default.Component);E.propTypes=k,E.defaultProps=x,t.default=(0,C.bsClass)("container",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(25),r=i(o),a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(1),y=i(b),_=n(9),w=i(_),C=n(8),k=n(12),x={active:w.default.any,disabled:w.default.any,header:w.default.node,listItem:w.default.bool,onClick:w.default.func,href:w.default.string,type:w.default.string},E={listItem:!1},T=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.renderHeader=function(e,t){return y.default.isValidElement(e)?(0,b.cloneElement)(e,{className:(0,v.default)(e.props.className,t)}):y.default.createElement("h4",{className:t},e)},t.prototype.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.className,o=e.header,r=e.listItem,a=e.children,l=(0,u.default)(e,["active","disabled","className","header","listItem","children"]),c=(0,C.splitBsProps)(l),d=c[0],p=c[1],f=(0,s.default)({},(0,C.getClassSet)(d),{active:t,disabled:n}),h=void 0;return p.href?h="a":p.onClick?(h="button",p.type=p.type||"button"):h=r?"li":"span",p.className=(0,v.default)(i,f),o?y.default.createElement(h,p,this.renderHeader(o,(0,C.prefix)(d,"heading")),y.default.createElement("p",{className:(0,C.prefix)(d,"text")},a)):y.default.createElement(h,p,a)},t}(y.default.Component);T.propTypes=x,T.defaultProps=E,t.default=(0,C.bsClass)("list-group-item",(0,C.bsStyles)((0,r.default)(k.State),T)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("modal-body",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("modal-footer",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w=n(11),C=i(w),k={"aria-label":y.default.string,closeButton:y.default.bool,onHide:y.default.func},x={"aria-label":"Close",closeButton:!1},E={$bs_modal:y.default.shape({onHide:y.default.func})},T=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e["aria-label"],n=e.closeButton,i=e.onHide,o=e.className,a=e.children,l=(0,s.default)(e,["aria-label","closeButton","onHide","className","children"]),u=this.context.$bs_modal,c=(0,_.splitBsProps)(l),d=c[0],p=c[1],f=(0,_.getClassSet)(d);return v.default.createElement("div",(0,r.default)({},p,{className:(0,m.default)(o,f)}),n&&v.default.createElement("button",{type:"button",className:"close","aria-label":t,onClick:(0,C.default)(u&&u.onHide,i)},v.default.createElement("span",{"aria-hidden":"true"},"Ã")),a)},t}(v.default.Component);T.propTypes=k,T.defaultProps=x,T.contextTypes=E,t.default=(0,_.bsClass)("modal-header",T),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"h4"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("modal-title",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(73),v=i(g),b=n(1),y=i(b),_=n(9),w=i(_),C=n(14),k=i(C),x=n(46),E=i(x),T=n(15),S=(i(T),n(8)),P=n(11),O=i(P),I=n(13),M=i(I),A={activeKey:w.default.any,activeHref:w.default.string,stacked:w.default.bool,justified:(0,E.default)(w.default.bool,function(e){var t=e.justified,n=e.navbar;return t&&n?Error("justified navbar `Nav`s are not supported"):null}),onSelect:w.default.func,role:w.default.string,navbar:w.default.bool,pullRight:w.default.bool,pullLeft:w.default.bool},N={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},j={$bs_navbar:w.default.shape({bsClass:w.default.string,onSelect:w.default.func}),$bs_tabContainer:w.default.shape({activeKey:w.default.any,onSelect:w.default.func.isRequired,getTabId:w.default.func.isRequired,getPaneId:w.default.func.isRequired})},L=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.componentDidUpdate=function(){var e=this;if(this._needsRefocus){this._needsRefocus=!1;var t=this.props.children,n=this.getActiveProps(),i=n.activeKey,o=n.activeHref,r=M.default.find(t,function(t){return e.isActive(t,i,o)}),a=M.default.toArray(t),s=a.indexOf(r),l=k.default.findDOMNode(this).children,u=l&&l[s];u&&u.firstChild&&u.firstChild.focus()}},t.prototype.handleTabKeyDown=function(e,t){var n=void 0;switch(t.keyCode){case v.default.codes.left:case v.default.codes.up:n=this.getNextActiveChild(-1);break;case v.default.codes.right:case v.default.codes.down:n=this.getNextActiveChild(1);break;default:return}t.preventDefault(),e&&n&&null!=n.props.eventKey&&e(n.props.eventKey),this._needsRefocus=!0},t.prototype.getNextActiveChild=function(e){var t=this,n=this.props.children,i=n.filter(function(e){return null!=e.props.eventKey&&!e.props.disabled}),o=this.getActiveProps(),r=o.activeKey,a=o.activeHref,s=M.default.find(n,function(e){return t.isActive(e,r,a)}),l=i.indexOf(s);if(-1===l)return i[0];var u=l+e,c=i.length;return u>=c?u=0:u<0&&(u=c-1),i[u]},t.prototype.getActiveProps=function(){var e=this.context.$bs_tabContainer;return e||this.props},t.prototype.isActive=function(e,t,n){var i=e.props;return!!(i.active||null!=t&&i.eventKey===t||n&&i.href===n)||i.active},t.prototype.getTabProps=function(e,t,n,i,o){var r=this;if(!t&&"tablist"!==n)return null;var a=e.props,s=a.id,l=a["aria-controls"],u=a.eventKey,c=a.role,d=a.onKeyDown,p=a.tabIndex;return t&&(s=t.getTabId(u),l=t.getPaneId(u)),"tablist"===n&&(c=c||"tab",d=(0,O.default)(function(e){return r.handleTabKeyDown(o,e)},d),p=i?p:-1),{id:s,role:c,onKeyDown:d,"aria-controls":l,tabIndex:p}},t.prototype.render=function(){var e,t=this,n=this.props,i=n.stacked,o=n.justified,a=n.onSelect,l=n.role,u=n.navbar,c=n.pullRight,d=n.pullLeft,p=n.className,f=n.children,h=(0,s.default)(n,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),g=this.context.$bs_tabContainer,v=l||(g?"tablist":null),_=this.getActiveProps(),w=_.activeKey,C=_.activeHref;delete h.activeKey,delete h.activeHref;var k=(0,S.splitBsProps)(h),x=k[0],E=k[1],T=(0,r.default)({},(0,S.getClassSet)(x),(e={},e[(0,S.prefix)(x,"stacked")]=i,e[(0,S.prefix)(x,"justified")]=o,e)),P=null!=u?u:this.context.$bs_navbar,I=void 0,A=void 0;if(P){var N=this.context.$bs_navbar||{bsClass:"navbar"};T[(0,S.prefix)(N,"nav")]=!0,A=(0,S.prefix)(N,"right"),I=(0,S.prefix)(N,"left")}else A="pull-right",I="pull-left";return T[A]=c,T[I]=d,y.default.createElement("ul",(0,r.default)({},E,{role:v,className:(0,m.default)(p,T)}),M.default.map(f,function(e){var n=t.isActive(e,w,C),i=(0,O.default)(e.props.onSelect,a,P&&P.onSelect,g&&g.onSelect);return(0,b.cloneElement)(e,(0,r.default)({},t.getTabProps(e,g,v,n,i),{active:n,activeKey:w,activeHref:C,onSelect:i}))}))},t}(y.default.Component);L.propTypes=A,L.defaultProps=N,L.contextTypes=j,t.default=(0,S.bsClass)("nav",(0,S.bsStyles)(["tabs","pills"],L)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(16),w=i(_),C=n(11),k=i(C),x={active:y.default.bool,disabled:y.default.bool,role:y.default.string,href:y.default.string,onClick:y.default.func,onSelect:y.default.func,eventKey:y.default.any},E={active:!1,disabled:!1},T=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handleClick=o.handleClick.bind(o),o}return(0,f.default)(t,e),t.prototype.handleClick=function(e){this.props.onSelect&&(e.preventDefault(),this.props.disabled||this.props.onSelect(this.props.eventKey,e))},t.prototype.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.onClick,o=e.className,a=e.style,l=(0,s.default)(e,["active","disabled","onClick","className","style"]);return delete l.onSelect,delete l.eventKey,delete l.activeKey,delete l.activeHref,l.role?"tab"===l.role&&(l["aria-selected"]=t):"#"===l.href&&(l.role="button"),v.default.createElement("li",{role:"presentation",className:(0,m.default)(o,{active:t,disabled:n}),style:a},v.default.createElement(w.default,(0,r.default)({},l,{disabled:n,onClick:(0,k.default)(i,this.handleClick)})))},t}(v.default.Component);T.propTypes=x,T.defaultProps=E,t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w={$bs_navbar:y.default.shape({bsClass:y.default.string})},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,s.default)(e,["className","children"]),o=this.context.$bs_navbar||{bsClass:"navbar"},a=(0,_.prefix)(o,"brand");return v.default.isValidElement(n)?v.default.cloneElement(n,{className:(0,m.default)(n.props.className,t,a)}):v.default.createElement("span",(0,r.default)({},i,{className:(0,m.default)(t,a)}),n)},t}(v.default.Component);C.contextTypes=w,t.default=C,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(252),w=i(_),C=n(10),k=i(C),x=n(40),E=i(x),T=(0,f.default)({},w.default.propTypes,{show:y.default.bool,rootClose:y.default.bool,onHide:y.default.func,animation:y.default.oneOfType([y.default.bool,k.default]),onEnter:y.default.func,onEntering:y.default.func,onEntered:y.default.func,onExit:y.default.func,onExiting:y.default.func,onExited:y.default.func,placement:y.default.oneOf(["top","right","bottom","left"])}),S={animation:E.default,rootClose:!1,show:!1,placement:"right"},P=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.animation,n=e.children,i=(0,r.default)(e,["animation","children"]),o=!0===t?E.default:t||null,a=void 0;return a=o?n:(0,g.cloneElement)(n,{className:(0,m.default)(n.props.className,"in")}),v.default.createElement(w.default,(0,f.default)({},i,{transition:o}),a)},t}(v.default.Component);P.propTypes=T,P.defaultProps=S,t.default=P,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(16),w=i(_),C=n(11),k=i(C),x={disabled:y.default.bool,previous:y.default.bool,next:y.default.bool,onClick:y.default.func,onSelect:y.default.func,eventKey:y.default.any},E={disabled:!1,previous:!1,next:!1},T=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handleSelect=o.handleSelect.bind(o),o}return(0,f.default)(t,e),t.prototype.handleSelect=function(e){var t=this.props,n=t.disabled,i=t.onSelect,o=t.eventKey;(i||n)&&e.preventDefault(),n||i&&i(o,e)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.previous,i=e.next,o=e.onClick,a=e.className,l=e.style,u=(0,s.default)(e,["disabled","previous","next","onClick","className","style"]);return delete u.onSelect,delete u.eventKey,v.default.createElement("li",{className:(0,m.default)(a,{disabled:t,previous:n,next:i}),style:l},v.default.createElement(w.default,(0,r.default)({},u,{disabled:t,onClick:(0,k.default)(o,this.handleSelect)})))},t}(v.default.Component);T.propTypes=x,T.defaultProps=E,t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(16),k=i(C),x=n(11),E=i(x),T={componentClass:w.default,className:y.default.string,eventKey:y.default.any,onSelect:y.default.func,disabled:y.default.bool,active:y.default.bool,onClick:y.default.func},S={componentClass:k.default,active:!1,disabled:!1},P=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handleClick=o.handleClick.bind(o),o}return(0,f.default)(t,e),t.prototype.handleClick=function(e){var t=this.props,n=t.disabled,i=t.onSelect,o=t.eventKey;n||i&&i(o,e)},t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.active,i=e.disabled,o=e.onClick,a=e.className,l=e.style,u=(0,s.default)(e,["componentClass","active","disabled","onClick","className","style"]);return t===k.default&&delete u.eventKey,delete u.onSelect,v.default.createElement("li",{className:(0,m.default)(a,{active:n,disabled:i}),style:l},v.default.createElement(t,(0,r.default)({},u,{disabled:i,onClick:(0,E.default)(o,this.handleClick)})))},t}(v.default.Component);P.propTypes=T,P.defaultProps=S,t.default=P,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(95),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(1),y=i(b),_=n(9),w=i(_),C=n(8),k=n(11),x=i(k),E=n(13),T=i(E),S={accordion:w.default.bool,activeKey:w.default.any,defaultActiveKey:w.default.any,onSelect:w.default.func,role:w.default.string},P={accordion:!1},O=function(e){function t(n,i){(0,d.default)(this,t);var o=(0,f.default)(this,e.call(this,n,i));return o.handleSelect=o.handleSelect.bind(o),o.state={activeKey:n.defaultActiveKey},o}return(0,m.default)(t,e),t.prototype.handleSelect=function(e,t){t.preventDefault(),this.props.onSelect&&this.props.onSelect(e,t),this.state.activeKey===e&&(e=null),this.setState({activeKey:e})},t.prototype.render=function(){var e=this,t=this.props,n=t.accordion,i=t.activeKey,o=t.className,a=t.children,l=(0,u.default)(t,["accordion","activeKey","className","children"]),c=(0,C.splitBsPropsAndOmit)(l,["defaultActiveKey","onSelect"]),d=c[0],p=c[1],f=void 0;n&&(f=null!=i?i:this.state.activeKey,p.role=p.role||"tablist");var h=(0,C.getClassSet)(d);return y.default.createElement("div",(0,r.default)({},p,{className:(0,v.default)(o,h)}),T.default.map(a,function(t){var i={bsStyle:t.props.bsStyle||d.bsStyle};return n&&(0,s.default)(i,{headerRole:"tab",panelRole:"tabpanel",collapsible:!0,expanded:t.props.eventKey===f,onSelect:(0,x.default)(e.handleSelect,t.props.onSelect)}),(0,b.cloneElement)(t,i)}))},t}(y.default.Component);O.propTypes=S,O.defaultProps=P,t.default=(0,C.bsClass)("panel-group",O),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(15),k=(i(C),n(8)),x=n(11),E=i(x),T=n(40),S=i(T),P={eventKey:y.default.any,animation:y.default.oneOfType([y.default.bool,w.default]),id:y.default.string,"aria-labelledby":y.default.string,bsClass:y.default.string,onEnter:y.default.func,onEntering:y.default.func,onEntered:y.default.func,onExit:y.default.func,onExiting:y.default.func,onExited:y.default.func,mountOnEnter:y.default.bool,unmountOnExit:y.default.bool},O={$bs_tabContainer:y.default.shape({getTabId:y.default.func,getPaneId:y.default.func}),$bs_tabContent:y.default.shape({bsClass:y.default.string,animation:y.default.oneOfType([y.default.bool,w.default]),activeKey:y.default.any,mountOnEnter:y.default.bool,unmountOnExit:y.default.bool,onPaneEnter:y.default.func.isRequired,onPaneExited:y.default.func.isRequired,exiting:y.default.bool.isRequired})},I={$bs_tabContainer:y.default.oneOf([null])},M=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handleEnter=o.handleEnter.bind(o),o.handleExited=o.handleExited.bind(o),o.in=!1,o}return(0,f.default)(t,e),t.prototype.getChildContext=function(){return{$bs_tabContainer:null}},t.prototype.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},t.prototype.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},t.prototype.componentWillUnmount=function(){this.in&&this.handleExited()},t.prototype.handleEnter=function(){var e=this.context.$bs_tabContent;e&&(this.in=e.onPaneEnter(this,this.props.eventKey))},t.prototype.handleExited=function(){var e=this.context.$bs_tabContent;e&&(e.onPaneExited(this),this.in=!1)},t.prototype.getAnimation=function(){if(null!=this.props.animation)return this.props.animation;var e=this.context.$bs_tabContent;return e&&e.animation},t.prototype.isActive=function(){var e=this.context.$bs_tabContent,t=e&&e.activeKey;return this.props.eventKey===t},t.prototype.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},t.prototype.render=function(){var e=this.props,t=e.eventKey,n=e.className,i=e.onEnter,o=e.onEntering,a=e.onEntered,l=e.onExit,u=e.onExiting,c=e.onExited,d=e.mountOnEnter,p=e.unmountOnExit,f=(0,s.default)(e,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit"]),h=this.context,g=h.$bs_tabContent,b=h.$bs_tabContainer,y=(0,k.splitBsPropsAndOmit)(f,["animation"]),_=y[0],w=y[1],C=this.isActive(),x=this.getAnimation(),T=null!=d?d:g&&g.mountOnEnter,P=null!=p?p:g&&g.unmountOnExit;if(!C&&!x&&P)return null;var O=!0===x?S.default:x||null;g&&(_.bsClass=(0,k.prefix)(g,"pane"));var I=(0,r.default)({},(0,k.getClassSet)(_),{active:C});b&&(w.id=b.getPaneId(t),w["aria-labelledby"]=b.getTabId(t));var M=v.default.createElement("div",(0,r.default)({},w,{role:"tabpanel","aria-hidden":!C,className:(0,m.default)(n,I)}));if(O){var A=g&&g.exiting;return v.default.createElement(O,{in:C&&!A,onEnter:(0,E.default)(this.handleEnter,i),onEntering:o,onEntered:a,onExit:l,onExiting:u,onExited:(0,E.default)(this.handleExited,c),mountOnEnter:T,unmountOnExit:P},M)}return M},t}(v.default.Component);M.propTypes=P,M.contextTypes=O,M.childContextTypes=I,t.default=(0,k.bsClass)("tab-pane",M),e.exports=t.default},function(e,t){"use strict";function n(e){return""+e.charAt(0).toUpperCase()+e.slice(1)}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t,n){e.exports={default:n(189),__esModule:!0}},function(e,t,n){e.exports={default:n(191),__esModule:!0}},function(e,t,n){var i=n(34),o=n(20).document,r=i(o)&&i(o.createElement);e.exports=function(e){return r?o.createElement(e):{}}},function(e,t,n){e.exports=!n(27)&&!n(33)(function(){return 7!=Object.defineProperty(n(97)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(56);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var i=n(60),o=n(19),r=n(105),a=n(28),s=n(23),l=n(35),u=n(206),c=n(63),d=n(214),p=n(18)("iterator"),f=!([].keys&&"next"in[].keys()),h="keys",m="values",g=function(){return this};e.exports=function(e,t,n,v,b,y,_){u(n,t,v);var w,C,k,x=function(e){if(!f&&e in P)return P[e];switch(e){case h:case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",T=b==m,S=!1,P=e.prototype,O=P[p]||P["@@iterator"]||b&&P[b],I=O||x(b),M=b?T?x("entries"):I:void 0,A="Array"==t?P.entries||O:O;if(A&&(k=d(A.call(new e)))!==Object.prototype&&(c(k,E,!0),i||s(k,p)||a(k,p,g)),T&&O&&O.name!==m&&(S=!0,I=function(){return O.call(this)}),i&&!_||!f&&!S&&P[p]||a(P,p,I),l[t]=I,l[E]=g,b)if(w={values:T?I:x(m),keys:y?I:x(h),entries:M},_)for(C in w)C in P||r(P,C,w[C]);else o(o.P+o.F*(f||S),t,w);return w}},function(e,t,n){var i=n(36),o=n(37),r=n(21),a=n(68),s=n(23),l=n(98),u=Object.getOwnPropertyDescriptor;t.f=n(27)?u:function(e,t){if(e=r(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(103),o=n(59).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(23),o=n(21),r=n(198)(!1),a=n(64)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~r(u,n)||u.push(n));return u}},function(e,t,n){var i=n(29),o=n(21),r=n(36).f;e.exports=function(e){return function(t){for(var n,a=o(t),s=i(a),l=s.length,u=0,c=[];l>u;)r.call(a,n=s[u++])&&c.push(e?[n,a[n]]:a[n]);return c}}},function(e,t,n){e.exports=n(28)},function(e,t,n){var i=n(66),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t,n){"use strict";var i=n(216)(!0);n(100)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)();try{return e.activeElement}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(30),r=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t){"use strict";function n(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,c.default)(e),n=(0,l.default)(t),i=t&&t.documentElement,o={top:0,left:0,height:0,width:0};if(t)return(0,a.default)(i,e)?(void 0!==e.getBoundingClientRect&&(o=e.getBoundingClientRect()),o={top:o.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:o.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0),width:(null==o.width?e.offsetWidth:o.width)||0,height:(null==o.height?e.offsetHeight:o.height)||0}):o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(31),a=i(r),s=n(44),l=i(s),u=n(30),c=i(u);e.exports=t.default},function(e,t,n){"use strict";function i(e,t){var n=(0,r.default)(e);return void 0===t?n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop:void(n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(44),r=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var i=n(22),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r="transform",a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,p=void 0,f=void 0,h=void 0,m=void 0,g=void 0;if(o.default){var v=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),i=void 0,o=void 0,r="",a=0;a<n.length;a++){var s=n[a];if(s+"TransitionProperty"in e){r="-"+s.toLowerCase(),i=t[s]("TransitionEnd"),o=t[s]("AnimationEnd");break}}return!i&&"transitionProperty"in e&&(i="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:i,prefix:r}}();a=v.prefix,t.transitionEnd=s=v.transitionEnd,t.animationEnd=l=v.animationEnd,t.transform=r=a+"-"+r,t.transitionProperty=u=a+"-transition-property",t.transitionDuration=c=a+"-transition-duration",t.transitionDelay=p=a+"-transition-delay",t.transitionTiming=d=a+"-transition-timing-function",t.animationName=f=a+"-animation-name",t.animationDuration=h=a+"-animation-duration",t.animationTiming=m=a+"-animation-delay",t.animationDelay=g=a+"-animation-timing-function"}t.transform=r,t.transitionProperty=u,t.transitionTiming=d,t.transitionDelay=p,t.transitionDuration=c,t.transitionEnd=s,t.animationName=f,t.animationDuration=h,t.animationTiming=m,t.animationDelay=g,t.animationEnd=l,t.default={transform:r,end:s,property:u,timing:d,delay:p,duration:c}},function(e,t,n){"use strict";function i(e){return(0,r.default)(e.replace(a,"ms-"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(244),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=/^-ms-/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((!r||e)&&o.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return r};var i=n(22),o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=void 0;e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=i(o),a=n(14),s=i(a),l=n(75),u=i(l),c=n(38),d=i(c),p=n(74),f=i(p),h=r.default.createClass({displayName:"Portal",propTypes:{container:r.default.PropTypes.oneOfType([u.default,r.default.PropTypes.func])},componentDidMount:function(){this._renderOverlay()},componentDidUpdate:function(){this._renderOverlay()},componentWillReceiveProps:function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,f.default)(e.container,(0,d.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},componentWillUnmount:function(){this._unrenderOverlay(),this._unmountOverlayTarget()},_mountOverlayTarget:function(){this._overlayTarget||(this._overlayTarget=document.createElement("div"),this._portalContainerNode=(0,f.default)(this.props.container,(0,d.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},_unmountOverlayTarget:function(){this._overlayTarget&&(this._portalContainerNode.removeChild(this._overlayTarget),this._overlayTarget=null),this._portalContainerNode=null},_renderOverlay:function(){var e=this.props.children?r.default.Children.only(this.props.children):null;null!==e?(this._mountOverlayTarget(),this._overlayInstance=s.default.unstable_renderSubtreeIntoContainer(this,e,this._overlayTarget)):(this._unrenderOverlay(),this._unmountOverlayTarget())},_unrenderOverlay:function(){this._overlayTarget&&(s.default.unmountComponentAtNode(this._overlayTarget),this._overlayInstance=null)},render:function(){return null},getMountNode:function(){return this._overlayTarget},getOverlayDOMNode:function(){if(!this.isMounted())throw new Error("getOverlayDOMNode(): A component must be mounted to have a DOM node.");return this._overlayInstance?s.default.findDOMNode(this._overlayInstance):null}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
;return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return 0===e.button}function l(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(31),d=i(c),p=n(1),f=i(p),h=n(14),m=i(h),g=n(118),v=i(g),b=n(38),y=i(b),_=27,w=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.handleMouseCapture=function(e){i.preventMouseRootClose=l(e)||!s(e)||(0,d.default)(m.default.findDOMNode(i),e.target)},i.handleMouse=function(e){!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(e)},i.handleKeyUp=function(e){e.keyCode===_&&i.props.onRootClose&&i.props.onRootClose(e)},i.preventMouseRootClose=!1,i}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.disabled||this.addEventListeners()}},{key:"componentDidUpdate",value:function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()}},{key:"componentWillUnmount",value:function(){this.props.disabled||this.removeEventListeners()}},{key:"addEventListeners",value:function(){var e=this.props.event,t=(0,y.default)(this);this.documentMouseCaptureListener=(0,v.default)(t,e,this.handleMouseCapture,!0),this.documentMouseListener=(0,v.default)(t,e,this.handleMouse),this.documentKeyupListener=(0,v.default)(t,"keyup",this.handleKeyUp)}},{key:"removeEventListeners",value:function(){this.documentMouseCaptureListener&&this.documentMouseCaptureListener.remove(),this.documentMouseListener&&this.documentMouseListener.remove(),this.documentKeyupListener&&this.documentKeyupListener.remove()}},{key:"render",value:function(){return this.props.children}}]),t}(f.default.Component);w.displayName="RootCloseWrapper",w.propTypes={onRootClose:f.default.PropTypes.func,children:f.default.PropTypes.element,disabled:f.default.PropTypes.bool,event:f.default.PropTypes.oneOf(["click","mousedown"])},w.defaultProps={event:"click"},t.default=w,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}Object.defineProperty(t,"__esModule",{value:!0}),t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(7),p=i(d),f=n(43),h=i(f),m=n(112),g=i(m),v=n(1),b=i(v),y=n(14),_=i(y),w=g.default.end,C=t.UNMOUNTED=0,k=t.EXITED=1,x=t.ENTERING=2,E=t.ENTERED=3,T=t.EXITING=4,S=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=void 0;return i.nextStatus=null,e.in?e.transitionAppear?(o=k,i.nextStatus=x):o=E:o=e.unmountOnExit||e.mountOnEnter?C:k,i.state={status:o},i.nextCallback=null,i}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.updateStatus()}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.status;e.in?(t===C&&this.setState({status:k}),t!==x&&t!==E&&(this.nextStatus=x)):t!==x&&t!==E||(this.nextStatus=T)}},{key:"componentDidUpdate",value:function(){this.updateStatus()}},{key:"componentWillUnmount",value:function(){this.cancelNextCallback()}},{key:"updateStatus",value:function(){var e=this;if(null!==this.nextStatus){this.cancelNextCallback();var t=_.default.findDOMNode(this);this.nextStatus===x?(this.props.onEnter(t),this.safeSetState({status:x},function(){e.props.onEntering(t),e.onTransitionEnd(t,function(){e.safeSetState({status:E},function(){e.props.onEntered(t)})})})):(this.props.onExit(t),this.safeSetState({status:T},function(){e.props.onExiting(t),e.onTransitionEnd(t,function(){e.safeSetState({status:k},function(){e.props.onExited(t)})})})),this.nextStatus=null}else this.props.unmountOnExit&&this.state.status===k&&this.setState({status:C})}},{key:"cancelNextCallback",value:function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)}},{key:"safeSetState",value:function(e,t){this.setState(e,this.setNextCallback(t))}},{key:"setNextCallback",value:function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback}},{key:"onTransitionEnd",value:function(e,t){this.setNextCallback(t),e?((0,h.default)(e,w,this.nextCallback),setTimeout(this.nextCallback,this.props.timeout)):setTimeout(this.nextCallback,0)}},{key:"render",value:function(){var e=this.state.status;if(e===C)return null;var n=this.props,i=n.children,r=n.className,a=o(n,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete a[e]});var s=void 0;e===k?s=this.props.exitedClassName:e===x?s=this.props.enteringClassName:e===E?s=this.props.enteredClassName:e===T&&(s=this.props.exitingClassName);var l=b.default.Children.only(i);return b.default.cloneElement(l,u({},a,{className:(0,p.default)(l.props.className,r,s)}))}}]),t}(b.default.Component);S.propTypes={in:b.default.PropTypes.bool,mountOnEnter:b.default.PropTypes.bool,unmountOnExit:b.default.PropTypes.bool,transitionAppear:b.default.PropTypes.bool,timeout:b.default.PropTypes.number,exitedClassName:b.default.PropTypes.string,exitingClassName:b.default.PropTypes.string,enteredClassName:b.default.PropTypes.string,enteringClassName:b.default.PropTypes.string,onEnter:b.default.PropTypes.func,onEntering:b.default.PropTypes.func,onEntered:b.default.PropTypes.func,onExit:b.default.PropTypes.func,onExiting:b.default.PropTypes.func,onExited:b.default.PropTypes.func},S.displayName="Transition",S.defaultProps={in:!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},t.default=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){return(0,r.default)(e,t,n,i),{remove:function(){(0,s.default)(e,t,n,i)}}};var o=n(43),r=i(o),a=n(71),s=i(a);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return e&&"body"===e.tagName.toLowerCase()}function r(e){var t=(0,c.default)(e),n=(0,l.default)(t),i=n.innerWidth;if(!i){var o=t.documentElement.getBoundingClientRect();i=o.right-Math.abs(o.left)}return t.body.clientWidth<i}function a(e){return(0,l.default)(e)||o(e)?r(e):e.scrollHeight>e.clientHeight}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var s=n(44),l=i(s),u=n(30),c=i(u);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(1),f=i(p),h=n(92),m=i(h),g=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){return f.default.createElement(m.default,(0,r.default)({},this.props,{accordion:!0}),this.props.children)},t}(f.default.Component);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(25),r=i(o),a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(1),y=i(b),_=n(9),w=i(_),C=n(8),k=n(12),x={onDismiss:w.default.func,closeLabel:w.default.string},E={closeLabel:"Close alert"},T=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.renderDismissButton=function(e){return y.default.createElement("button",{type:"button",className:"close",onClick:e,"aria-hidden":"true",tabIndex:"-1"},y.default.createElement("span",null,"Ã"))},t.prototype.renderSrOnlyDismissButton=function(e,t){return y.default.createElement("button",{type:"button",className:"close sr-only",onClick:e},t)},t.prototype.render=function(){var e,t=this.props,n=t.onDismiss,i=t.closeLabel,o=t.className,r=t.children,a=(0,u.default)(t,["onDismiss","closeLabel","className","children"]),l=(0,C.splitBsProps)(a),c=l[0],d=l[1],p=!!n,f=(0,s.default)({},(0,C.getClassSet)(c),(e={},e[(0,C.prefix)(c,"dismissable")]=p,e));return y.default.createElement("div",(0,s.default)({},d,{role:"alert",className:(0,v.default)(o,f)}),p&&this.renderDismissButton(n),r,p&&this.renderSrOnlyDismissButton(n,i))},t}(y.default.Component);T.propTypes=x,T.defaultProps=E,t.default=(0,C.bsStyles)((0,r.default)(k.State),k.State.INFO,(0,C.bsClass)("alert",T)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w={pullRight:y.default.bool},C={pullRight:!1},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.hasContent=function(e){var t=!1;return v.default.Children.forEach(e,function(e){t||(e||0===e)&&(t=!0)}),t},t.prototype.render=function(){var e=this.props,t=e.pullRight,n=e.className,i=e.children,o=(0,s.default)(e,["pullRight","className","children"]),a=(0,_.splitBsProps)(o),l=a[0],u=a[1],c=(0,r.default)({},(0,_.getClassSet)(l),{"pull-right":t,hidden:!this.hasContent(i)});return v.default.createElement("span",(0,r.default)({},u,{className:(0,m.default)(n,c)}),i)},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("badge",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(76),y=i(b),_=n(8),w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,_.splitBsProps)(n),o=i[0],a=i[1],l=(0,_.getClassSet)(o);return v.default.createElement("ol",(0,r.default)({},a,{role:"navigation","aria-label":"breadcrumbs",className:(0,m.default)(t,l)}))},t}(v.default.Component);w.Item=y.default,t.default=(0,_.bsClass)("breadcrumb",w),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(32),y=i(b),_=n(8),w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,_.splitBsProps)(n),o=i[0],a=i[1],l=(0,_.getClassSet)(o);return v.default.createElement("div",(0,r.default)({},a,{role:"toolbar",className:(0,m.default)(t,l)}))},t}(v.default.Component);t.default=(0,_.bsClass)("btn-toolbar",(0,_.bsSizes)(y.default.SIZES,w)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(126),w=i(_),C=n(78),k=i(C),x=n(51),E=i(x),T=n(16),S=i(T),P=n(8),O=n(13),I=i(O),M={slide:y.default.bool,indicators:y.default.bool,interval:y.default.number,controls:y.default.bool,pauseOnHover:y.default.bool,wrap:y.default.bool,onSelect:y.default.func,onSlideEnd:y.default.func,activeIndex:y.default.number,defaultActiveIndex:y.default.number,direction:y.default.oneOf(["prev","next"]),prevIcon:y.default.node,prevLabel:y.default.string,nextIcon:y.default.node,nextLabel:y.default.string},A={slide:!0,interval:5e3,pauseOnHover:!0,wrap:!0,indicators:!0,controls:!0,prevIcon:v.default.createElement(E.default,{glyph:"chevron-left"}),prevLabel:"Previous",nextIcon:v.default.createElement(E.default,{glyph:"chevron-right"}),nextLabel:"Next"},N=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));o.handleMouseOver=o.handleMouseOver.bind(o),o.handleMouseOut=o.handleMouseOut.bind(o),o.handlePrev=o.handlePrev.bind(o),o.handleNext=o.handleNext.bind(o),o.handleItemAnimateOutEnd=o.handleItemAnimateOutEnd.bind(o);var r=n.defaultActiveIndex;return o.state={activeIndex:null!=r?r:0,previousActiveIndex:null,direction:null},o.isUnmounted=!1,o}return(0,f.default)(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.getActiveIndex();null!=e.activeIndex&&e.activeIndex!==t&&(clearTimeout(this.timeout),this.setState({previousActiveIndex:t,direction:null!=e.direction?e.direction:this.getDirection(t,e.activeIndex)}))},t.prototype.componentDidMount=function(){this.waitForNext()},t.prototype.componentWillUnmount=function(){clearTimeout(this.timeout),this.isUnmounted=!0},t.prototype.handleMouseOver=function(){this.props.pauseOnHover&&this.pause()},t.prototype.handleMouseOut=function(){this.isPaused&&this.play()},t.prototype.handlePrev=function(e){var t=this.getActiveIndex()-1;if(t<0){if(!this.props.wrap)return;t=I.default.count(this.props.children)-1}this.select(t,e,"prev")},t.prototype.handleNext=function(e){var t=this.getActiveIndex()+1;if(t>I.default.count(this.props.children)-1){if(!this.props.wrap)return;t=0}this.select(t,e,"next")},t.prototype.handleItemAnimateOutEnd=function(){var e=this;this.setState({previousActiveIndex:null,direction:null},function(){e.waitForNext(),e.props.onSlideEnd&&e.props.onSlideEnd()})},t.prototype.getActiveIndex=function(){var e=this.props.activeIndex;return null!=e?e:this.state.activeIndex},t.prototype.getDirection=function(e,t){return e===t?null:e>t?"prev":"next"},t.prototype.select=function(e,t,n){if(clearTimeout(this.timeout),!this.isUnmounted){var i=this.props.slide?this.getActiveIndex():null;n=n||this.getDirection(i,e);var o=this.props.onSelect;if(o&&(o.length>1?(t?(t.persist(),t.direction=n):t={direction:n},o(e,t)):o(e)),null==this.props.activeIndex&&e!==i){if(null!=this.state.previousActiveIndex)return;this.setState({activeIndex:e,previousActiveIndex:i,direction:n})}}},t.prototype.waitForNext=function(){var e=this.props,t=e.slide,n=e.interval,i=e.activeIndex;!this.isPaused&&t&&n&&null==i&&(this.timeout=setTimeout(this.handleNext,n))},t.prototype.pause=function(){this.isPaused=!0,clearTimeout(this.timeout)},t.prototype.play=function(){this.isPaused=!1,this.waitForNext()},t.prototype.renderIndicators=function(e,t,n){var i=this,o=[];return I.default.forEach(e,function(e,n){o.push(v.default.createElement("li",{key:n,className:n===t?"active":null,onClick:function(e){return i.select(n,e)}})," ")}),v.default.createElement("ol",{className:(0,P.prefix)(n,"indicators")},o)},t.prototype.renderControls=function(e){var t=e.wrap,n=e.children,i=e.activeIndex,o=e.prevIcon,r=e.nextIcon,a=e.bsProps,s=e.prevLabel,l=e.nextLabel,u=(0,P.prefix)(a,"control"),c=I.default.count(n);return[(t||0!==i)&&v.default.createElement(S.default,{key:"prev",className:(0,m.default)(u,"left"),onClick:this.handlePrev},o,s&&v.default.createElement("span",{className:"sr-only"},s)),(t||i!==c-1)&&v.default.createElement(S.default,{key:"next",className:(0,m.default)(u,"right"),onClick:this.handleNext},r,l&&v.default.createElement("span",{className:"sr-only"},l))]},t.prototype.render=function(){var e=this,t=this.props,n=t.slide,i=t.indicators,o=t.controls,a=t.wrap,l=t.prevIcon,u=t.prevLabel,c=t.nextIcon,d=t.nextLabel,p=t.className,f=t.children,h=(0,s.default)(t,["slide","indicators","controls","wrap","prevIcon","prevLabel","nextIcon","nextLabel","className","children"]),b=this.state,y=b.previousActiveIndex,_=b.direction,w=(0,P.splitBsPropsAndOmit)(h,["interval","pauseOnHover","onSelect","onSlideEnd","activeIndex","defaultActiveIndex","direction"]),C=w[0],k=w[1],x=this.getActiveIndex(),E=(0,r.default)({},(0,P.getClassSet)(C),{slide:n});return v.default.createElement("div",(0,r.default)({},k,{className:(0,m.default)(p,E),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut}),i&&this.renderIndicators(f,x,C),v.default.createElement("div",{className:(0,P.prefix)(C,"inner")},I.default.map(f,function(t,i){var o=i===x,r=n&&i===y;return(0,g.cloneElement)(t,{active:o,index:i,animateOut:r,animateIn:o&&null!=y&&n,direction:_,onAnimateOutEnd:r?e.handleItemAnimateOutEnd:null})})),o&&this.renderControls({wrap:a,children:f,activeIndex:x,prevIcon:l,prevLabel:u,nextIcon:c,nextLabel:d,bsProps:C}))},t}(v.default.Component);N.propTypes=M,N.defaultProps=A,N.Caption=w.default,N.Item=k.default,t.default=(0,P.bsClass)("carousel",N),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("carousel-caption",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(15),w=(i(_),n(8)),C={inline:y.default.bool,disabled:y.default.bool,validationState:y.default.oneOf(["success","warning","error",null]),inputRef:y.default.func},k={inline:!1,disabled:!1},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.inline,n=e.disabled,i=e.validationState,o=e.inputRef,a=e.className,l=e.style,u=e.children,c=(0,s.default)(e,["inline","disabled","validationState","inputRef","className","style","children"]),d=(0,w.splitBsProps)(c),p=d[0],f=d[1],h=v.default.createElement("input",(0,r.default)({},f,{ref:o,type:"checkbox",disabled:n}));if(t){var g,b=(g={},g[(0,w.prefix)(p,"inline")]=!0,g.disabled=n,g);return v.default.createElement("label",{className:(0,m.default)(a,b),style:l},h,u)}var y=(0,r.default)({},(0,w.getClassSet)(p),{disabled:n});return i&&(y["has-"+i]=!0),v.default.createElement("div",{className:(0,m.default)(a,y),style:l},v.default.createElement("label",null,h,u))},t}(v.default.Component);x.propTypes=C,x.defaultProps=k,t.default=(0,w.bsClass)("checkbox",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(8),k=n(94),x=i(k),E=n(12),T={componentClass:w.default,visibleXsBlock:y.default.bool,visibleSmBlock:y.default.bool,visibleMdBlock:y.default.bool,visibleLgBlock:y.default.bool},S={componentClass:"div"},P=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,C.splitBsProps)(i),a=o[0],l=o[1],u=(0,C.getClassSet)(a);return E.DEVICE_SIZES.forEach(function(e){var t="visible"+(0,x.default)(e)+"Block";l[t]&&(u["visible-"+e+"-block"]=!0),delete l[t]}),v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);P.propTypes=T,P.defaultProps=S,t.default=(0,C.bsClass)("clearfix",P),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(8),k=n(12),x={componentClass:w.default,xs:y.default.number,sm:y.default.number,md:y.default.number,lg:y.default.number,xsHidden:y.default.bool,smHidden:y.default.bool,mdHidden:y.default.bool,lgHidden:y.default.bool,xsOffset:y.default.number,smOffset:y.default.number,mdOffset:y.default.number,lgOffset:y.default.number,xsPush:y.default.number,smPush:y.default.number,mdPush:y.default.number,lgPush:y.default.number,xsPull:y.default.number,smPull:y.default.number,mdPull:y.default.number,lgPull:y.default.number},E={componentClass:"div"},T=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,C.splitBsProps)(i),a=o[0],l=o[1],u=[];return k.DEVICE_SIZES.forEach(function(e){function t(t,n){var i=""+e+t,o=l[i];null!=o&&u.push((0,C.prefix)(a,""+e+n+"-"+o)),delete l[i]}t("",""),t("Offset","-offset"),t("Push","-push"),t("Pull","-pull");var n=e+"Hidden";l[n]&&u.push("hidden-"+e),delete l[n]}),v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);T.propTypes=x,T.defaultProps=E,t.default=(0,C.bsClass)("col",T),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(15),w=(i(_),n(8)),C={htmlFor:y.default.string,srOnly:y.default.bool},k={srOnly:!1},x={$bs_formGroup:y.default.object},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,i=n.htmlFor,o=void 0===i?t:i,a=n.srOnly,l=n.className,u=(0,s.default)(n,["htmlFor","srOnly","className"]),c=(0,w.splitBsProps)(u),d=c[0],p=c[1],f=(0,r.default)({},(0,w.getClassSet)(d),{"sr-only":a});return v.default.createElement("label",(0,r.default)({},p,{htmlFor:o,className:(0,m.default)(l,f)}))},t}(v.default.Component);E.propTypes=C,E.defaultProps=k,E.contextTypes=x,t.default=(0,w.bsClass)("control-label",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(1),m=i(h),g=n(9),v=i(g),b=n(39),y=i(b),_=n(41),w=i(_),C=(0,f.default)({},y.default.propTypes,{bsStyle:v.default.string,bsSize:v.default.string,title:v.default.node.isRequired,noCaret:v.default.bool,children:v.default.node}),k=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsSize,n=e.bsStyle,i=e.title,o=e.children,a=(0,r.default)(e,["bsSize","bsStyle","title","children"]),s=(0,w.default)(a,y.default.ControlledComponent),l=s[0],u=s[1];return m.default.createElement(y.default,(0,f.default)({},l,{bsSize:t,bsStyle:n}),m.default.createElement(y.default.Toggle,(0,f.default)({},u,{bsSize:t,bsStyle:n}),i),m.default.createElement(y.default.Menu,null,o))},t}(m.default.Component);k.propTypes=C,t.default=k,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(183),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(73),y=i(b),_=n(1),w=i(_),C=n(9),k=i(C),x=n(14),E=i(x),T=n(116),S=i(T),P=n(8),O=n(11),I=i(O),M=n(13),A=i(M),N={open:k.default.bool,pullRight:k.default.bool,onClose:k.default.func,labelledBy:k.default.oneOfType([k.default.string,k.default.number]),onSelect:k.default.func,rootCloseEvent:k.default.oneOf(["click","mousedown"])},j={bsRole:"menu",pullRight:!1},L=function(e){function t(n){(0,d.default)(this,t);var i=(0,f.default)(this,e.call(this,n));return i.handleRootClose=i.handleRootClose.bind(i),i.handleKeyDown=i.handleKeyDown.bind(i),i}return(0,m.default)(t,e),t.prototype.handleRootClose=function(e){this.props.onClose(e,{source:"rootClose"})},t.prototype.handleKeyDown=function(e){switch(e.keyCode){case y.default.codes.down:this.focusNext(),e.preventDefault();break;case y.default.codes.up:this.focusPrevious(),e.preventDefault();break;case y.default.codes.esc:case y.default.codes.tab:this.props.onClose(e,{source:"keydown"})}},t.prototype.getItemsAndActiveIndex=function(){var e=this.getFocusableMenuItems();return{items:e,activeIndex:e.indexOf(document.activeElement)}},t.prototype.getFocusableMenuItems=function(){var e=E.default.findDOMNode(this);return e?(0,u.default)(e.querySelectorAll('[tabIndex="-1"]')):[]},t.prototype.focusNext=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;if(0!==t.length){t[n===t.length-1?0:n+1].focus()}},t.prototype.focusPrevious=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;if(0!==t.length){t[0===n?t.length-1:n-1].focus()}},t.prototype.render=function(){var e,t=this,n=this.props,i=n.open,o=n.pullRight,a=n.labelledBy,l=n.onSelect,u=n.className,c=n.rootCloseEvent,d=n.children,p=(0,s.default)(n,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),f=(0,P.splitBsPropsAndOmit)(p,["onClose"]),h=f[0],m=f[1],g=(0,r.default)({},(0,P.getClassSet)(h),(e={},e[(0,P.prefix)(h,"right")]=o,e));return w.default.createElement(S.default,{disabled:!i,onRootClose:this.handleRootClose,event:c},w.default.createElement("ul",(0,r.default)({},m,{role:"menu",className:(0,v.default)(u,g),"aria-labelledby":a}),A.default.map(d,function(e){return w.default.cloneElement(e,{onKeyDown:(0,I.default)(e.props.onKeyDown,t.handleKeyDown),onSelect:(0,I.default)(e.props.onSelect,l)})})))},t}(w.default.Component);L.propTypes=N,L.defaultProps=j,t.default=(0,P.bsClass)("dropdown-menu",L),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(8),k={horizontal:y.default.bool,inline:y.default.bool,componentClass:w.default},x={horizontal:!1,inline:!1,componentClass:"form"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.horizontal,n=e.inline,i=e.componentClass,o=e.className,a=(0,s.default)(e,["horizontal","inline","componentClass","className"]),l=(0,C.splitBsProps)(a),u=l[0],c=l[1],d=[];return t&&d.push((0,C.prefix)(u,"horizontal")),n&&d.push((0,C.prefix)(u,"inline")),v.default.createElement(i,(0,r.default)({},c,{className:(0,m.default)(o,d)}))},t}(v.default.Component);E.propTypes=k,E.defaultProps=x,t.default=(0,C.bsClass)("form",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(15),k=(i(C),n(135)),x=i(k),E=n(136),T=i(E),S=n(8),P=n(12),O={componentClass:w.default,type:y.default.string,id:y.default.string,inputRef:y.default.func},I={componentClass:"input"},M={$bs_formGroup:y.default.object},A=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,i=n.componentClass,o=n.type,a=n.id,l=void 0===a?t:a,u=n.inputRef,c=n.className,d=n.bsSize,p=(0,s.default)(n,["componentClass","type","id","inputRef","className","bsSize"]),f=(0,S.splitBsProps)(p),h=f[0],g=f[1],b=void 0;if("file"!==o&&(b=(0,S.getClassSet)(h)),d){var y=P.SIZE_MAP[d]||d;b[(0,S.prefix)({bsClass:"input"},y)]=!0}return v.default.createElement(i,(0,r.default)({},g,{type:o,id:l,ref:u,className:(0,m.default)(c,b)}))},t}(v.default.Component);A.propTypes=O,A.defaultProps=I,A.contextTypes=M,A.Feedback=x.default,A.Static=T.default,t.default=(0,S.bsClass)("form-control",(0,S.bsSizes)([P.Size.SMALL,P.Size.LARGE],A)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(5),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(51),w=i(_),C=n(8),k={bsRole:"feedback"},x={$bs_formGroup:y.default.object},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.getGlyph=function(e){switch(e){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},t.prototype.renderDefaultFeedback=function(e,t,n,i){var o=this.getGlyph(e&&e.validationState);return o?v.default.createElement(w.default,(0,s.default)({},i,{glyph:o,className:(0,m.default)(t,n)})):null},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,r.default)(e,["className","children"]),o=(0,C.splitBsProps)(i),a=o[0],l=o[1],u=(0,C.getClassSet)(a);if(!n)return this.renderDefaultFeedback(this.context.$bs_formGroup,t,u,l);var c=v.default.Children.only(n);return v.default.cloneElement(c,(0,s.default)({},l,{className:(0,m.default)(c.props.className,t,u)}))},t}(v.default.Component);E.defaultProps=k,E.contextTypes=x,t.default=(0,C.bsClass)("form-control-feedback",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"p"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("form-control-static",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w=n(12),C=n(13),k=i(C),x={controlId:y.default.string,
validationState:y.default.oneOf(["success","warning","error",null])},E={$bs_formGroup:y.default.object.isRequired},T=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.getChildContext=function(){var e=this.props;return{$bs_formGroup:{controlId:e.controlId,validationState:e.validationState}}},t.prototype.hasFeedback=function(e){var t=this;return k.default.some(e,function(e){return"feedback"===e.props.bsRole||e.props.children&&t.hasFeedback(e.props.children)})},t.prototype.render=function(){var e=this.props,t=e.validationState,n=e.className,i=e.children,o=(0,s.default)(e,["validationState","className","children"]),a=(0,_.splitBsPropsAndOmit)(o,["controlId"]),l=a[0],u=a[1],c=(0,r.default)({},(0,_.getClassSet)(l),{"has-feedback":this.hasFeedback(i)});return t&&(c["has-"+t]=!0),v.default.createElement("div",(0,r.default)({},u,{className:(0,m.default)(n,c)}),i)},t}(v.default.Component);T.propTypes=x,T.childContextTypes=E,t.default=(0,_.bsClass)("form-group",(0,_.bsSizes)([w.Size.LARGE,w.Size.SMALL],T)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),o=i[0],a=i[1],l=(0,b.getClassSet)(o);return v.default.createElement("span",(0,r.default)({},a,{className:(0,m.default)(t,l)}))},t}(v.default.Component);t.default=(0,b.bsClass)("help-block",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w={responsive:y.default.bool,rounded:y.default.bool,circle:y.default.bool,thumbnail:y.default.bool},C={responsive:!1,rounded:!1,circle:!1,thumbnail:!1},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.responsive,i=t.rounded,o=t.circle,a=t.thumbnail,l=t.className,u=(0,s.default)(t,["responsive","rounded","circle","thumbnail","className"]),c=(0,_.splitBsProps)(u),d=c[0],p=c[1],f=(e={},e[(0,_.prefix)(d,"responsive")]=n,e[(0,_.prefix)(d,"rounded")]=i,e[(0,_.prefix)(d,"circle")]=o,e[(0,_.prefix)(d,"thumbnail")]=a,e);return v.default.createElement("img",(0,r.default)({},p,{className:(0,m.default)(l,f)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("img",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(141),y=i(b),_=n(142),w=i(_),C=n(8),k=n(12),x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,C.splitBsProps)(n),o=i[0],a=i[1],l=(0,C.getClassSet)(o);return v.default.createElement("span",(0,r.default)({},a,{className:(0,m.default)(t,l)}))},t}(v.default.Component);x.Addon=y.default,x.Button=w.default,t.default=(0,C.bsClass)("input-group",(0,C.bsSizes)([k.Size.LARGE,k.Size.SMALL],x)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),o=i[0],a=i[1],l=(0,b.getClassSet)(o);return v.default.createElement("span",(0,r.default)({},a,{className:(0,m.default)(t,l)}))},t}(v.default.Component);t.default=(0,b.bsClass)("input-group-addon",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),o=i[0],a=i[1],l=(0,b.getClassSet)(o);return v.default.createElement("span",(0,r.default)({},a,{className:(0,m.default)(t,l)}))},t}(v.default.Component);t.default=(0,b.bsClass)("input-group-btn",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(1),m=i(h),g=n(7),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return m.default.createElement(t,(0,r.default)({},l,{className:(0,v.default)(n,u)}))},t}(m.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("jumbotron",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(25),r=i(o),a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(1),y=i(b),_=n(8),w=n(12),C=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.hasContent=function(e){var t=!1;return y.default.Children.forEach(e,function(e){t||(e||0===e)&&(t=!0)}),t},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,u.default)(e,["className","children"]),o=(0,_.splitBsProps)(i),r=o[0],a=o[1],l=(0,s.default)({},(0,_.getClassSet)(r),{hidden:!this.hasContent(n)});return y.default.createElement("span",(0,s.default)({},a,{className:(0,v.default)(t,l)}),n)},t}(y.default.Component);t.default=(0,_.bsClass)("label",(0,_.bsStyles)([].concat((0,r.default)(w.State),[w.Style.DEFAULT,w.Style.PRIMARY]),w.Style.DEFAULT,C)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return e?E.default.some(e,function(e){return e.type!==C.default||e.props.href||e.props.onClick})?"div":"ul":"div"}t.__esModule=!0;var r=n(5),a=i(r),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(7),g=i(m),v=n(1),b=i(v),y=n(10),_=i(y),w=n(81),C=i(w),k=n(8),x=n(13),E=i(x),T={componentClass:_.default},S=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,e.apply(this,arguments))}return(0,h.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.componentClass,i=void 0===n?o(t):n,r=e.className,s=(0,l.default)(e,["children","componentClass","className"]),u=(0,k.splitBsProps)(s),c=u[0],d=u[1],p=(0,k.getClassSet)(c),f="ul"===i&&E.default.every(t,function(e){return e.type===C.default});return b.default.createElement(i,(0,a.default)({},d,{className:(0,g.default)(r,p)}),f?E.default.map(t,function(e){return(0,v.cloneElement)(e,{listItem:!0})}):t)},t}(b.default.Component);S.propTypes=T,t.default=(0,k.bsClass)("list-group",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("media-body",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"h4"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("media-heading",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(52),w=i(_),C=n(8),k={align:y.default.oneOf(["top","middle","bottom"])},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.align,n=e.className,i=(0,s.default)(e,["align","className"]),o=(0,C.splitBsProps)(i),a=o[0],l=o[1],u=(0,C.getClassSet)(a);return t&&(u[(0,C.prefix)(w.default.defaultProps,t)]=!0),v.default.createElement("div",(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);x.propTypes=k,t.default=(0,C.bsClass)("media-left",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),o=i[0],a=i[1],l=(0,b.getClassSet)(o);return v.default.createElement("ul",(0,r.default)({},a,{className:(0,m.default)(t,l)}))},t}(v.default.Component);t.default=(0,b.bsClass)("media-list",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),o=i[0],a=i[1],l=(0,b.getClassSet)(o);return v.default.createElement("li",(0,r.default)({},a,{className:(0,m.default)(t,l)}))},t}(v.default.Component);t.default=(0,b.bsClass)("media",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(52),w=i(_),C=n(8),k={align:y.default.oneOf(["top","middle","bottom"])},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.align,n=e.className,i=(0,s.default)(e,["align","className"]),o=(0,C.splitBsProps)(i),a=o[0],l=o[1],u=(0,C.getClassSet)(a);return t&&(u[(0,C.prefix)(w.default.defaultProps,t)]=!0),v.default.createElement("div",(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);x.propTypes=k,t.default=(0,C.bsClass)("media-right",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(46),w=i(_),C=n(16),k=i(C),x=n(8),E=n(11),T=i(E),S={active:y.default.bool,disabled:y.default.bool,divider:(0,w.default)(y.default.bool,function(e){var t=e.divider,n=e.children;return t&&n?new Error("Children will not be rendered for dividers"):null}),eventKey:y.default.any,header:y.default.bool,href:y.default.string,onClick:y.default.func,onSelect:y.default.func},P={divider:!1,disabled:!1,header:!1},O=function(e){function t(n,i){(0,u.default)(this,t);var o=(0,d.default)(this,e.call(this,n,i));return o.handleClick=o.handleClick.bind(o),o}return(0,f.default)(t,e),t.prototype.handleClick=function(e){var t=this.props,n=t.href,i=t.disabled,o=t.onSelect,r=t.eventKey;n&&!i||e.preventDefault(),i||o&&o(r,e)},t.prototype.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.divider,o=e.header,a=e.onClick,l=e.className,u=e.style,c=(0,s.default)(e,["active","disabled","divider","header","onClick","className","style"]),d=(0,x.splitBsPropsAndOmit)(c,["eventKey","onSelect"]),p=d[0],f=d[1];return i?(f.children=void 0,v.default.createElement("li",(0,r.default)({},f,{role:"separator",className:(0,m.default)(l,"divider"),style:u}))):o?v.default.createElement("li",(0,r.default)({},f,{role:"heading",className:(0,m.default)(l,(0,x.prefix)(p,"header")),style:u})):v.default.createElement("li",{role:"presentation",className:(0,m.default)(l,{active:t,disabled:n}),style:u},v.default.createElement(k.default,(0,r.default)({},f,{role:"menuitem",tabIndex:"-1",onClick:(0,T.default)(a,this.handleClick)})))},t}(v.default.Component);O.propTypes=S,O.defaultProps=P,t.default=(0,x.bsClass)("dropdown",O),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(7),m=i(h),g=n(235),v=i(g),b=n(30),y=i(b),_=n(22),w=i(_),C=n(114),k=i(C),x=n(1),E=i(x),T=n(9),S=i(T),P=n(14),O=i(P),I=n(250),M=i(I),A=n(119),N=i(A),j=n(10),L=i(j),D=n(40),R=i(D),F=n(82),B=i(F),U=n(154),H=i(U),$=n(83),z=i($),W=n(84),V=i(W),G=n(85),q=i(G),K=n(8),Y=n(11),Q=i(Y),X=n(41),J=i(X),Z=n(12),ee=(0,f.default)({},M.default.propTypes,H.default.propTypes,{backdrop:S.default.oneOf(["static",!0,!1]),keyboard:S.default.bool,animation:S.default.bool,dialogComponentClass:L.default,autoFocus:S.default.bool,enforceFocus:S.default.bool,restoreFocus:S.default.bool,show:S.default.bool,onHide:S.default.func,onEnter:S.default.func,onEntering:S.default.func,onEntered:S.default.func,onExit:S.default.func,onExiting:S.default.func,onExited:S.default.func,container:M.default.propTypes.container}),te=(0,f.default)({},M.default.defaultProps,{animation:!0,dialogComponentClass:H.default}),ne={$bs_modal:S.default.shape({onHide:S.default.func})},ie=function(e){function t(n,i){(0,s.default)(this,t);var o=(0,u.default)(this,e.call(this,n,i));return o.handleEntering=o.handleEntering.bind(o),o.handleExited=o.handleExited.bind(o),o.handleWindowResize=o.handleWindowResize.bind(o),o.handleDialogClick=o.handleDialogClick.bind(o),o.state={style:{}},o}return(0,d.default)(t,e),t.prototype.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},t.prototype.componentWillUnmount=function(){this.handleExited()},t.prototype.handleEntering=function(){v.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},t.prototype.handleExited=function(){v.default.off(window,"resize",this.handleWindowResize)},t.prototype.handleWindowResize=function(){this.updateStyle()},t.prototype.handleDialogClick=function(e){e.target===e.currentTarget&&this.props.onHide()},t.prototype.updateStyle=function(){if(w.default){var e=this._modal.getDialogElement(),t=e.scrollHeight,n=(0,y.default)(e),i=(0,N.default)(O.default.findDOMNode(this.props.container||n.body)),o=t>n.documentElement.clientHeight;this.setState({style:{paddingRight:i&&!o?(0,k.default)():void 0,paddingLeft:!i&&o?(0,k.default)():void 0}})}},t.prototype.render=function(){var e=this,n=this.props,i=n.backdrop,o=n.animation,a=n.show,s=n.dialogComponentClass,l=n.className,u=n.style,c=n.children,d=n.onEntering,p=n.onExited,h=(0,r.default)(n,["backdrop","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),g=(0,J.default)(h,M.default),v=g[0],b=g[1],y=a&&!o&&"in";return E.default.createElement(M.default,(0,f.default)({},v,{ref:function(t){e._modal=t},show:a,onEntering:(0,Q.default)(d,this.handleEntering),onExited:(0,Q.default)(p,this.handleExited),backdrop:i,backdropClassName:(0,m.default)((0,K.prefix)(h,"backdrop"),y),containerClassName:(0,K.prefix)(h,"open"),transition:o?R.default:void 0,dialogTransitionTimeout:t.TRANSITION_DURATION,backdropTransitionTimeout:t.BACKDROP_TRANSITION_DURATION}),E.default.createElement(s,(0,f.default)({},b,{style:(0,f.default)({},this.state.style,u),className:(0,m.default)(l,y),onClick:!0===i?this.handleDialogClick:null}),c))},t}(E.default.Component);ie.propTypes=ee,ie.defaultProps=te,ie.childContextTypes=ne,ie.Body=B.default,ie.Header=V.default,ie.Title=q.default,ie.Footer=z.default,ie.Dialog=H.default,ie.TRANSITION_DURATION=300,ie.BACKDROP_TRANSITION_DURATION=150,t.default=(0,K.bsClass)("modal",(0,K.bsSizes)([Z.Size.LARGE,Z.Size.SMALL],ie)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w=n(12),C={dialogClassName:y.default.string},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.dialogClassName,i=t.className,o=t.style,a=t.children,l=(0,s.default)(t,["dialogClassName","className","style","children"]),u=(0,_.splitBsProps)(l),c=u[0],d=u[1],p=(0,_.prefix)(c),f=(0,r.default)({display:"block"},o),h=(0,r.default)({},(0,_.getClassSet)(c),(e={},e[p]=!1,e[(0,_.prefix)(c,"dialog")]=!0,e));return v.default.createElement("div",(0,r.default)({},d,{tabIndex:"-1",role:"dialog",style:f,className:(0,m.default)(i,p)}),v.default.createElement("div",{className:(0,m.default)(n,h)},v.default.createElement("div",{className:(0,_.prefix)(c,"content"),role:"document"},a)))},t}(v.default.Component);k.propTypes=C,t.default=(0,_.bsClass)("modal",(0,_.bsSizes)([w.Size.LARGE,w.Size.SMALL],k)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(39),w=i(_),C=n(41),k=i(C),x=n(13),E=i(x),T=(0,f.default)({},w.default.propTypes,{title:y.default.node.isRequired,noCaret:y.default.bool,active:y.default.bool,children:y.default.node}),S=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.isActive=function(e,t,n){var i=e.props,o=this;return!!(i.active||null!=t&&i.eventKey===t||n&&i.href===n)||!!E.default.some(i.children,function(e){return o.isActive(e,t,n)})||i.active},t.prototype.render=function(){var e=this,t=this.props,n=t.title,i=t.activeKey,o=t.activeHref,a=t.className,s=t.style,l=t.children,u=(0,r.default)(t,["title","activeKey","activeHref","className","style","children"]),c=this.isActive(this,i,o);delete u.active,delete u.eventKey;var d=(0,k.default)(u,w.default.ControlledComponent),p=d[0],h=d[1];return v.default.createElement(w.default,(0,f.default)({},p,{componentClass:"li",className:(0,m.default)(a,{active:c}),style:s}),v.default.createElement(w.default.Toggle,(0,f.default)({},h,{useAnchor:!0}),n),v.default.createElement(w.default.Menu,null,E.default.map(l,function(t){return v.default.cloneElement(t,{active:e.isActive(t,i,o)})})))},t}(v.default.Component);S.propTypes=T,t.default=S,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i=function(e,n){var i=n.$bs_navbar,o=void 0===i?{bsClass:"navbar"}:i,r=e.componentClass,s=e.className,u=e.pullRight,c=e.pullLeft,d=(0,l.default)(e,["componentClass","className","pullRight","pullLeft"]);return b.default.createElement(r,(0,a.default)({},d,{className:(0,g.default)(s,(0,L.prefix)(o,t),u&&(0,L.prefix)(o,"right"),c&&(0,L.prefix)(o,"left"))}))};return i.displayName=n,i.propTypes={componentClass:C.default,pullRight:_.default.bool,pullLeft:_.default.bool},i.defaultProps={componentClass:e,pullRight:!1,pullLeft:!1},i.contextTypes={$bs_navbar:_.default.shape({bsClass:_.default.string})},i}t.__esModule=!0;var r=n(5),a=i(r),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(7),g=i(m),v=n(1),b=i(v),y=n(9),_=i(y),w=n(10),C=i(w),k=n(49),x=i(k),E=n(80),T=i(E),S=n(88),P=i(S),O=n(157),I=i(O),M=n(158),A=i(M),N=n(159),j=i(N),L=n(8),D=n(12),R=n(11),F=i(R),B={fixedTop:_.default.bool,fixedBottom:_.default.bool,staticTop:_.default.bool,inverse:_.default.bool,fluid:_.default.bool,componentClass:C.default,onToggle:_.default.func,onSelect:_.default.func,collapseOnSelect:_.default.bool,expanded:_.default.bool,role:_.default.string},U={componentClass:"nav",fixedTop:!1,fixedBottom:!1,staticTop:!1,inverse:!1,fluid:!1,collapseOnSelect:!1},H={$bs_navbar:_.default.shape({bsClass:_.default.string,expanded:_.default.bool,onToggle:_.default.func.isRequired,onSelect:_.default.func})},$=function(e){function t(n,i){(0,c.default)(this,t);var o=(0,p.default)(this,e.call(this,n,i));return o.handleToggle=o.handleToggle.bind(o),o.handleCollapse=o.handleCollapse.bind(o),o}return(0,h.default)(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.bsClass,n=e.expanded,i=e.onSelect,o=e.collapseOnSelect;return{$bs_navbar:{bsClass:t,expanded:n,onToggle:this.handleToggle,onSelect:(0,F.default)(i,o?this.handleCollapse:null)}}},t.prototype.handleCollapse=function(){var e=this.props,t=e.onToggle;e.expanded&&t(!1)},t.prototype.handleToggle=function(){var e=this.props;(0,e.onToggle)(!e.expanded)},t.prototype.render=function(){var e,t=this.props,n=t.componentClass,i=t.fixedTop,o=t.fixedBottom,r=t.staticTop,s=t.inverse,u=t.fluid,c=t.className,d=t.children,p=(0,l.default)(t,["componentClass","fixedTop","fixedBottom","staticTop","inverse","fluid","className","children"]),f=(0,L.splitBsPropsAndOmit)(p,["expanded","onToggle","onSelect","collapseOnSelect"]),h=f[0],m=f[1];void 0===m.role&&"nav"!==n&&(m.role="navigation"),s&&(h.bsStyle=D.Style.INVERSE);var v=(0,a.default)({},(0,L.getClassSet)(h),(e={},e[(0,L.prefix)(h,"fixed-top")]=i,e[(0,L.prefix)(h,"fixed-bottom")]=o,e[(0,L.prefix)(h,"static-top")]=r,e));return b.default.createElement(n,(0,a.default)({},m,{className:(0,g.default)(c,v)}),b.default.createElement(T.default,{fluid:u},d))},t}(b.default.Component);$.propTypes=B,$.defaultProps=U,$.childContextTypes=H,(0,L.bsClass)("navbar",$);var z=(0,x.default)($,{expanded:"onToggle"});z.Brand=P.default,z.Header=A.default,z.Toggle=j.default,z.Collapse=I.default,z.Form=o("div","form","NavbarForm"),z.Text=o("p","text","NavbarText"),z.Link=o("a","link","NavbarLink"),t.default=(0,L.bsStyles)([D.Style.DEFAULT,D.Style.INVERSE],D.Style.DEFAULT,z),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(1),m=i(h),g=n(9),v=i(g),b=n(50),y=i(b),_=n(8),w={$bs_navbar:v.default.shape({bsClass:v.default.string,expanded:v.default.bool})},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=(0,s.default)(e,["children"]),i=this.context.$bs_navbar||{bsClass:"navbar"},o=(0,_.prefix)(i,"collapse");return m.default.createElement(y.default,(0,r.default)({in:i.expanded},n),m.default.createElement("div",{className:o},t))},t}(m.default.Component);C.contextTypes=w,t.default=C,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w={$bs_navbar:y.default.shape({bsClass:y.default.string})},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=this.context.$bs_navbar||{bsClass:"navbar"},o=(0,_.prefix)(i,"header");return v.default.createElement("div",(0,r.default)({},n,{className:(0,m.default)(t,o)}))},t}(v.default.Component);C.contextTypes=w,t.default=C,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w=n(11),C=i(w),k={onClick:y.default.func,children:y.default.node},x={$bs_navbar:y.default.shape({bsClass:y.default.string,expanded:y.default.bool,onToggle:y.default.func.isRequired})},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.onClick,n=e.className,i=e.children,o=(0,s.default)(e,["onClick","className","children"]),a=this.context.$bs_navbar||{bsClass:"navbar"},l=(0,r.default)({type:"button"},o,{onClick:(0,C.default)(t,a.onToggle),className:(0,m.default)(n,(0,_.prefix)(a,"toggle"),!a.expanded&&"collapsed")});return i?v.default.createElement("button",l,i):v.default.createElement("button",l,v.default.createElement("span",{className:"sr-only"},"Toggle navigation"),v.default.createElement("span",{className:"icon-bar"}),v.default.createElement("span",{className:"icon-bar"}),v.default.createElement("span",{className:"icon-bar"}))},t}(v.default.Component);E.propTypes=k,E.contextTypes=x,t.default=E,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return Array.isArray(t)?t.indexOf(e)>=0:e===t}t.__esModule=!0;var r=n(6),a=i(r),s=n(2),l=i(s),u=n(4),c=i(u),d=n(3),p=i(d),f=n(5),h=i(f),m=n(31),g=i(m),v=n(1),b=i(v),y=n(9),_=i(y),w=n(14),C=i(w),k=n(15),x=(i(k),n(89)),E=i(x),T=n(11),S=i(T),P=_.default.oneOf(["click","hover","focus"]),O=(0,h.default)({},E.default.propTypes,{trigger:_.default.oneOfType([P,_.default.arrayOf(P)]),delay:_.default.number,delayShow:_.default.number,delayHide:_.default.number,defaultOverlayShown:_.default.bool,overlay:_.default.node.isRequired,onBlur:_.default.func,onClick:_.default.func,onFocus:_.default.func,onMouseOut:_.default.func,onMouseOver:_.default.func,target:_.default.oneOf([null]),onHide:_.default.oneOf([null]),show:_.default.oneOf([null])}),I={defaultOverlayShown:!1,trigger:["hover","focus"]},M=function(e){function t(n,i){(0,l.default)(this,t);var o=(0,c.default)(this,e.call(this,n,i));return o.handleToggle=o.handleToggle.bind(o),o.handleDelayedShow=o.handleDelayedShow.bind(o),o.handleDelayedHide=o.handleDelayedHide.bind(o),o.handleHide=o.handleHide.bind(o),o.handleMouseOver=function(e){return o.handleMouseOverOut(o.handleDelayedShow,e)},o.handleMouseOut=function(e){return o.handleMouseOverOut(o.handleDelayedHide,e)},o._mountNode=null,o.state={show:n.defaultOverlayShown},o}return(0,p.default)(t,e),t.prototype.componentDidMount=function(){this._mountNode=document.createElement("div"),this.renderOverlay()},t.prototype.componentDidUpdate=function(){this.renderOverlay()},t.prototype.componentWillUnmount=function(){C.default.unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)},t.prototype.handleToggle=function(){this.state.show?this.hide():this.show()},t.prototype.handleDelayedShow=function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;return t?void(this._hoverShowDelay=setTimeout(function(){e._hoverShowDelay=null,e.show()},t)):void this.show()}},t.prototype.handleDelayedHide=function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;return t?void(this._hoverHideDelay=setTimeout(function(){e._hoverHideDelay=null,e.hide()},t)):void this.hide()}},t.prototype.handleMouseOverOut=function(e,t){var n=t.currentTarget,i=t.relatedTarget||t.nativeEvent.toElement;i&&(i===n||(0,g.default)(n,i))||e(t)},t.prototype.handleHide=function(){this.hide()},t.prototype.show=function(){this.setState({show:!0})},t.prototype.hide=function(){this.setState({show:!1})},t.prototype.makeOverlay=function(e,t){return b.default.createElement(E.default,(0,h.default)({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)},t.prototype.renderOverlay=function(){C.default.unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)},t.prototype.render=function(){var e=this.props,t=e.trigger,n=e.overlay,i=e.children,r=e.onBlur,s=e.onClick,l=e.onFocus,u=e.onMouseOut,c=e.onMouseOver,d=(0,a.default)(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete d.delay,delete d.delayShow,delete d.delayHide,delete d.defaultOverlayShown;var p=b.default.Children.only(i),f=p.props,h={};return this.state.show&&(h["aria-describedby"]=n.props.id),h.onClick=(0,S.default)(f.onClick,s),o("click",t)&&(h.onClick=(0,S.default)(h.onClick,this.handleToggle)),o("hover",t)&&(h.onMouseOver=(0,S.default)(f.onMouseOver,c,this.handleMouseOver),h.onMouseOut=(0,S.default)(f.onMouseOut,u,this.handleMouseOut)),o("focus",t)&&(h.onFocus=(0,S.default)(f.onFocus,l,this.handleDelayedShow),h.onBlur=(0,S.default)(f.onBlur,r,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,d),(0,v.cloneElement)(p,h)},t}(b.default.Component);M.propTypes=O,M.defaultProps=I,t.default=M,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,s.default)(e,["className","children"]),o=(0,b.splitBsProps)(i),a=o[0],l=o[1],u=(0,b.getClassSet)(a);return v.default.createElement("div",(0,r.default)({},l,{className:(0,m.default)(t,u)}),v.default.createElement("h1",null,n))},t}(v.default.Component);t.default=(0,b.bsClass)("page-header",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(90),r=i(o),a=n(181),s=i(a);t.default=s.default.wrapper(r.default,"`<PageItem>`","`<Pager.Item>`"),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(90),w=i(_),C=n(8),k=n(11),x=i(k),E=n(13),T=i(E),S={onSelect:y.default.func},P=function(e){function t(){return(0,u.default)(this,t),(0,
d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.onSelect,n=e.className,i=e.children,o=(0,s.default)(e,["onSelect","className","children"]),a=(0,C.splitBsProps)(o),l=a[0],u=a[1],c=(0,C.getClassSet)(l);return v.default.createElement("ul",(0,r.default)({},u,{className:(0,m.default)(n,c)}),T.default.map(i,function(e){return(0,g.cloneElement)(e,{onSelect:(0,x.default)(e.props.onSelect,t)})}))},t}(v.default.Component);P.propTypes=S,P.Item=w.default,t.default=(0,C.bsClass)("pager",P),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(5),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(10),w=i(_),C=n(91),k=i(C),x=n(8),E={activePage:y.default.number,items:y.default.number,maxButtons:y.default.number,boundaryLinks:y.default.bool,ellipsis:y.default.oneOfType([y.default.bool,y.default.node]),first:y.default.oneOfType([y.default.bool,y.default.node]),last:y.default.oneOfType([y.default.bool,y.default.node]),prev:y.default.oneOfType([y.default.bool,y.default.node]),next:y.default.oneOfType([y.default.bool,y.default.node]),onSelect:y.default.func,buttonComponentClass:w.default},T={activePage:1,items:1,maxButtons:0,first:!1,last:!1,prev:!1,next:!1,ellipsis:!0,boundaryLinks:!1},S=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.renderPageButtons=function(e,t,n,i,o,r){var a=[],l=void 0,u=void 0;n&&n<t?(l=Math.max(Math.min(e-Math.floor(n/2,10),t-n+1),1),u=l+n-1):(l=1,u=t);for(var c=l;c<=u;++c)a.push(v.default.createElement(k.default,(0,s.default)({},r,{key:c,eventKey:c,active:c===e}),c));return o&&i&&l>1&&(l>2&&a.unshift(v.default.createElement(k.default,{key:"ellipsisFirst",disabled:!0,componentClass:r.componentClass},v.default.createElement("span",{"aria-label":"More"},!0===o?"â¦":o))),a.unshift(v.default.createElement(k.default,(0,s.default)({},r,{key:1,eventKey:1,active:!1}),"1"))),o&&u<t&&((!i||u<t-1)&&a.push(v.default.createElement(k.default,{key:"ellipsis",disabled:!0,componentClass:r.componentClass},v.default.createElement("span",{"aria-label":"More"},!0===o?"â¦":o))),i&&a.push(v.default.createElement(k.default,(0,s.default)({},r,{key:t,eventKey:t,active:!1}),t))),a},t.prototype.render=function(){var e=this.props,t=e.activePage,n=e.items,i=e.maxButtons,o=e.boundaryLinks,a=e.ellipsis,l=e.first,u=e.last,c=e.prev,d=e.next,p=e.onSelect,f=e.buttonComponentClass,h=e.className,g=(0,r.default)(e,["activePage","items","maxButtons","boundaryLinks","ellipsis","first","last","prev","next","onSelect","buttonComponentClass","className"]),b=(0,x.splitBsProps)(g),y=b[0],_=b[1],w=(0,x.getClassSet)(y),C={onSelect:p,componentClass:f};return v.default.createElement("ul",(0,s.default)({},_,{className:(0,m.default)(h,w)}),l&&v.default.createElement(k.default,(0,s.default)({},C,{eventKey:1,disabled:1===t}),v.default.createElement("span",{"aria-label":"First"},!0===l?"Â«":l)),c&&v.default.createElement(k.default,(0,s.default)({},C,{eventKey:t-1,disabled:1===t}),v.default.createElement("span",{"aria-label":"Previous"},!0===c?"â¹":c)),this.renderPageButtons(t,n,i,o,a,C),d&&v.default.createElement(k.default,(0,s.default)({},C,{eventKey:t+1,disabled:t>=n}),v.default.createElement("span",{"aria-label":"Next"},!0===d?"âº":d)),u&&v.default.createElement(k.default,(0,s.default)({},C,{eventKey:n,disabled:t>=n}),v.default.createElement("span",{"aria-label":"Last"},!0===u?"Â»":u)))},t}(v.default.Component);S.propTypes=E,S.defaultProps=T,t.default=(0,x.bsClass)("pagination",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(25),r=i(o),a=n(6),s=i(a),l=n(5),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),g=n(7),v=i(g),b=n(1),y=i(b),_=n(9),w=i(_),C=n(50),k=i(C),x=n(8),E=n(12),T={collapsible:w.default.bool,onSelect:w.default.func,header:w.default.node,id:w.default.oneOfType([w.default.string,w.default.number]),footer:w.default.node,defaultExpanded:w.default.bool,expanded:w.default.bool,eventKey:w.default.any,headerRole:w.default.string,panelRole:w.default.string,onEnter:w.default.func,onEntering:w.default.func,onEntered:w.default.func,onExit:w.default.func,onExiting:w.default.func,onExited:w.default.func},S={defaultExpanded:!1},P=function(e){function t(n,i){(0,d.default)(this,t);var o=(0,f.default)(this,e.call(this,n,i));return o.handleClickTitle=o.handleClickTitle.bind(o),o.state={expanded:o.props.defaultExpanded},o}return(0,m.default)(t,e),t.prototype.handleClickTitle=function(e){e.persist(),e.selected=!0,this.props.onSelect?this.props.onSelect(this.props.eventKey,e):e.preventDefault(),e.selected&&this.setState({expanded:!this.state.expanded})},t.prototype.renderHeader=function(e,t,n,i,o,r){var a=(0,x.prefix)(r,"title");return e?y.default.isValidElement(t)?(0,b.cloneElement)(t,{className:(0,v.default)(t.props.className,a),children:this.renderAnchor(t.props.children,n,i,o)}):y.default.createElement("h4",{role:"presentation",className:a},this.renderAnchor(t,n,i,o)):y.default.isValidElement(t)?(0,b.cloneElement)(t,{className:(0,v.default)(t.props.className,a)}):t},t.prototype.renderAnchor=function(e,t,n,i){return y.default.createElement("a",{role:n,href:t&&"#"+t,onClick:this.handleClickTitle,"aria-controls":t,"aria-expanded":i,"aria-selected":i,className:i?null:"collapsed"},e)},t.prototype.renderCollapsibleBody=function(e,t,n,i,o,r){return y.default.createElement(k.default,(0,u.default)({in:t},r),y.default.createElement("div",{id:e,role:n,className:(0,x.prefix)(o,"collapse"),"aria-hidden":!t},this.renderBody(i,o)))},t.prototype.renderBody=function(e,t){function n(){o.length&&(i.push(y.default.createElement("div",{key:i.length,className:r},o)),o=[])}var i=[],o=[],r=(0,x.prefix)(t,"body");return y.default.Children.toArray(e).forEach(function(e){return y.default.isValidElement(e)&&e.props.fill?(n(),void i.push((0,b.cloneElement)(e,{fill:void 0}))):void o.push(e)}),n(),i},t.prototype.render=function(){var e=this.props,t=e.collapsible,n=e.header,i=e.id,o=e.footer,r=e.expanded,a=e.headerRole,l=e.panelRole,c=e.className,d=e.children,p=e.onEnter,f=e.onEntering,h=e.onEntered,m=e.onExit,g=e.onExiting,b=e.onExited,_=(0,s.default)(e,["collapsible","header","id","footer","expanded","headerRole","panelRole","className","children","onEnter","onEntering","onEntered","onExit","onExiting","onExited"]),w=(0,x.splitBsPropsAndOmit)(_,["defaultExpanded","eventKey","onSelect"]),C=w[0],k=w[1],E=null!=r?r:this.state.expanded,T=(0,x.getClassSet)(C);return y.default.createElement("div",(0,u.default)({},k,{className:(0,v.default)(c,T),id:t?null:i}),n&&y.default.createElement("div",{className:(0,x.prefix)(C,"heading")},this.renderHeader(t,n,i,a,E,C)),t?this.renderCollapsibleBody(i,E,l,d,C,{onEnter:p,onEntering:f,onEntered:h,onExit:m,onExiting:g,onExited:b}):this.renderBody(d,C),o&&y.default.createElement("div",{className:(0,x.prefix)(C,"footer")},o))},t}(y.default.Component);P.propTypes=T,P.defaultProps=S,t.default=(0,x.bsClass)("panel",(0,x.bsStyles)([].concat((0,r.default)(E.State),[E.Style.DEFAULT,E.Style.PRIMARY]),E.Style.DEFAULT,P)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(47),w=i(_),C=n(8),k={id:(0,w.default)(y.default.oneOfType([y.default.string,y.default.number])),placement:y.default.oneOf(["top","right","bottom","left"]),positionTop:y.default.oneOfType([y.default.number,y.default.string]),positionLeft:y.default.oneOfType([y.default.number,y.default.string]),arrowOffsetTop:y.default.oneOfType([y.default.number,y.default.string]),arrowOffsetLeft:y.default.oneOfType([y.default.number,y.default.string]),title:y.default.node},x={placement:"right"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,i=t.positionTop,o=t.positionLeft,a=t.arrowOffsetTop,l=t.arrowOffsetLeft,u=t.title,c=t.className,d=t.style,p=t.children,f=(0,s.default)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","title","className","style","children"]),h=(0,C.splitBsProps)(f),g=h[0],b=h[1],y=(0,r.default)({},(0,C.getClassSet)(g),(e={},e[n]=!0,e)),_=(0,r.default)({display:"block",top:i,left:o},d),w={top:a,left:l};return v.default.createElement("div",(0,r.default)({},b,{role:"tooltip",className:(0,m.default)(c,y),style:_}),v.default.createElement("div",{className:"arrow",style:w}),u&&v.default.createElement("h3",{className:(0,C.prefix)(g,"title")},u),v.default.createElement("div",{className:(0,C.prefix)(g,"content")},p))},t}(v.default.Component);E.propTypes=k,E.defaultProps=x,t.default=(0,C.bsClass)("popover",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i=e[t];if(!i)return null;var o=null;return w.default.Children.forEach(i,function(e){if(!o&&e.type!==M){var t=w.default.isValidElement(e)?e.type.displayName||e.type.name||e.type:e;o=new Error("Children of "+n+" can contain only ProgressBar components. Found "+t+".")}}),o}function r(e,t,n){var i=(e-t)/(n-t)*100;return Math.round(i*P)/P}t.__esModule=!0;var a=n(25),s=i(a),l=n(5),u=i(l),c=n(6),d=i(c),p=n(2),f=i(p),h=n(4),m=i(h),g=n(3),v=i(g),b=n(7),y=i(b),_=n(1),w=i(_),C=n(9),k=i(C),x=n(8),E=n(12),T=n(13),S=i(T),P=1e3,O={min:k.default.number,now:k.default.number,max:k.default.number,label:k.default.node,srOnly:k.default.bool,striped:k.default.bool,active:k.default.bool,children:o,isChild:k.default.bool},I={min:0,max:100,active:!1,isChild:!1,srOnly:!1,striped:!1},M=function(e){function t(){return(0,f.default)(this,t),(0,m.default)(this,e.apply(this,arguments))}return(0,v.default)(t,e),t.prototype.renderProgressBar=function(e){var t,n=e.min,i=e.now,o=e.max,a=e.label,s=e.srOnly,l=e.striped,c=e.active,p=e.className,f=e.style,h=(0,d.default)(e,["min","now","max","label","srOnly","striped","active","className","style"]),m=(0,x.splitBsProps)(h),g=m[0],v=m[1],b=(0,u.default)({},(0,x.getClassSet)(g),(t={active:c},t[(0,x.prefix)(g,"striped")]=c||l,t));return w.default.createElement("div",(0,u.default)({},v,{role:"progressbar",className:(0,y.default)(p,b),style:(0,u.default)({width:r(i,n,o)+"%"},f),"aria-valuenow":i,"aria-valuemin":n,"aria-valuemax":o}),s?w.default.createElement("span",{className:"sr-only"},a):a)},t.prototype.render=function(){var e=this.props,t=e.isChild,n=(0,d.default)(e,["isChild"]);if(t)return this.renderProgressBar(n);var i=n.min,o=n.now,r=n.max,a=n.label,s=n.srOnly,l=n.striped,c=n.active,p=n.bsClass,f=n.bsStyle,h=n.className,m=n.children,g=(0,d.default)(n,["min","now","max","label","srOnly","striped","active","bsClass","bsStyle","className","children"]);return w.default.createElement("div",(0,u.default)({},g,{className:(0,y.default)(h,"progress")}),m?S.default.map(m,function(e){return(0,_.cloneElement)(e,{isChild:!0})}):this.renderProgressBar({min:i,now:o,max:r,label:a,srOnly:s,striped:l,active:c,bsClass:p,bsStyle:f}))},t}(w.default.Component);M.propTypes=O,M.defaultProps=I,t.default=(0,x.bsClass)("progress-bar",(0,x.bsStyles)((0,s.default)(E.State),M)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(15),w=(i(_),n(8)),C={inline:y.default.bool,disabled:y.default.bool,validationState:y.default.oneOf(["success","warning","error",null]),inputRef:y.default.func},k={inline:!1,disabled:!1},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.inline,n=e.disabled,i=e.validationState,o=e.inputRef,a=e.className,l=e.style,u=e.children,c=(0,s.default)(e,["inline","disabled","validationState","inputRef","className","style","children"]),d=(0,w.splitBsProps)(c),p=d[0],f=d[1],h=v.default.createElement("input",(0,r.default)({},f,{ref:o,type:"radio",disabled:n}));if(t){var g,b=(g={},g[(0,w.prefix)(p,"inline")]=!0,g.disabled=n,g);return v.default.createElement("label",{className:(0,m.default)(a,b),style:l},h,u)}var y=(0,r.default)({},(0,w.getClassSet)(p),{disabled:n});return i&&(y["has-"+i]=!0),v.default.createElement("div",{className:(0,m.default)(a,y),style:l},v.default.createElement("label",null,h,u))},t}(v.default.Component);x.propTypes=C,x.defaultProps=k,t.default=(0,w.bsClass)("radio",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(15),w=(i(_),n(8)),C={children:y.default.element.isRequired,a16by9:y.default.bool,a4by3:y.default.bool},k={a16by9:!1,a4by3:!1},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.a16by9,i=t.a4by3,o=t.className,a=t.children,l=(0,s.default)(t,["a16by9","a4by3","className","children"]),u=(0,w.splitBsProps)(l),c=u[0],d=u[1],p=(0,r.default)({},(0,w.getClassSet)(c),(e={},e[(0,w.prefix)(c,"16by9")]=n,e[(0,w.prefix)(c,"4by3")]=i,e));return v.default.createElement("div",{className:(0,m.default)(p)},(0,g.cloneElement)(a,(0,r.default)({},d,{className:(0,m.default)(o,(0,w.prefix)(c,"item"))})))},t}(v.default.Component);x.propTypes=C,x.defaultProps=k,t.default=(0,w.bsClass)("embed-responsive",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(10),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),o=(0,_.splitBsProps)(i),a=o[0],l=o[1],u=(0,_.getClassSet)(a);return v.default.createElement(t,(0,r.default)({},l,{className:(0,m.default)(n,u)}))},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("row",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(6),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(1),m=i(h),g=n(9),v=i(g),b=n(32),y=i(b),_=n(39),w=i(_),C=n(172),k=i(C),x=n(41),E=i(x),T=(0,f.default)({},w.default.propTypes,{bsStyle:v.default.string,bsSize:v.default.string,href:v.default.string,onClick:v.default.func,title:v.default.node.isRequired,toggleLabel:v.default.string,children:v.default.node}),S=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsSize,n=e.bsStyle,i=e.title,o=e.toggleLabel,a=e.children,s=(0,r.default)(e,["bsSize","bsStyle","title","toggleLabel","children"]),l=(0,E.default)(s,w.default.ControlledComponent),u=l[0],c=l[1];return m.default.createElement(w.default,(0,f.default)({},u,{bsSize:t,bsStyle:n}),m.default.createElement(y.default,(0,f.default)({},c,{disabled:s.disabled,bsSize:t,bsStyle:n}),i),m.default.createElement(k.default,{"aria-label":o||i,bsSize:t,bsStyle:n}),m.default.createElement(w.default.Menu,null,a))},t}(m.default.Component);S.propTypes=T,S.Toggle=k.default,t.default=S,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(1),f=i(p),h=n(79),m=i(h),g=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){return f.default.createElement(m.default,(0,r.default)({},this.props,{useAnchor:!1,noCaret:!1}))},t}(f.default.Component);g.defaultProps=m.default.defaultProps,t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(2),r=i(o),a=n(4),s=i(a),l=n(3),u=i(l),c=n(5),d=i(c),p=n(1),f=i(p),h=n(9),m=i(h),g=n(53),v=i(g),b=n(54),y=i(b),_=n(93),w=i(_),C=(0,d.default)({},w.default.propTypes,{disabled:m.default.bool,title:m.default.node,tabClassName:m.default.string}),k=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,u.default)(t,e),t.prototype.render=function(){var e=(0,d.default)({},this.props);return delete e.title,delete e.disabled,delete e.tabClassName,f.default.createElement(w.default,e)},t}(f.default.Component);k.propTypes=C,k.Container=v.default,k.Content=y.default,k.Pane=w.default,t.default=k,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(8),w={striped:y.default.bool,bordered:y.default.bool,condensed:y.default.bool,hover:y.default.bool,responsive:y.default.bool},C={bordered:!1,condensed:!1,hover:!1,responsive:!1,striped:!1},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.striped,i=t.bordered,o=t.condensed,a=t.hover,l=t.responsive,u=t.className,c=(0,s.default)(t,["striped","bordered","condensed","hover","responsive","className"]),d=(0,_.splitBsProps)(c),p=d[0],f=d[1],h=(0,r.default)({},(0,_.getClassSet)(p),(e={},e[(0,_.prefix)(p,"striped")]=n,e[(0,_.prefix)(p,"bordered")]=i,e[(0,_.prefix)(p,"condensed")]=o,e[(0,_.prefix)(p,"hover")]=a,e)),g=v.default.createElement("table",(0,r.default)({},f,{className:(0,m.default)(u,h)}));return l?v.default.createElement("div",{className:(0,_.prefix)(p,"responsive")},g):g},t}(v.default.Component);k.propTypes=w,k.defaultProps=C,t.default=(0,_.bsClass)("table",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0;return N.default.forEach(e,function(e){null==t&&(t=e.props.eventKey)}),t}t.__esModule=!0;var r=n(5),a=i(r),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(1),g=i(m),v=n(9),b=i(v),y=n(47),_=i(y),w=n(49),C=i(w),k=n(86),x=i(k),E=n(87),T=i(E),S=n(53),P=i(S),O=n(54),I=i(O),M=n(8),A=n(13),N=i(A),j=P.default.ControlledComponent,L={activeKey:b.default.any,bsStyle:b.default.oneOf(["tabs","pills"]),animation:b.default.bool,id:(0,_.default)(b.default.oneOfType([b.default.string,b.default.number])),onSelect:b.default.func,mountOnEnter:b.default.bool,unmountOnExit:b.default.bool},D={bsStyle:"tabs",animation:!0,mountOnEnter:!1,unmountOnExit:!1},R=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,e.apply(this,arguments))}return(0,h.default)(t,e),t.prototype.renderTab=function(e){var t=e.props,n=t.title,i=t.eventKey,o=t.disabled,r=t.tabClassName;return null==n?null:g.default.createElement(T.default,{eventKey:i,disabled:o,className:r},n)},t.prototype.render=function(){var e=this.props,t=e.id,n=e.onSelect,i=e.animation,r=e.mountOnEnter,s=e.unmountOnExit,u=e.bsClass,c=e.className,d=e.style,p=e.children,f=e.activeKey,h=void 0===f?o(p):f,m=(0,l.default)(e,["id","onSelect","animation","mountOnEnter","unmountOnExit","bsClass","className","style","children","activeKey"]);return g.default.createElement(j,{id:t,activeKey:h,onSelect:n,className:c,style:d},g.default.createElement("div",null,g.default.createElement(x.default,(0,a.default)({},m,{role:"tablist"}),N.default.map(p,this.renderTab)),g.default.createElement(I.default,{bsClass:u,animation:i,mountOnEnter:r,unmountOnExit:s},p)))},t}(g.default.Component);R.propTypes=L,R.defaultProps=D,(0,M.bsClass)("tab",R),t.default=(0,C.default)(R,{activeKey:"onSelect"}),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(16),w=i(_),C=n(8),k={src:y.default.string,alt:y.default.string,href:y.default.string},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=e.alt,i=e.className,o=e.children,a=(0,s.default)(e,["src","alt","className","children"]),l=(0,C.splitBsProps)(a),u=l[0],c=l[1],d=c.href?w.default:"div",p=(0,C.getClassSet)(u);return v.default.createElement(d,(0,r.default)({},c,{className:(0,m.default)(i,p)}),v.default.createElement("img",{src:t,alt:n}),o&&v.default.createElement("div",{className:"caption"},o))},t}(v.default.Component);x.propTypes=k,t.default=(0,C.bsClass)("thumbnail",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(9),y=i(b),_=n(47),w=i(_),C=n(8),k={id:(0,w.default)(y.default.oneOfType([y.default.string,y.default.number])),placement:y.default.oneOf(["top","right","bottom","left"]),positionTop:y.default.oneOfType([y.default.number,y.default.string]),positionLeft:y.default.oneOfType([y.default.number,y.default.string]),arrowOffsetTop:y.default.oneOfType([y.default.number,y.default.string]),arrowOffsetLeft:y.default.oneOfType([y.default.number,y.default.string])},x={placement:"right"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,i=t.positionTop,o=t.positionLeft,a=t.arrowOffsetTop,l=t.arrowOffsetLeft,u=t.className,c=t.style,d=t.children,p=(0,s.default)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),f=(0,C.splitBsProps)(p),h=f[0],g=f[1],b=(0,r.default)({},(0,C.getClassSet)(h),(e={},e[n]=!0,e)),y=(0,r.default)({top:i,left:o},c),_={top:a,left:l};return v.default.createElement("div",(0,r.default)({},g,{role:"tooltip",className:(0,m.default)(u,b),style:y}),v.default.createElement("div",{className:(0,C.prefix)(h,"arrow"),style:_}),v.default.createElement("div",{className:(0,C.prefix)(h,"inner")},d))},t}(v.default.Component);E.propTypes=k,E.defaultProps=x,t.default=(0,C.bsClass)("tooltip",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),r=i(o),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),g=n(1),v=i(g),b=n(8),y=n(12),_=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),o=i[0],a=i[1],l=(0,b.getClassSet)(o);return v.default.createElement("div",(0,r.default)({},a,{className:(0,m.default)(t,l)}))},t}(v.default.Component);t.default=(0,b.bsClass)("well",(0,b.bsSizes)([y.Size.LARGE,y.Size.SMALL],_)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)(function(e,n,i){var o=void 0;return t.every(function(t){return!!u.default.some(e.children,function(e){return e.props.bsRole===t})||(o=t,!1)}),o?new Error("(children) "+i+" - Missing a required child with bsRole: "+o+". "+i+" must have at least one child of each of the following bsRoles: "+t.join(", ")):null})}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)(function(e,n,i){var o=void 0;return t.every(function(t){return!(u.default.filter(e.children,function(e){return e.props.bsRole===t}).length>1&&(o=t,1))}),o?new Error("(children) "+i+" - Duplicate children detected of bsRole: "+o+". Only one child each allowed with the following bsRoles: "+t.join(", ")):null})}t.__esModule=!0,t.requiredRoles=o,t.exclusiveRoles=r;var a=n(48),s=i(a),l=n(13),u=i(l)},function(e,t){"use strict";function n(e,t,n){e.addEventListener(t,n,!1)}function i(e,t,n){e.removeEventListener(t,n,!1)}t.__esModule=!0;var o=!("undefined"==typeof window||!window.document||!window.document.createElement),r={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},a=[];o&&function(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete r.animationend.animation,"TransitionEvent"in window||delete r.transitionend.transition;for(var n in r){var i=r[n];for(var o in i)if(o in t){a.push(i[o]);break}}}();var s={addEndEventListener:function(e,t){return 0===a.length?void window.setTimeout(t,0):void a.forEach(function(i){n(e,i,t)})},removeEndEventListener:function(e,t){0!==a.length&&a.forEach(function(n){i(e,n,t)})}};t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i=void 0;"object"===(void 0===e?"undefined":(0,f.default)(e))?i=e.message:(i=e+" is deprecated. Use "+t+" instead.",n&&(i+="\nYou can read more about it at "+n)),m[i]||(m[i]=!0)}function r(){m={}}t.__esModule=!0;var a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(55),f=i(p);t._resetWarned=r;var h=n(15),m=(i(h),{});o.wrapper=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.componentWillMount=function(){if(o.apply(void 0,n),e.prototype.componentWillMount){for(var t,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];(t=e.prototype.componentWillMount).call.apply(t,[this].concat(r))}},t}(e)},t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.ValidComponentChildren=t.createChainedFunction=t.bootstrapUtils=void 0;var o=n(8),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),a=n(11),s=i(a),l=n(13),u=i(l);t.bootstrapUtils=r,t.createChainedFunction=s.default,t.ValidComponentChildren=u.default},function(e,t,n){e.exports={default:n(188),__esModule:!0}},function(e,t,n){e.exports={default:n(190),__esModule:!0}},function(e,t,n){e.exports={default:n(192),__esModule:!0}},function(e,t,n){e.exports={default:n(194),__esModule:!0}},function(e,t,n){e.exports={default:n(195),__esModule:!0}},function(e,t,n){n(107),n(219),e.exports=n(17).Array.from},function(e,t,n){n(221),e.exports=n(17).Object.assign},function(e,t,n){n(222);var i=n(17).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){n(226),e.exports=n(17).Object.entries},function(e,t,n){n(223),e.exports=n(17).Object.setPrototypeOf},function(e,t,n){n(227),e.exports=n(17).Object.values},function(e,t,n){n(225),n(224),n(228),n(229),e.exports=n(17).Symbol},function(e,t,n){n(107),n(230),e.exports=n(70).f("iterator")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(){}},function(e,t,n){var i=n(21),o=n(106),r=n(217);e.exports=function(e){return function(t,n,a){var s,l=i(t),u=o(l.length),c=r(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(56),o=n(18)("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:r?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var i=n(24),o=n(37);e.exports=function(e,t,n){t in e?i.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var i=n(29),o=n(62),r=n(36);e.exports=function(e){var t=i(e),n=o.f;if(n)for(var a,s=n(e),l=r.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){e.exports=n(20).document&&document.documentElement},function(e,t,n){var i=n(35),o=n(18)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||r[o]===e)}},function(e,t,n){var i=n(56);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(26);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&i(r.call(e)),t}}},function(e,t,n){"use strict";var i=n(61),o=n(37),r=n(63),a={};n(28)(a,n(18)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:o(1,n)}),r(e,t+" Iterator")}},function(e,t,n){var i=n(18)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},e(r)}catch(e){}return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(29),o=n(21);e.exports=function(e,t){for(var n,r=o(e),a=i(r),s=a.length,l=0;s>l;)if(r[n=a[l++]]===t)return n}},function(e,t,n){var i=n(42)("meta"),o=n(34),r=n(23),a=n(24).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(33)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},p=function(e,t){if(!r(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},f=function(e){return u&&h.NEED&&l(e)&&!r(e,i)&&c(e),e},h=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:p,onFreeze:f}},function(e,t,n){"use strict";var i=n(29),o=n(62),r=n(36),a=n(67),s=n(99),l=Object.assign;e.exports=!l||n(33)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=o.f,d=r.f;l>u;)for(var p,f=s(arguments[u++]),h=c?i(f).concat(c(f)):i(f),m=h.length,g=0;m>g;)d.call(f,p=h[g++])&&(n[p]=f[p]);return n}:l},function(e,t,n){var i=n(24),o=n(26),r=n(29);e.exports=n(27)?Object.defineProperties:function(e,t){o(e);for(var n,a=r(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(21),o=n(102).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?s(e):o(i(e))}},function(e,t,n){var i=n(23),o=n(67),r=n(64)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(34),o=n(26),r=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(57)(Function.call,n(101).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return r(e,n),
t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:r}},function(e,t,n){var i=n(66),o=n(58);e.exports=function(e){return function(t,n){var r,a,s=String(o(t)),l=i(n),u=s.length;return l<0||l>=u?e?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):r:e?s.slice(l,l+2):a-56320+(r-55296<<10)+65536)}}},function(e,t,n){var i=n(66),o=Math.max,r=Math.min;e.exports=function(e,t){return e=i(e),e<0?o(e+t,0):r(e,t)}},function(e,t,n){var i=n(199),o=n(18)("iterator"),r=n(35);e.exports=n(17).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||r[i(e)]}},function(e,t,n){"use strict";var i=n(57),o=n(19),r=n(67),a=n(205),s=n(203),l=n(106),u=n(200),c=n(218);o(o.S+o.F*!n(207)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,d,p=r(e),f="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,v=0,b=c(p);if(g&&(m=i(m,h>2?arguments[2]:void 0,2)),void 0==b||f==Array&&s(b))for(t=l(p.length),n=new f(t);t>v;v++)u(n,v,g?m(p[v],v):p[v]);else for(d=b.call(p),n=new f;!(o=d.next()).done;v++)u(n,v,g?a(d,m,[o.value,v],!0):o.value);return n.length=v,n}})},function(e,t,n){"use strict";var i=n(197),o=n(208),r=n(35),a=n(21);e.exports=n(100)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var i=n(19);i(i.S+i.F,"Object",{assign:n(211)})},function(e,t,n){var i=n(19);i(i.S,"Object",{create:n(61)})},function(e,t,n){var i=n(19);i(i.S,"Object",{setPrototypeOf:n(215).set})},function(e,t){},function(e,t,n){"use strict";var i=n(20),o=n(23),r=n(27),a=n(19),s=n(105),l=n(210).KEY,u=n(33),c=n(65),d=n(63),p=n(42),f=n(18),h=n(70),m=n(69),g=n(209),v=n(201),b=n(204),y=n(26),_=n(21),w=n(68),C=n(37),k=n(61),x=n(213),E=n(101),T=n(24),S=n(29),P=E.f,O=T.f,I=x.f,M=i.Symbol,A=i.JSON,N=A&&A.stringify,j="prototype",L=f("_hidden"),D=f("toPrimitive"),R={}.propertyIsEnumerable,F=c("symbol-registry"),B=c("symbols"),U=c("op-symbols"),H=Object[j],$="function"==typeof M,z=i.QObject,W=!z||!z[j]||!z[j].findChild,V=r&&u(function(){return 7!=k(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=P(H,t);i&&delete H[t],O(e,t,n),i&&e!==H&&O(H,t,i)}:O,G=function(e){var t=B[e]=k(M[j]);return t._k=e,t},q=$&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},K=function(e,t,n){return e===H&&K(U,t,n),y(e),t=w(t,!0),y(n),o(B,t)?(n.enumerable?(o(e,L)&&e[L][t]&&(e[L][t]=!1),n=k(n,{enumerable:C(0,!1)})):(o(e,L)||O(e,L,C(1,{})),e[L][t]=!0),V(e,t,n)):O(e,t,n)},Y=function(e,t){y(e);for(var n,i=v(t=_(t)),o=0,r=i.length;r>o;)K(e,n=i[o++],t[n]);return e},Q=function(e,t){return void 0===t?k(e):Y(k(e),t)},X=function(e){var t=R.call(this,e=w(e,!0));return!(this===H&&o(B,e)&&!o(U,e))&&(!(t||!o(this,e)||!o(B,e)||o(this,L)&&this[L][e])||t)},J=function(e,t){if(e=_(e),t=w(t,!0),e!==H||!o(B,t)||o(U,t)){var n=P(e,t);return!n||!o(B,t)||o(e,L)&&e[L][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=I(_(e)),i=[],r=0;n.length>r;)o(B,t=n[r++])||t==L||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===H,i=I(n?U:_(e)),r=[],a=0;i.length>a;)!o(B,t=i[a++])||n&&!o(H,t)||r.push(B[t]);return r};$||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(U,n),o(this,L)&&o(this[L],e)&&(this[L][e]=!1),V(this,e,C(1,n))};return r&&W&&V(H,e,{configurable:!0,set:t}),G(e)},s(M[j],"toString",function(){return this._k}),E.f=J,T.f=K,n(102).f=x.f=Z,n(36).f=X,n(62).f=ee,r&&!n(60)&&s(H,"propertyIsEnumerable",X,!0),h.f=function(e){return G(f(e))}),a(a.G+a.W+a.F*!$,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var te=S(f.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!$,"Symbol",{for:function(e){return o(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(e){if(q(e))return g(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!$,"Object",{create:Q,defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),A&&a(a.S+a.F*(!$||u(function(){var e=M();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);return t=i[1],"function"==typeof t&&(n=t),!n&&b(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!q(t))return t}),i[1]=t,N.apply(A,i)}}}),M[j][D]||n(28)(M[j],D,M[j].valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(19),o=n(104)(!0);i(i.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){var i=n(19),o=n(104)(!1);i(i.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){n(69)("asyncIterator")},function(e,t,n){n(69)("observable")},function(e,t,n){n(220);for(var i=n(20),o=n(28),r=n(35),a=n(18)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=s[l],c=i[u],d=c&&c.prototype;d&&!d[a]&&o(d,a,u),r[u]=r.Array}},function(e,t,n){"use strict";function i(e,t){e.classList?e.classList.add(t):(0,r.default)(e)||(e.className=e.className+" "+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(109),r=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasClass=t.removeClass=t.addClass=void 0;var o=n(231),r=i(o),a=n(233),s=i(a),l=n(109),u=i(l);t.addClass=r.default,t.removeClass=s.default,t.hasClass=u.default,t.default={addClass:r.default,removeClass:s.default,hasClass:u.default}},function(e,t){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(n){var i=n.currentTarget,o=n.target;(0,l.default)(i,e).some(function(e){return(0,a.default)(e,o)})&&t.call(this,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(31),a=i(r),s=n(239),l=i(s);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.listen=t.filter=t.off=t.on=void 0;var o=n(43),r=i(o),a=n(71),s=i(a),l=n(234),u=i(l),c=n(236),d=i(c);t.on=r.default,t.off=s.default,t.filter=u.default,t.listen=d.default,t.default={on:r.default,off:s.default,filter:u.default,listen:d.default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=i(o),a=n(43),s=i(a),l=n(71),u=i(l),c=function(){};r.default&&(c=function(e,t,n,i){return(0,s.default)(e,t,n,i),function(){(0,u.default)(e,t,n,i)}}),t.default=c,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.nodeName&&e.nodeName.toLowerCase()}function r(e){for(var t=(0,s.default)(e),n=e&&e.offsetParent;n&&"html"!==o(e)&&"static"===(0,u.default)(n,"position");)n=n.offsetParent;return n||t.documentElement}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(30),s=i(a),l=n(45),u=i(l);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.nodeName&&e.nodeName.toLowerCase()}function r(e,t){var n,i={top:0,left:0};return"fixed"===(0,g.default)(e,"position")?n=e.getBoundingClientRect():(t=t||(0,c.default)(e),n=(0,l.default)(e),"html"!==o(t)&&(i=(0,l.default)(t)),i.top+=parseInt((0,g.default)(t,"borderTopWidth"),10)-(0,p.default)(t)||0,i.left+=parseInt((0,g.default)(t,"borderLeftWidth"),10)-(0,h.default)(t)||0),a({},n,{top:n.top-i.top-(parseInt((0,g.default)(e,"marginTop"),10)||0),left:n.left-i.left-(parseInt((0,g.default)(e,"marginLeft"),10)||0)})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=r;var s=n(110),l=i(s),u=n(237),c=i(u),d=n(111),p=i(d),f=n(240),h=i(f),m=n(45),g=i(m);e.exports=t.default},function(e,t){"use strict";function n(e,t){var n,r="#"===t[0],a="."===t[0],s=r||a?t.slice(1):t;return i.test(s)?r?(e=e.getElementById?e:document,(n=e.getElementById(s))?[n]:[]):o(e.getElementsByClassName&&a?e.getElementsByClassName(s):e.getElementsByTagName(t)):o(e.querySelectorAll(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=/^[\w-]*$/,o=Function.prototype.bind.call(Function.prototype.call,[].slice);e.exports=t.default},function(e,t,n){"use strict";function i(e,t){var n=(0,r.default)(e);return void 0===t?n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft:void(n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(44),r=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function i(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,r.default)(t))&&(t="styleFloat");var i=e.currentStyle[t]||null;if(null==i&&n&&n[t]&&(i=n[t]),s.test(i)&&!a.test(t)){var o=n.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),n.left="fontSize"===t?"1em":i,i=n.pixelLeft+"px",n.left=o,u&&(l.left=u)}return i}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(113),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=/^(top|right|bottom|left)$/,s=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},function(e,t){"use strict";function n(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t){"use strict";function n(e){return!(!e||!i.test(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},function(e,t){"use strict";function n(e){return e.replace(i,function(e,t){return t.toUpperCase()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=/-(.)/g;e.exports=t.default},function(e,t){"use strict";function n(e){return e.replace(i,"-$1").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=/([A-Z])/g;e.exports=t.default},function(e,t,n){"use strict";function i(e){return(0,r.default)(e).replace(a,"-ms-")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(245),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=/^ms-/;e.exports=t.default},function(e,t){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i,r,a,s,l){if(o(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,a,s,l],d=0;u=new Error(t.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var o=function(e){};e.exports=i},function(e,t,n){"use strict";var i=n(247),o=n(248);e.exports=function(){function e(){o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(1),a=i(r),s=n(15),l=i(s),u=n(75),c=i(u),d=n(10),p=i(d),f=n(115),h=i(f),m=n(251),g=i(m),v=n(38),b=i(v),y=n(118),_=i(y),w=n(254),C=i(w),k=n(22),x=i(k),E=n(108),T=i(E),S=n(31),P=i(S),O=n(74),I=i(O),M=new g.default,A=a.default.createClass({displayName:"Modal",propTypes:o({},h.default.propTypes,{show:a.default.PropTypes.bool,container:a.default.PropTypes.oneOfType([c.default,a.default.PropTypes.func]),onShow:a.default.PropTypes.func,onHide:a.default.PropTypes.func,backdrop:a.default.PropTypes.oneOfType([a.default.PropTypes.bool,a.default.PropTypes.oneOf(["static"])]),renderBackdrop:a.default.PropTypes.func,onEscapeKeyUp:a.default.PropTypes.func,onBackdropClick:a.default.PropTypes.func,backdropStyle:a.default.PropTypes.object,backdropClassName:a.default.PropTypes.string,containerClassName:a.default.PropTypes.string,keyboard:a.default.PropTypes.bool,transition:p.default,dialogTransitionTimeout:a.default.PropTypes.number,backdropTransitionTimeout:a.default.PropTypes.number,autoFocus:a.default.PropTypes.bool,enforceFocus:a.default.PropTypes.bool,restoreFocus:a.default.PropTypes.bool,onEnter:a.default.PropTypes.func,onEntering:a.default.PropTypes.func,onEntered:a.default.PropTypes.func,onExit:a.default.PropTypes.func,onExiting:a.default.PropTypes.func,onExited:a.default.PropTypes.func,manager:a.default.PropTypes.object.isRequired}),getDefaultProps:function(){return{show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:M,renderBackdrop:function(e){return a.default.createElement("div",e)}}},omitProps:function(e,t){var n=Object.keys(e),i={};return n.map(function(n){Object.prototype.hasOwnProperty.call(t,n)||(i[n]=e[n])}),i},getInitialState:function(){return{exited:!this.props.show}},render:function(){var e=this.props,t=e.show,n=e.container,i=e.children,s=e.transition,l=e.backdrop,u=e.dialogTransitionTimeout,c=e.className,d=e.style,p=e.onExit,f=e.onExiting,m=e.onEnter,g=e.onEntering,v=e.onEntered,b=a.default.Children.only(i),y=this.omitProps(this.props,A.propTypes);if(!(t||s&&!this.state.exited))return null;var _=b.props,w=_.role,C=_.tabIndex;return void 0!==w&&void 0!==C||(b=(0,r.cloneElement)(b,{role:void 0===w?"document":w,tabIndex:null==C?"-1":C})),s&&(b=a.default.createElement(s,{transitionAppear:!0,unmountOnExit:!0,in:t,timeout:u,onExit:p,onExiting:f,onExited:this.handleHidden,onEnter:m,onEntering:g,onEntered:v},b)),a.default.createElement(h.default,{ref:this.setMountNode,container:n},a.default.createElement("div",o({ref:"modal",role:w||"dialog"},y,{style:d,className:c}),l&&this.renderBackdrop(),b))},renderBackdrop:function(){var e=this,t=this.props,n=t.backdropStyle,i=t.backdropClassName,o=t.renderBackdrop,r=t.transition,s=t.backdropTransitionTimeout,l=function(t){return e.backdrop=t},u=a.default.createElement("div",{ref:l,style:this.props.backdropStyle,className:this.props.backdropClassName,onClick:this.handleBackdropClick});return r&&(u=a.default.createElement(r,{transitionAppear:!0,in:this.props.show,timeout:s},o({ref:l,style:n,className:i,onClick:this.handleBackdropClick}))),u},componentWillReceiveProps:function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},componentWillUpdate:function(e){!this.props.show&&e.show&&this.checkForFocus()},componentDidMount:function(){this.props.show&&this.onShow()},componentDidUpdate:function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},componentWillUnmount:function(){var e=this.props,t=e.show,n=e.transition;(t||n&&!this.state.exited)&&this.onHide()},onShow:function(){var e=(0,b.default)(this),t=(0,I.default)(this.props.container,e.body);this.props.manager.add(this,t,this.props.containerClassName),this._onDocumentKeyupListener=(0,_.default)(e,"keyup",this.handleDocumentKeyUp),this._onFocusinListener=(0,C.default)(this.enforceFocus),this.focus(),this.props.onShow&&this.props.onShow()},onHide:function(){this.props.manager.remove(this),this._onDocumentKeyupListener.remove(),this._onFocusinListener.remove(),this.props.restoreFocus&&this.restoreLastFocus()},setMountNode:function(e){this.mountNode=e?e.getMountNode():e},handleHidden:function(){if(this.setState({exited:!0}),this.onHide(),this.props.onExited){var e;(e=this.props).onExited.apply(e,arguments)}},handleBackdropClick:function(e){e.target===e.currentTarget&&(this.props.onBackdropClick&&this.props.onBackdropClick(e),!0===this.props.backdrop&&this.props.onHide())},handleDocumentKeyUp:function(e){this.props.keyboard&&27===e.keyCode&&this.isTopModal()&&(this.props.onEscapeKeyUp&&this.props.onEscapeKeyUp(e),this.props.onHide())},checkForFocus:function(){x.default&&(this.lastFocus=(0,T.default)())},focus:function(){var e=this.props.autoFocus,t=this.getDialogElement(),n=(0,T.default)((0,b.default)(this)),i=n&&(0,P.default)(t,n);t&&e&&!i&&(this.lastFocus=n,t.hasAttribute("tabIndex")||(t.setAttribute("tabIndex",-1),(0,l.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".')),t.focus())},restoreLastFocus:function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},enforceFocus:function(){if(this.props.enforceFocus&&this.isMounted()&&this.isTopModal()){var e=(0,T.default)((0,b.default)(this)),t=this.getDialogElement();t&&t!==e&&!(0,P.default)(t,e)&&t.focus()}},getDialogElement:function(){var e=this.refs.modal;return e&&e.lastChild},isTopModal:function(){return this.props.manager.isTopModal(this)}});A.Manager=g.default,t.default=A,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=-1;return e.some(function(e,i){if(t(e,i))return n=i,!0}),n}function a(e,t){return r(e,function(e){return-1!==e.modals.indexOf(t)})}function s(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,d.default)(t,"paddingRight")||0,10)+(0,m.default)()+"px"),(0,d.default)(t,n)}function l(e,t){var n=e.style;Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(45),d=i(c),p=n(232),f=i(p),h=n(114),m=i(h),g=n(119),v=i(g),b=n(256),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hideSiblingNodes,i=void 0===n||n,r=t.handleContainerOverflow,a=void 0===r||r;o(this,e),this.hideSiblingNodes=i,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]}return u(e,[{key:"add",value:function(e,t,n){var i=this.modals.indexOf(e),o=this.containers.indexOf(t);if(-1!==i)return i;if(i=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&(0,b.hideSiblings)(t,e.mountNode),-1!==o)return this.data[o].modals.push(e),i;var r={modals:[e],classes:n?n.split(/\s+/):[],overflowing:(0,v.default)(t)};return this.handleContainerOverflow&&s(r,t),r.classes.forEach(f.default.addClass.bind(null,t)),this.containers.push(t),this.data.push(r),i}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1!==t){var n=a(this.data,e),i=this.data[n],o=this.containers[n];i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(t,1),0===i.modals.length?(i.classes.forEach(f.default.removeClass.bind(null,o)),this.handleContainerOverflow&&l(i,o),this.hideSiblingNodes&&(0,b.showSiblings)(o,e.mountNode),this.containers.splice(n,1),this.data.splice(n,1)):this.hideSiblingNodes&&(0,b.ariaHidden)(!1,i.modals[i.modals.length-1].mountNode)}}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),d=i(c),p=n(115),f=i(p),h=n(253),m=i(h),g=n(116),v=i(g),b=n(10),y=i(b),_=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={exited:!e.show},i.onHiddenListener=i.handleHidden.bind(i),i}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})}},{key:"render",value:function(){var e=this.props,t=e.container,n=e.containerPadding,i=e.target,r=e.placement,a=e.shouldUpdatePosition,s=e.rootClose,l=e.children,u=e.transition,c=o(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(c.show||u&&!this.state.exited))return null;var p=l;if(p=d.default.createElement(m.default,{container:t,containerPadding:n,target:i,placement:r,shouldUpdatePosition:a},p),u){var h=c.onExit,g=c.onExiting,b=c.onEnter,y=c.onEntering,_=c.onEntered;p=d.default.createElement(u,{in:c.show,transitionAppear:!0,onExit:h,onExiting:g,onExited:this.onHiddenListener,onEnter:b,onEntering:y,onEntered:_},p)}return s&&(p=d.default.createElement(v.default,{onRootClose:c.onHide},p)),d.default.createElement(f.default,{container:t},p)}},{key:"handleHidden",value:function(){if(this.setState({exited:!0}),this.props.onExited){var e;(e=this.props).onExited.apply(e,arguments)}}}]),t}(d.default.Component);_.propTypes=l({},f.default.propTypes,m.default.propTypes,{show:d.default.PropTypes.bool,rootClose:d.default.PropTypes.bool,onHide:function(e){var t=d.default.PropTypes.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.apply(void 0,[e].concat(i))},transition:y.default,onEnter:d.default.PropTypes.func,onEntering:d.default.PropTypes.func,onEntered:d.default.PropTypes.func,onExit:d.default.PropTypes.func,onExiting:d.default.PropTypes.func,onExited:d.default.PropTypes.func}),t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(7),d=i(c),p=n(1),f=i(p),h=n(14),m=i(h),g=n(75),v=i(g),b=n(255),y=i(b),_=n(74),w=i(_),C=n(38),k=i(C),x=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},i._needsFlush=!1,i._lastTarget=null,i}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.updatePosition(this.getTarget())}},{key:"componentWillReceiveProps",value:function(){this._needsFlush=!0}},{key:"componentDidUpdate",value:function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,i=o(e,["children","className"]),r=this.state,a=r.positionLeft,s=r.positionTop,u=o(r,["positionLeft","positionTop"]);delete i.target,delete i.container,delete i.containerPadding,delete i.shouldUpdatePosition;var c=f.default.Children.only(t);return(0,p.cloneElement)(c,l({},i,u,{positionLeft:a,positionTop:s,className:(0,d.default)(n,c.props.className),style:l({},c.props.style,{left:a,top:s})}))}},{key:"getTarget",value:function(){var e=this.props.target,t="function"==typeof e?e():e;return t&&m.default.findDOMNode(t)||null}},{key:"maybeUpdatePosition",value:function(e){var t=this.getTarget();(this.props.shouldUpdatePosition||t!==this._lastTarget||e)&&this.updatePosition(t)}},{key:"updatePosition",value:function(e){if(this._lastTarget=e,!e)return void this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});var t=m.default.findDOMNode(this),n=(0,w.default)(this.props.container,(0,k.default)(this).body);this.setState((0,y.default)(this.props.placement,t,e,n,this.props.containerPadding))}}]),t}(f.default.Component);x.propTypes={target:f.default.PropTypes.oneOfType([v.default,f.default.PropTypes.func]),container:f.default.PropTypes.oneOfType([v.default,f.default.PropTypes.func]),containerPadding:f.default.PropTypes.number,placement:f.default.PropTypes.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:f.default.PropTypes.bool},x.displayName="Position",x.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=x,e.exports=t.default},function(e,t){"use strict";function n(e){var t=!document.addEventListener,n=void 0;return t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)}),{remove:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0,n=void 0,i=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,i=(0,f.default)((0,m.default)(e).documentElement)||(0,f.default)(e);else{var o=(0,u.default)(e);t=o.width,n=o.height,i=(0,f.default)(e)}return{width:t,height:n,scroll:i}}function r(e,t,n,i){var r=o(n),a=r.scroll,s=r.height,l=e-i-a,u=e+i-a+t;return l<0?-l:u>s?s-u:0}function a(e,t,n,i){var r=o(n),a=r.width,s=e-i,l=e+i+t;return s<0?-s:l>a?a-l:0}function s(e,t,n,i,o){var s="BODY"===i.tagName?(0,u.default)(n):(0,d.default)(n,i),l=(0,u.default)(t),c=l.height,p=l.width,f=void 0,h=void 0,m=void 0,g=void 0;if("left"===e||"right"===e){h=s.top+(s.height-c)/2,f="left"===e?s.left-p:s.left+s.width;var v=r(h,c,i,o);h+=v,g=50*(1-2*v/c)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');f=s.left+(s.width-p)/2,h="top"===e?s.top-c:s.top+s.height;var b=a(f,p,i,o);f+=b,m=50*(1-2*b/p)+"%",g=void 0}return{positionLeft:f,positionTop:h,arrowOffsetLeft:m,arrowOffsetTop:g}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var l=n(110),u=i(l),c=n(238),d=i(c),p=n(111),f=i(p),h=n(38),m=i(h);e.exports=t.default},function(e,t){"use strict";function n(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function i(e,t){s(e,t,function(e){return n(!0,e)})}function o(e,t){s(e,t,function(e){return n(!1,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.ariaHidden=n,t.hideSiblings=i,t.showSiblings=o;var r=["template","script","style"],a=function(e){var t=e.nodeType,n=e.tagName;return 1===t&&-1===r.indexOf(n.toLowerCase())},s=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(e){-1===t.indexOf(e)&&a(e)&&n(e)})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){function n(i,o){function a(e,n){var i=d.getLinkName(e),r=this.props[o[e]];i&&l(this.props,i)&&!r&&(r=this.props[i].requestChange);for(var a=arguments.length,s=Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];t(this,e,r,n,s)}function l(e,t){return void 0!==e[t]}function c(e){var t={};return d.each(e,function(e,n){-1===b.indexOf(n)&&(t[n]=e)}),t}var p,f=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],h=i.displayName||i.name||"Component",m=d.getType(i).propTypes,g=d.isReactComponent(i),v=Object.keys(o),b=["valueLink","checkedLink"].concat(v.map(d.defaultKey));p=d.uncontrolledPropTypes(o,m,h),(0,u.default)(g||!f.length,"[uncontrollable] stateless function components cannot pass through methods because they have no associated instances. Check component: "+h+", attempting to pass through methods: "+f.join(", ")),f=d.transform(f,function(e,t){e[t]=function(){var e;return(e=this.refs.inner)[t].apply(e,arguments)}},{});var y=s.default.createClass(r({displayName:"Uncontrolled("+h+")",mixins:e,propTypes:p},f,{componentWillMount:function(){var e=this,t=this.props;this._values={},v.forEach(function(n){e._values[n]=t[d.defaultKey(n)]})},componentWillReceiveProps:function(e){var t=this,n=this.props;v.forEach(function(i){void 0===d.getValue(e,i)&&void 0!==d.getValue(n,i)&&(t._values[i]=e[d.defaultKey(i)])})},getControlledInstance:function(){return this.refs.inner},render:function(){var e=this,t={},n=c(this.props);return d.each(o,function(n,i){var o=d.getLinkName(i),r=e.props[i];o&&!l(e.props,i)&&l(e.props,o)&&(r=e.props[o].value),t[i]=void 0!==r?r:e._values[i],t[n]=a.bind(e,i)}),t=r({},n,t,{ref:g?"inner":null}),s.default.createElement(i,t)}}));return y.ControlledComponent=i,y.deferControlTo=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2];return n(e,r({},o,t),i)},y}return n}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=o
;var a=n(1),s=i(a),l=n(72),u=i(l),c=n(258),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return{}}function r(e){return b[0]>=15||0===b[0]&&b[1]>=13?e:e.type}function a(e,t){var n=l(t);return n&&!s(e,t)&&s(e,n)?e[n].value:e[t]}function s(e,t){return void 0!==e[t]}function l(e){return"value"===e?"valueLink":"checked"===e?"checkedLink":null}function u(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function c(e,t,n){return function(){for(var i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];t&&t.call.apply(t,[e].concat(o)),n&&n.call.apply(n,[e].concat(o))}}function d(e,t,n){return p(e,t.bind(null,n=n||(Array.isArray(e)?[]:{}))),n}function p(e,t,n){if(Array.isArray(e))return e.forEach(t,n);for(var i in e)f(e,i)&&t.call(n,e[i],i,e)}function f(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function h(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}t.__esModule=!0,t.version=void 0,t.uncontrolledPropTypes=o,t.getType=r,t.getValue=a,t.getLinkName=l,t.defaultKey=u,t.chain=c,t.transform=d,t.each=p,t.has=f,t.isReactComponent=h;var m=n(1),g=i(m),v=n(72),b=(i(v),t.version=g.default.version.split(".").map(parseFloat))}])}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/ActionOverlay",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/common/ActionOverlay",["module","exports","react","react-bootstrap","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./ActionOverlay"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.showActions&&(e.item.hasDelete||e.item.hasDuplicate)?s.default.createElement("div",{className:"op-action-overlay"},function(e,t,n){return e||(t+=" op-hidden"),s.default.createElement("span",{className:t,onClick:n})}(e.item.hasDelete,"action-icon glyphicon glyphicon-remove-circle",function(t){e.callbacks.deleteItem(e.item.id),t.stopPropagation()}),function(t,n,o){return t||(n+=" op-hidden"),s.default.createElement(i.OverlayTrigger,{placement:"top",key:e.item.id,overlay:s.default.createElement(i.Tooltip,{id:"transition-tooltip-"+e.item.id},l.default.builder.builderPanel.duplicate)},s.default.createElement("span",{className:n,onClick:o}))}(e.item.hasDuplicate,"action-icon glyphicon glyphicon-duplicate",function(t){e.callbacks.duplicateItem(e.item.id),t.stopPropagation()})):null}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(o);t.default=a,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/ItemMain",[],function(){}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMain",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMain",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMain"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t="op-item-main builder-overview "+e.item.size;e.item.scanResults&&(e.item.scanResults.hasErrors?t+=" error":e.item.scanResults.hasWarnings&&(t+=" warning"));return a.default.createElement("div",{style:e.item.thumbnail?{backgroundImage:"url("+e.item.thumbnail+")"}:null,className:t},function(){return e.item.showTitleBar?a.default.createElement("div",{className:"title-bar"},a.default.createElement("span",{className:"title"},a.default.createElement("span",{className:e.item.icon+" icon"}),e.item.title)):e.item.icon?a.default.createElement("span",{className:"item-icon"},a.default.createElement("span",{className:e.item.icon+" icon"})):e.item.text?a.default.createElement("div",{className:"text-overlay"},a.default.createElement("p",{className:"item-text"},e.item.text)):null}(),function(){return e.item.label?a.default.createElement("div",{className:"item-label"},e.item.label):null}(),a.default.createElement(s.default,e))}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i);t.default=r,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMainButton",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMainButton",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMainButton"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t="op-item-main item-button "+e.item.size;return e.item.scanResults&&(e.item.scanResults.hasErrors?t+=" error":e.item.scanResults.hasWarnings&&(t+=" warning")),a.default.createElement("div",{className:t},a.default.createElement("div",null,e.item.label),a.default.createElement(s.default,e))}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i);t.default=r,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/Item",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/Item",["module","exports","react","./ItemMain","./ItemMainButton","lib-build/less!./../common/Item"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showActions:!1},e.renderInnerItem=e.renderInnerItem.bind(e),e}return l(t,e),f(t,[{key:"renderInnerItem",value:function(){var e=this,t=c.default,n="op-item";return"button"===this.props.item.style&&(t=d.default),this.props.selected&&(n+=" selected"),this.props.item.hasOrganize||(n+=" undraggable"),this.props.organize&&(n+=" organize"),"simple-text"==this.props.item.style&&(n+=" style-simple-text"),u.default.createElement("div",{className:n,onClick:function(){e.props.organize||(e.props.onItemClicked(e.props.item.id),e.props.callbacks.selectItem(e.props.item.id))},onMouseOver:function(){e.props.organize||e.setState({showActions:!0})},onMouseLeave:function(){e.setState({showActions:!1})},"data-id":this.props.item.id},u.default.createElement(t,p({showActions:this.state.showActions},this.props)))}},{key:"render",value:function(){return this.renderInnerItem()}}]),t}(u.default.Component);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/InlineAdd",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/InlineAdd",["module","exports","react","lib-build/less!./InlineAdd"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hovered:!1},e}return r(t,e),s(t,[{key:"render",value:function(){var e=this,t=null;return this.props.organize||(t=a.default.createElement("span",{className:"add-button",onClick:function(){e.props.addItem(e.props.index)}},a.default.createElement("span",{className:"icon glyphicon glyphicon-plus"}))),a.default.createElement("div",{className:"op-inline-add-container",onMouseEnter:function(){e.setState({hovered:!0})},onMouseLeave:function(){e.setState({hovered:!1})}},t)}}]),t}(a.default.Component);t.default=l,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/TransitionOverlay",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/TransitionOverlay",["module","exports","react","react-bootstrap","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./TransitionOverlay"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=function(t){var n="item btn-gray",i=null;return t.enabled||(n+=" disabled"),e.transition.id===t.id&&(n+=" selected",i=s.default.createElement("span",{className:"icon"},s.default.createElement("span",{className:"glyphicon glyphicon-ok"}))),s.default.createElement("li",{key:t.id,className:n,onClick:function(){t.enabled&&e.onItemClick(t.id)}},i,t.label)},n=Object.assign({},e);return delete n.transitions,delete n.transition,delete n.onItemClick,s.default.createElement(i.Popover,u({},n,{id:"transition-popover-"+e.itemID,placement:"top"}),s.default.createElement("h6",{className:"title"},l.default.builder.immersiveViewPanel.transition),s.default.createElement("ul",{className:"list"},function(){return e.transitions.map(function(n){return n.enabled?t(n):s.default.createElement(i.OverlayTrigger,{placement:"left",key:n.id,overlay:s.default.createElement(i.Tooltip,{id:"transition-tooltip-"+e.itemID+"-"+n.id},n.tooltip)},t(n))})}()))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(o),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=a,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Transition",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Transition",["module","exports","react","react-dom","react-bootstrap","./TransitionOverlay","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Transition"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(a),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){l(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={shown:!1},e.hidePopover=e.hidePopover.bind(e),e.togglePopover=e.togglePopover.bind(e),e.onTransitionClick=e.onTransitionClick.bind(e),e}return c(t,e),m(t,[{key:"hidePopover",value:function(){this.setState({shown:!1})}},{key:"togglePopover",value:function(){this.setState({shown:!this.state.shown})}},{key:"onTransitionClick",value:function(e){this.hidePopover(),this.props.callbacks.updateItemTransition(this.props.index,e)}},{key:"render",value:function(){var e=this;return this.props.firstItem?null:d.default.createElement("div",{className:"op-transition-container"},d.default.createElement(o.Overlay,{trigger:"click",placement:"top",rootClose:!0,show:this.state.shown,target:function(){return p.default.findDOMNode(e.refs.target)},onHide:this.hidePopover},d.default.createElement(f.default,{className:"op-transition-overlay",itemID:this.props.itemID,transitions:this.props.transitions,transition:this.props.transition,onItemClick:this.onTransitionClick})),d.default.createElement("div",{ref:"target",className:"op-transition-button",title:h.default.builder.immersiveViewPanel.chooseTransition,onClick:function(t){e.togglePopover(),t.stopPropagation()}},d.default.createElement("img",{className:"icon",src:this.props.transition.icon})))}}]),t}(d.default.Component);t.default=g,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/ItemMain",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/ItemMain",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMain"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t="op-item-main",n=e.item.scanResults||[],i=n.some(function(e){return e.hasErrors}),o=n.some(function(e){return e.hasWarnings});return i?t+=" error":o&&(t+=" warning"),a.default.createElement("div",{style:{backgroundImage:"url("+e.item.thumbnail+")"},className:t},a.default.createElement(s.default,e))}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i);t.default=r,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Item",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Item",["module","exports","react","./InlineAdd","./Transition","./ItemMain","lib-build/less!./../common/Item","lib-build/less!./Item"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){s(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showActions:!1},e.renderInlineAdd=e.renderInlineAdd.bind(e),e.renderInnerItem=e.renderInnerItem.bind(e),e.renderTransition=e.renderTransition.bind(e),e}return u(t,e),m(t,[{key:"renderInlineAdd",value:function(){return c.default.createElement(d.default,{organize:this.props.organize,lastItem:this.props.lastItem,addItem:this.props.callbacks.addItem,index:this.props.index})}},{key:"renderTransition",value:function(){var e=this;return c.default.createElement(p.default,{firstItem:this.props.firstItem,itemID:this.props.item.id,transitions:this.props.item.transitions,transition:this.props.item.transitions.find(function(t){return t.id===e.props.item.transition}),callbacks:this.props.callbacks,index:this.props.index})}},{key:"renderInnerItem",value:function(){var e=this,t="op-item";return this.props.selected&&(t+=" selected"),this.props.item.hasOrganize||(t+=" undraggable"),this.props.organize&&(t+=" organize"),c.default.createElement("div",{className:t,onClick:function(){e.props.organize||(e.props.onItemClicked(e.props.item.id),e.props.callbacks.selectItem(e.props.item.id))},onMouseOver:function(){e.props.organize||e.setState({showActions:!0})},onMouseLeave:function(){e.setState({showActions:!1})},"data-id":this.props.item.id},this.renderTransition(),c.default.createElement(f.default,h({showMedia:!0,showActions:this.state.showActions},this.props)))}},{key:"render",value:function(){return c.default.createElement("div",{className:"op-item-outer","data-id":this.props.item.id},this.renderInnerItem(),this.renderInlineAdd())}}]),t}(c.default.Component);t.default=g,e.exports=t.default}),function(e){"function"==typeof define&&define.amd?define("lib/jquery-mousewheel/jquery.mousewheel.min",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),u=0,d=0,p=0,f=0,h=0,m=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*p,p=0),u=0===p?d:p,"deltaY"in a&&(p=-1*a.deltaY,u=p),"deltaX"in a&&(d=a.deltaX,0===p&&(u=-1*d)),0!==p||0!==d){if(1===a.deltaMode){var g=e.data(this,"mousewheel-line-height");u*=g,p*=g,d*=g}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");u*=v,p*=v,d*=v}if(f=Math.max(Math.abs(p),Math.abs(d)),(!r||r>f)&&(r=f,i(a,f)&&(r/=40)),i(a,f)&&(u/=40,d/=40,p/=40),u=Math[u>=1?"floor":"ceil"](u/r),d=Math[d>=1?"floor":"ceil"](d/r),p=Math[p>=1?"floor":"ceil"](p/r),c.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();h=t.clientX-b.left,m=t.clientY-b.top}return t.deltaX=d,t.deltaY=p,t.deltaFactor=r,t.offsetX=h,t.offsetY=m,t.deltaMode=0,s.unshift(t,u,d,p),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){r=null}function i(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var o,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/List",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/List",["module","exports","react","lib/Sortable/Sortable","./item/builderOverview/Item","./item/immersiveView/Item","lib/jquery-mousewheel/jquery.mousewheel.min","lib-build/less!./List"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){s(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sortableContainersDecorator=e.sortableContainersDecorator.bind(e),e.sortableGroupDecorator=e.sortableGroupDecorator.bind(e),e.showItems=e.showItems.bind(e),e.preventPageScroll=e.preventPageScroll.bind(e),e.onScroll=e.onScroll.bind(e),e.handleHorizontalScroll=e.handleHorizontalScroll.bind(e),e.sortableGroupInstance=null,e.sortableContainerInstance=null,e.listNode=null,e}return u(t,e),h(t,[{key:"componentDidMount",value:function(){this.listNode=$(this.props.container).find(".op-list.group-list")[0],$(this.listNode).on("mousewheel",this.onScroll)}},{key:"onScroll",value:function(e){"vertical"===this.props.orientation?this.preventPageScroll(e.originalEvent):this.handleHorizontalScroll(e)}},{key:"handleHorizontalScroll",value:function(e){var t=$(e.currentTarget),n=e.deltaX,i=e.deltaY;e.preventDefault(),Math.abs(n)>Math.abs(i)?t.scrollLeft(t.scrollLeft()+n*e.deltaFactor):t.scrollLeft(t.scrollLeft()-i*e.deltaFactor)}},{key:"preventPageScroll",value:function(e){this.listNode.scrollHeight>=this.listNode.clientHeight&&(this.listNode.scrollHeight-this.listNode.scrollTop<=this.listNode.clientHeight&&e.deltaY>0&&e.preventDefault(),0===this.listNode.scrollTop&&e.deltaY<0&&e.preventDefault())}},{key:"componentDidUpdate",value:function(e){e.organize!==this.props.organize&&this.sortableGroupInstance.option("disabled",!this.props.organize)}},{key:"componentWillUnmount",value:function(){this.sortableGroupInstance.destroy(),this.sortableContainerInstance.destroy(),this.listNode.removeEventListener("wheel",this.preventPageScroll)}},{key:"sortableContainersDecorator",value:function(e){var t=null;e&&(t={},this.sortableContainerInstance=d.default.create(e,t))}},{key:"sortableGroupDecorator",value:function(e){var t=this,n=null;e&&(n={disabled:!0,ghostClass:"drop-zone",chosenClass:"chosen",filter:".undraggable",animation:300,onUpdate:function(){var e=t.sortableGroupInstance.toArray();t.props.updateOrder(e)},onMove:function(e){if($(e.related).hasClass("undraggable"))return!1}},this.sortableGroupInstance=d.default.create(e,n))}},{key:"showItems",value:function(){var e=this,t=p.default;return"horizontal"===this.props.orientation&&(t=f.default),this.props.items.map(function(n,i,o){var r=0===i,a=i===o.length-1;return c.default.createElement(t,{key:n.id,item:n,index:i,onItemClicked:e.props.changeSelectedItem,selected:e.props.selectedItem===n.id,callbacks:e.props.callbacks,organize:e.props.organize,orientation:e.props.orientation,firstItem:r,lastItem:a})})}},{key:"render",value:function(){var e="op-list";return this.props.organize&&(e+=" organize"),c.default.createElement("div",{className:"group-list "+e,ref:this.sortableGroupDecorator},this.showItems())}}]),t}(c.default.Component);t.default=m,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/Panel",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/Panel",["module","exports","react","./list/List","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Panel"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.organize?u.default.builder.builderPanel.done:u.default.builder.builderPanel.organize,n="icon glyphicon",i="organize-toggle-wrapper",o="op-panel";"horizontal"===e.orientation&&(o+=" op-style-horizontal"),e.organize?(o+=" organize",i+=" btn-bright",n+=" glyphicon-ok done"):n+=" glyphicon-sort organize";return s.default.createElement("div",{className:o},s.default.createElement(l.default,e),s.default.createElement("div",{className:"organize-toggle",onClick:function(){e.organize&&e.callbacks.organize(e.order),e.toggleOrganize()}},s.default.createElement("div",{className:i},s.default.createElement("span",{className:n}),"horizontal"===e.orientation?null:t)),function(){if("horizontal"===e.orientation&&e.items&&e.items.length){if(1===e.items.length&&"empty"===e.items[0].mediaType)return s.default.createElement("div",{className:"overview-orientation"},s.default.createElement("div",{className:"overview-orientation-text"},u.default.builder.immersiveViewPanel.invite))}return null}())}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=r(o);t.default=a,e.exports=t.default}),define("storymaps-react/tpl/builder/overviewPanel/PanelContainer",["module","exports","react-redux","./actions","./Panel"],function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){return{items:e.items,organize:e.organize,selectedItem:e.selectedItem,order:e.order}},l=function(e){return{toggleOrganize:function(){e(r.toggleOrganize())},changeSelectedItem:function(t){e(r.changeSelectedItem(t))},updateOrder:function(t){e(r.updateOrder(t))}}};t.default=(0,n.connect)(s,l)(a.default),e.exports=t.default}),define("storymaps-react/tpl/builder/overviewPanel/OverviewPanel",["module","exports","react","react-dom","redux","react-redux","./reducer","./actions","./PanelContainer"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){function a(e,n){var i=0,o=0,r=0,a=0,s=0,l=0,u=0,c=0;"horizontal"===t?(r=n[0].offsetWidth/2,a=e[0].offsetWidth/2,o=a-r,u=n.offset().left-(e.offset().left-e.scrollLeft()),i=u-o,i<0&&(i=0),e.animate({scrollLeft:i},800)):(s=n[0].offsetHeight/2,l=e[0].offsetHeight/2,o=l-s,c=n.offset().top-(e.offset().top-e.scrollTop()),i=c-o,i<0&&(i=0),e.animate({scrollTop:i},500))}var s={selectedItem:n.length?n[0].id:"",items:n,organize:!1,order:n.map(function(e){return e.id})},l=(0,o.createStore)(p.default,s);d.default.render(c.default.createElement(r.Provider,{store:l},c.default.createElement(h.default,{callbacks:i,orientation:t,container:e})),e),this.updateItems=function(e){l.dispatch(f.updateItems(e));var t=e.map(function(e){return e.id});l.dispatch(f.updateOrder(t))},this.navigateTo=function(t){l.dispatch(f.changeSelectedItem(t));var n=$(e).find(".group-list"),i=n.find('[data-id="'+t+'"]');n.length&&i.length&&a(n,i)}};var c=u(n),d=u(i),p=u(a),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),h=u(l);e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/panel/BuilderPanel",[],function(){}),define("storymaps-react/tpl/builder/panel/BuilderPanel",["module","exports","lib-build/hbars!./BuilderPanel","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/i18n!resources/tpl/viewer/nls/app","../overviewPanel/OverviewPanel","storymaps/tpl/builder/BuilderHelper","dojo/topic","lib-build/less!./BuilderPanel"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=l(n),d=l(i),p=l(o),f=l(r),h=l(a),m=l(s),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u(this,e),this._node=t.container,this._saveApp=t.saveApp,this._shareApp=t.shareApp,this._saveFailed=!1,!this._node||!this._saveApp||!this._shareApp)return void console.error("Could not initialize Builder Panel");var n=d.default.builder.builderPanel.publicWarning,i=d.default.builder.builderPanel.organizationWarning;this._node.html((0,c.default)({btnSave:p.default.viewer.common.save,sharingLevelStrings:d.default.builder.share,strings:d.default.builder.builderPanel,publicWarning:n,organizationWarning:i})),this._overviewPanel=null,this._node.find(".btn-share-container .btn-share-wrapper").tooltip({container:".section-builder-panel",placement:"top"}),this._node.find(".btn-share-container .btn-share-wrapper").on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("share-tooltip")}),this._node.find(".btn-share-container .btn-share-wrapper").on("show.bs.tooltip",function(){$(this).closest(".btn-share-outer-tooltip.tooltip-enabled").tooltip("show")}),this._node.find(".btn-share-container .btn-share-wrapper").on("hide.bs.tooltip",function(){$(this).closest(".btn-share-outer-tooltip.tooltip-enabled").tooltip("hide")}),this._node.find(".btn-share-outer-tooltip.tooltip-enabled").tooltip({placement:"bottom",container:".section-builder-panel",trigger:"manual"}),this._node.find(".btn-share-outer-tooltip.tooltip-enabled").on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("custom-warning tooltip-bright")}),this._initEvents()}return g(e,[{key:"_initEvents",value:function(){m.default.subscribe("tpl-ready",this._onStoryReady.bind(this)),m.default.subscribe("builder-section-update",this._updateOverview.bind(this)),m.default.subscribe("story-navigated-section",this._onSectionNavigate.bind(this)),m.default.subscribe("builder-story-title-update",this._updateStoryTitle.bind(this)),m.default.subscribe("builder-story-update",this._updateSaveButtonStatus.bind(this)),m.default.subscribe("check-app-started",this._onStoryCheckStarted.bind(this)),m.default.subscribe("check-app-complete",this._onStoryCheckComplete.bind(this)),this._node.find(".btn-settings").click(this._onSettings.bind(this)),this._node.find(".btn-preview").click(this._onPreview.bind(this)),this._node.find(".my-stories-link").click(this._onCheck.bind(this)),this._node.find(".btn-save").click(this._onSave.bind(this));var e=d.default.builder.builderPanel.betaNote.replace(/\${APP_NAME}/g,"Story Map Cascade");this._node.find(".beta-tooltip").tooltip({title:e,placement:"bottom",container:".section-builder-panel"}),this._node.find(".check-tooltip").tooltip({
title:d.default.builder.builderPanel.mystoriestooltip,placement:"right",container:".section-builder-panel"}),this._node.find(".my-stories-link").tooltip({container:".btn-check"})}},{key:"_onStoryReady",value:function(){this._initShareButtons(),this._updateShareButtons(),this._updatePreviewButton(),this._updateCheckButton(),this._updateOverview()}},{key:"_onStoryCheckStarted",value:function(){this._updateIssueStatusButton(null,!1)}},{key:"_onStoryCheckComplete",value:function(e){this._updateIssueStatusButton(e,!0),this._updateOverview()}},{key:"_updateStoryTitle",value:function(){var e=this._node.find(".builder-panel-tools .btn-save"),t=this._node.find(".builder-panel-tools .btn:not(.btn-save)"),n=app.Controller.getStoryTitle();e.toggleClass("disabled",!n),n?this._saveFailed?t.tooltip("destroy"):e.tooltip("destroy"):e.tooltip({title:d.default.builder.builderPanel.addTitleNote,placement:"right",container:".section-builder-panel"}),this._updateShareButtons(),this._updatePreviewButton(),this._updateCheckButton()}},{key:"_onSettings",value:function(e){$(e.currentTarget).hasClass("disabled")||app.Controller.openSettings()}},{key:"_initShareButtons",value:function(){var e=!1!==app.portal.isOrganization,t=app.portal.getPortalUser().privileges||[],n=app.data.appItem.item.access,i=app.data.appItem.item.itemControl,o=e&&t.indexOf("portal:user:shareToOrg")>-1,r=!e||t.indexOf("portal:user:shareToPublic")>-1,a="private"==n||"shared"==n,s="account"===n||"org"===n,l=app.data.appItem.item.owner==app.portal.getPortalUser().username;"update"==i?(o=!1,r=!1):"admin"!=i||l||(o=t.indexOf("portal:admin:shareToOrg")>-1,r=t.indexOf("portal:admin:shareToPublic")>-1),s?o=!0:a||(r=!0),this._node.find('.btn-share-outer-tooltip[data-level="org"]').toggle(o),this._node.find('.btn-share-outer-tooltip[data-level="public"]').toggle(r),this._node.find(".btn-share-wrapper").click(this._onChangeSharing.bind(this))}},{key:"_onChangeSharing",value:function(e){var t=$(e.currentTarget);this._node.find(".btn-share-this._node").addClass("disabled"),this._node.find(".btn-share-wrapper").removeClass("active"),t.addClass("sharing"),this._shareApp({sharingLevel:t.data("level")}).then(function(){this._updateShareButtons(),this._updatePreviewButton(),app.Controller.renderHeader()}.bind(this),function(){this._updateShareButtons(),this._updatePreviewButton(),app.Controller.renderHeader()}.bind(this))}},{key:"_updateShareButtons",value:function(){var e="private",t=!!app.data.appItem.item.id;this._node.find(".btn-share").toggleClass("disabled",!t),this._node.find(".btn-share-wrapper").removeClass("sharing"),app.data.appItem.item&&app.data.appItem.item.access&&app.Controller.getStoryTitle()?(e=app.data.appItem.item.access,"shared"===e&&(e="private"),"account"!==e&&"org"!==e||(e="org"),this._node.find(".btn-share-container").removeClass("disabled"),this._node.find(".btn-share-wrapper[data-level="+e+"]").addClass("active")):this._node.find(".btn-share-container").addClass("disabled")}},{key:"_updatePreviewButton",value:function(){var e=app.data.appItem.item.access,t=!!app.data.appItem.item.id,n="account"===e||"org"===e||"public"===e,i=this._node.find(".btn-preview");i.toggleClass("disabled",!t),t&&!n?i.tooltip({title:d.default.builder.builderPanel.notSharedNote,placement:"bottom",container:".section-builder-panel"}):i.tooltip("destroy")}},{key:"_onPreview",value:function(e){if(!$(e.currentTarget).hasClass("disabled")){window.open(app.Controller.getStoryURL()+"&preview","_blank");var t=window.onfocus||function(){};window.onfocus=function(){t(),setTimeout(function(){$(e.currentTarget).blur()},500),window.onfocus=t()}}}},{key:"_updateCheckButton",value:function(){var e=!!app.data.appItem.item.id,t=this._node.find(".btn-check");t.toggleClass("disabled",!e),e?t.tooltip({title:d.default.builder.builderPanel.mystoriestooltip,placement:"bottom",container:".section-builder-panel"}):t.tooltip("destroy")}},{key:"_onCheck",value:function(e){$(e.currentTarget).hasClass("disabled")||window.open(h.default.getMyStoriesURL(),"_blank")}},{key:"_updateSaveButtonStatus",value:function(){var e=this._node.find(".btn-save"),t=app.Controller.getStoryTitle();e.toggleClass("btn-bright",!(!t||!app.builder.pendingChanges))}},{key:"_onSave",value:function(e){var t=$(e.currentTarget);t.hasClass("disabled")||(t.removeClass("saved").addClass("saving disabled"),t.find(".btn-save-label").html(d.default.builder.builderPanel.buttonSaving),this._saveApp())}},{key:"saveSucceeded",value:function(){var e=this;this._saveFailed=!1,this._node.find(".btn-save").removeClass("saving disabled").addClass("saved"),this._node.find(".btn-save-label").html(d.default.builder.builderPanel.buttonSaved),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip("destroy"),setTimeout(function(){e._node.find(".btn-save").removeClass("saved").find(".btn-save-label").html(p.default.viewer.common.save)},3500),this._updateSaveButtonStatus(),this._updateShareButtons(),this._updatePreviewButton(),this._updateCheckButton()}},{key:"saveFailed",value:function(){var e=this;this._saveFailed=!0,this._node.find(".btn-save").removeClass("saving").addClass("error"),this._node.find(".btn-save-label").html(d.default.builder.builderPanel.buttonError),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip({trigger:"manual",placement:"right",container:".section-builder-panel"}),this._node.find('.btn-save[data-toggle="tooltip"]').on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("tooltip-danger")}),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip("show"),setTimeout(function(){e._node.find(".btn-save").removeClass("error disabled").find(".btn-save-label").html(p.default.viewer.common.save)},3500)}},{key:"_updateIssueStatusButton",value:function(e,t){var n=this._node.find(".btn-check");if(n.removeClass("checking no-issues errors warnings"),t)if(e.errors.allItems.length){n.addClass("errors");var i=0;Object.keys(e.errors.byId).forEach(function(t){var n=e.errors.byId[t].media;n&&n.length&&(i+=n.length)}),this._node.find(".issue-count").text(i)}else e.warnings.allItems.length?n.addClass("warnings"):n.addClass("no-issues");else n.addClass("checking")}},{key:"_updateOverview",value:function(){var e=app.Controller.getStoryOverview();this._overviewPanel?this._overviewPanel.updateItems(e):this._initOverviewPanel(e)}},{key:"_onSectionNavigate",value:function(e){this._overviewPanel&&this._overviewPanel.navigateTo(app.Controller.getSectionIndexById(e.index))}},{key:"_initOverviewPanel",value:function(e){this._overviewPanel=new f.default(this._node.find(".overview")[0],"vertical",e,{selectItem:function(e){var t=app.Controller.getSectionById(e);app.Controller.navigateToSection({index:t,animate:!1})},duplicateItem:function(e){var t=app.Controller.getSectionById(e);app.Controller.duplicateSection({index:t})},toggleHidden:function(){},deleteItem:function(e){var t=app.Controller.getSectionById(e);app.Controller.deleteSection({index:t})},organize:function(e){var t=app.Controller.getSectionsIndexesByIds(e);app.Controller.organizeSections(t)}})}}]),e}();t.default=v,e.exports=t.default}),define("lib-build/hbars!storymaps/tpl/builder/SaveErrorPopupSocial",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div class="modal-dialog">\n\t<div class="modal-content">\n\t\t<div class="modal-logo"></div>\n\t\t<div class="modal-header">\n\t\t\t<h4 class="modal-title">'+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,"function"==typeof r?r.call(e,{name:"title",hash:{},data:i}):r))+'</h4>\n\t\t</div>\n\n\t\t<div class="modal-body">\n\t\t\t<div class="panel1">\n\t\t\t\t';return r=null!=(r=t.panel1||(null!=e?e.panel1:e))?r:a,o="function"==typeof r?r.call(e,{name:"panel1",hash:{},data:i}):r,null!=o&&(l+=o),l+='\n\t\t\t\t<a href="#" class="help" data-toggle="tooltip">\n\t\t\t\t\t<i class="fa fa-question-circle" aria-hidden="true"></i>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class="panel2">\n\t\t\t\t<div class="panel2lbl">'+s((r=null!=(r=t.panel2||(null!=e?e.panel2:e))?r:a,"function"==typeof r?r.call(e,{name:"panel2",hash:{},data:i}):r))+'</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="optErrorSocial" value="story" checked>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t'+s((r=null!=(r=t.panel2q1||(null!=e?e.panel2q1:e))?r:a,"function"==typeof r?r.call(e,{name:"panel2q1",hash:{},data:i}):r))+'\n\t\t\t\t\t\t\t\t<a href="#" class="help" data-toggle="tooltip" title="'+s((r=null!=(r=t.panel2q1tooltip||(null!=e?e.panel2q1tooltip:e))?r:a,"function"==typeof r?r.call(e,{name:"panel2q1tooltip",hash:{},data:i}):r))+'">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-question-circle" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type="radio" name="optErrorSocial" value="item">\n\t\t\t\t\t\t\t<span>',r=null!=(r=t.panel2q2||(null!=e?e.panel2q2:e))?r:a,o="function"==typeof r?r.call(e,{name:"panel2q2",hash:{},data:i}):r,null!=o&&(l+=o),l+='</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="panel3">',r=null!=(r=t.panel3||(null!=e?e.panel3:e))?r:a,o="function"==typeof r?r.call(e,{name:"panel3",hash:{},data:i}):r,null!=o&&(l+=o),l+'</div>\n\t\t</div>\n\n\t\t<div class="modal-footer">\n\t\t\t<div class="stop-asking">\n\t\t\t\t<div class="checkbox">\n\t\t\t\t\t<label class="disabled">\n\t\t\t\t\t\t<input type="checkbox" value="" disabled>\n\t\t\t\t\t\t'+s((r=null!=(r=t.panel4||(null!=e?e.panel4:e))?r:a,"function"==typeof r?r.call(e,{name:"panel4",hash:{},data:i}):r))+'\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button type="button" class="btn btn-primary">'+s((r=null!=(r=t.btnSave||(null!=e?e.btnSave:e))?r:a,"function"==typeof r?r.call(e,{name:"btnSave",hash:{},data:i}):r))+"</button>\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0})}),define("lib-build/css!storymaps/tpl/builder/SaveErrorPopupSocial",[],function(){}),define("storymaps/tpl/builder/SaveErrorPopupSocial",["lib-build/hbars!./SaveErrorPopupSocial","lib-build/css!./SaveErrorPopupSocial","storymaps/tpl/utils/CommonHelper","dojo/Deferred","dojo/i18n!resources/tpl/builder/nls/app.js?v="+app.version],function(e,t,n,i,o){return function(t){var r=null;t.append(e({title:o.builder.saveErrorSocial.title,panel1:o.builder.saveErrorSocial.panel1,panel2:o.builder.saveErrorSocial.panel2,panel2q1:o.builder.saveErrorSocial.panel2q1,panel2q1tooltip:o.builder.saveErrorSocial.panel2q1tooltip,panel2q2:o.builder.saveErrorSocial.panel2q2,panel3:o.builder.saveErrorSocial.panel3.replace("${MYSTORIES}",'<a href="'+n.getMyStoriesURL()+'" target="_blank">'+o.builder.saveErrorSocial.mystories+"</a>"),panel4:o.builder.saveErrorSocial.panel4,btnSave:o.builder.saveErrorSocial.save})),function(){t.find('input[name="optErrorSocial"]').change(function(){"story"==t.find('input[name="optErrorSocial"]:checked').val()?(t.find(".stop-asking input").attr("disabled","disabled").prop("checked",!1),t.find(".stop-asking label").addClass("disabled")):(t.find(".stop-asking input").removeAttr("disabled"),t.find(".stop-asking label").removeClass("disabled"))}),t.find(".btn-primary").click(function(){t.find(".stop-asking input").is(":checked")&&(app.data.appItem.data.values.config.doNotWarnTitle=!0),r.resolve({choice:t.find('input[name="optErrorSocial"]:checked').val()}),t.modal("hide")})}(),this.present=function(){return r=new i,t.find(".panel1 .help").tooltip({title:o.builder.saveErrorSocial.panel1tooltip+'<img src="resources/tpl/builder/icons/share/builder-help-social.png"/>',html:!0,placement:"right"}),t.find(".panel2 .help").tooltip(),t.modal({keyboard:!1}),r}}}),define("storymaps/tpl/builder/Builder",["esri/arcgis/Portal","storymaps-react/tpl/builder/panel/BuilderPanel","storymaps/tpl/builder/SaveErrorPopupSocial","storymaps/tpl/builder/BuilderHelper","storymaps/tpl/utils/CommonHelper","esri/IdentityManager","dojo/Deferred","dojo/_base/lang"],function(e,t,n,i,o,r,a,s){function l(e,r){v=e,b=r;var a=o.getUrlParams();if(app.builder.isDirectCreation=null!=a.fromScratch||null!=a.fromscratch,app.builder.isGalleryCreation=null!=a.fromGallery,app.builder.isDirectCreationFirstSave=app.builder.isDirectCreation,!o.getAppID(v.isProd())&&!app.builder.isDirectCreation)return void console.error("common.builder.Builder - abort builder initialization, no appid supplied");$("body").addClass("builder-mode"),b.init(_),y=new t({container:$(".section-builder-panel"),saveApp:b.saveApp,openSettings:function(){},shareApp:h}),app.builder.builderPanel=y,w=new n($("#saveErrorPopupSocial")),window.onbeforeunload=function(e){if(e=e||window.event,app.isInBuilder&&app.builder.pendingChanges)return e&&(e.returnValue=i18n.builder.builderPanel.closeWithPendingChange),i18n.builder.builderPanel.closeWithPendingChange},app.builder.cleanApp=i.cleanApp}function u(){var e="",t="";app.data.title&&(e=app.data.title.trim()),app.data.appItem&&app.data.appItem.item&&app.data.appItem.item.title&&(t=app.data.appItem.item.title.trim()),app.builder.titleMatchOnLoad=t==e,(app.builder.isDirectCreation||app.builder.isGalleryCreation)&&(app.builder.titleMatchOnLoad=!0),b.appInitComplete()}function c(){}function d(){if(!app.portal)return console.error("Fatal error - not signed in"),void g("APP");var e="",t="";if(app.data.title&&(e=app.data.title.trim()),app.data.appItem&&app.data.appItem.item&&app.data.appItem.item.title&&(t=app.data.appItem.item.title.trim()),!e)return void g("NONAME");if(app.builder.isDirectCreationFirstSave)app.portal.getPortalUser().getItems().then(function(t){var n=!1;t&&$.each(t,function(t,i){i.title&&i.title.toLowerCase()==e.toLowerCase()&&(n=!0)}),n?g("DUPLICATE"):f(e)});else if(app.builder.titleMatchOnLoad||app.data.appItem.data.values.config.doNotWarnTitle||"public"!=app.data.appItem.item.access||e==t){var n=app.data.appItem.data.values.config.doNotWarnTitle||"public"!=app.data.appItem.item.access&&!app.builder.titleMatchOnLoad;p(n)}else app.builder.titleMatchDialogDisplayed?p(app.builder.titleFromItem):(app.builder.titleMatchDialogDisplayed=!0,w.present().then(function(e){e=e||{},app.builder.titleFromItem="item"==e.choice,p(app.builder.titleFromItem)}))}function p(e){i.saveApp(e).then(function(){m()},function(){g("APP")})}function f(e){var t=r.findCredential(i.getPortalURL()).userId;s.mixin(app.data.appItem.item,{title:e,snippet:"",uploaded:Date.now(),modified:Date.now(),owner:t,access:"private"}),i.saveApp(!1).then(function(e){var t=document.location.protocol+"//"+document.location.host+document.location.pathname;t.match(/index\.html$/)||(t+="index.html"),s.mixin(app.data.appItem.item,{id:e.id,item:e.item,url:t+"?appid="+e.id}),i.saveApp(!1).then(function(){app.builder.isDirectCreationFirstSave&&b.onFirstAppSave(),app.builder.isDirectCreationFirstSave=!1,window.history.replaceState({},"","index.html?appid="+e.id+"&edit"),m()})},function(){g()})}function h(e){var t=new a,n=app.data.appItem.item;if(!e||!e.sharingLevel||!n)return t.reject(),t;var i=e.sharingLevel;return"public"!==i&&"account"!==i&&"org"!==i&&"private"!==i&&(i="private"),b.shareApp(i).then(function(e){app.data.appItem.item.access=e.sharingLevel,t.resolve(),b.scanApp()},function(e){e.appShared&&(app.data.appItem.item.access=i),t.reject(e),b.scanApp()}),t}function m(){app.isWebMapCreation=!1,app.builder.pendingChanges=0,y.saveSucceeded(),(app.builder.isGalleryCreation||app.builder.isDirectCreationFirstSave)&&(app.builder.isDirectCreationFirstSave=!1,app.builder.isGalleryCreation=!1),b.scanApp()}function g(e,t){y.saveFailed(e,t),b.saveFailed(e,t)}var v=null,b=null,y=null,_=null,w=null;return this.isDirectCreation=!1,this.isGalleryCreation=!1,this.isDirectCreationFirstSave=!1,{init:l,resize:c,appInitComplete:u,saveApp:d}}),define("lib-build/tpl!storymaps/tpl/builder/BuilderView",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal fade" id="settingsPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\n\n<div class="modal fade builderShare" id="sharePopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\n<div class="modal fade builderShareError" id="sharePopupError" role="dialog" data-backdrop="static" tabindex="-1"></div>\n\n<div class="modal fade saveErrorPopup" id="saveErrorPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\n<div class="modal fade saveErrorPopupSocial" id="saveErrorPopupSocial" role="dialog" data-backdrop="static" tabindex="-1"></div>\n\n<div class="modal fade media-picker-popup" role="dialog" data-backdrop="static" tabindex="-1"></div>\n\n<div class="modal fade mapEditPopup" id="mapEditPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\n\n<div class="notification-container">\n\n</div>\n';return __p}}),define("lib-build/less!storymaps/tpl/builder/BuilderView",[],function(){}),define("issue-checker/helpers/NormalizeHelper",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"getAllItems",value:function(e){for(var t=[],n=0;n<e.allItems.length;n++){var i=e.allItems[n],o=e.byId[i];t.push(o)}return t}},{key:"createObject",value:function(){return{byId:{},allItems:[]}}},{key:"addEntry",value:function(e,t,n){e.allItems.push(t),e.byId[t]=n}}]),e}();t.default=o,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/notification/Notification",[],function(){}),define("storymaps-react/tpl/builder/notification/Notification",["module","exports","storymaps/tpl/utils/UI","dojo/Deferred","lib-build/less!./Notification"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){r(this,e),this._id=a.default.getUID(),this._container=$(".notification-container"),this._label=t.label,this._positionTop=t.positionTop,this._resultDeferred=null,this._node=null}return l(e,[{key:"display",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._resultDeferred=new s.default,this._container&&this._label?(e.clearPreviousUndo&&this._container.empty(),this._container.append(this.render()),this._node=$("#"+this._id),this._node.fadeIn(),this.postCreate(),this._resultDeferred):(this._resultDeferred.reject(),this._resultDeferred)}},{key:"update",value:function(e){this._label=e.label,this._node&&(this._node.replaceWith(this.render()),this._node=$("#"+this._id),this._node.show(),this.postCreate())}}]),e}();t.default=u,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/builder/notification/Undo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="builder-notification notification-undo has-notification-btn">\n  <div class="alert alert-dismissible" role="alert">\n    ';return r=null!=(r=t.label||(null!=e?e.label:e))?r:a,o="function"==typeof r?r.call(e,{name:"label",hash:{},data:i}):r,null!=o&&(l+=o),l+'\n    <button class="btn btn-primary btn-sm btn-undo">'+s((r=null!=(r=t.labelUndo||(null!=e?e.labelUndo:e))?r:a,"function"==typeof r?r.call(e,{name:"labelUndo",hash:{},data:i}):r))+'</button>\n    <button type="button" class="close" data-dismiss="alert" aria-label="'+s((r=null!=(r=t.labelClose||(null!=e?e.labelClose:e))?r:a,"function"==typeof r?r.call(e,{name:"labelClose",hash:{},data:i}):r))+'">\n      <span aria-hidden="true">&times;</span>\n    </button>\n    <div class="progress"></div>\n    <div class="info-icon">\n      <i class="fa fa-info-circle" aria-hidden="true"></i>\n    </div>\n  </div>\n</div>\n'},useData:!0})}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("lib/progressbar.js/dist/progressbar.min",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ProgressBar=e()}}(function(){var e;return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,n,i){(function(){var t=this||Function("return this")(),o=function(){"use strict";function o(){}function r(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function a(e,t){return r(t,function(n){e[n]=t[n]}),e}function s(e,t){r(t,function(n){void 0===e[n]&&(e[n]=t[n])})}function l(e,t,n,i,o,r,a){var s,l,c,d=r>e?0:(e-r)/o;for(s in t)t.hasOwnProperty(s)&&(l=a[s],c="function"==typeof l?l:h[l],t[s]=u(n[s],i[s],c,d));return t}function u(e,t,n,i){return e+(t-e)*n(i)}function c(e,t){var n=f.prototype.filter,i=e._filterArgs;r(n,function(o){void 0!==n[o][t]&&n[o][t].apply(e,i)})}function d(e,t,n,i,o,r,a,s,u,d,p){_=t+n+i,w=Math.min(p||y(),_),C=w>=_,k=i-(_-w),e.isPlaying()&&(C?(u(a,e._attachment,k),e.stop(!0)):(e._scheduleId=d(e._timeoutHandler,v),c(e,"beforeTween"),t+n>w?l(1,o,r,a,1,1,s):l(w,o,r,a,i,t+n,s),c(e,"afterTween"),u(o,e._attachment,k)))}function p(e,t){var n={},i=typeof t;return"string"===i||"function"===i?r(e,function(e){n[e]=t}):r(e,function(e){n[e]||(n[e]=t[e]||g)}),n}function f(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=m,void 0!==t&&this.setConfig(t)}var h,m,g="linear",v=1e3/60,b=Date.now?Date.now:function(){return+new Date},y="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:b;m="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var _,w,C,k;return f.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=y(),this._start(this.get(),this._attachment),this.resume())},f.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||o,this._step=e.step||o,this._finish=e.finish||o,this._duration=e.duration||500,this._currentState=a({},e.from)||this.get(),this._originalState=this.get(),this._targetState=a({},e.to)||this.get();var t=this;this._timeoutHandler=function(){d(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var n=this._currentState,i=this._targetState;return s(i,n),this._easing=p(n,e.easing||g),this._filterArgs=[n,this._originalState,i,this._easing],c(this,"tweenCreated"),this},f.prototype.get=function(){return a({},this._currentState)},f.prototype.set=function(e){this._currentState=e},f.prototype.pause=function(){return this._pausedAtTime=y(),this._isPaused=!0,this},f.prototype.resume=function(){return this._isPaused&&(this._timestamp+=y()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},f.prototype.seek=function(e){e=Math.max(e,0);var t=y();return this._timestamp+e===0?this:(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,d(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause()),this)},f.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=o,(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId),e&&(c(this,"beforeTween"),l(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),c(this,"afterTween"),c(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},f.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},f.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},f.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},f.prototype.filter={},f.prototype.formula={linear:function(e){return e}},h=f.prototype.formula,a(f,{now:y,each:r,tweenProps:l,tweenProp:u,applyFilter:c,shallowCopy:a,defaults:s,composeEasingObject:p}),"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=d),"object"==typeof i?n.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):void 0===t.Tweenable&&(t.Tweenable=f),f}();!function(){o.shallowCopy(o.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?2-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})}(),function(){function e(e,t,n,i,o,r){function a(e){return((d*e+p)*e+f)*e}function s(e){return((h*e+m)*e+g)*e}function l(e){return(3*d*e+2*p)*e+f}function u(e){return e>=0?e:0-e}function c(e,t){var n,i,o,r,s,c;for(o=e,c=0;8>c;c++){if(r=a(o)-e,u(r)<t)return o;if(s=l(o),u(s)<1e-6)break;o-=r/s}if(n=0,i=1,o=e,n>o)return n;if(o>i)return i;for(;i>n;){if(r=a(o),u(r-e)<t)return o;e>r?n=o:i=o,o=.5*(i-n)+n}return o}var d=0,p=0,f=0,h=0,m=0,g=0;return f=3*t,p=3*(i-t)-f,d=1-f-p,g=3*n,m=3*(o-n)-g,h=1-g-m,function(e,t){return s(c(e,t))}(e,function(e){return 1/(200*e)}(r))}function t(t,n,i,o){return function(r){return e(r,t,n,i,o,1)}}o.setBezierFunction=function(e,n,i,r,a){var s=t(n,i,r,a);return s.displayName=e,s.x1=n,s.y1=i,s.x2=r,s.y2=a,o.prototype.formula[e]=s},o.unsetBezierFunction=function(e){delete o.prototype.formula[e]}}(),function(){function e(e,t,n,i,r,a){return o.tweenProps(i,t,e,n,1,a,r)}var t=new o;t._filterArgs=[],o.interpolate=function(n,i,r,a,s){var l=o.shallowCopy({},n),u=s||0,c=o.composeEasingObject(n,a||"linear");t.set({});var d=t._filterArgs;d.length=0,d[0]=l,d[1]=n,d[2]=i,d[3]=c,o.applyFilter(t,"tweenCreated"),o.applyFilter(t,"beforeTween");var p=e(n,l,i,r,c,u);return o.applyFilter(t,"afterTween"),p}}(),function(e){function t(e,t){var n,i=[],o=e.length;for(n=0;o>n;n++)i.push("_"+t+"_"+n);return i}function n(e){var t=e.match(w);return t?(1===t.length||e[0].match(_))&&t.unshift(""):t=["",""],t.join(T)}function i(t){e.each(t,function(e){var n=t[e];"string"==typeof n&&n.match(E)&&(t[e]=o(n))})}function o(e){return l(E,e,r)}function r(e){var t=a(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function a(e){return e=e.replace(/#/,""),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),S[0]=s(e.substr(0,2)),S[1]=s(e.substr(2,2)),S[2]=s(e.substr(4,2)),S}function s(e){return parseInt(e,16)}function l(e,t,n){var i=t.match(e),o=t.replace(e,T);if(i)for(var r,a=i.length,s=0;a>s;s++)r=i.shift(),o=o.replace(T,n(r));return o}function u(e){return l(k,e,c)}function c(e){for(var t=e.match(C),n=t.length,i=e.match(x)[0],o=0;n>o;o++)i+=parseInt(t[o],10)+",";return i=i.slice(0,-1)+")"}function d(i){var o={};return e.each(i,function(e){var r=i[e];if("string"==typeof r){var a=v(r);o[e]={formatString:n(r),chunkNames:t(a,e)}}}),o}function p(t,n){e.each(n,function(e){for(var i=t[e],o=v(i),r=o.length,a=0;r>a;a++)t[n[e].chunkNames[a]]=+o[a];delete t[e]})}function f(t,n){e.each(n,function(e){var i=t[e],o=h(t,n[e].chunkNames),r=m(o,n[e].chunkNames);i=g(n[e].formatString,r),t[e]=u(i)})}function h(e,t){for(var n,i={},o=t.length,r=0;o>r;r++)n=t[r],i[n]=e[n],delete e[n];return i}function m(e,t){P.length=0;for(var n=t.length,i=0;n>i;i++)P.push(e[t[i]]);return P}function g(e,t){for(var n=e,i=t.length,o=0;i>o;o++)n=n.replace(T,+t[o].toFixed(4));return n}function v(e){return e.match(C)}function b(t,n){e.each(n,function(e){var i,o=n[e],r=o.chunkNames,a=r.length,s=t[e];if("string"==typeof s){var l=s.split(" "),u=l[l.length-1];for(i=0;a>i;i++)t[r[i]]=l[i]||u}else for(i=0;a>i;i++)t[r[i]]=s;delete t[e]})}function y(t,n){e.each(n,function(e){var i=n[e],o=i.chunkNames,r=o.length,a=t[o[0]];if("string"==typeof a){for(var s="",l=0;r>l;l++)s+=" "+t[o[l]],delete t[o[l]];t[e]=s.substr(1)}else t[e]=a})}var _=/(\d|\-|\.)/,w=/([^\-0-9\.]+)/g,C=/[0-9.\-]+/g,k=new RegExp("rgb\\("+C.source+/,\s*/.source+C.source+/,\s*/.source+C.source+"\\)","g"),x=/^.*\(/,E=/#([0-9]|[a-f]){3,6}/gi,T="VAL",S=[],P=[];e.prototype.filter.token={tweenCreated:function(e,t,n,o){i(e),i(t),i(n),this._tokenData=d(e)},beforeTween:function(e,t,n,i){b(i,this._tokenData),p(e,this._tokenData),p(t,this._tokenData),p(n,this._tokenData)},afterTween:function(e,t,n,i){f(e,this._tokenData),f(t,this._tokenData),
f(n,this._tokenData),y(i,this._tokenData)}}}(o)}).call(null)},{}],2:[function(e,t,n){var i=e("./shape"),o=e("./utils"),r=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,i.apply(this,arguments)};r.prototype=new i,r.prototype.constructor=r,r.prototype._pathString=function(e){var t=e.strokeWidth;e.trailWidth&&e.trailWidth>e.strokeWidth&&(t=e.trailWidth);var n=50-t/2;return o.render(this._pathTemplate,{radius:n,"2radius":2*n})},r.prototype._trailString=function(e){return this._pathString(e)},t.exports=r},{"./shape":7,"./utils":8}],3:[function(e,t,n){var i=e("./shape"),o=e("./utils"),r=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",i.apply(this,arguments)};r.prototype=new i,r.prototype.constructor=r,r.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},r.prototype._pathString=function(e){return o.render(this._pathTemplate,{center:e.strokeWidth/2})},r.prototype._trailString=function(e){return this._pathString(e)},t.exports=r},{"./shape":7,"./utils":8}],4:[function(e,t,n){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./utils":8}],5:[function(e,t,n){var i=e("shifty"),o=e("./utils"),r={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},a=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");n=o.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},n);var i;i=o.isString(t)?document.querySelector(t):t,this.path=i,this._opts=n,this._tweenable=null;var r=this.path.getTotalLength();this.path.style.strokeDasharray=r+" "+r,this.set(0)};a.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength(),n=1-e/t;return parseFloat(n.toFixed(6),10)},a.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(o.isFunction(t)){var n=this._easing(this._opts.easing);t(this._calculateTo(e,n),this._opts.shape||this,this._opts.attachment)}},a.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},a.prototype.animate=function(e,t,n){t=t||{},o.isFunction(t)&&(n=t,t={});var r=o.extend({},t),a=o.extend({},this._opts);t=o.extend(a,t);var s=this._easing(t.easing),l=this._resolveFromAndTo(e,s,r);this.stop(),this.path.getBoundingClientRect();var u=this._getComputedDashOffset(),c=this._progressToOffset(e),d=this;this._tweenable=new i,this._tweenable.tween({from:o.extend({offset:u},l.from),to:o.extend({offset:c},l.to),duration:t.duration,easing:s,step:function(e){d.path.style.strokeDashoffset=e.offset;var n=t.shape||d;t.step(e,n,t.attachment)},finish:function(e){o.isFunction(n)&&n()}})},a.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},a.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},a.prototype._resolveFromAndTo=function(e,t,n){return n.from&&n.to?{from:n.from,to:n.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},a.prototype._calculateFrom=function(e){return i.interpolate(this._opts.from,this._opts.to,this.value(),e)},a.prototype._calculateTo=function(e,t){return i.interpolate(this._opts.from,this._opts.to,e,t)},a.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},a.prototype._easing=function(e){return r.hasOwnProperty(e)?r[e]:e},t.exports=a},{"./utils":8,shifty:1}],6:[function(e,t,n){var i=e("./shape"),o=e("./circle"),r=e("./utils"),a=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,i.apply(this,arguments)};a.prototype=new i,a.prototype.constructor=a,a.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},a.prototype._initializeTextContainer=function(e,t,n){e.text.style&&(n.style.top="auto",n.style.bottom="0",e.text.alignToBottom?r.setStyle(n,"transform","translate(-50%, 0)"):r.setStyle(n,"transform","translate(-50%, 50%)"))},a.prototype._pathString=o.prototype._pathString,a.prototype._trailString=o.prototype._trailString,t.exports=a},{"./circle":2,"./shape":7,"./utils":8}],7:[function(e,t,n){var i=e("./path"),o=e("./utils"),r="Object is destroyed",a=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=o.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},n,!0),o.isObject(n)&&void 0!==n.svgStyle&&(this._opts.svgStyle=n.svgStyle),o.isObject(n)&&o.isObject(n.text)&&void 0!==n.text.style&&(this._opts.text.style=n.text.style);var r,a=this._createSvgView(this._opts);if(!(r=o.isString(t)?document.querySelector(t):t))throw new Error("Container does not exist: "+t);this._container=r,this._container.appendChild(a.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&o.setStyles(a.svg,this._opts.svgStyle),this.svg=a.svg,this.path=a.path,this.trail=a.trail,this.text=null;var s=o.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new i(a.path,s),o.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};a.prototype.animate=function(e,t,n){if(null===this._progressPath)throw new Error(r);this._progressPath.animate(e,t,n)},a.prototype.stop=function(){if(null===this._progressPath)throw new Error(r);void 0!==this._progressPath&&this._progressPath.stop()},a.prototype.destroy=function(){if(null===this._progressPath)throw new Error(r);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},a.prototype.set=function(e){if(null===this._progressPath)throw new Error(r);this._progressPath.set(e)},a.prototype.value=function(){if(null===this._progressPath)throw new Error(r);return void 0===this._progressPath?0:this._progressPath.value()},a.prototype.setText=function(e){if(null===this._progressPath)throw new Error(r);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),o.isObject(e)?(o.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},a.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var n=null;(e.trailColor||e.trailWidth)&&(n=this._createTrail(e),t.appendChild(n));var i=this._createPath(e);return t.appendChild(i),{svg:t,path:i,trail:n}},a.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},a.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},a.prototype._createTrail=function(e){var t=this._trailString(e),n=o.extend({},e);return n.trailColor||(n.trailColor="#eee"),n.trailWidth||(n.trailWidth=n.strokeWidth),n.color=n.trailColor,n.strokeWidth=n.trailWidth,n.fill=null,this._createPathElement(t,n)},a.prototype._createPathElement=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("stroke",t.color),n.setAttribute("stroke-width",t.strokeWidth),t.fill?n.setAttribute("fill",t.fill):n.setAttribute("fill-opacity","0"),n},a.prototype._createTextContainer=function(e,t){var n=document.createElement("div");n.className=e.text.className;var i=e.text.style;return i&&(e.text.autoStyleContainer&&(t.style.position="relative"),o.setStyles(n,i),i.color||(n.style.color=e.color)),this._initializeTextContainer(e,t,n),n},a.prototype._initializeTextContainer=function(e,t,n){},a.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},a.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},a.prototype._warnContainerAspectRatio=function(e){if(this.containerAspectRatio){var t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("width"),10),i=parseFloat(t.getPropertyValue("height"),10);o.floatEquals(this.containerAspectRatio,n/i)||(console.warn("Incorrect aspect ratio of container","#"+e.id,"detected:",t.getPropertyValue("width")+"(width)","/",t.getPropertyValue("height")+"(height)","=",n/i),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},t.exports=a},{"./path":5,"./utils":8}],8:[function(e,t,n){function i(e,t,n){e=e||{},t=t||{},n=n||!1;for(var o in t)if(t.hasOwnProperty(o)){var r=e[o],a=t[o];n&&d(r)&&d(a)?e[o]=i(r,a,n):e[o]=a}return e}function o(e,t){var n=e;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r="\\{"+i+"\\}",a=new RegExp(r,"g");n=n.replace(a,o)}return n}function r(e,t,n){for(var i=e.style,o=0;o<m.length;++o){i[m[o]+s(t)]=n}i[t]=n}function a(e,t){p(t,function(t,n){null!==t&&void 0!==t&&(d(t)&&!0===t.prefix?r(e,n,t.value):e.style[n]=t)})}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e){return"string"==typeof e||e instanceof String}function u(e){return"function"==typeof e}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){return!c(e)&&("object"==typeof e&&!!e)}function p(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t(i,n)}}function f(e,t){return Math.abs(e-t)<g}function h(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var m="Webkit Moz O ms".split(" "),g=.001;t.exports={extend:i,render:o,setStyle:r,setStyles:a,capitalize:s,isString:l,isFunction:u,isObject:d,forEachObject:p,floatEquals:f,removeChildren:h}},{}]},{},[4])(4)}),define("lib-build/less!storymaps-react/tpl/builder/notification/Undo",[],function(){}),define("storymaps-react/tpl/builder/notification/Undo",["module","exports","./Notification","lib-build/hbars!./Undo","lib/progressbar.js/dist/progressbar.min","lib-build/less!./Undo"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearFollowingsAfterUndo=e.clearFollowingsAfterUndo,n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({id:this._id,label:this._label,labelUndo:i18n.builder.notification.undo,labelClose:i18n.builder.notification.close})}},{key:"postCreate",value:function(){void 0!==this._positionTop&&this._node.css("top",this._positionTop),this._initEvents()}},{key:"_initEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delay||2e4,n=new d.default.Line(this._node.find(".progress")[0],{strokeWidth:4,duration:t,color:"#005e95",trailColor:"#eee",trailWidth:1,svgStyle:{width:"100%",height:"100%"}});n.set(-1),n.animate(0,{},function(){setTimeout(function(){this._node.fadeOut({complete:function(){this._node.remove()}.bind(this)}),this._resultDeferred.reject()}.bind(this),200)}.bind(this)),this._node.find(".btn-undo").click(function(){this._clearFollowingsAfterUndo&&this._node.nextAll().remove(),this._node.remove(),this._resultDeferred.resolve()}.bind(this))}}]),t}(u.default);t.default=f,e.exports=t.default}),define("storymaps-react/tpl/builder/Actions",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={maps:{share:"maps/share"},content:{share:"content/share"},layers:{share:"layers/share",sharePremiumContent:"layers/sharePremiumContent",shareSubscriptionContent:"layers/shareSubscriptionContent"},images:{},videos:{}},e.exports=t.default}),define("storymaps-react/tpl/builder/Controller",["module","exports","../core/Controller","dojo/topic","dojo/_base/lang","lib-build/i18n!resources/tpl/builder/nls/app","issue-checker/helpers/NormalizeHelper","./notification/Undo","issue-checker/IssueTypes","./Actions","storymaps/tpl/utils/UI","storymaps/tpl/utils/CommonHelper"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=p(n),v=p(i),b=p(o),y=p(r),_=p(a),w=p(s),C=p(l),k=p(u),x=p(c),E=p(d),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)};v.default.subscribe("builder-section-update",function(){P.storyChange()}),v.default.subscribe("builder-media-update",function(){P.storyChange()});var P=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),T(t,null,[{key:"storyChange",value:function(){app.builder.pendingChanges++,v.default.publish("builder-story-update")}},{key:"storyUndo",value:function(){app.builder.pendingChanges--,v.default.publish("builder-story-update")}},{key:"renderStory",value:function(e,n){var i=n[n.length-1],o=n.length;return i&&"credits"==i.type&&(o-=1),n.splice(o,0,app.ui.SectionFactory.createInstance({type:"credits-placeholder"})),S(t.__proto__||Object.getPrototypeOf(t),"renderStory",this).call(this,e,n)}},{key:"onScroll",value:function(e){S(t.__proto__||Object.getPrototypeOf(t),"onScroll",this).call(this,e)}},{key:"openSettings",value:function(){var e=app.data.appItem.data.values.settings.header;e&&e.logo&&e.link||(e=g.default.DEFAULT_HEADER_SETTINGS);var t=app.data.appItem.data.values.settings.theme||{};t.colors||(t.colors=g.default.THEME_DEFAULT_COLORS);var n=g.default.THEME_DEFAULT_FONTS;t.fonts||(t.fonts=n),t.fonts={titleFont:t.fonts.titleFont||n.titleFont,bodyFont:t.fonts.bodyFont||n.bodyFont};var i={colorOptions:g.default.THEME_COLOR_OPTIONS,fontOptions:g.default.THEME_FONT_OPTIONS,currentTheme:t},o=app.portal.isOrganization&&b.default.getObject("portal.portalProperties.sharedTheme.logo.small",!1,app),r=o===e.logo.url,a={context:{headerBackground:"#000"},settings:Object.assign({},e,{bookmarks:this.getBookmarksBuilder()},{orgLogoSettings:{hasOrgLogo:!!o,useOrgLogo:r,orgLogo:o}},{themeData:i})};app.builder.settingsPopup.open({settings:a}).then(function(e){app.data.appItem.data.values.settings.header={logo:e.logo,link:e.link,social:e.social},app.data.appItem.data.values.settings.theme=e.themeData.currentTheme,this.changeTheme(e.themeData),this._setBookmarksBuilder(e.bookmarks),this.renderHeader(),this.storyChange()}.bind(this),function(){})}},{key:"getBookmarksBuilder",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._sections[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if(a.getBookmark){var s=a.getBookmark();s&&(s.title?"cover"==a.type&&(s.title=y.default.builder.headerConfig.bookmarks.coverAppendage):"sequence"==a.type?s.title=y.default.builder.headerConfig.bookmarks.sequentialDefault:"immersive"==a.type?s.title=y.default.builder.headerConfig.bookmarks.immersiveDefault:"title"==a.type&&(s.title=y.default.builder.headerConfig.bookmarks.titleDefault),e.push(s))}}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return e}},{key:"_setBookmarksBuilder",value:function(e){var t=0,n=!0,i=!1,o=void 0;try{for(var r,a=this._sections[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;s.getBookmark&&s.setBookmark(e[t++])}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"serializeStory",value:function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=this._sections[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.serialize(t);u&&(e&&(u.id=l.id),n.push(u))}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}},{key:"addContextSpecificIssues",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._sections[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,s=e[a.id];s&&a.addContextSpecificIssues(s)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"reportScanResults",value:function(e,t){var n=!0,i=!1,o=void 0;try{for(var r,a=this._sections[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,l=!1,u=!1;-1!==t.errorSections.indexOf(s.id)&&(u=!0),-1!==t.warningSections.indexOf(s.id)&&(l=!0),s.setScanResults(u,l)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}this._broadcastScanResults(e)}},{key:"_broadcastScanResults",value:function(e){v.default.publish("check-app-complete",e);for(var t in e.media)e.media.hasOwnProperty(t)&&"layers"!==t&&this._broadcastMediaResults(e,t)}},{key:"_broadcastMediaResults",value:function(e,t){var n=_.default.getAllItems(e.media[t]),i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(!l)return;var u=null;if("maps"===t||"scenes"===t)u={layers:this._extractLayerInfo(l.scanResult.layers,e.media.layers),details:l.scanResult.details,errors:this._findMapSceneIssues(l.scanResult,e,"errors",l.alternateMedia),warnings:this._findMapSceneIssues(l.scanResult,e,"warnings",l.alternateMedia)};else{if("images"!==t&&"videos"!==t&&"webpages"!==t&&"audio"!==t)return;u={errors:this._findMediaIssues(l.scanResult.errors,e.errors,l.alternateMedia,e.media.images,"errors"),warnings:this._findMediaIssues(l.scanResult.warnings,e.warnings,l.alternateMedia,e.media.images,"warnings")}}v.default.publish("scan/"+t+"/"+l.instanceID,u)}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}}},{key:"_extractLayerInfo",value:function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=t.byId[l];u&&n.push({id:u.id,details:u.scanResult.details})}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}},{key:"_findMediaIssues",value:function(e,t,n,i,o){var r=this._findIssues(e,t,!1),a=this._findAlternateMediaIssues(t,n,i,o);return r=r.concat(a)}},{key:"_findIssues",value:function(e,t,n){var i=[],o=!0,r=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,c=t.byId[u];i.push({id:c.id,actions:c.actions,isAlternate:n})}}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}return i}},{key:"_findAlternateMediaIssues",value:function(e,t,n,i){var o=[];if(t){var r=n.byId[t];r&&r.scanResult&&r.scanResult[i]&&(o=this._findIssues(r.scanResult[i],e,!0))}return o}},{key:"_findMapSceneIssues",value:function(e,t,n,i){var o=[],r=!0,a=!1,s=void 0;try{for(var l,u=e[n][Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value,d=t[n].byId[c];o.push({id:d.id,actions:d.actions,mediaType:e.mediaType,layers:[]})}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}var p=this._findLayerIssues(e.layers,t[n],t.media.layers,n);o=o.concat(p);var f=this._findAlternateMediaIssues(t[n],i,t.media.images,n);return o=o.concat(f),this._combineSharingIssues(o),o}},{key:"_findLayerIssues",value:function(e,t,n,i){var o=[],r=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value,d=n.byId[c];if(d.scanResult[i]){var p=!0,f=!1,h=void 0;try{for(var m,g=d.scanResult[i][Symbol.iterator]();!(p=(m=g.next()).done);p=!0)!function(){var e=m.value,n=t.byId[e],i=o.find(function(e){return e.id===n.id});i?i.layers.push({id:d.scanResult.id,details:d.scanResult.details}):o.push({id:n.id,actions:n.actions,mediaType:d.scanResult.mediaType,layers:[{id:d.scanResult.id,details:d.scanResult.details}]})}()}catch(e){f=!0,h=e}finally{try{!p&&g.return&&g.return()}finally{if(f)throw h}}}}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}return o}},{key:"_combineSharingIssues",value:function(e){var t=e.findIndex(function(e){return e.id===C.default.layers.unshared}),n=e.findIndex(function(e){return e.id===C.default.maps.unshared});if(-1!==t&&-1!==n){var i=e[t],o={id:C.default.content.unshared,actions:i.actions.map(function(e){return{fix:e.fix,id:k.default.content.share}}),mediaType:"content",layers:i.layers};e.splice(n,0,o);var r=e.findIndex(function(e){return e.id===C.default.maps.unshared});e.splice(r,1);var a=e.findIndex(function(e){return e.id===C.default.layers.unshared});e.splice(a,1)}}},{key:"getStoryOverview",value:function(){var e=[];if(!this._sections)return e;var t=!1;(3==this._sections.length||4==this._sections.length&&"credits"==this._sections[3].type)&&(t=!0);var n=!0,i=!1,o=void 0;try{for(var r,a=this._sections[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,l=s.type;if("credits-placeholder"!=l)if("cover"==l)e.push({id:s.id,style:"button",label:y.default.builder.builderPanel.coverLabel,hasDelete:!1,hasHide:!1,hasDuplicate:!1,hasOrganize:!1,scanResults:s.getScanResults()});else if("credits"==l)e.push({id:s.id,style:"button",label:y.default.builder.builderPanel.creditsLabel,hasDelete:!0,hasHide:!0,hasDuplicate:!1,hasOrganize:!1,scanResults:s.getScanResults()});else if("title"==l)e.push({id:s.id,style:"thumbnail",size:"short",thumbnail:s.getPreviewThumbnail(),label:s.getPreviewText(),icon:s.getPreviewIcon(),hasDelete:!t,hasHide:!0,hasDuplicate:!0,hasOrganize:!0,scanResults:s.getScanResults()});else if("sequence"==l){var u=!1;3!=this._sections.length||s.getPreviewText()||s.getPreviewThumbnail()||(u=!0),e.push({id:s.id,style:u?"simple-text":"thumbnail",size:"tall",thumbnail:s.getPreviewThumbnail(),text:u?y.default.builder.builderPanel.invite:s.getPreviewText(),hasDelete:!t,hasHide:!0,hasDuplicate:!u,hasOrganize:!t,scanResults:s.getScanResults()})}else e.push({id:s.id,style:"thumbnail",size:"tall",showTitleBar:!0,thumbnail:s.getPreviewThumbnail(),title:s.getPreviewText(),icon:s.getPreviewIcon(),hasDelete:!t,hasHide:!0,hasDuplicate:!0,hasOrganize:!0,scanResults:s.getScanResults()})}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e}},{key:"addSection",value:function(e){if(e&&(e.type||e.section)&&!(void 0===e.index||e.index<0||e.index>this._sections.length)){var t=e.section||{type:e.type},n=app.ui.SectionFactory.createInstance(t);this._sections.splice(e.index+1,0,n),this._container.find(".section").eq(e.index).after(n.render()),n.postCreate(this._container.find(".section").eq(e.index+1)),!1!==e.navigation&&window.requestAnimationFrame(function(){this.navigateToSection({index:e.index+1,animate:!0,animateSpeed:e.animateSpeed}),n.focus()}.bind(this)),e.ensureFullyVisible&&this._ensureSectionFullyVisible(n),v.default.publish("builder-section-update")}}},{key:"_splitSection",value:function(e){var t=this._sections[e.section].serializePartially(0,e.split+1),n=this._sections[e.section].serializePartially(e.split+1);this.deleteSection({index:e.section,navigation:!1,undo:!1}),this.addSection({index:e.section-1,section:t,navigation:!1}),this.addSection({index:e.section,section:n,navigation:!1})}},{key:"splitAndAddSection",value:function(e){if(e&&e.type&&!(void 0===e.section||e.section<0||e.section>this._sections.length||void 0===e.split||e.split<0)){if(!this._sections[e.section].requireSplitAt(e.split))return void this.addSection({navigation:"title"!=e.type,index:e.section,type:e.type,animateSpeed:800,ensureFullyVisible:"title"==e.type});var t=$(window).scrollTop();this._splitSection(e),this.addSection({index:e.section,type:e.type,navigation:"title"!=e.type,animate:!0,animateSpeed:800}),"title"==e.type&&($(window).scrollTop(t),app.ui.update({forceUpdate:!0}),this._ensureSectionFullyVisible(this._sections[e.section+1]))}}},{key:"_ensureSectionFullyVisible",value:function(e){var t=e._node[0].getBoundingClientRect(),n=0;if(t.bottom>app.display.windowHeight&&(n=app.display.windowHeight-t.bottom),n){var i=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:i-n+50},150)}}},{key:"deleteActiveSection",value:function(){this.deleteSection({index:this._currentSectionIndex})}},{key:"deleteSection",value:function(e){if(e&&e.index){for(var t=[],n=this._currentSectionIndex,i=0;i<this._sections.length;i++)t[i]=this._sections[i];this._sections.splice(e.index,1),this._container[0].removeChild(this._container.find(".section").eq(e.index)[0]);var o=this._sections[this._currentSectionIndex];e.index==this._currentSectionIndex&&(o=this._sections[this._currentSectionIndex-1]);var r={hasMerged:!1};if(e.skipMerge||(r=this._mergeConsecutiveSequenceSections(o)),v.default.publish("builder-section-update"),v.default.publish("builder-should-check-story"),(!1!==e.navigation||r.hasMerged)&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:r.newCurrentSectionIndex,animate:!0,animateSpeed:800})}.bind(this)),!1!==e.undo){new w.default({container:this._container.find(".section").eq(e.index+1),label:y.default.builder.controller.sectionDelete,clearFollowingsAfterUndo:!0}).display().then(function(){this._restoreSectionBackup(t,n)}.bind(this),function(){})}}}},{key:"duplicateSection",value:function(e){if(e&&e.index){var t=this._sections.slice(e.index,e.index+1)[0],n=t.serialize(!1);n.bookmark&&(n.bookmark.enabled=!1);var i=app.ui.SectionFactory.createInstance(n);this._sections.splice(e.index+1,0,i),this._container.find(".section").eq(e.index).after(i.render()),i.postCreate(this._container.find(".section").eq(e.index+1)),this.navigateToSection({index:e.index+1,animate:!1}),v.default.publish("builder-section-update"),v.default.publish("builder-should-check-story")}}},{key:"getSectionsIndexesByIds",value:function(e){var t=[],n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0)for(var s=r.value,l=0;l<this._sections.length;l++){var u=this._sections[l];u.id==s&&t.push(l)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t}},{key:"organizeSections",value:function(e,t){for(var n=!0,i=0;i<e.length-1;i++)if(e[i]>e[i+1]){n=!1;break}if(!n){for(var o=[],r=this._currentSectionIndex,a=0;a<this._sections.length;a++)o[a]=this._sections[a];for(var s=[],l=-1,u=null,c=0;c<e.length;c++)u=e[c],s.push(this._sections[u]),u==this._currentSectionIndex&&(l=c);var d=this._sections[this._sections.length-1];for("credits"==d.type?s.splice(s.length-1,0,this._sections[this._sections.length-2]):s.push(d),this._sections=s,this.prototype.__proto__.constructor._sections=this._sections,app.data.sections=s,u=this._sections.length-1;u>=0;u--){var p=this._sections[u];this._container.prepend(p._node)}var f=this._sections[l],h=this._mergeConsecutiveSequenceSections(f),m=y.default.builder.controller.sectionOrganize;if(h.hasMerged&&(l=h.newCurrentSectionIndex),-1!=l&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:l,animate:!1})}.bind(this)),!t){new w.default({container:this._node,label:m}).display({clearPreviousUndo:!0}).then(function(){this._restoreSectionBackup(o,r)}.bind(this),function(){})}v.default.publish("builder-section-update")}}},{key:"_restoreSectionBackup",value:function(e,t){this._sections=e,this.prototype.__proto__.constructor._sections=e,app.data.sections=e;for(var n=this._sections.length-1;n>=0;n--){var i=this._sections[n];this._container.prepend(i._node)}$.each(this._container.children(),function(e,t){var n=!1,i=!0,o=!1,r=void 0;try{for(var a,s=this._sections[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;$(l._node).is(t)&&(n=!0)}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}n||t.remove()}.bind(this)),v.default.publish("builder-section-update"),v.default.publish("builder-should-check-story"),this._currentSectionIndex!=t&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:t,animate:!1})}.bind(this))}},{key:"_mergeConsecutiveSequenceSections",value:function(e){for(var t=!1,n="",i=this._sections.length-1;i>=0;i--){var o=this._sections[i];if("sequence"==o.type&&"sequence"==n){var r=o.mergeAndSerialize(this._sections[i+1]),a=!1;e!=o&&e!=this._sections[i+1]||(a=!0),this.deleteSection({index:i+1,navigation:!1,undo:!1,skipMerge:!0}),this.deleteSection({index:i,navigation:!1,undo:!1,skipMerge:!0}),this.addSection({index:i-1,section:r,navigation:!1}),a&&(e=this._sections[i]),t=!0}n=o.type}for(var s=-1,l=this._sections.length-1;l>=0;l--){this._sections[l]==e&&(s=l)}return{hasMerged:t,newCurrentSectionIndex:s}}},{key:"changeTheme",value:function(){var e=b.default.getObject("app.data.appItem.data.values.settings.theme.colors");if(e){if(e.bgMain){var n=void 0;if("light"===E.default.getLightOrDarkText(e.bgMain)){n=[".block::before {color:"+e.bgMain+"; border-bottom-color: #f8f8f8;}",".block::after {color: #f8f8f8;}",".image-gallery .ig-add.builder-ui .ig-action-icon {color: #f8f8f8;}",".image-gallery .ig-add.builder-ui {border-color: #f8f8f8;}"]}else n=[".block::before {color:"+e.bgMain+";}"];x.default.addCSSRule(n.join(" "),"plus-color"),this._sections.forEach(function(e){e.changeTheme&&e.changeTheme()})}S(t.__proto__||Object.getPrototypeOf(t),"changeTheme",this).call(this)}}}]),t}(g.default);t.default=P,e.exports=t.default}),define("lib-build/tpl!storymaps/tpl/builder/mediaPicker/MediaPickerPopup",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-logo"></div>\n    <div class="modal-header">\n      <h4 class="modal-title"></h4>\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n      </button>\n    </div>\n    <div class="modal-body" id="media-picker">\n    </div>\n  </div>\n</div>\n';return __p}}),
define("lib-build/less!storymaps/tpl/builder/mediaPicker/MediaPickerPopup",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/constants",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={providers:{GOOGLE_PHOTOS:"googlePhotos",FLICKR:"flickr",ARCGIS:"arcgis",URL:"urlContent",UNSPLASH:"unsplash"},contentType:{IMAGE:"image",VIDEO:"video",AUDIO:"audio",WEBPAGE:"webpage",WEBMAP:"webmap",WEBSCENE:"webscene"},uploadFileExtensions:{AUDIO:[".mp3"],IMAGE:[".png",".jpeg",".jpg",".gif",".bmp"]},fetchStatus:{NOT_FETCHED:"NOT_FETCHED",FETCHING:"FETCHING",SUCCESS:"SUCCESS",ERROR:"ERROR",NON_MATCHING_URL:"NON_MATCHING_URL",NOT_AUTHORIZED:"NOT_AUTHORIZED",NOT_FOUND:"NOT_FOUND",BAD_FORMAT:"BAD_FORMAT"},galleryContent:{ALBUMS:"ALBUMS",IMAGES:"IMAGES",AGOL:"AGOL",IMG_HEIGHT:100,ALBUM_HEIGHT:150},searchType:{USER:"USER",TEXT:"TEXT"},searchLocation:{STORY:"STORY",AGOL:"AGOL",ORG:"ORG",MINE:"MINE"},agolContentType:{WEBMAP:"Web Map",WEBSCENE:"Web Scene",IMAGE:"Image"},sortField:{DATE:"modified",TITLE:"title",VIEWS:"numViews"},sortOrder:{ASC:"asc",DESC:"desc"},flickrLicenseStrings:{PUBLIC_DOMAIN:"PUBLIC_DOMAIN",COMMERCIAL:"COMMERCIAL",NON_COMMERCIAL:"NON_COMMERCIAL",ALL_RIGHTS_RESERVED:"ALL_RIGHTS_RESERVED",ANY:"ANY"},flickrLicenseVals:{PUBLIC_DOMAIN:[8,9,10],COMMERCIAL:[4,5,8,9,10],NON_COMMERCIAL:[1,2,4,5,8,9,10],ANY:[0,1,2,4,5,8,9,10]},userFetchError:{NO_USER:"NO_USER",NO_PHOTOS:"NO_PHOTOS",ERROR:"ERROR"},fileSettings:{maxFileSize:1e7,blankBackground:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},photoSettings:{maxWidth:1920,quality:.8,idealFileSize:5e5}},e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UPDATE_ALBUMS="UPDATE_ALBUMS",e.UPDATE_ALBUM_FETCH_STATUS="UPDATE_ALBUM_FETCH_STATUS",e.UPDATE_IMAGE_FETCH_STATUS="UPDATE_IMAGE_FETCH_STATUS",e.UPDATE_USERNAME="UPDATE_USERNAME",e.UPDATE_DISPLAYED_CONTENT="UPDATE_DISPLAYED_CONTENT",e.UPDATE_IMAGES="UPDATE_IMAGES",e.UPDATE_SELECTED_ALBUM="UPDATE_SELECTED_ALBUM",e.UPDATE_SEARCH_TYPE="UPDATE_SEARCH_TYPE",e.UPDATE_USER_SEARCH_TERM="UPDATE_USER_SEARCH_TERM",e.UPDATE_PHOTO_SEARCH_TERM="UPDATE_PHOTO_SEARCH_TERM",e.UPDATE_USER_LICENSE="UPDATE_USER_LICENSE",e.UPDATE_PHOTO_LICENSE="UPDATE_PHOTO_LICENSE",e.UPDATE_SEARCH_LOCATION="UPDATE_SEARCH_LOCATION",e.UPDATE_SEARCH_TERM="UPDATE_SEARCH_TERM",e.UPDATE_AUTHORIZED_CONTENT_TYPES="UPDATE_AUTHORIZED_CONTENT_TYPES",e.UPDATE_AVAILABLE_CONTENT_TYPES="UPDATE_AVAILABLE_CONTENT_TYPES",e.UPDATE_SELECTED_CONTENT_TYPES="UPDATE_SELECTED_CONTENT_TYPES",e.UPDATE_SORT_FIELD="UPDATE_SORT_FIELD",e.UPDATE_SORT_ORDER="UPDATE_SORT_ORDER"}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/reducer",["module","exports","redux","../constants","./actionTypes"],function(e,t,n,i,o){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments[1];if(!d(t,f.default.providers.FLICKR))return e;var n,i;switch(t.type){case h.UPDATE_USER_SEARCH_TERM:n="userSearchTerm",i="term";break;case h.UPDATE_PHOTO_SEARCH_TERM:n="photoSearchTerm",i="term";break;case h.UPDATE_SEARCH_TYPE:n="selectedTab",i="type";break;case h.UPDATE_USER_LICENSE:n="userLicense",i="license";break;case h.UPDATE_PHOTO_LICENSE:n="photoLicense",i="license";break;default:return p(e,t)}return Object.assign({},e,r({},n,t.value[i]))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments[1];return d(t,f.default.providers.GOOGLE_PHOTOS)?p(e,t):e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1];if(!d(t,f.default.providers.UNSPLASH))return e;var n,i;switch(t.type){case h.UPDATE_PHOTO_SEARCH_TERM:n="photoSearchTerm",i="term";break;default:return p(e,t)}return Object.assign({},e,r({},n,t.value[i]))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments[1];if(!d(t,f.default.providers.ARCGIS))return e;var n,i;switch(t.type){case h.UPDATE_SEARCH_LOCATION:n="searchLocation",i="type";break;case h.UPDATE_SEARCH_TERM:n="searchStr",i="term";break;case h.UPDATE_SORT_FIELD:n="sortField",i="field";break;case h.UPDATE_SORT_ORDER:n="sortOrder",i="order";break;default:return p(e,t)}return Object.assign({},e,r({},n,t.value[i]))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1];return d(t,f.default.providers.URL)?p(e,t):e}function d(e,t){return!(!e||!e.value||e.value.providerType!==t)}function p(e,t){var n,i;switch(t.type){case h.UPDATE_ALBUMS:n="albums",i="albums";break;case h.UPDATE_ALBUM_FETCH_STATUS:n="albumFetchStatus",i="fetchStatus";break;case h.UPDATE_IMAGE_FETCH_STATUS:n="imageFetchStatus",i="fetchStatus";break;case h.UPDATE_USERNAME:n="userName",i="userName";break;case h.UPDATE_DISPLAYED_CONTENT:n="displayedContent",i="displayedContent";break;case h.UPDATE_IMAGES:n="images",i="images";break;case h.UPDATE_SELECTED_ALBUM:n="selectedAlbum",i="selectedAlbum";break;default:return e}return Object.assign({},e,r({},n,t.value[i]))}Object.defineProperty(t,"__esModule",{value:!0});var f=function(e){return e&&e.__esModule?e:{default:e}}(i),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),m={albums:[],selectedAlbum:{},images:[],displayedContent:f.default.galleryContent.ALBUMS,albumFetchStatus:f.default.fetchStatus.NOT_FETCHED,imageFetchStatus:f.default.fetchStatus.NOT_FETCHED,userName:""},g={selectedTab:f.default.searchType.TEXT,selectedUser:"",userSearchTerm:"",userLicense:f.default.flickrLicenseStrings.ANY,photoSearchTerm:"",photoLicense:f.default.flickrLicenseStrings.COMMERCIAL},v={},b={displayedContent:f.default.galleryContent.AGOL,searchLocation:f.default.searchLocation.MINE,searchStr:"",sortField:f.default.sortField.DATE,sortOrder:f.default.sortOrder.DESC},y={photoSearchTerm:""},_={},w=Object.assign({},m,g),C=Object.assign({},m,v),k=Object.assign({},m,b),x=Object.assign({},m,y),E=Object.assign({},m,_);t.default=(0,n.combineReducers)({flickr:a,googlePhotos:s,agol:u,unsplash:l,urlContent:c}),e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BROWSE_SELECT_PROVIDER="BROWSE_SELECT_PROVIDER"}),define("storymaps-react/tpl/builder/mediaPicker/reducer",["module","exports","redux","./browsePanel/reducer","./constants","./actionTypes"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(i),l=a(o),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),c={browseSelectedProvider:l.default.providers.ARCGIS,authorizedMedia:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case u.BROWSE_SELECT_PROVIDER:return Object.assign({},e,{browseSelectedProvider:t.value});case u.UPDATE_AUTHORIZED_MEDIA:return Object.assign({},e,{authorizedMedia:t.value});default:return e}};t.default=(0,n.combineReducers)({ui:d,browsePanel:s.default}),e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){return{type:i.BROWSE_SELECT_PROVIDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.selectProvider=n;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t)}),define("storymaps-react/tpl/builder/mediaPicker/utils/Helper",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){var t=void 0;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([i],{type:n})},o=function e(){for(var t="",i={}.hasOwnProperty,o=0;o<arguments.length;o++){var r=arguments[o];if(r){var a=void 0===r?"undefined":n(r);if("string"===a||"number"===a)t+=" "+r;else if($.isArray(r))t+=" "+e.apply(null,r);else if("object"===a)for(var s in r)i.call(r,s)&&r[s]&&(t+=" "+s)}}return t.substr(1)},r=function(e){return e.replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)})},a=function(e,t,n){return e.replace("${"+t+"}",n)},s=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e};t.default={classnames:o,dataURItoBlob:i,stripTrailingSlash:s,unescapeBrands:r,mixinString:a},e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browseToggle/BrowseToggle",[],function(){}),define("lib-build/css!storymaps-react/tpl/builder/mediaPicker/browseToggle/BrowseToggle",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browseToggle/BrowseToggle",["module","exports","react","../utils/Helper","../constants","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./BrowseToggle","lib-build/css!./BrowseToggle"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=f.default.builder.mediaPicker.browseToggle,v=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),m(t,[{key:"getLongerTitleClass",value:function(e,t){return e.length>t?"longer-title":""}},{key:"getShrinkableTitle",value:function(e,t){if(this.props.shortTitle){var n="title-text visible-xs-inline visible-sm-inline "+this.getLongerTitleClass(this.props.shortTitle,t),i="title-text hidden-xs hidden-sm "+this.getLongerTitleClass(this.props.title,t);return c.default.createElement("span",{className:e},c.default.createElement("span",{className:n},this.props.shortTitle),c.default.createElement("span",{className:i},this.props.title))}var o=e+" title-text "+this.getLongerTitleClass(this.props.title,t);return c.default.createElement("span",{className:o},this.props.title)}},{key:"getInlineTitle",value:function(){return c.default.createElement("div",{className:"inline-title"},c.default.createElement("span",{className:"fa "+this.props.inlineIcon}),this.getShrinkableTitle("",12))}},{key:"getLogoTitle",value:function(){return c.default.createElement("div",{className:"provider-logo",alt:"this.props.title"})}},{key:"getPlainTitle",value:function(){return c.default.createElement("div",null,this.getShrinkableTitle("plain-title",16))}},{key:"differentiateTitle",value:function(){return this.props.fullLogo?this.getLogoTitle():this.props.inlineIcon?this.getInlineTitle():this.getPlainTitle()}},{key:"render",value:function(){var e=d.default.classnames(["browse-toggle",this.props.type,{selected:this.props.isSelected}]);return c.default.createElement("div",{className:e,onClick:this.props.onClick},this.differentiateTitle())}}]),t}(c.default.Component),b=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),m(t,[{key:"getInfoSpan",value:function(e){return c.default.createElement("span",{className:"mp-type-details info"},c.default.createElement("i",{className:"fa fa-info-circle"}),c.default.createElement("span",null,e))}},{key:"getErrorSpan",value:function(e){return c.default.createElement("span",{className:"mp-type-error error"},c.default.createElement("i",{className:"fa fa-warning"}),c.default.createElement("span",null,e))}},{key:"getMediaList",value:function(e){if(!e||!e.length)return this.getErrorSpan(g.contentType.error);var t=p.default.contentType.IMAGE,n=p.default.contentType.VIDEO,i=p.default.contentType.WEBPAGE,o=p.default.contentType.AUDIO;switch(e.length){case 1:return e.indexOf(t)>=0?this.getInfoSpan(g.contentType.imageOnly):this.getErrorSpan("only one authorized media, but it wasnt image!");case 2:return e.indexOf(t)>=0&&e.indexOf(n)>=0?this.getInfoSpan(g.contentType.imageAndVideo):this.getErrorSpan("two authorized media, but it wasnt image/video!");case 3:case 4:return e.indexOf(t)>=0&&e.indexOf(n)>=0&&e.indexOf(i)>=0&&e.indexOf(o)>=0?this.getInfoSpan(g.contentType.imageVideoWebpage):this.getErrorSpan("three authorized media, but it wasnt image/video/webpage!");default:return this.getErrorSpan("more than three but less than all authorized media... ?")}}},{key:"render",value:function(){var e=this.props.authorizedMedia;if(e&&e.length){var t=e.length,n=Object.keys(p.default.contentType).length;if(t===n||t===n-1)return null}return c.default.createElement("div",{className:"mp-type-message"},this.getMediaList(e))}}]),t}(c.default.Component),y=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),m(t,[{key:"getDivider",value:function(e){return e<this.props.browseToggles.length-1?c.default.createElement("div",{className:"vert-divider",key:"divider-"+e}):null}},{key:"renderBrowseToggles",value:function(){var e=this,t=[];return this.props.browseToggles.forEach(function(n,i){t.push(c.default.createElement(v,h({onClick:function(){e.props.selectProvider(n.type)},key:n.type,isLast:i===e.props.browseToggles.length-1,isSelected:n.type===e.props.browseSelectedProvider},n)));var o=e.getDivider(i);o&&t.push(o)}),t}},{key:"render",value:function(){return c.default.createElement("div",{className:"mp-header"},c.default.createElement(b,{authorizedMedia:this.props.authorizedMedia}),c.default.createElement("div",{className:"mp-browse-toggles"},this.renderBrowseToggles()))}}]),t}(c.default.Component);t.default=y,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browseToggle/BrowseToggleContainer",["module","exports","react-redux","./BrowseToggle","./../actions","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(i),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),u=a(r),c=u.default.builder.mediaPicker.browseToggle,d=[{type:"arcgis",title:"ArcGIS",media:"geo",fullLogo:!0},{type:"flickr",title:"Flickr",media:"images",inlineIcon:"fa-flickr"},{type:"googlePhotos",title:"Google+",media:"images",inlineIcon:"fa-google"},{type:"unsplash",title:"Unsplash",media:"images",inlineIcon:"fa-camera"},{type:"urlContent",title:c.urls,shortTitle:c.urls_short,media:"links",inlineIcon:"fa-link"}],p=function(e){return{browseSelectedProvider:e.ui.browseSelectedProvider,browseToggles:d}},f=function(e){return{selectProvider:function(t){e(l.selectProvider(t))}}},h=(0,n.connect)(p,f)(s.default);t.default=h,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){return{type:b.UPDATE_ALBUMS,value:e}}function i(e){return{type:b.UPDATE_ALBUM_FETCH_STATUS,value:e}}function o(e){return{type:b.UPDATE_IMAGE_FETCH_STATUS,value:e}}function r(e){return{type:b.UPDATE_USERNAME,value:e}}function a(e){return{type:b.UPDATE_DISPLAYED_CONTENT,value:e}}function s(e){return{type:b.UPDATE_IMAGES,value:e}}function l(e){return{type:b.UPDATE_SELECTED_ALBUM,value:e}}function u(e){return{type:b.UPDATE_SEARCH_TYPE,value:e}}function c(e){return{type:b.UPDATE_USER_SEARCH_TERM,value:e}}function d(e){return{type:b.UPDATE_PHOTO_SEARCH_TERM,value:e}}function p(e){return{type:b.UPDATE_USER_LICENSE,value:e}}function f(e){return{type:b.UPDATE_PHOTO_LICENSE,value:e}}function h(e){return{type:b.UPDATE_SEARCH_LOCATION,value:e}}function m(e){return{type:b.UPDATE_SEARCH_TERM,value:e}}function g(e){return{type:b.UPDATE_SORT_FIELD,value:e}}function v(e){return{type:b.UPDATE_SORT_ORDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.updateAlbums=n,e.updateAlbumFetchStatus=i,e.updateImageFetchStatus=o,e.updateUsername=r,e.updateDisplayedContent=a,e.updateImages=s,e.updateSelectedAlbum=l,e.updateSearchType=u,e.updateUserSearchTerm=c,e.updatePhotoSearchTerm=d,e.updateUserLicense=p,e.updatePhotoLicense=f,e.updateSearchLocation=h,e.updateSearchTerm=m,e.updateSortField=g,e.updateSortOrder=v;var b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t)}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/breadcrumbs/Breadcrumbs",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/breadcrumbs/Breadcrumbs",["module","exports","react","lib-build/less!./Breadcrumbs"],function(e,t,n){"use strict";function i(e){return o.default.createElement("div",{className:"row flex-static",style:e.crumbs&&e.crumbs.length?null:{display:"none"}},o.default.createElement("ol",{className:"breadcrumb"},function(){return e.crumbs.map(function(t){var n=function(){e.onClick({link:t.link})};return t.active?o.default.createElement("li",{key:t.id,onClick:n,className:"active"},t.title):o.default.createElement("li",{key:t.id,onClick:n},o.default.createElement("a",null,t.title))})}()))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/breadcrumbs/BreadcrumbModel",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,i,o){n(this,e),this.id=t+"-"+i,this.title=t,this.link=i,this.active=this.link===o};t.default=i,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/breadcrumbs/AGOLHeader",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/breadcrumbs/AGOLHeader",["module","exports","react","../../constants","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./AGOLHeader"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=d.default.builder.mediaPicker.browsePanel.sidePanel.agol,h=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u.default.createElement("span",{className:"compound-map fa fa-stack"},u.default.createElement("i",{className:"fa fa-map fa-inverse fa-stack-1x"}),u.default.createElement("i",{className:"fa fa-map-o fa-stack-1x"}),u.default.createElement("i",{className:"fa fa-circle fa-stack-1x auto-dim"}),u.default.createElement("i",{className:"fa fa-map-marker fa-stack-1x auto-dim"}))}}]),t}(u.default.Component),m=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getIconSpan",value:function(){return this.props.value===c.default.contentType.WEBMAP?u.default.createElement(h,null):u.default.createElement("span",{className:"fa fa-"+this.props.icon})}},{key:"render",value:function(){return u.default.createElement("label",{className:"btn btn-clear"+(this.props.checked?" active":""),tabIndex:"4",htmlFor:this.props.id,title:this.props.label,onKeyPress:this.props.onClick,onClick:this.props.onClick},this.getIconSpan(),u.default.createElement("span",{className:"fa fa-check floating-check"}),u.default.createElement("input",{tabIndex:"-1",onChange:this.props.onClick,checked:this.props.checked,type:"checkbox",name:"contentType",value:this.props.value,id:this.props.id}))}}]),t}(u.default.Component),g=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"thisOnClick",value:function(e){if(e.charCode+0===e.charCode){if(13!==e.charCode)return;$(e.currentTarget).toggleClass("active")}var t=$(e.currentTarget.parentElement).find(".active input");if(!t.length)return void this.props.onKeyPress([]);var n=t.map(function(e,t){return t.value}).get();this.props.onKeyPress(n)}},{key:"isSelected",value:function(e){return this.props.selectedTypes.indexOf(e)>=0&&this.props.availTypes.indexOf(e)>=0}},{key:"renderToggle",value:function(e){var t=this,n=void 0;switch(e){case c.default.contentType.WEBMAP:n=null;break;case c.default.contentType.WEBSCENE:n="globe fa-2x";break;case c.default.contentType.IMAGE:n="picture-o fa-2x";break;case c.default.contentType.VIDEO:n="video-camera fa-2x";break;case c.default.contentType.AUDIO:n="volume-up fa-2x";break;default:return console.warn("unknown toggle type",e),null}return u.default.createElement(m,{id:"agol-"+e,key:"agol-"+e,icon:n,onClick:function(e){return t.thisOnClick(e)},value:e,label:f.filterAndSort[e],checked:this.isSelected(e)})}},{key:"render",value:function(){return u.default.createElement("div",{className:"filter-toggle btn-group","data-toggle":"buttons"},this.props.availTypes.map(this.renderToggle.bind(this)))}}]),t}(u.default.Component),v=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"vert-divider"})}}]),t}(u.default.Component),b=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortClass",value:function(){return"fa-angle-"+(this.props.order===c.default.sortOrder.ASC?"up":"down")}},{key:"render",value:function(){return u.default.createElement("span",{className:"fa fa-stack calendar-sort"},u.default.createElement("i",{className:"fa fa-stack-1x fa-lg fa-calendar-o"}),u.default.createElement("i",{className:"fa fa-stack-1x "+this.getSortClass()}))}}]),t}(u.default.Component),y=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortClass",value:function(){return"fa-sort-alpha-"+(this.props.order===c.default.sortOrder.ASC?"asc":"desc")}},{key:"render",value:function(){return u.default.createElement("span",{className:"fa inline "+this.getSortClass()})}}]),t}(u.default.Component),_=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortIcon",value:function(){switch(this.props.value){case c.default.sortField.DATE:return u.default.createElement(b,{order:this.props.order});case c.default.sortField.TITLE:return u.default.createElement(y,{order:this.props.order})}}},{key:"render",value:function(){return u.default.createElement("label",{className:"btn btn-clear"+(this.props.checked?" active":""),tabIndex:"5",title:this.props.hoverText,htmlFor:this.props.id,onKeyPress:this.props.onClick,onClick:this.props.onClick},this.getSortIcon(),u.default.createElement("span",{className:"btn-label"},this.props.label),u.default.createElement("input",{onChange:this.props.onClick,checked:this.props.checked,type:"radio",name:"contentType",value:this.props.value,id:this.props.id}))}}]),t}(u.default.Component),w=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"thisOnClick",value:function(e,t,n){if(e.charCode+0!==e.charCode||13===e.charCode){if(t===this.props.sortField){var i=this.switchSortOrder(n);return void this.props.onKeyPress.sortOrderChange(i,t)}this.props.onKeyPress.sortFieldChange(t,n)}}},{key:"switchSortOrder",value:function(e){return e===c.default.sortOrder.ASC?c.default.sortOrder.DESC:c.default.sortOrder.ASC}},{key:"isSelected",value:function(e){return this.props.sortField===c.default.sortField[e]}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"sort-toggle btn-group","data-toggle":"buttons"},u.default.createElement(_,{id:"date-sort",onClick:function(t){return e.thisOnClick(t,c.default.sortField.DATE,e.props.sortOrder.date)},value:c.default.sortField.DATE,checked:this.isSelected("DATE"),order:this.props.sortOrder.date,label:f.filterAndSort.date,hoverText:f.filterAndSort.sortByDate}),u.default.createElement(_,{id:"title-sort",onClick:function(t){return e.thisOnClick(t,c.default.sortField.TITLE,e.props.sortOrder.title)},value:c.default.sortField.TITLE,checked:this.isSelected("TITLE"),order:this.props.sortOrder.title,label:f.filterAndSort.title,hoverText:f.filterAndSort.sortByTitle}))}}]),t}(u.default.Component),C=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"agol-header"},u.default.createElement(g,{availTypes:this.props.containerState.availableContentTypes,selectedTypes:this.props.containerState.selectedContentTypes,onKeyPress:this.props.onKeyPress.selectedContentTypesChange}),u.default.createElement(v,null),u.default.createElement(w,{onKeyPress:this.props.onKeyPress,sortField:this.props.sortField,sortOrder:{date:this.props.containerState.dateSortOrder,title:this.props.containerState.titleSortOrder}}))}}]),t}(u.default.Component);t.default=C,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/gallery/GalleryItem",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/gallery/GalleryItem",["module","exports","react","./../../constants","../../utils/Helper","dojo/topic","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./GalleryItem"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){var t=function(){e.onAlbumClicked({id:e.item.id,title:e.item.title})},n=function(){if(e.item.onSelected&&e.item.onSelected(),e.item.getPicUrl)return void e.item.getPicUrl(e.item).then(function(e){m.default.publish("MEDIA-PICKER-SELECTION",Object.assign(e,{type:"image"}))});m.default.publish("MEDIA-PICKER-SELECTION",{type:"image",width:e.item.width,height:e.item.height,url:e.item.picUrl,thumbUrl:e.item.thumbUrl})},i=function(){var t=e.item.type,n={type:t};"image"===t?Object.assign(n,{url:e.item.picUrl,thumbUrl:e.item.thumbUrl}):"audio"===t?Object.assign(n,{url:e.item.url}):Object.assign(n,{id:e.item.id}),m.default.publish("MEDIA-PICKER-SELECTION",n)},o=function(){return{width:f.default.galleryContent.ALBUM_HEIGHT+"px"}},r=function(e){var t;if(e.thumbWidth&&e.thumbHeight){var n=f.default.galleryContent.IMG_HEIGHT/parseInt(e.thumbHeight,10);t=parseInt(e.thumbWidth,10)*n+"px"}return{width:t||"auto",maxWidth:t?null:1.5*f.default.galleryContent.IMG_HEIGHT+"px"}},a=function(e){switch(e.type){case f.default.contentType.WEBMAP:return"map-o";case f.default.contentType.WEBSCENE:return"globe fa-2x";case f.default.contentType.IMAGE:return"picture-o";case f.default.contentType.AUDIO:return"volume-up";default:return"star"}},s=function(){return p.default.createElement(y,{thumbUrl:e.item.tokenizedThumbUrl||e.item.thumbUrl||e.item.thumbnail,title:e.item.name||e.item.title,onClick:t,startingClasses:"album",computedStyle:o(),showPopupDescription:!1})},l=function(){return p.default.createElement(y,{thumbUrl:u(e.item),title:e.item.name||e.item.title,onClick:n,startingClasses:"image",computedStyle:r(e.item),showPopupDescription:!1,item:e.item})},u=function(e){return e.dataUrl&&!0!==e.dataUrl?e.dataUrl:e.tokenizedThumbUrl||e.thumbUrl||e.thumbnail},c=function(){var t=h.default.classnames(["image",{unused:!1===e.item.usedInStory,loading:e.item.isTemp}]);return p.default.createElement(y,{thumbUrl:u(e.item),loading:e.item.isTemp,hasError:e.item.error,title:e.item.name||e.item.title,onItemDelete:e.item.isTemp?null:e.onItemDelete,onClick:e.item.error||e.item.isTemp?null:i,startingClasses:t,computedStyle:r(e.item),iconClass:a(e.item),showPopupDescription:!0,showOwner:e.showOwner,item:e.item})};return function(){switch(e.type){case f.default.galleryContent.ALBUMS:return s();case f.default.galleryContent.IMAGES:return l();case f.default.galleryContent.AGOL:return c();default:return null}}()}Object.defineProperty(t,"__esModule",{value:!0});var p=s(n),f=s(i),h=s(o),m=s(r),g=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=g.default.builder.mediaPicker.browsePanel.providers.galleryItems,y=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return c(t,e),v(t,[{key:"getIconSpan",value:function(e){return p.default.createElement("span",{className:"fa fa-lg fa-"+e})}},{key:"getTextClass",value:function(e){if(!e)return null;var t=e.match(/\s|\-/);return!t||t.index>12?"break-all":null}},{key:"getHoverText",value:function(){if(!this.props.item||!this.props.item.hoverText)return null
;var e=!1===this.props.item.usedInStory?"unused":null,t=this.props.showOwner?this.props.item.hoverText.typeAndOwner:this.props.item.hoverText.typeOnly;return"<div "+(e?'class="'+e+'"':"")+">"+t+"</div>"}},{key:"getImgDiv",value:function(){return this.props.hasError?p.default.createElement("div",{className:"img-wrapper load-error"},p.default.createElement("div",{className:"alert alert-danger"},p.default.createElement("span",{className:"fa fa-exclamation-triangle text-danger"}),p.default.createElement("br",null),p.default.createElement("span",{className:"text-danger"},b.uploadError),this.getDeleteButton())):this.props.showPopupDescription?p.default.createElement("div",{className:"img-wrapper"},p.default.createElement("img",{"data-toggle":"popover","data-trigger":"hover","data-html":"true","data-placement":"left","data-content":this.getHoverText(),src:this.props.thumbUrl}),this.getLoading(),this.getDeleteButton()):p.default.createElement("div",{className:"img-wrapper"},p.default.createElement("img",{src:this.props.thumbUrl}),this.getExternalLinkButton())}},{key:"getDeleteButton",value:function(){var e=this;return this.props.onItemDelete&&this.props.item&&!1===this.props.item.usedInStory?p.default.createElement("span",{className:"remove floating-btn",onClick:function(t){return e.props.onItemDelete(t,e.props.item)},"data-toggle":"popover","data-trigger":"hover","data-placement":"left","data-html":"true","data-content":this.props.item.getItemDeleteText(this.props.item)},p.default.createElement("span",{className:"fa fa-trash"})):null}},{key:"getExternalLinkButton",value:function(){if(!this.props.item||!this.props.item.externalLink)return null;var e=this.props.item.externalLink;return p.default.createElement("a",{href:e.link,target:"_blank"},p.default.createElement("span",{className:"external-link floating-btn",style:{backgroundImage:"url("+e.background+")"},"data-toggle":"popover","data-trigger":"hover","data-placement":"left","data-html":"true","data-content":e.hoverText+'&nbsp;&nbsp;<span class="fa fa-external-link"></span>',onClick:function(e){e.stopPropagation()}}))}},{key:"getDeleteHoverText",value:function(){return this.props.item.error?b.removeFailed:b.remove1+" "+b.remove2}},{key:"getLoading",value:function(){return this.props.loading?p.default.createElement("span",{className:"small-loader"}):null}},{key:"getTitle",value:function(){if(this.props.title)return p.default.createElement("div",{className:"title"},this.props.iconClass?this.getIconSpan(this.props.iconClass):null,p.default.createElement("span",{className:this.getTextClass(this.props.title)},this.props.title))}},{key:"render",value:function(){var e=h.default.classnames([this.props.startingClasses,"mp-gallery-item"]);return p.default.createElement("div",{onClick:this.props.onClick,className:e,style:this.props.computedStyle},this.getImgDiv(),this.getTitle())}}]),t}(p.default.Component);t.default=d,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/gallery/Gallery",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/gallery/Gallery",["module","exports","react","react-dom","../../utils/Helper","./GalleryItem","../../constants","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Gallery"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(){return h.default.createElement("div",{className:"small-loader",role:"alert"})}function f(e){return h.default.createElement("div",{className:"alert alert-danger",role:"alert"},h.default.createElement("span",null,e.text))}Object.defineProperty(t,"__esModule",{value:!0});var h=l(n),m=l(i),g=l(o),v=l(r),b=l(a),y=l(s),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=y.default.builder.mediaPicker.browsePanel,C=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),_(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"placeholder"},this.props.text)}}]),t}(h.default.Component),k=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return d(t,e),_(t,[{key:"componentDidUpdate",value:function(){var e=$(m.default.findDOMNode(this));$('.mp-gallery img[data-toggle="popover"]').popover({container:e,delay:{show:500,hide:200}}),$('.mp-gallery .remove[data-toggle="popover"]').popover({container:e,delay:{show:750,hide:200},template:'<div class="popover remove" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>'}),$('.mp-gallery .external-link[data-toggle="popover"]').popover({container:e,delay:{show:750,hide:200},template:'<div class="popover external-link" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>'}),this.props.items&&this.props.items.length||("function"==typeof e.scrollTop?e.scrollTop(0):e.scrollTop=0)}},{key:"renderItems",value:function(){var e=this;return this.props.items&&this.props.items.length?this.props.items.map(function(t){return h.default.createElement(v.default,{key:t.id,item:t,showOwner:e.props.providerProps&&e.props.providerProps.searchLocation!==b.default.searchLocation.MINE,onItemDelete:e.props.onItemDelete,onAlbumClicked:e.props.onAlbumClicked,type:e.props.displayedContent})}):null}},{key:"renderLimit",value:function(){if(this.props.displayedContent===b.default.galleryContent.AGOL&&this.props.items&&!(this.props.items.length<100)&&this.props.providerProps.searchLocation!==b.default.searchLocation.STORY)return h.default.createElement("div",{className:"alert alert-info limit-reached"},w.providers.limitReached)}},{key:"getSpinner",value:function(){return this.props.displayedContent===b.default.galleryContent.ALBUMS&&this.props.providerProps.albumFetchStatus===b.default.fetchStatus.FETCHING||this.props.displayedContent===b.default.galleryContent.IMAGES&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.FETCHING||this.props.displayedContent===b.default.galleryContent.AGOL&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.FETCHING?h.default.createElement(p,null):null}},{key:"getAlert",value:function(){return this.props.items&&this.props.items.length?null:this.props.displayedContent===b.default.galleryContent.IMAGES&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.SUCCESS?h.default.createElement(f,{text:w.providers.noPhotosFound}):this.props.displayedContent===b.default.galleryContent.AGOL&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.SUCCESS?this.props.providerProps.searchLocation!==b.default.searchLocation.STORY||this.props.containerState.storyResourceCount?h.default.createElement(f,{text:w.providers.noItemsFound}):h.default.createElement(f,{text:w.providers.noItemsInThisStory}):null}},{key:"getPlaceholderText",value:function(){var e=w.providers[this.props.containerState.provider].searchAndBrowse;return e?e.replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)}):""}},{key:"getPlaceholder",value:function(){return this.props.items&&this.props.items.length?null:this.props&&this.props.containerState&&this.props.containerState.provider?h.default.createElement(C,{text:this.getPlaceholderText()}):null}},{key:"render",value:function(){var e=this.getSpinner(),t=this.getAlert(),n=t||e?null:this.getPlaceholder(),i=!e&&!t&&!n,o=g.default.classnames(["row","mp-gallery",{centered:!i,"flex-grow":n}]);return h.default.createElement("div",{className:o},e||t||n,i?this.renderItems():null,i?this.renderLimit():null)}}]),t}(h.default.Component);t.default=k,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanel",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/Common",["module","exports","react","../../constants","../breadcrumbs/Breadcrumbs","../breadcrumbs/BreadcrumbModel","../breadcrumbs/AGOLHeader","../gallery/Gallery","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!../sidePanel/SidePanel"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(o),g=u(r),v=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=y.default.builder.mediaPicker.browsePanel.providers,C=function(e){function t(e){c(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyPress=n.onKeyPress.bind(n),n.fetchAlbums=n.fetchAlbums.bind(n),n.onAlbumClicked=n.onAlbumClicked.bind(n),n.determineGalleryItems=n.determineGalleryItems.bind(n),n.getBreadcrumbs=n.getBreadcrumbs.bind(n),n.onBreadcrumbClicked=n.onBreadcrumbClicked.bind(n),n}return p(t,e),_(t,[{key:"onKeyPress",value:function(e){13===e.charCode&&this.fetchAlbums()}},{key:"fetchAlbums",value:function(e){var t=this,n=e||this.props.searchValue||this.props.containerState.searchValue;if(this.beforeAlbumFetched(),!n)return void this.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.ERROR});n=n.trim(),this.props.connector.getProviderAlbums(n).then(function(e){t.onAlbumSuccess(n,e)}).catch(function(e){console.warn(e),t.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.ERROR}),t.props.handleUserError&&t.props.handleUserError(e)})}},{key:"beforeAlbumFetched",value:function(){this.props.updateImages({images:[]}),this.props.updateAlbums({albums:[]}),this.props.updateDisplayedContent({displayedContent:h.default.galleryContent.ALBUMS}),this.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.FETCHING}),this.props.updateUserSearchTerm&&this.props.updateUserSearchTerm({term:""}),this.props.updateSelectedAlbum({selectedAlbum:{}})}},{key:"onAlbumSuccess",value:function(e,t){this.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.SUCCESS}),this.props.updateUsername({userName:t.username||e}),this.props.updateAlbums({albums:t.albums||t}),this.props.handleAlbumSuccess&&this.props.handleAlbumSuccess()}},{key:"onAlbumClicked",value:function(e){var t=this;if(e.title===this.props.provider.selectedAlbum.title&&this.props.provider.images.length)return void this.props.updateDisplayedContent({displayedContent:h.default.galleryContent.IMAGES});this.beforeImageFetch(),this.props.connector.getItemsInAlbum(e.id,this.props.imageQueryParams).then(function(n){t.handleImageReturn(n),t.props.updateSelectedAlbum({selectedAlbum:e}),t.props.onChange.userTextInput&&t.props.onChange.userTextInput({target:{value:""}}),t.props.updateUserSearchTerm&&t.props.updateUserSearchTerm({term:""})}).catch(function(e){console.log(e),t.props.updateImageFetchStatus({fetchStatus:h.default.fetchStatus.ERROR})})}},{key:"beforeImageFetch",value:function(){this.props.updateImages({images:[]}),this.props.updateImageFetchStatus({fetchStatus:h.default.fetchStatus.FETCHING}),this.props.updateDisplayedContent({displayedContent:h.default.galleryContent.IMAGES})}},{key:"handleImageReturn",value:function(e){this.props.updateImageFetchStatus({fetchStatus:h.default.fetchStatus.SUCCESS}),this.props.updateImages({images:e})}},{key:"determineGalleryItems",value:function(){switch(this.props.provider.displayedContent){case h.default.galleryContent.ALBUMS:return this.props.provider.albums;case h.default.galleryContent.IMAGES:case h.default.galleryContent.AGOL:return this.props.provider.images;default:return[]}}},{key:"getSearchLabel",value:function(e,t){return e?t===h.default.fetchStatus.SUCCESS?w.searchedFor.replace("${searchterm}",e):w.searchingFor.replace("${searchterm}",e):null}},{key:"getBreadcrumbs",value:function(){var e=[],t=this.props.provider,n=t.selectedAlbum&&t.selectedAlbum.id?t.selectedAlbum.title:this.getSearchLabel(t.userSearchTerm,t.imageFetchStatus);return t.selectedTab&&t.selectedTab===h.default.searchType.TEXT||this.props.containerState.provider===h.default.providers.UNSPLASH?t.photoSearchTerm?(e.push(new g.default(this.getSearchLabel(t.photoSearchTerm,t.imageFetchStatus),h.default.galleryContent.IMAGES,t.displayedContent)),e):e:(t.albumFetchStatus!==h.default.fetchStatus.ERROR&&(t.albums.length&&e.push(new g.default(w.albumsOf.replace("${username}",t.userName),h.default.galleryContent.ALBUMS,t.displayedContent)),t.imageFetchStatus!==h.default.fetchStatus.ERROR&&n&&(t.images.length||t.selectedAlbum.id||t.userSearchTerm)&&e.push(new g.default(n,h.default.galleryContent.IMAGES,t.displayedContent))),e)}},{key:"onBreadcrumbClicked",value:function(e){this.props.updateDisplayedContent({displayedContent:e.link})}},{key:"getGalleryHeader",value:function(){switch(this.props.provider.displayedContent){case h.default.galleryContent.ALBUMS:case h.default.galleryContent.IMAGES:return f.default.createElement(m.default,{crumbs:this.getBreadcrumbs(),onClick:this.onBreadcrumbClicked});case h.default.galleryContent.AGOL:return f.default.createElement(v.default,{containerState:this.props.containerState,sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,onKeyPress:this.props.onKeyPress})}}},{key:"render",value:function(){return f.default.createElement("div",{style:this.props.display?null:{display:"none"},className:"browse-panel-container"},f.default.createElement("div",{className:"column-sidepanel arrow-box"},f.default.createElement(this.props.sidePanel,{onChange:this.props.onChange,onClear:this.props.onClear||null,onKeyPress:this.props.onKeyPress||this.onKeyPress,containerState:this.props.containerState,providerProps:this.props.provider})),f.default.createElement("div",{className:"column-gallery"},this.getGalleryHeader(),f.default.createElement(b.default,{containerState:this.props.containerState,providerProps:this.props.provider,onAlbumClicked:this.onAlbumClicked,onItemDelete:this.props.onKeyPress&&this.props.onKeyPress.onItemDelete?this.props.onKeyPress.onItemDelete:null,items:this.determineGalleryItems(),displayedContent:this.props.provider.displayedContent})))}}]),t}(f.default.Component);t.default=C,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelGooglePhotos",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelGooglePhotos",["module","exports","react","react-dom","../../utils/Helper","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./SidePanelGooglePhotos"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=f.default.builder.mediaPicker.browsePanel.sidePanel.googlePhotos,g=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"},t=p.default.mixinString(m.cannotFindUser,"username",this.props.triedUser);return c.default.createElement("div",{className:"alert alert-danger",role:"alert",style:e},c.default.createElement("span",null,t))}}]),t}(c.default.Component),v=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this;$(d.default.findDOMNode(this)).parents(".modal").on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),c.default.createElement("div",{className:t},c.default.createElement("div",{className:"input-group-addon"},c.default.createElement("span",{className:"fa fa-"+this.props.icon})),c.default.createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),c.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},c.default.createElement("span",{className:"fa fa-remove"})),c.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},c.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(c.default.Component),b=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"getHelpSpans",value:function(){return m.helpText.split(/\$\{(.+?)\}/).map(function(e,t){var n="googlehelp-"+t,i=e;return"helpLinkText"===e?c.default.createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.picasaHelp,target:"_blank"},c.default.createElement("strong",null,m.helpLinkText)):"Picasa"===e||"Google+"===e?c.default.createElement("span",{key:n},c.default.createElement("strong",null,i)):c.default.createElement("span",{key:n},i)})}},{key:"render",value:function(){var e=""!==this.props.containerState.userErrorType,t=p.default.unescapeBrands(m.placeholder);return c.default.createElement("div",{className:"mp-sidepanel google"},c.default.createElement(v,{icon:"picture-o",placeholder:t,value:this.props.containerState.searchValue,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,onClear:this.props.onClear,setFocus:this.props.containerState.focusInput}),c.default.createElement(g,{display:e,status:this.props.containerState.userErrorType,triedUser:this.props.containerState.searchValue}),c.default.createElement("div",{className:"help-text"},this.getHelpSpans(),c.default.createElement("div",{className:"small-text"},c.default.createElement("span",null,f.default.builder.mediaPicker.browsePanel.sidePanel.thirdPartyTerms),c.default.createElement("a",{className:"link",target:"_blank",rel:"noopener noreferrer",href:app.cfg.BUILDER_LINKS.TERMS.google},"Google"))))}}]),t}(c.default.Component);t.default=b,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/connectors/GooglePhotos",["exports","jquery"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GooglePhotosConnector=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(t),i=function(){return{getProviderAlbums:function(e){return new Promise(function(t,i){var o=document.location.protocol+"//picasaweb.google.com/data/feed/base/user/"+e+"?alt=json&access=public";if(!e)return void i();n.default.ajax({url:o,dataType:"jsonp",timeout:4e3}).then(function(e){var i=[];e&&e.feed&&e.feed.entry&&n.default.each(e.feed.entry,function(e,t){i.push({id:t.id.$t,title:t.title.$t||"",thumbUrl:t.media$group.media$thumbnail[0].url})}),t(i)},function(e){i(e)})})},getItemsInAlbum:function(e,t){return new Promise(function(i,o){var r="";if(!e)return void o();r=e.replace("/data/entry/base/","/data/feed/base/")+"&kind=photo&fields=title,subtitle,icon,entry(title,gphoto:numphotos,media:group(media:content,media:thumbnail,media:description),georss:where)",r+="&imgmax=1600",r+=t.maxPictures?"&max-results="+t.maxPictures:"",n.default.getJSON(r,function(e){var t=[];n.default.each(e.feed.entry,function(e,n){var i=n.media$group.media$content[0].url||"",o=n.media$group.media$thumbnail[2].url||"";i=i.replace(/^https?:\/\//,"//"),o=o.replace(/^https?:\/\//,"//");var r={name:n.media$group.media$description.$t||"",description:"",picUrl:i,thumbUrl:o,lat:"",lng:"",height:n.media$group.media$content[0].height,width:n.media$group.media$content[0].width,isVideo:!1,id:i,type:"googlePhotos"};n.georss$where&&n.georss$where.gml$Point&&n.georss$where.gml$Point.gml$pos&&n.georss$where.gml$Point.gml$pos.$t&&2==n.georss$where.gml$Point.gml$pos.$t.split(" ").length&&(r.lat=n.georss$where.gml$Point.gml$pos.$t.split(" ")[0],r.lng=n.georss$where.gml$Point.gml$pos.$t.split(" ")[1]),t.push(r)}),i(t)}).fail(function(e){o(e)})})}}}();e.GooglePhotosConnector=i}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/GooglePhotosContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelGooglePhotos","../../connectors/GooglePhotos"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),m=u(r),g=u(a),v=u(s),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={searchValue:"",userErrorType:"",focusInput:!1,provider:m.default.providers.GOOGLE_PHOTOS},e.onChange=e.onChange.bind(e),e}return p(t,e),y(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({focusInput:e.display&&!this.props.display||e.openFocus})}},{key:"onChange",value:function(e){this.setState({searchValue:e.target.value,userErrorType:""})}},{key:"onClear",value:function(e){var t=this;13===e.charCode&&(this.setState({searchValue:!0,focusInput:!0}),this.onChange({target:{value:""}}),setTimeout(function(){t.refs.Common.onKeyPress({charCode:13})},10))}},{key:"handleUserError",value:function(e){this.setState({userErrorType:e?e.reason:m.default.userFetchError.ERROR})}},{key:"render",value:function(){return f.default.createElement(g.default,b({ref:"Common",sidePanel:v.default,connector:l.GooglePhotosConnector,imageQueryParams:{maxPictures:200},onChange:this.onChange,onClear:this.onClear.bind(this),containerState:this.state,handleUserError:this.handleUserError.bind(this)},this.props))}}]),t}(f.default.Component),w=function(e){return{provider:e.browsePanel.googlePhotos}},C=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:m.default.providers.GOOGLE_PHOTOS});e(t(i))};return{updateAlbums:function(e){t(h.updateAlbums,e)},updateAlbumFetchStatus:function(e){t(h.updateAlbumFetchStatus,e)},updateUsername:function(e){t(h.updateUsername,e)},updateDisplayedContent:function(e){t(h.updateDisplayedContent,e)},updateImages:function(e){t(h.updateImages,e)},updateSelectedAlbum:function(e){t(h.updateSelectedAlbum,e)},updateImageFetchStatus:function(e){t(h.updateImageFetchStatus,e)}}};t.default=(0,i.connect)(w,C)(_),e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelFlickr",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelFlickr",["module","exports","react","react-dom","../../constants","lib-build/i18n!resources/tpl/builder/nls/app","../../utils/Helper","lib-build/less!./SidePanelFlickr"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(o),h=s(r),m=s(a),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=h.default.builder.mediaPicker.browsePanel.sidePanel.flickr,b=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"thisOnClick",value:function(e){var t=$(e.currentTarget).find("input").val();t!==this.props.selectedTab&&this.props.onChange({type:t})}},{key:"isSelected",value:function(e){return this.props.selectedTab===f.default.searchType[e]}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"type-toggle btn-group","data-toggle":"buttons"},d.default.createElement("label",{className:"btn btn-gray"+(this.isSelected("TEXT")?" active":""),htmlFor:"flickr-text",onClick:function(t){return e.thisOnClick(t)}},this.props.textLabel,d.default.createElement("input",{onChange:function(t){return e.thisOnClick(t)},type:"radio",name:"searchType",value:f.default.searchType.TEXT,id:"flickr-text",checked:this.isSelected("TEXT")})),d.default.createElement("label",{className:"btn btn-gray"+(this.isSelected("USER")?" active":""),htmlFor:"flickr-user",onClick:function(t){return e.thisOnClick(t)}},this.props.userLabel,d.default.createElement("input",{onChange:function(t){return e.thisOnClick(t)},type:"radio",name:"searchType",id:"flickr-user",value:f.default.searchType.USER,checked:this.isSelected("USER")})))}}]),t}(d.default.Component),y=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"componentDidMount",value:function(){var e=this;$(p.default.findDOMNode(this)).parents(".modal").on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),d.default.createElement("div",{className:t},d.default.createElement("div",{className:"input-group-addon"},d.default.createElement("span",{className:"fa fa-"+this.props.icon})),d.default.createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),d.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},d.default.createElement("span",{className:"fa fa-remove"})),d.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},d.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(d.default.Component),_=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"getOptions",value:function(){var e=[d.default.createElement("option",{value:f.default.flickrLicenseStrings.PUBLIC_DOMAIN,key:f.default.flickrLicenseStrings.PUBLIC_DOMAIN},v.licenses.public),d.default.createElement("option",{value:f.default.flickrLicenseStrings.COMMERCIAL,key:f.default.flickrLicenseStrings.COMMERCIAL},v.licenses.commercial),d.default.createElement("option",{value:f.default.flickrLicenseStrings.NON_COMMERCIAL,key:f.default.flickrLicenseStrings.NON_COMMERCIAL},v.licenses.nonCommercial)];return this.props.searchType===f.default.searchType.USER&&e.push(d.default.createElement("option",{value:f.default.flickrLicenseStrings.ANY,key:f.default.flickrLicenseStrings.ANY},v.licenses.any)),e}},{key:"render",value:function(){return d.default.createElement("div",{className:"license-group form-group"+(this.props.disabled?" disabled":"")},d.default.createElement("label",{htmlFor:this.props.searchType+"-license"},v.licenses.licenseLabel),d.default.createElement("select",{id:this.props.searchType+"-license",onChange:this.props.onChange,disabled:this.props.disabled,className:"license form-control",defaultValue:this.props.license},this.getOptions()))}}]),t}(d.default.Component),w=function(e){
function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"render",value:function(){var e,t=this,n={display:this.props.display?"block":"none"};switch(this.props.status){case f.default.userFetchError.NO_USER:case f.default.userFetchError.ERROR:e=m.default.mixinString(v.errors.cannotFindUser,"username",this.props.triedUser);break;case f.default.userFetchError.NO_PHOTOS:e=m.default.mixinString(v.errors.noUserPhotos,"username",this.props.triedUser);break;default:e=m.default.mixinString(v.errors.generalUserError,"username",this.props.triedUser)}var i=this.props.altUsername;if(this.props.altNSID&&(i+=" ("+this.props.altNSID+")"),this.props.altUsername){var o=v.errors.didYouMean.split(/\$\{(.+?)\}/),r=o.map(function(e,n){var o="didyoumean-"+n,r=e;return"username"===e?d.default.createElement("a",{key:o,href:"#",className:"alert-link",onClick:t.props.tryDifferentUser},i):d.default.createElement("span",{key:o},r)});return d.default.createElement("div",{className:"alert alert-danger",role:"alert",style:n},d.default.createElement("span",null,e,"Â "),d.default.createElement("div",{style:{display:"inline"}},r))}return d.default.createElement("div",{className:"alert alert-danger",role:"alert",style:n},d.default.createElement("span",null,e,"Â "))}}]),t}(d.default.Component),C=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"},t=""!==this.props.containerState.userErrorType;return d.default.createElement("div",{style:e},d.default.createElement(y,{icon:"user",setFocus:this.props.containerState.focusUserNameInput&&this.props.disable.textSearch,value:this.props.containerState.userNameInputValue,placeholder:v.placeholders.user,loading:this.props.albumLoading,onChange:this.props.onChange.userNameInput,onKeyPress:this.props.onKeyPress.userNameKeypress,onClear:this.props.onKeyPress.userNameClear}),d.default.createElement(w,{display:t,triedUser:this.props.containerState.userNameInputValue,status:this.props.containerState.userErrorType,altUsername:this.props.containerState.altUsername,altNSID:this.props.containerState.altNSID,tryDifferentUser:this.props.onKeyPress.tryDifferentUser}),d.default.createElement(y,{icon:"picture-o",setFocus:this.props.containerState.focusUserTextInput&&!this.props.disable.textSearch,disabled:this.props.disable.textSearch,placeholder:v.placeholders.userText,value:this.props.containerState.userTextInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.userTextInput,onKeyPress:this.props.onKeyPress.userTextKeypress,onClear:this.props.onKeyPress.userTextClear}),d.default.createElement(_,{disabled:this.props.disable.licenseSearch,onChange:this.props.onKeyPress.userLicenseChange,searchType:f.default.searchType.USER,license:this.props.license}))}}]),t}(d.default.Component),k=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"};return d.default.createElement("div",{style:e},d.default.createElement(y,{icon:"picture-o",setFocus:this.props.containerState.focusTextInput,placeholder:v.placeholders.text,value:this.props.containerState.textInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.textInput,onKeyPress:this.props.onKeyPress.textKeypress,onClear:this.props.onKeyPress.textClear}),d.default.createElement(_,{onChange:this.props.onKeyPress.photoLicenseChange,searchType:f.default.searchType.TEXT,license:this.props.license}))}}]),t}(d.default.Component),x=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"render",value:function(){var e=this.props.providerProps.selectedTab===f.default.searchType.USER,t=this.props.providerProps.selectedTab===f.default.searchType.TEXT,n=!this.props.providerProps.userName||this.props.providerProps.userName.trim().toLowerCase()!==this.props.containerState.userNameInputValue.trim().toLowerCase(),i=n||""===this.props.providerProps.userSearchTerm||this.props.providerProps.userSearchTerm!==this.props.containerState.userTextInputValue;return d.default.createElement("div",{className:"mp-sidepanel flickr"},d.default.createElement(b,{textLabel:m.default.unescapeBrands(v.searchType.text),userLabel:m.default.unescapeBrands(v.searchType.account),selectedTab:this.props.providerProps.selectedTab,onChange:this.props.onKeyPress.searchType}),d.default.createElement(C,{albumLoading:this.props.providerProps.albumFetchStatus===f.default.fetchStatus.FETCHING,imageLoading:this.props.providerProps.imageFetchStatus===f.default.fetchStatus.FETCHING&&this.props.providerProps.userSearchTerm,userError:this.props.containerState.userErrorType,display:e,disable:{textSearch:n,licenseSearch:i},license:this.props.providerProps.userLicense,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,containerState:this.props.containerState}),d.default.createElement(k,{imageLoading:this.props.providerProps.imageFetchStatus===f.default.fetchStatus.FETCHING,display:t,license:this.props.providerProps.photoLicense,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,containerState:this.props.containerState}),d.default.createElement("div",{className:"small-text text-margins"},d.default.createElement("span",null,h.default.builder.mediaPicker.browsePanel.sidePanel.thirdPartyTerms),d.default.createElement("a",{className:"link",target:"_blank",rel:"noopener noreferrer",href:app.cfg.BUILDER_LINKS.TERMS.flickr},"Flickr")))}}]),t}(d.default.Component);t.default=x,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/connectors/Flickr",["exports","jquery","lib-build/i18n!resources/tpl/builder/nls/app","../constants"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.FlickrConnector=void 0;var r=o(t),a=o(n),s=o(i),l=a.default.builder.mediaPicker.browsePanel.providers.flickr,u=function(){var e=null,t=null,n={per_page:500},i=function(t){return new Promise(function(n,i){var r=t.indexOf("@N");if(r>0&&r===t.length-4)return e=t,void o(n,i);E("flickr.people.findByUsername",{username:t}).done(function(r){r&&"ok"===r.stat?(e=r.user.id,o(n,i,t,r.user)):S(t).then(function(e){return a(s.default.userFetchError.NO_USER,i,e)}).fail(function(e){console.warn(e),i({reason:s.default.userFetchError.ERROR})})})})},o=function(e,t,n,i){k().then(function(o,r){var l=o[0].photosets.photoset;u(l,r[0].photos.photo[0]),l&&l.length?e({sets:x(l),username:i&&i.username&&i.username._content?i.username._content:null}):n?S(n).then(function(e){return a(s.default.userFetchError.NO_PHOTOS,t,e)}).fail(function(e){console.warn(e),t({reason:s.default.userFetchError.NO_PHOTOS})}):t({reason:s.default.userFetchError.NO_PHOTOS})})},a=function(e,t,n){if(n&&"ok"===n.stat){var i=n.user.username._content;E("flickr.people.findByUsername",{username:i}).then(function(o){t(o&&"ok"===o.stat?{reason:e||s.default.userFetchError.ERROR,alternate:i}:{reason:e||s.default.userFetchError.ERROR,alternate:i,nsid:n.user.id})})}else t({reason:e||s.default.userFetchError.ERROR})},u=function(e,n){return n&&(t=n.id,e.unshift(n)),e},c=function(e,n){return e===t?d(n):f("flickr.photosets.getPhotos",Object.assign({photoset_id:e},n))},d=function(t){return f("flickr.people.getPhotos",Object.assign({user_id:e},t))},p=function(t){return t.user&&Object.assign(t,{user_id:e}),f("flickr.photos.search",t)},f=function(e,t){return new Promise(function(i,o){var a=Object.assign({extras:"geo,description,license,url_s,url_n,url_m,url_l"},n,t);E(e,a).done(function(e){e&&"ok"===e.stat||o();var t=[],n=[];e.photos?n=e.photos.photo:e.photoset&&(n=e.photoset.photo),r.default.each(n,function(e,n){var i=C(n);t.push(Object.assign({name:n.title||"",description:n.description?n.description._content||"":"",getPicUrl:b,picUrl:_(n),lat:n.latitude||"",lng:n.longitude||"",height:n.height_l||n.height_m,width:n.width_l||n.width_m,isVideo:!1,id:n.id,license:n.license,type:"flickr"},i))}),i(t)})})},h=function(e){return new Promise(function(t,n){var i=m(e);E("flickr.photos.getSizes",{photo_id:i}).done(function(i){return v(i)?g(e,i.sizes.size)?void t(i):void n({reason:"matching url not found in flickr.getSizes result"}):void n({reason:"no photo or no sizes",result:i})}).fail(function(e,t,i){console.debug("fail",e,t,i),n({reason:"getSizes call failed",status:t,err:i})})})},m=function(e){var t=e.lastIndexOf("/"),n=e.indexOf("_",t);return e.slice(t+1,n)},g=function(e,t){var n=e.replace(/^https?:/,"").replace(/^\/\//,"");return t.some(function(e){return e.source&&e.source.indexOf(n)>=0})},v=function(e){return"ok"===e.stat&&e.sizes&&e.sizes.size&&e.sizes.size.length},b=function(e){return new Promise(function(t){var n={url:e.picUrl,width:e.width,height:e.height};E("flickr.photos.getSizes",{photo_id:e.id}).done(function(e){if(!v(e))return void t(n);t(y(e.sizes.size,n))}).fail(function(e,i,o){console.warn("failed to get sizes from flickr",o),t(n)})})},y=function(e,t){var n=e.map(function(e){return{width:parseInt(e.width),height:parseInt(e.height),url:e.source}});return Object.assign({},t,{sizes:n})},_=function(e){return e.url_l||e.url_m||w(e,"b")},w=function(e,t){return"http://farm"+e.farm+".static.flickr.com/"+e.server+"/"+e.id+"_"+e.secret+"_"+t+".jpg"},C=function(e){var t,n=.8*s.default.galleryContent.IMG_HEIGHT;if(e.url_s&&e.height_s>=n)t="s";else if(e.url_n&&e.height_n>=n)t="n";else if(e.url_m&&e.height_m>=n)t="m";else{if(!e.url_l)return{thumbUrl:w(e,"m")};t="l"}return{thumbUrl:e["url_"+t],thumbWidth:e["width_"+t],thumbHeight:e["height_"+t]}},k=function(){return r.default.when(E("flickr.photosets.getList",Object.assign({},n,{user_id:e,primary_photo_extras:"url_q"})),E("flickr.people.getPhotos",Object.assign({},n,{user_id:e,per_page:1,extras:"url_q"})))},x=function(e){return r.default.each(e,function(e,t){t._thumbnail=t.url_q||!!t.primary_photo_extras&&t.primary_photo_extras.url_q||"http://farm2.static.flickr.com/"+t.server+"/"+(t.primary||t.id)+"_"+t.secret+"_q.jpg"}),e},E=function(e,t){var n="https://api.flickr.com/services/rest/?method="+e+"&format=json&api_key="+app.cfg.MEDIA_KEYS.FLICKR_API+(t?"&"+r.default.param(t):"")+"&jsoncallback=?";return r.default.getJSON(n)},T=function(e){return new Promise(function(n,o){i(e).then(function(e){var i=[];e.sets.forEach(function(e){var n={id:e.id,thumbUrl:e._thumbnail,title:e.id===t?l.photostream:e.title._content,details:{photos:e.photos}};i.push(n)}),n({albums:i,username:e.username})}).catch(function(e){o(e)})})},S=function(e){return E("flickr.urls.lookupUser",{url:"http://www.flickr.com/photos/"+e})};return{getProviderAlbums:T,getItemsInAlbum:c,photoSearch:p,checkPhotoByUrl:h}}();e.FlickrConnector=u}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/FlickrContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelFlickr","../../connectors/Flickr"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),m=u(r),g=u(a),v=u(s),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={userNameInputValue:"",userTextInputValue:"",textInputValue:"",userErrorType:"",altUsername:"",altNSID:"",focusUserNameInput:!1,focusUserTextInput:!1,focusTextInput:!1,provider:m.default.providers.FLICKR},e.onChange={userNameInput:e.userNameInput.bind(e),userTextInput:e.userTextInput.bind(e),textInput:e.textInput.bind(e)},e.onKeyPress={searchType:e.searchTypeSubmit.bind(e),userNameKeypress:e.userNameKeypress.bind(e),userTextKeypress:e.userTextKeypress.bind(e),tryDifferentUser:e.tryDifferentUser.bind(e),userNameClear:e.userNameClear.bind(e),userTextClear:e.userTextClear.bind(e),textClear:e.textClear.bind(e),textKeypress:e.textKeypress.bind(e),userLicenseChange:e.userLicenseChange.bind(e),photoLicenseChange:e.photoLicenseChange.bind(e)},e}return p(t,e),y(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.provider.selectedTab===m.default.searchType.USER,n=e.display&&!this.props.display,i=this.props.provider.selectedTab!==e.provider.selectedTab;this.setState({focusUserNameInput:t&&(n||i||e.openFocus),focusUserTextInput:t&&(n||i||e.openFocus),focusTextInput:!t&&(n||i||e.openFocus)})}},{key:"userNameInput",value:function(e){this.setState({userNameInputValue:e.target.value,userErrorType:"",altUsername:"",altNSID:""})}},{key:"userTextInput",value:function(e){this.setState({userTextInputValue:e.target.value})}},{key:"textInput",value:function(e){this.setState({textInputValue:e.target.value})}},{key:"userNameKeypress",value:function(e){if(13===e.charCode){if(this.userTextInput({target:{value:""}}),!this.state.userNameInputValue)return this.refs.Common.beforeAlbumFetched(),void this.refs.Common.onAlbumSuccess("",[]);this.refs.Common.fetchAlbums(this.state.userNameInputValue)}}},{key:"userTextKeypress",value:function(e){13===e.charCode&&this.userTextSubmit()}},{key:"textKeypress",value:function(e){13===e.charCode&&this.photoTextSubmit()}},{key:"userNameClear",value:function(e){var t=this;13===e.charCode&&(this.userNameInput({target:{value:""}}),this.setState({focusUserNameInput:!0}),setTimeout(function(){t.userNameKeypress({charCode:13})},10))}},{key:"userTextClear",value:function(e){var t=this;13===e.charCode&&(this.userTextInput({target:{value:""}}),this.setState({focusUserTextInput:!0}),setTimeout(function(){t.userTextKeypress({charCode:13})},10))}},{key:"textClear",value:function(e){var t=this;13===e.charCode&&(this.setState({focusTextInput:!0}),this.textInput({target:{value:""}}),setTimeout(function(){t.textKeypress({charCode:13})},10))}},{key:"userTextSubmit",value:function(e){var t=this.state.userTextInputValue.trim();if(!t)return this.props.updateUserSearchTerm({term:""}),this.props.updateImages({images:[]}),void this.props.updateDisplayedContent({displayedContent:m.default.galleryContent.ALBUMS});e=e||{},this.props.updateUserSearchTerm({term:t}),Object.assign(e,{text:t}),this.props.updateSelectedAlbum({selectedAlbum:{}});var n=m.default.flickrLicenseVals[this.props.provider.userLicense].toString();this.imageFetch(Object.assign({user:!0,license:n},e))}},{key:"photoTextSubmit",value:function(e){var t=this.state.textInputValue.trim();if(this.props.updatePhotoSearchTerm({term:t}),!t)return this.props.updateImages({images:null}),void this.props.updateImageFetchStatus({fetchStatus:m.default.fetchStatus.NOT_FETCHED});var n=m.default.flickrLicenseVals[this.props.provider.photoLicense].toString();this.imageFetch(Object.assign({text:t,license:n},e))}},{key:"imageFetch",value:function(e){var t=this;this.refs.Common.beforeImageFetch(),l.FlickrConnector.photoSearch(e).then(function(e){return t.refs.Common.handleImageReturn(e)})}},{key:"userLicenseChange",value:function(e){var t=e.target.value;this.props.updateUserLicense({license:t}),this.userTextSubmit({license:m.default.flickrLicenseVals[t].toString()})}},{key:"photoLicenseChange",value:function(e){var t=e.target.value;this.props.updatePhotoLicense({license:t}),this.photoTextSubmit({license:m.default.flickrLicenseVals[t].toString()})}},{key:"searchTypeSubmit",value:function(e){var t=this;switch(this.props.updateSearchType(e),this.setState({userNameInputValue:this.props.provider.userName,userTextInputValue:this.props.provider.userSearchTerm,textInputValue:this.props.provider.photoSearchTerm,userErrorType:"",altUsername:"",altNSID:""}),this.props.updateImages({images:[]}),this.props.updateAlbumFetchStatus({fetchStatus:m.default.fetchStatus.NOT_FETCHED}),this.props.updateImageFetchStatus({fetchStatus:m.default.fetchStatus.NOT_FETCHED}),e.type){case m.default.searchType.USER:if(!this.props.provider.userName)return;this.props.provider.userSearchTerm?this.userTextSubmit():this.props.provider.userName&&this.props.provider.albums.length?(this.props.updateDisplayedContent({displayedContent:m.default.galleryContent.ALBUMS}),this.props.provider.selectedAlbum.id&&setTimeout(function(){t.refs.Common.onAlbumClicked(t.props.provider.selectedAlbum)},1)):this.refs.Common.fetchAlbums(this.state.userNameInputValue);break;case m.default.searchType.TEXT:this.props.updateDisplayedContent({displayedContent:m.default.galleryContent.IMAGES}),this.photoTextSubmit();break;default:return}}},{key:"handleAlbumSuccess",value:function(){this.setState({focusUserTextInput:!0})}},{key:"handleUserError",value:function(e){this.setState({userErrorType:e.reason,altUsername:e.alternate,altNSID:e.nsid})}},{key:"tryDifferentUser",value:function(){var e=this;this.userNameInput({target:{value:this.state.altNSID||this.state.altUsername}}),setTimeout(function(){e.userNameKeypress({charCode:13})},10)}},{key:"render",value:function(){return f.default.createElement(g.default,b({ref:"Common",sidePanel:v.default,connector:l.FlickrConnector,imageQueryParams:{per_page:500},onChange:this.onChange,onKeyPress:this.onKeyPress,handleAlbumSuccess:this.handleAlbumSuccess.bind(this),handleUserError:this.handleUserError.bind(this),containerState:this.state},this.props))}}]),t}(f.default.Component),w=function(e){return{provider:e.browsePanel.flickr}},C=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:m.default.providers.FLICKR});e(t(i))};return{updateAlbums:function(e){t(h.updateAlbums,e)},updateAlbumFetchStatus:function(e){t(h.updateAlbumFetchStatus,e)},updateUsername:function(e){t(h.updateUsername,e)},updateDisplayedContent:function(e){t(h.updateDisplayedContent,e)},updateImages:function(e){t(h.updateImages,e)},updateSelectedAlbum:function(e){t(h.updateSelectedAlbum,e)},updateImageFetchStatus:function(e){t(h.updateImageFetchStatus,e)},updateSearchType:function(e){t(h.updateSearchType,e)},updateUserSearchTerm:function(e){t(h.updateUserSearchTerm,e)},updatePhotoSearchTerm:function(e){t(h.updatePhotoSearchTerm,e)},updateUserLicense:function(e){t(h.updateUserLicense,e)},updatePhotoLicense:function(e){t(h.updatePhotoLicense,e)}}};t.default=(0,i.connect)(w,C)(_),e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/FileUploader/NewerImageUploadHelper",["module","exports","../../../constants"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e,t){return new Promise(function(n,i){e.type.indexOf("gif")>=0?r(e,t).then(n).catch(i):a(e,t).then(n).catch(i)})},r=function(e,t){return new Promise(function(n,o){if(!l(e))return console.warn("gif file size too big!"),void o({reason:"filesize"});d(e).then(function(o){s({file:e,img:o,dataUrl:t?null:i.default.fileSettings.blankBackground},n)}).catch(o)})},a=function(e,t){return new Promise(function(n,o){d(e).then(function(r){var a=p(r,{width:i.default.photoSettings.maxWidth}),d=e,f=void 0;if(!(u(e)&&c(r)||(f=a.toDataURL(e.type,i.default.photoSettings.quality),d=h(f),l(d))))return void o({reason:"compressed filesize"});var m=Math.max(i.default.galleryContent.IMG_HEIGHT,i.default.galleryContent.ALBUM_HEIGHT),g=p(r,{height:m}),v=g.toDataURL(e.type,i.default.photoSettings.quality),b=h(v);s({canvas:a,file:d,dataUrl:t?f:v,thumb:b},n)}).catch(o)})},s=function(e,t){e.img=e.img||e.canvas,t(Object.assign({type:"image",width:e.img.width,height:e.img.height,file:e.file},e.dataUrl?{dataUrl:e.dataUrl}:{},e.thumb?{thumb:e.thumb}:{}))},l=function(e){return e.size<=i.default.fileSettings.maxFileSize},u=function(e){return e.size<=i.default.photoSettings.idealFileSize},c=function(e){return e.width<=i.default.photoSettings.maxWidth},d=function(e){return new Promise(function(t,n){var i=new Image,o=window.URL||window.webkitURL;if(!o)return void n({reason:"no window.URL"});i.src=o.createObjectURL(e),i.onload=function(){this.onload=null,o.revokeObjectURL(e),t(this)}})},p=function(e,t){var n=f(e,t),i=document.createElement("canvas");return i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),i},f=function(e,t){var n=e.height,i=e.width;if(!c(e,t)){var o=i/n;t.width?(i=t.width,n=i/o):t.height?(n=t.height,i=o*n):console.warn("sizeOptions dont include width or height",t)}return{height:Math.round(n),width:Math.round(i)}},h=function(e){var t=void 0;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([i],{type:n})};t.default={loadImageFromFile:o},e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/FileUploader/AudioUploadHelper",["module","exports","../../../constants"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e,t){return new Promise(function(n,i){r(e,t).then(n).catch(i)})},r=function(e,t){return new Promise(function(n,i){if(!s(e))return console.warn("gif file size too big!"),void i({reason:"filesize"});a({file:e,isSingle:t},n)})},a=function(e,t){e.img=e.img||e.canvas,t({type:"audio",file:e.file,dataUrl:e.isSingle})},s=function(e){return e.size<=i.default.fileSettings.maxFileSize};t.default={loadAudioFromFile:o},e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/connectors/ArcGIS",["exports","lib-build/i18n!resources/tpl/builder/nls/app","../constants","../utils/Helper","esri/request","dojo/topic"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ArcGISConnector=void 0;var l=a(t),u=a(n),c=a(i),d=a(o),p=a(r),f=l.default.builder.mediaPicker.browsePanel.sidePanel.agol,h=function(){var e,t,n,i,o,r={num:100},a=function(){return e=app.portal},l=function(){var t=e||a();return o="https://"+t.portalHostname.replace(/\/$/,"")+"/sharing/rest"},h=function(){return t=app.data&&app.data.appItem},m=function(){return n=h()&&t.item.id},g=function(){return new Promise(function(e,t){if(m())return void e(n);var i=0,o=setInterval(function(){return m()?(e(n),void clearInterval(o)):(i++,i>5?(t("no appId"),void clearInterval(o)):void 0)},1e3)})},v=function(){return i=app.portal&&app.portal.user},b=function(){return t?t.item.owner:void console.warn("no app owner")},y=function(){return new Promise(function(e,t){if(!app.portal)return void t(new Error("No app.portal on checkSignin"));app.portal.user&&app.portal.signedIn?e():p.default.subscribe("portal-signin",function(){e()})})},_=function(e){return new Promise(function(t,n){if(!app.portal)return void n("no portal");if(!i&&!v())return void n("no user");if(e.searchLocation===u.default.searchLocation.STORY)return void C(e,t,n);var o=void 0;if(e.idArr){if(o=B(e.idArr),e.contentTypes){var a=$(e.contentTypes);a&&(o+=" "+a.join(" "))}}else{if(e.contentTypesArr=$(e.contentTypes),!e.contentTypesArr)return void t();o=U(e)}var s=Object.assign({},r,{q:o});e.sortField&&(s.sortField=e.sortField),e.sortOrder&&(s.sortOrder=e.sortOrder),x(s,t,n)})},w=function(){return(o||l())+"/content/items/"+n+"/resources/"},C=function(e,t,i){if(!n&&!m())return void t();var o=w();(0,d.default)({url:o,handleAs:"json",content:{num:1e3,f:"json"}}).then(function(e){return k(e,t)},function(e){return T(e,i)})},k=function(e,t){t(M(e.resources))},x=function(e,t,n){app.portal.queryItems(e).then(function(e){return E(e,t)},function(e){return T(e,n)})},E=function(e,t){t(L(e.results))},T=function(e,t){t(e)},S=function(e){var t=new FormData;return t.append("f","json"),P(t,e),t},P=function(e,t){e.append("file",t.file,t.processedFileName),t.thumb&&e.append("thumb",t.thumb,t.thumbName)},O=function(e){return new Promise(function(i,r){if(!n&&!m())return void r();var a=S(e),s=o||l(),u=b(),c=(t||h()).item.ownerFolder,p=s+"/content/users/"+u+(c?"/"+c:"")+"/items/"+n+"/addResources";(0,d.default)({url:p,handleAs:"json",form:a},{usePost:!0}).then(function(t){if(t.success){var n=w(),o=n+encodeURIComponent(e.processedFileName),a=e.thumb?n+encodeURIComponent(e.thumbName):null;i(Object.assign(t,{picUrl:o,thumbUrl:a}))}else r(t)},function(e){r(e)})})},I=function(e){return new Promise(function(i,r){if(!n&&!m())return void r();var a=o||l(),s=b(),u=(t||h()).item.ownerFolder,c=a+"/content/users/"+s+(u?"/"+u:"")+"/items/"+n+"/removeResources";(0,d.default)({url:c,handleAs:"json",content:{resource:e.fileName,f:"json"}},{usePost:!0}).then(function(e){e.success?i():(console.warn("removeResources .then !result.success",e),r(e))},function(e){console.warn("removeResources errback",e),r(e)}),e.thumbFile&&e.thumbFile!==e.fileName&&(0,d.default)({url:c,handleAs:"json",content:{resource:e.thumbFile,f:"json"}},{usePost:!0}).then(function(e){e&&e.success||console.warn("unsuccessful deletion of thumbnail file")},function(e){console.warn("unsuccessful deletion of thumbnail file",e)})})},M=function(e){var t=w(),n=[];return e.forEach(function(i){var o=i.resource;if(!(o.indexOf("__thumb")>=0)){var r=o.split("__"),a=r.slice(-1)[0].split("."),s=a.slice(-1)[0],l=D(s);if(l){var u,c=1===r.length?r[0]:r.slice(0,-1).join("__")+"."+s,d=a[0].match(/^[0-9]{13}$/)?new Date(parseInt(a[0])):"";u="audio"===l?N(o,e,t,s,c,d,l):A(o,e,t,s,c,d,l),n.push(u)}}}),n},A=function(e,t,n,o,r,a,s){var l=j(e,t),u=c.default.stripTrailingSlash(n)+"/"+encodeURIComponent(l),d=u+"?token="+i.credential.token;return{name:decodeURIComponent(r),modified:a,thumbUrl:u,tokenizedThumbUrl:d,thumbFile:l,type:s,picUrl:c.default.stripTrailingSlash(n)+"/"+encodeURIComponent(e),displayName:f.filterAndSort.image,id:e,fileName:e,title:r,fromResources:!0}},N=function(e,t,n,i,o,r,a){return{name:decodeURIComponent(o),modified:r,type:a,url:c.default.stripTrailingSlash(n)+"/"+encodeURIComponent(e),thumbUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik04MzIgMzUydjEwODhxMCAyNi0xOSA0NXQtNDUgMTktNDUtMTlsLTMzMy0zMzNoLTI2MnEtMjYgMC00NS0xOXQtMTktNDV2LTM4NHEwLTI2IDE5LTQ1dDQ1LTE5aDI2MmwzMzMtMzMzcTE5LTE5IDQ1LTE5dDQ1IDE5IDE5IDQ1em0zODQgNTQ0cTAgNzYtNDIuNSAxNDEuNXQtMTEyLjUgOTMuNXEtMTAgNS0yNSA1LTI2IDAtNDUtMTguNXQtMTktNDUuNXEwLTIxIDEyLTM1LjV0MjktMjUgMzQtMjMgMjktMzYgMTItNTYuNS0xMi01Ni41LTI5LTM2LTM0LTIzLTI5LTI1LTEyLTM1LjVxMC0yNyAxOS00NS41dDQ1LTE4LjVxMTUgMCAyNSA1IDcwIDI3IDExMi41IDkzdDQyLjUgMTQyem0yNTYgMHEwIDE1My04NSAyODIuNXQtMjI1IDE4OC41cS0xMyA1LTI1IDUtMjcgMC00Ni0xOXQtMTktNDVxMC0zOSAzOS01OSA1Ni0yOSA3Ni00NCA3NC01NCAxMTUuNS0xMzUuNXQ0MS41LTE3My41LTQxLjUtMTczLjUtMTE1LjUtMTM1LjVxLTIwLTE1LTc2LTQ0LTM5LTIwLTM5LTU5IDAtMjYgMTktNDV0NDUtMTlxMTMgMCAyNiA1IDE0MCA1OSAyMjUgMTg4LjV0ODUgMjgyLjV6bTI1NiAwcTAgMjMwLTEyNyA0MjIuNXQtMzM4IDI4My41cS0xMyA1LTI2IDUtMjYgMC00NS0xOXQtMTktNDVxMC0zNiAzOS01OSA3LTQgMjIuNS0xMC41dDIyLjUtMTAuNXE0Ni0yNSA4Mi01MSAxMjMtOTEgMTkyLTIyN3Q2OS0yODktNjktMjg5LTE5Mi0yMjdxLTM2LTI2LTgyLTUxLTctNC0yMi41LTEwLjV0LTIyLjUtMTAuNXEtMzktMjMtMzktNTkgMC0yNiAxOS00NXQ0NS0xOXExMyAwIDI2IDUgMjExIDkxIDMzOCAyODMuNXQxMjcgNDIyLjV6Ii8+PC9zdmc+",displayName:f.filterAndSort.audio,id:e,fileName:e,title:o,fromResources:!0}},j=function(e,t){var n=e.lastIndexOf("."),i=n>=0?e.substr(0,n):e,o=t.find(function(e){var t=e.resource;return!(t.indexOf("__thumb")<0)&&0===t.indexOf(i)});return o=o?o.resource:e},L=function(e){return e.map(function(e){return Object.assign({name:e.title,title:e.title,id:e.id,agolType:e.type,type:R(e.type),displayName:e.displayName,owner:e.owner,modified:e.modified,snippet:e.snippet},F(e))})},D=function(e){if(!e)return!1;e="."+e.toLowerCase();for(var t in u.default.contentType)if(u.default.uploadFileExtensions[t]&&u.default.uploadFileExtensions[t].indexOf(e)>=0)return u.default.contentType[t];return!1},R=function(e){switch(e){case u.default.agolContentType.WEBMAP:return u.default.contentType.WEBMAP;case u.default.agolContentType.WEBSCENE:return u.default.contentType.WEBSCENE;case u.default.agolContentType.IMAGE:return u.default.contentType.IMAGE;default:return console.warn("no type found for",e),"agh, whats this???"}},F=function(e){var t=e.thumbnailUrl;if(!t){var n=app.portal.staticImagesUrl;if(!n)return console.warn("no staticImagesUrl in portal"),{};switch(e.type){case u.default.agolContentType.WEBSCENE:t=n+"/scene.png";break;case u.default.agolContentType.WEBMAP:default:t=n+"/desktopapp.png"}}return{thumbUrl:t,thumbHeight:133,thumbWidth:200}},B=function(e){return"id:"+e.join(" OR id:")},U=function(e){var t=[];return e.searchStr&&t.push(H(e.searchStr)),t.push.apply(t,s(e.contentTypesArr).concat([z(e.searchLocation)])),t.join(" ")},H=function(e){return e.match(/^[A-Fa-f0-9]{32}$/)?"id:"+e:e},$=function(e){var t=[],n=[];if(e.indexOf(u.default.contentType.WEBMAP)>=0&&(t.push('type:"Web Map"'),n.push('-type:"Web Mapping Application"')),e.indexOf(u.default.contentType.WEBSCENE)>=0&&(t.push('type:"Web Scene"'),n.push('-type:"CityEngine Web Scene"')),0===t.length)return!1;var i=void 0;return i=1===t.length?t[0]:"("+t.join(" OR ")+")",[i,n.join(" ")]},z=function(e){switch(e){case u.default.searchLocation.ORG:return"orgid:"+i.orgId;case u.default.searchLocation.MINE:return"owner:"+i.username;case u.default.searchLocation.AGOL:return"";default:return console.warn("TODO: deal with searchLocation",e),""}};return{checkSignin:y,getItems:_,getPortal:a,getAppItem:h,getAppId:m,getAppIdPromise:g,getUser:v,uploadSingleResource:O,removeResources:I,formatResources:M}}();e.ArcGISConnector=h}),define("lib/resample-hermite/hermite",function(){}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,!0):t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){return I.call(e).slice(8,-1).toLowerCase()}function i(e){return"number"==typeof e&&!isNaN(e)}function o(e){return"object"==typeof e&&null!==e}function r(e){var t,n;if(!o(e))return!1;try{return t=e.constructor,n=t.prototype,t&&n&&M.call(n,"isPrototypeOf")}catch(e){return!1}}function a(e){return"function"===n(e)}function s(e){return Array.isArray?Array.isArray(e):"array"===n(e)}function l(e,t){var n=[];return t=t>=0?t:0,Array.from?Array.from(e).slice(t):n.slice.call(e,t)}function u(e,t){var n,r;if(e&&a(t))if(s(e)||i(e.length))for(r=0,n=e.length;r<n&&!1!==t.call(e,e[r],r,e);r++);else if(o(e))for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(e,e[r],r,e))break;return e}function c(e){var t;if(arguments.length>1){if(t=l(arguments),Object.assign)return Object.assign.apply(Object,t);t.shift(),u(t,function(t){u(t,function(t,n){e[n]=t})})}return e}function d(e,t){var n=l(arguments,2);return function(){
return e.apply(t,n.concat(l(arguments)))}}function p(e,t,n){var i="",o=t;for(n+=t;o<n;o++)i+=A(e.getUint8(o));return i}function f(e){var t,n=e.replace(_,""),i=atob(n),o=i.length,r=new b(o),a=new Uint8Array(r);for(t=0;t<o;t++)a[t]=i.charCodeAt(t);return r}function h(e){var t,n=new Uint8Array(e),i=n.length,o="";for(t=0;t<i;t++)o+=A(n[t]);return"data:image/jpeg;base64,"+btoa(o)}function m(e){var t=new Image;return t.src=e,t}function g(e){var t=S(e.degree)%180,n=(t>90?180-t:t)*C/180,i=E(n),o=T(n),r=e.width,a=e.height;return{width:r*o+a*i,height:r*i+a*o}}function v(e,t){this.image=e,this.options=c({},v.DEFAULTS,r(t)&&t),this.data=null,this.init()}var b=e.ArrayBuffer,y=/^data\:/,_=/^data\:([^\;]+)\;base64,/,w=/^data\:image\/jpeg.*;base64,/,C=Math.PI,k=Math.min,x=Math.max,E=Math.sin,T=Math.cos,S=Math.abs,P=Math.floor,O=Object.prototype,I=O.toString,M=O.hasOwnProperty,A=String.fromCharCode;v.prototype={constructor:v,init:function(){var e,t,n=this,i=this.image;if(!i||"img"!==i.tagName.toLowerCase()||!i.src)throw new Error("The given image is not a valid image");return b?(t=i.src,y.test(t)?w.test(t)?this.read(f(t)):this.load(i):(e=new XMLHttpRequest,e.onerror=e.onabort=function(){n.load(i)},e.onload=function(){n.read(this.response)},e.open("get",t),e.responseType="arraybuffer",e.send(),void 0)):this.load(i)},read:function(e){var t=this.readOrientation(e);t>1?(this.translate(t),this.load(m(h(e)))):this.load(this.image)},readOrientation:function(e){var t,n,i,o,r,a,s,l,u,c,d=new DataView(e),f=d.byteLength;if(255===d.getUint8(0)&&216===d.getUint8(1))for(u=2;u<f;){if(255===d.getUint8(u)&&225===d.getUint8(u+1)){s=u;break}u++}if(s&&(n=s+4,i=s+10,"Exif"===p(d,n,4)&&(a=d.getUint16(i),((r=18761===a)||19789===a)&&42===d.getUint16(i+2,r)&&(o=d.getUint32(i+4,r))>=8&&(l=i+o))),l)for(f=d.getUint16(l,r),c=0;c<f;c++)if(u=l+12*c+2,274===d.getUint16(u,r)){t=d.getUint16(u+8,r),d.setUint16(u+8,1,r);break}return t},translate:function(e){var t=0,n=1,i=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}this.data={rotate:t,scaleX:n,scaleY:i}},load:function(e){var t=d(function(){e.removeEventListener("load",t,!1),this.resize(e)},this);e.complete?this.resize(e):e.addEventListener("load",t,!1)},draw:function(e){var t,n,o,r=document.createElement("canvas"),a=r.getContext("2d"),s=this.data,l=0,u=0,c=e.naturalWidth,d=e.naturalHeight,p=s&&s.rotate,f=s&&s.scaleX,h=s&&s.scaleY,m=i(f)&&i(h)&&(1!==f||1!==h),v=i(p)&&0!==p,b=v||m,y=c,_=d;return m&&(t=c/2,n=d/2),v&&(o=g({width:c,height:d,degree:p}),y=o.width,_=o.height,t=o.width/2,n=o.height/2),r.width=y,r.height=_,b&&(l=-c/2,u=-d/2,a.save(),a.translate(t,n)),v&&a.rotate(p*C/180),m&&a.scale(f,h),a.drawImage(e,P(l),P(u),P(c),P(d)),b&&a.restore(),r},resize:function(e){var t=this.options,n=this.draw(e),o=n.width,r=n.height,a=o/r,s=document.createElement("canvas"),l=x(0,t.minWidth)||0,u=x(0,t.minHeight)||0,c=x(l,t.maxWidth)||1/0,d=x(u,t.maxHeight)||1/0,p=S(t.width)||o,f=S(t.height)||r;l>0&&isFinite(l)?u=l/a:u>0&&isFinite(u)&&(l=u*a),c>0&&isFinite(c)?d=c/a:d>0&&isFinite(d)&&(c=d*a),p=k(x(p,l),c),f=k(x(f,u),d),i(p)&&i(f)?f*a>p?f=p/a:p=f*a:(p=o,f=r),s.width=p,s.height=f,s.getContext("2d").drawImage(n,0,0,P(o),P(r),0,0,P(p),P(f)),this.done(s)},done:function(e){var t=this.options,n=e;"image"===t.type&&(n=m(e.toDataURL())),a(t.done)&&t.done.call(this,n)}},v.DEFAULTS={type:"image",width:NaN,height:NaN,minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,done:null};var N=e.Loader;return v.noConflict=function(){return e.Loader=N,v},"function"==typeof define&&define.amd&&define("loader",[],function(){return v}),void 0===t&&(e.Loader=v),v}),define("lib/loader/dist/loader",function(){}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/FileUploader/FileUploader",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/FileUploader/FileUploader",["module","exports","jquery","react","dojo/Deferred","../../../utils/Helper","lib-build/i18n!resources/tpl/builder/nls/app","dojo/topic","../../../constants","./NewerImageUploadHelper","./AudioUploadHelper","../../../connectors/ArcGIS","lib/resample-hermite/hermite","lib/loader/dist/loader","lib-build/less!./FileUploader"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=p(n),b=p(i),y=p(o),_=p(r),w=p(a),C=p(s),k=p(l),x=p(u),E=p(c),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=w.default.builder.mediaPicker.browsePanel.sidePanel.agol,P=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dragging:!1,fileError:!1,singleFile:!0,contentTypes:[],uploadExtensions:[]},n.checkForCapabilities(),n.fileChange=n.fileChange.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n.onDrop=n.onDrop.bind(n),n}return g(t,e),T(t,[{key:"checkForCapabilities",value:function(){this.hasDnD=!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)&&"draggable"in document.createElement("span")&&void 0!==window.FileReader,this.useCapture=navigator.userAgent.match(/iPad|iPhone|iPod/g)}},{key:"componentDidMount",value:function(){this.hasDnD&&!window.dndDisabled&&this.addDnDListener()}},{key:"componentWillReceiveProps",value:function(e){var t=[],n=[];for(var i in k.default.contentType)e.authorizedMedia.indexOf(k.default.contentType[i])>=0&&k.default.uploadFileExtensions[i]&&(t.push.apply(t,f(k.default.uploadFileExtensions[i])),n.push(k.default.contentType[i]));this.setState({contentTypes:n,uploadExtensions:t})}},{key:"addDnDListener",value:function(){window.dndDisabled=!0,window.addEventListener("dragover",function(e){e&&!(0,v.default)(e.target).hasClass("drag-area")&&e.preventDefault()}),window.addEventListener("drop",function(e){e&&e.preventDefault()})}},{key:"validateFile",value:function(e){var t=e.name.slice(e.name.lastIndexOf(".")).toLowerCase(),n=this.getSimplifiedType(e.type);return this.state.uploadExtensions.some(function(i){return i===t||i===e.type||i===n})}},{key:"validateDrag",value:function(e){for(var t=0,n=!0;t<e.length&&n;){var i=this.getSimplifiedType(e[t].type);n=this.state.contentTypes.indexOf(i)>=0,t++}return!n}},{key:"getSimplifiedType",value:function(e){return e.substring(0,e.indexOf("/"))}},{key:"fileChange",value:function(e){var t=e.target?e.target.files:e;if(t&&t.length){var n=1===t.length;this.setState({singleFile:n}),n||this.props.fileUploadFunctions.multiStart();var i=this.sequentialPreprocessing(t,n);this.sequentialProcessing(i)}}},{key:"sequentialPreprocessing",value:function(e,t){for(var n=this,i=[],o=[],r=0;r<e.length;r++)this.validateFile(e[r])?(o.push(e[r]),i.push(this.getUploadFileNames(e[r],e.length-r))):this.setErrorTimer();return t||i.forEach(function(e){n.props.fileUploadFunctions.singleProgress(Object.assign({dataUrl:k.default.fileSettings.blankBackground},e))}),{namesArr:i,filesArr:o,singleFile:t,uploadArr:[],processArr:[],i:0}}},{key:"sequentialProcessing",value:function(e){var t=this;if(e.i<e.filesArr.length){var n=e.namesArr[e.i],i=e.filesArr[e.i],o=this.processOneFileSequentially(i,e.singleFile,n);e.processArr.push(o),o.then(function(i){var o=t.uploadOneFileSequentially(i,e.singleFile,n);e.uploadArr.push(o),e.i++,t.sequentialProcessing(e)}).catch(function(o){console.warn("processOneFileSequentially rejected. err: ",o),t.props.fileUploadFunctions.singleFailure(Object.assign({},i,n)),e.i++,t.sequentialProcessing(e)})}else Promise.all(e.processArr).then(function(){t.onAllProcessingComplete(e.uploadArr)},function(){console.warn("Promise.all failure"),t.onAllProcessingComplete(e.uploadArr)})}},{key:"onAllProcessingComplete",value:function(e){var t=this;Promise.all(e).then(function(){t.resetPicker(),t.props.fileUploadFunctions.allComplete()},function(){return t.props.fileUploadFunctions.allComplete})}},{key:"processOneFileSequentially",value:function(e,t,n){var i=this;return new Promise(function(o,r){if(!i.validateFile(e))return i.setErrorTimer(),void r();i.processFile(e,t).then(function(e){Object.assign(e,n),t||i.props.fileUploadFunctions.singleProgress(e),o(e)}).catch(function(t){console.warn("rejecting processFile",t),r({file:Object.assign({},e,n),result:t})})})}},{key:"uploadOneFileSequentially",value:function(e,t,n){var i=this;return new Promise(function(o,r){i.fileUploadToAGOL(e,t).then(function(t){i.props.fileUploadFunctions.singleComplete(Object.assign(e,t)),o()},function(t){console.warn("fileUploadToAGOL catch. err:",t),Object.assign(e,n),r(t)})})}},{key:"processOneFile",value:function(e,t){var n=this;return new Promise(function(i,o){if(n.validateFile(e)){var r=n.getUploadFileNames(e);t||n.props.fileUploadFunctions.singleProgress(Object.assign({dataUrl:k.default.fileSettings.blankBackground},r)),n.processFile(e,t).then(function(a){Object.assign(a,r),t||n.props.fileUploadFunctions.singleProgress(a),n.fileUploadToAGOL(a,t).then(function(e){n.props.fileUploadFunctions.singleComplete(Object.assign(a,e)),i()},function(t){console.warn("fileUploadToAGOL catch. err:",t),Object.assign(e,r),o(t)})}).catch(function(t){console.warn("rejecting processFile",t),Object.assign(e,r),o(t)})}else console.warn("reject file",e.name),n.setErrorTimer(),o()})}},{key:"processFile",value:function(e,t){var n=this.getSimplifiedType(e.type);switch(n){case"image":return x.default.loadImageFromFile(e,t);case"audio":return E.default.loadAudioFromFile(e,t);case"video":return void console.warn("unhandled file type",n);default:return void console.warn("unknown file type",e)}}},{key:"setErrorTimer",value:function(){var e=this;this.setState({fileError:!0}),setTimeout(function(){e.setState({fileError:!1})},3e3)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();var t=void 0;if((t=e.dataTransfer)&&(t=t.items)&&t.length){var n=this.validateDrag(t);return void this.setState({dragging:!0,canCheckFileOnDrag:!0,fileError:n})}this.setState({dragging:!0,canCheckFileOnDrag:!1})}},{key:"onDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({dragging:!1,fileError:!1})}},{key:"onDrop",value:function(e){this.setState({dragging:!1}),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length&&(e.preventDefault(),e.stopPropagation(),this.setState({singleFile:1===e.dataTransfer.files.length}),this.fileChange(e.dataTransfer.files))}},{key:"getUploadFileNames",value:function(e,t){var n=e.name.replace(/[<>"'()*%!?&]/g,""),i=new Date,o=n.lastIndexOf("."),r=o>=0?n.substr(0,o):n,a=o>=0?n.substr(o):e.type.substr(e.type.indexOf("/1")),s=r+"__"+(i.getTime()+(t||0));return{processedFileName:s+a,thumbName:s+"__thumb"+a}}},{key:"fileUploadToAGOL",value:function(e,t){var n=this,i=!1,o=new y.default;return(this.state.singleFile||t)&&(e.dataUrl?this.broadcastChosenFile(Object.assign(e,{uploadDeferred:o})):i=!0),d.ArcGISConnector.uploadSingleResource(e).then(function(t){var r={url:t.picUrl,thumbUrl:t.thumbUrl};o.resolve(r),i&&(Object.assign(e,r),e.dataUrl&&(e.dataUrl=null),n.broadcastChosenFile(e))}).catch(function(e){console.warn("uploadSingleResource catch. result:",e),o.reject(e)}),o}},{key:"broadcastChosenFile",value:function(e){var t={type:e.type};e.width&&Object.assign(t,{width:e.width}),e.height&&Object.assign(t,{height:e.height}),e.uploadDeferred&&Object.assign(t,{uploadDeferred:e.uploadDeferred}),e.dataUrl&&Object.assign(t,{dataUrl:e.dataUrl}),e.url&&Object.assign(t,{url:e.url}),e.thumbUrl&&Object.assign(t,{thumbUrl:e.thumbUrl}),C.default.publish("MEDIA-PICKER-SELECTION",t)}},{key:"resetPicker",value:function(){this.refs.input.value=""}},{key:"getFileTypesText",value:function(){return this.state.contentTypes.indexOf("audio")>=0?S.createContent.dragAndDropImageAudio:S.createContent.dragAndDropImage}},{key:"getFileExtensionsText",value:function(){return this.state.contentTypes.indexOf("audio")>=0?S.createContent.fileExtsImageAudio:S.createContent.fileExtsImage}},{key:"forceClickInput",value:function(e){e.charCode&&13===e.charCode&&this.refs.input.click()}},{key:"renderDnD",value:function(){var e=this,t=_.default.classnames([this.props.className,"drag-area","uploader","alert",{"alert-gray":!this.state.dragging&&!this.state.fileError||this.state.dragging&&!this.state.canCheckFileOnDrag,"alert-danger":this.state.fileError,"alert-success":this.state.dragging&&this.state.canCheckFileOnDrag&&!this.state.fileError}]),n=_.default.classnames(["info-filetype","block-md",{"text-danger":this.state.fileError}]);return b.default.createElement("div",{className:t,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},b.default.createElement("span",{className:"block-md"},b.default.createElement("span",{className:"fa fa-hand-rock-o fa-lg"}),b.default.createElement("span",null,this.getFileTypesText())),b.default.createElement("div",{className:"btn btn-bw inverse btn-file block-md",tabIndex:"3",onKeyPress:function(t){return e.forceClickInput(t)}},b.default.createElement("span",{className:"fa fa-folder-open-o fa-lg"}),b.default.createElement("span",null,S.createContent.uploadButton),b.default.createElement("input",{multiple:"multiple",id:this.props.id,ref:"input",type:"file",accept:this.state.uploadExtensions.toString(),capture:!!this.useCapture&&"camera",tabIndex:"-1",onChange:this.fileChange})),b.default.createElement("div",{className:n},b.default.createElement("span",{className:"fa fa-file-o info"}),b.default.createElement("span",{className:"fa fa-exclamation-triangle danger"}),b.default.createElement("span",null," ",this.getFileExtensionsText()),b.default.createElement("br",null),b.default.createElement("span",null," ",S.createContent.maxSize)),b.default.createElement("div",{className:"info-footer"},b.default.createElement("span",{className:"fa fa-lg fa-info-circle"}),b.default.createElement("span",null,S.createContent.agolInfo)))}},{key:"renderNoDnD",value:function(){return b.default.createElement("button",{type:"button",className:"uploader btn btn-bw inverse btn-file btn-block"},S.createContent.uploadButton,b.default.createElement("input",{id:this.props.id,ref:"input",type:"file",accept:this.state.uploadExtensions.toString(),capture:!!this.useCapture&&"camera",tabIndex:"-1",onChange:this.fileChange}))}},{key:"renderNoAppId",value:function(){return b.default.createElement("div",{className:"drag-area uploader alert alert-gray"},b.default.createElement("span",null,S.createContent.saveBeforeUpload))}},{key:"render",value:function(){var e=_.default.classnames([this.props.className,"photo-input","form-group"]),t=void 0;return t=this.props.appId?this.hasDnD?this.renderDnD():this.renderNoDnD():this.renderNoAppId(),b.default.createElement("div",{className:e},t)}}]),t}(b.default.Component);t.default=P,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelArcGIS",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelArcGIS",["module","exports","react","react-dom","../../utils/Helper","./FileUploader/FileUploader","../../constants","lib-build/i18n!resources/tpl/builder/nls/app","dojo/topic","lib-build/less!./SidePanelArcGIS"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(o),g=u(r),v=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=b.default.builder.mediaPicker.browsePanel.sidePanel.agol,C=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"componentDidMount",value:function(){var e=this;$(h.default.findDOMNode(this)).parents(".modal").on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{className:"input-group search"},f.default.createElement("div",{className:"input-group-addon"},f.default.createElement("span",{className:"fa fa-"+this.props.icon})),f.default.createElement("input",{ref:"textInput",tabIndex:"2",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),f.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"2":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},f.default.createElement("span",{className:"fa fa-remove"})),f.default.createElement("div",{tabIndex:this.props.disabled?null:"2",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},f.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(f.default.Component),k=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"render",value:function(){var e=m.default.classnames(["btn","btn-gray",{"col-xs-3":4===this.props.toggleCount,"col-xs-4":3===this.props.toggleCount,active:this.props.checked,disabled:this.props.isDisabled}]);return f.default.createElement("label",{tabIndex:this.props.isDisabled?null:"1",className:e,htmlFor:this.props.id,onKeyPress:this.props.onClick,onClick:this.props.onClick},f.default.createElement("span",{className:"btn-label"},this.props.label),f.default.createElement("input",{disabled:this.props.isDisabled,onChange:this.props.onClick,checked:this.props.checked,type:"radio",name:"searchLocation",value:this.props.value,id:this.props.id}))}}]),t}(f.default.Component),x=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"thisOnClick",value:function(e,t){t===this.props.searchLocation||$(e.target).closest(".btn.disabled").length||e.charCode&&13!==e.charCode||this.props.onChange({type:t})}},{key:"isSelected",value:function(e){return this.props.searchLocation===v.default.searchLocation[e]}},{key:"isDisabled",value:function(){return this.props.availableContentTypes.indexOf(v.default.contentType.WEBMAP)<0&&this.props.availableContentTypes.indexOf(v.default.contentType.WEBSCENE)<0}},{key:"getOrgToggle",value:function(){var e=this;return this.props.portalIsOrg?f.default.createElement(k,{id:"agol-org",toggleCount:4,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.ORG)},label:m.default.mixinString(w.searchLocation.myOrg,"orgname",this.props.portalName),value:v.default.searchLocation.ORG,checked:this.isSelected("ORG")}):null}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{className:"content-toggle btn-group","data-toggle":"buttons"},f.default.createElement(k,{id:"agol-agol",toggleCount:this.props.portalIsOrg?4:3,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.AGOL)},label:w.searchLocation.agol,value:v.default.searchLocation.AGOL,checked:this.isSelected("AGOL")}),this.getOrgToggle(),f.default.createElement(k,{id:"agol-mine",toggleCount:this.props.portalIsOrg?4:3,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.MINE)},label:w.searchLocation.myContent,value:v.default.searchLocation.MINE,checked:this.isSelected("MINE")}),f.default.createElement(k,{id:"agol-story",toggleCount:this.props.portalIsOrg?4:3,onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.STORY)},label:w.searchLocation.thisStory,value:v.default.searchLocation.STORY,checked:this.isSelected("STORY")}))}}]),t}(f.default.Component),E=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"render",value:function(){var e=m.default.classnames([this.props.startingClasses,"btn"]);return f.default.createElement("button",{className:e,onClick:this.props.onClick},this.props.text)}}]),t}(f.default.Component),T=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"render",value:function(){return f.default.createElement("div",{className:"divider"},f.default.createElement("span",null,w.createContent.or))}}]),t}(f.default.Component),S=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"render",value:function(){return this.props.mapEditorAvailable?f.default.createElement(T,null):null}}]),t}(f.default.Component),P=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"launchMapEditor",value:function(){y.default.publish("MEDIA-PICKER-SWAP-MAP-EDITOR")}},{key:"render",value:function(){return this.props.mapEditorAvailable?f.default.createElement(E,{startingClasses:"btn-bw inverse create-map-button",text:w.createContent.createNewMap,onClick:this.launchMapEditor}):null}}]),t}(f.default.Component),O=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,[{key:"render",value:function(){var e=!app.isSelfHosted&&-1!==this.props.containerState.availableContentTypes.indexOf(v.default.contentType.WEBMAP);return f.default.createElement("div",{className:"mp-sidepanel agol"},f.default.createElement(x,{availableContentTypes:this.props.containerState.availableContentTypes,portalIsOrg:this.props.containerState.portalIsOrg,portalName:this.props.containerState.portalName,searchLocation:this.props.providerProps.searchLocation,onChange:this.props.onKeyPress.searchLocSubmit}),f.default.createElement(C,{setFocus:this.props.containerState.focusInput,icon:"globe",placeholder:w.filterAndSort.search,value:this.props.containerState.textInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.textInput,onKeyPress:this.props.onKeyPress.textKeypress,onClear:this.props.onKeyPress.textClear}),f.default.createElement(T,null),f.default.createElement(P,{mapEditorAvailable:e}),f.default.createElement(S,{mapEditorAvailable:e}),f.default.createElement(g.default,{authorizedMedia:this.props.containerState.authorizedMedia,availableContentTypes:this.props.containerState.availableContentTypes,appId:this.props.containerState.appId,fileUploadFunctions:this.props.onKeyPress.fileUploadFunctions}))}}]),t}(f.default.Component);t.default=O,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/ArcGISContainer",["module","exports","react","react-dom","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelArcGIS","../../connectors/ArcGIS","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,o,r,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=d(n),v=d(i),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),y=d(a),_=d(s),w=d(l),C=d(c),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=C.default.builder.mediaPicker.browsePanel.providers.agol,T=function(e){function t(){f(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={textInputValue:"",dateSortOrder:y.default.sortOrder.DESC,titleSortOrder:y.default.sortOrder.ASC,appId:null,portalIsOrg:!1,portalName:"",focusInput:!1,storyResourceCount:0,availableContentTypes:[],authorizedMedia:[],selectedContentTypes:[]},e.storyCache={},e.onChange={textInput:e.textInput.bind(e)},e.onKeyPress={searchLocSubmit:e.searchLocSubmit.bind(e),textKeypress:e.textKeypress.bind(e),textClear:e.textClear.bind(e),selectedContentTypesChange:e.selectedContentTypesChange.bind(e),sortFieldChange:e.sortFieldChange.bind(e),sortOrderChange:e.sortOrderChange.bind(e),fileUploadFunctions:{multiStart:e.multiFileUploadStart.bind(e),singleProgress:e.singleFileUploadProgress.bind(e),singleComplete:e.singleFileUploadComplete.bind(e),singleFailure:e.singleFileUploadError.bind(e),allComplete:e.allFileUploadsComplete.bind(e)},onItemDelete:e.onItemDelete.bind(e)},e}return m(t,e),x(t,[{key:"componentDidMount",value:function(){var e=this;u.ArcGISConnector.checkSignin().then(function(){var t=u.ArcGISConnector.getPortal();e.setState({portalIsOrg:t.isOrganization,portalName:t.name}),e.itemFetch(),u.ArcGISConnector.getAppIdPromise().then(function(t){e.setState({appId:t}),e.thisStoryFetch({searchLocation:y.default.searchLocation.STORY})}).catch(function(e){console.warn(e)})}).catch(function(e){console.warn(e.message)})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.constructLocationSpecificContentTypes(e.authorizedMedia,e.provider.searchLocation),i={availableContentTypes:n,authorizedMedia:e.authorizedMedia,focusInput:e.display&&!this.props.display||e.openFocus};if(this.compareArrays(e.authorizedMedia,this.props.authorizedMedia)){if(!this.compareArrays(n,this.state.availableContentTypes)){var o=n.filter(function(e){return t.state.availableContentTypes.indexOf(e)<0});o.length&&(i.selectedContentTypes=this.state.selectedContentTypes.concat(o))}}else{var r={};this.isGisContentDisabled(e)&&(n=this.constructLocationSpecificContentTypes(e.authorizedMedia,y.default.searchLocation.STORY),this.props.updateSearchLocation({type:y.default.searchLocation.STORY}),Object.assign(r,{searchLocation:y.default.searchLocation.STORY})),Object.assign(r,{contentTypes:n}),i.selectedContentTypes=n,this.fetchIfNotStory(r)}if(this.setState(i),e.appId&&!this.state.appId)this.setState({appId:e.appId});else{if(!e.thisStory)return;if(e.thisStory===this.props.thisStory){if(e.provider.searchLocation===y.default.searchLocation.STORY){var a=this.filterAndSortThisStory({contentType:i.selectedContentTypes||this.state.selectedContentTypes});this.compareArrays(a,e.provider.images)||this.handleImageReturn(a)}return}}this.buildThisStoryCache(e.thisStory,e.appId)}},{key:"compareArrays",value:function(e,t){if(e.length!==t.length)return!1;var n=e.slice(0).sort(),i=t.slice(0).sort();return n.every(function(e,t){return i[t]===e})}},{key:"constructLocationSpecificContentTypes",value:function(e,t){var n=[],i=t===y.default.searchLocation.STORY;return e.indexOf(y.default.contentType.WEBMAP)>=0&&n.push(y.default.contentType.WEBMAP),e.indexOf(y.default.contentType.WEBSCENE)>=0&&n.push(y.default.contentType.WEBSCENE),e.indexOf(y.default.contentType.IMAGE)>=0&&i&&y.default.uploadFileExtensions.IMAGE&&n.unshift(y.default.contentType.IMAGE),e.indexOf(y.default.contentType.AUDIO)>=0&&i&&y.default.uploadFileExtensions.AUDIO&&n.unshift(y.default.contentType.AUDIO),e.indexOf(y.default.contentType.VIDEO)>=0&&i&&y.default.uploadFileExtensions.VIDEO&&n.unshift(y.default.contentType.VIDEO),n}},{key:"textInput",value:function(e){this.setState({textInputValue:e.target.value})}},{key:"textKeypress",value:function(e){13===e.charCode&&this.textSubmit()}},{key:"textClear",value:function(e){var t=this;13===e.charCode&&(this.textInput({target:{value:""}}),this.setState({focusInput:!0}),setTimeout(function(){t.textKeypress({charCode:13})},10))}},{key:"textSubmit",value:function(){var e=this.state.textInputValue.trim();this.props.updateSearchTerm({term:e}),this.fetchIfNotStory({searchStr:e})}},{key:"buildSearchOptionsFromReduxState",value:function(){return{searchLocation:this.props.provider.searchLocation,contentTypes:this.state.selectedContentTypes,sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,searchStr:this.props.provider.searchStr}}},{key:"clearThisStoryUsed",value:function(){for(var e in this.storyCache)this.storyCache[e].usedInStory=!1}},{key:"removeUnused",value:function(){for(var e in this.storyCache){var t=this.storyCache[e];!1!==t.usedInStory||t.fromResources||delete this.storyCache[e]}}},{key:"buildThisStoryCache",value:function(e,t){var n=this;this.clearThisStoryUsed();var i=[];if(e.forEach(function(e){var o=n.storyCache[e.id]||n.storyCache[e.file];if(o)return void(o.usedInStory=!0);e.id&&e.id!==t&&"APPID"!==e.id?i.push(e.id):n.storeImageResourceInfo(e)}),this.removeUnused(),this.setState({storyResourceCount:Object.keys(this.storyCache).length}),!i.length)return void(this.props.provider.searchLocation===y.default.searchLocation.STORY&&this.handleImageReturn(this.filterAndSortThisStory()));u.ArcGISConnector.getItems({idArr:i}).then(function(e){n.processThisStoryResults(e)})}},{key:"handleImageReturn",value:function(e){e&&e.length&&this.moreFormattingForItems(e),this.props.updateImageFetchStatus({fetchStatus:y.default.fetchStatus.SUCCESS}),this.props.updateImages({images:e})}},{key:"moreFormattingForItems",value:function(e){var t=this
;e.forEach(function(e){e.hoverText=t.getItemHoverText(e),e.hasOwnProperty("usedInStory")&&(e.getItemDeleteText=t.getItemDeleteText)})}},{key:"getItemHoverText",value:function(e){var t=e.modified,n=t&&t.toLocaleDateString?t.toLocaleDateString():t||"";n&&(n=e.agolType?E.modified.replace("${date}",n):E.uploaded.replace("${date}",n));var i='<span class="item-popover-title">'+(e.name||e.title)+"</span><br>",o=e.owner?E.contentByAuthor.replace("${contentType}",e.displayName).replace("${author}",e.owner):e.displayName,r=e.displayName,a=e.snippet?"<br><br>"+e.snippet:"";return{typeAndOwner:i+o+"<br>"+n+a,typeOnly:i+r+"<br>"+n+a}}},{key:"getItemDeleteText",value:function(e){return e.error?E.removeFailed:E.remove1+" "+E.remove2}},{key:"processThisStoryResults",value:function(e){var t=this;e&&(e.forEach(function(e){t.storyCache[e.id]=Object.assign(e,{usedInStory:!0})}),this.setState({storyResourceCount:Object.keys(this.storyCache).length}))}},{key:"storeImageResourceInfo",value:function(e){console.warn("resource fell through",e)}},{key:"beforeItemFetch",value:function(){this.props.updateImageFetchStatus({fetchStatus:y.default.fetchStatus.FETCHING}),this.props.updateImages({images:[]})}},{key:"fetchIfNotStory",value:function(e){var t=Object.assign({},this.buildSearchOptionsFromReduxState(),e);t.searchLocation!==y.default.searchLocation.STORY||this.isItemId(t.searchStr)?this.itemFetch(e):(this.beforeItemFetch(),this.handleImageReturn(this.filterAndSortThisStory(e)))}},{key:"isGisContentDisabled",value:function(e){return e=e||this.props,e.authorizedMedia.indexOf(y.default.contentType.WEBMAP)<0&&e.authorizedMedia.indexOf(y.default.contentType.WEBSCENE)<0}},{key:"itemFetch",value:function(e){var t=this;this.beforeItemFetch();var n=Object.assign({},this.buildSearchOptionsFromReduxState(),e);n.searchStr&&this.isItemId(n.searchStr)&&!this.isGisContentDisabled()&&(Object.assign(n,{idArr:[n.searchStr],searchLocation:y.default.searchLocation.AGOL}),this.props.updateSearchLocation({type:y.default.searchLocation.AGOL})),n.searchLocation!==y.default.searchLocation.STORY||n.idArr?u.ArcGISConnector.getItems(n).then(function(e){return t.handleImageReturn(e)}).catch(function(e){console.warn("itemFetch failed",e),t.handleImageReturn()}):this.thisStoryFetch(n)}},{key:"itemDelete",value:function(e){var t=this;u.ArcGISConnector.removeResources(e).then(function(){t.storyCache[e.fileName]&&(delete t.storyCache[e.fileName],t.handleImageReturn(t.filterAndSortThisStory())),$(v.default.findDOMNode(t)).find(".popover").popover("hide")}).catch(function(n){console.warn("deletion failed from container",n),t.storyCache[e.fileName]&&(delete t.storyCache[e.fileName],t.handleImageReturn(t.filterAndSortThisStory())),$(v.default.findDOMNode(t)).find(".popover").popover("hide")})}},{key:"thisStoryFetch",value:function(e){var t=this;return new Promise(function(n,i){u.ArcGISConnector.getItems(e).then(function(e){t.handleThisStoryResults(e),n()}).catch(function(e){i(e),console.warn("itemFetch failed",e),t.props.provider.searchLocation===y.default.searchLocation.STORY&&t.handleImageReturn()})})}},{key:"handleThisStoryResults",value:function(e){var t=this;if(!e)return void this.handleImageReturn(this.filterAndSortThisStory());e.forEach(function(e){var n=t.storyCache[e.fileName];!n||n.isTemp&&e.isTemp||e.error?t.storyCache[e.fileName]=Object.assign(e,{usedInStory:!1}):n.isTemp?t.storyCache[e.fileName]=Object.assign(e,{isTemp:!1,usedInStory:!1}):n.thumbFile!==e.thumbFile&&e.thumbUrl?(t.storyCache[e.fileName].thumbFile=e.thumbFile,t.storyCache[e.fileName].thumbUrl=e.thumbUrl,n.dataUrl=null):n.dataUrl&&n.thumbFile===e.thumbFile&&n.thumbUrl&&(n.dataUrl=null)}),this.props.provider.searchLocation===y.default.searchLocation.STORY&&this.handleImageReturn(this.filterAndSortThisStory())}},{key:"filterAndSortThisStory",value:function(e){var t=[],n=Object.assign({},{sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,searchStr:this.props.provider.searchStr,contentTypes:this.state.selectedContentTypes},e);for(var i in this.storyCache){var o=this.storyCache[i];n.contentTypes.indexOf(o.type)>=0&&(n.searchStr&&!this.clientSideSearch(o,n.searchStr)||t.push(o))}return this.sortThisStory(t,n)}},{key:"clientSideSearch",value:function(e,t){return t=t.toLowerCase(),e.name&&e.name.toLowerCase().indexOf(t)>=0||e.title&&e.title.toLowerCase().indexOf(t)>=0||e.snippet&&e.snippet.toLowerCase().indexOf(t)>=0}},{key:"sortThisStory",value:function(e,t){var n=t.sortField,i=t.sortOrder;return e.sort(function(e,t){var o=i===y.default.sortOrder.DESC?e[n]:t[n];o.toLowerCase&&(o=o.toLowerCase());var r=i===y.default.sortOrder.DESC?t[n]:e[n];return r.toLowerCase&&(r=r.toLowerCase()),o<r?1:r<o?-1:0})}},{key:"searchLocSubmit",value:function(e){this.props.updateSearchLocation(e),e.type!==y.default.searchLocation.AGOL&&this.isItemId(this.props.provider.searchStr)?(this.textClear({charCode:13}),this.itemFetch({searchLocation:e.type,searchStr:""})):this.itemFetch({searchLocation:e.type})}},{key:"selectedContentTypesChange",value:function(e){this.setState({selectedContentTypes:e}),e.length?this.fetchIfNotStory({contentTypes:e}):this.handleImageReturn([])}},{key:"sortFieldChange",value:function(e,t){this.props.updateSortField({field:e}),this.props.updateSortOrder({order:t}),this.fetchIfNotStory({sortField:e,sortOrder:t})}},{key:"sortOrderChange",value:function(e,t){this.props.updateSortOrder({order:e});var n=t===y.default.sortField.DATE?"dateSortOrder":"titleSortOrder";this.setState(p({},n,e)),this.fetchIfNotStory({sortOrder:e})}},{key:"multiFileUploadStart",value:function(){this.beforeItemFetch();var e=y.default.searchLocation.STORY;$(".popover").popover("hide"),this.textClear({charCode:13});var t=this.constructLocationSpecificContentTypes(this.props.authorizedMedia,e);this.setState({selectedContentTypes:t}),this.props.updateSortField({field:y.default.sortField.DATE}),this.props.updateSortOrder({order:y.default.sortOrder.DESC}),this.props.provider.searchLocation!==e?(this.props.updateSearchLocation({type:e}),this.thisStoryFetch({searchLocation:e,sortField:y.default.sortField.DATE,sortOrder:y.default.sortOrder.DESC})):this.handleImageReturn(this.filterAndSortThisStory({sortField:y.default.sortField.DATE,sortOrder:y.default.sortOrder.DESC}))}},{key:"singleFileUploadProgress",value:function(e){e&&this.updateResourcesClientSide(e,{isTemp:!0})}},{key:"singleFileUploadError",value:function(e){console.warn("singleFileUploadError",e),e&&($(v.default.findDOMNode(this)).parents(".modal").hasClass("in")&&this.multiFileUploadStart(),this.updateResourcesClientSide(e,{error:!0}))}},{key:"updateResourcesClientSide",value:function(e,t){var n=u.ArcGISConnector.formatResources([Object.assign(e,{resource:e.processedFileName})]);if(!n||!n.length)return void console.warn("bad file format",e);var i=Object.assign(n[0],t,{dataUrl:e.dataUrl});this.updateSingleResourceClientSide(i)}},{key:"updateSingleResourceClientSide",value:function(e){var t=e.fileName,n={usedInStory:!1};e.isTemp||Object.assign(n,{isTemp:!1}),this.storyCache[t]=Object.assign(e,n),this.props.provider.searchLocation===y.default.searchLocation.STORY&&this.handleImageReturn(this.filterAndSortThisStory())}},{key:"singleFileUploadComplete",value:function(e){e&&this.updateResourcesClientSide(e,{isTemp:!1})}},{key:"allFileUploadsComplete",value:function(){this.thisStoryFetch({searchLocation:y.default.searchLocation.STORY})}},{key:"onItemDelete",value:function(e,t){e.stopPropagation(),e.preventDefault(),this.itemDelete(t)}},{key:"isItemId",value:function(e){return e.match(/^[A-Fa-f0-9]{32}$/)}},{key:"render",value:function(){return g.default.createElement(_.default,k({ref:"Common",sidePanel:w.default,connector:u.ArcGISConnector,onChange:this.onChange,onKeyPress:this.onKeyPress,containerState:this.state},this.props))}}]),t}(g.default.Component),S=function(e){return{provider:e.browsePanel.agol}},P=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:y.default.providers.ARCGIS});e(t(i))};return{updateImages:function(e){t(b.updateImages,e)},updateImageFetchStatus:function(e){t(b.updateImageFetchStatus,e)},updateSearchLocation:function(e){t(b.updateSearchLocation,e)},updateSearchTerm:function(e){t(b.updateSearchTerm,e)},updateSortField:function(e){t(b.updateSortField,e)},updateSortOrder:function(e){t(b.updateSortOrder,e)}}};t.default=(0,o.connect)(S,P)(T),e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelUnsplash",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/sidePanel/SidePanelUnsplash",["module","exports","react","react-dom","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./SidePanelUnsplash"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=d.default.builder.mediaPicker.browsePanel.sidePanel.unsplash,h=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this;$(c.default.findDOMNode(this)).parents(".modal").on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),u.default.createElement("div",{className:t},u.default.createElement("div",{className:"input-group-addon"},u.default.createElement("span",{className:"fa fa-"+this.props.icon})),u.default.createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),u.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},u.default.createElement("span",{className:"fa fa-remove"})),u.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},u.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(u.default.Component),m=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"processAboutSpan",value:function(e,t,n){return"Unsplash"===e?u.default.createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.unsplashHome,target:"_blank"},u.default.createElement("strong",null,t)):this.getDefaultSpan(t,n)}},{key:"processCopyrightSpan",value:function(e,t,n){return"moreInfoLink"===e?u.default.createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.unsplashLicense,target:"_blank"},u.default.createElement("strong",null,t)):this.getDefaultSpan(t,n)}},{key:"getDefaultSpan",value:function(e,t){return u.default.createElement("span",{key:t},e)}},{key:"getAboutSpans",value:function(e,t){var n=this;return e.split(/\$\{(.+?)\}/).map(function(e,i){var o="unsplash-"+t+"-"+i,r=e;return f[e]&&(r=f[e]),"about"===t?n.processAboutSpan(e,r,o):n.processCopyrightSpan(e,r,o)})}},{key:"render",value:function(){return u.default.createElement("div",{className:"mp-sidepanel unsplash"},u.default.createElement(h,{icon:"picture-o",placeholder:f.placeholder,value:this.props.containerState.searchValue,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,onClear:this.props.onClear,setFocus:this.props.containerState.focusInput}),u.default.createElement("div",{className:"help-text"},u.default.createElement("p",null,this.getAboutSpans(f.aboutText,"about")),u.default.createElement("p",null,this.getAboutSpans(f.copyrightText,"copyright")),u.default.createElement("p",{className:"small-text"},u.default.createElement("span",null,d.default.builder.mediaPicker.browsePanel.sidePanel.thirdPartyTerms),u.default.createElement("a",{className:"link",target:"_blank",rel:"noopener noreferrer",href:app.cfg.BUILDER_LINKS.TERMS.unsplash},"Unsplash"))))}}]),t}(u.default.Component);t.default=m,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/connectors/Unsplash",["exports","jquery","lib-build/i18n!resources/tpl/builder/nls/app","esri/urlUtils"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.UnsplashConnector=void 0;var r=o(t),a=o(n),s=o(i),l=a.default.builder.mediaPicker.browsePanel.providers.unsplash,u=function(){var e={ixlib:"rb-0.3.5",q:"80",fm:"jpg",crop:"entropy",fit:"max"},t=function(e){return new Promise(function(t,i){d(e).done(function(o,r){if(!r||"success"!==r||!o||!o.results)return void i();o.results.length<o.total||o.total_pages>1?d(Object.assign(e,{page:2})).done(function(e,r){if(!r||"success"!==r||!e)return void i();n(o.results.concat(e.results),t)}):n(o.results,t)})})},n=function(e,t){var n=[],i={};r.default.each(e,function(e,t){i[t.id]||(i[t.id]=a(t),n.push(i[t.id]))}),t(n)},i=function(e,t){return e.replace(/\${username}/i,t).replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)})},o=function(e,t){var n='<a href="'+t.links.html+'?utm_source=Story%20Maps%20Cascade&utm_medium=referral" target="_blank">'+t.user.name+"</a>";return e.replace(/\${username}/i,n).replace(/\$\{(.*?)}/g,'<a href="https://unsplash.com?utm_source=Story%20Maps%20Cascade&utm_medium=referral" target="_blank">Unsplash</a>')},a=function(e){return Object.assign({name:i(l.photoBy,e.user.name),externalLink:{link:e.user.links.html+"?utm_source=Story%20Maps%20Cascade&utm_medium=referral",background:e.user.profile_image.small,hoverText:i(l.userLink,e.user.name)},picUrl:e.urls.regular,getPicUrl:u.bind(e),height:e.height,width:e.width,isVideo:!1,id:e.id,modified:new Date(e.created_at),type:"unsplash",thumbUrl:e.urls.thumb,onSelected:p.bind(e),caption:o(l.captionStarter,e)})},u=function(e){var t=this;return new Promise(function(n){var i={url:e.picUrl,width:e.width,height:e.height,caption:e.caption},o=t.urls.raw;if(!o)return i;var r=t.height/t.width,a=[c(o,800,r),c(o,1024,r),c(o,1600,r),c(o,2048,r)];n(Object.assign({},i,{sizes:a}))})},c=function(t,n,i){var o=s.default.urlToObject(t),a=void 0,l=void 0,u=Object.assign({},e,o.query||{});return i<1?(a=n,l=Math.round(i*a),Object.assign(u,{w:a})):(l=n,a=Math.round(l/i),Object.assign(u,{h:l})),{url:o.path+"?"+r.default.param(u),height:l,width:a}},d=function(e){var t="https://api.unsplash.com/search/photos?client_id="+app.cfg.MEDIA_KEYS.UNSPLASH_API+"&per_page=30"+(e?"&"+r.default.param(e):"");return r.default.getJSON(t)},p=function(){if(this&&this.links&&this.links.download_location){var e=this.links.download_location.match(/\?/)?"&":"?",t=this.links.download_location+e+"client_id="+app.cfg.MEDIA_KEYS.UNSPLASH_API;r.default.getJSON(t).done(function(){})}else console.warn("failed to hit required Unsplash download endpoint. ð¨",this)};return{photoSearch:t}}();e.UnsplashConnector=u}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/UnsplashContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelUnsplash","../../connectors/Unsplash"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),m=u(r),g=u(a),v=u(s),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={searchValue:"",focusInput:!1,provider:m.default.providers.UNSPLASH},e.onKeyPress=e.onKeyPress.bind(e),e.onChange=e.onChange.bind(e),e}return p(t,e),y(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({focusInput:e.display&&!this.props.display||e.openFocus})}},{key:"onChange",value:function(e){this.setState({searchValue:e.target.value})}},{key:"onClear",value:function(e){var t=this;13===e.charCode&&(this.setState({searchValue:!0,focusInput:!0}),this.onChange({target:{value:""}}),setTimeout(function(){t.onKeyPress({charCode:13})},10))}},{key:"onKeyPress",value:function(e){13===e.charCode&&this.submitPhotoSearch()}},{key:"submitPhotoSearch",value:function(){var e=this.state.searchValue.trim();if(this.props.updatePhotoSearchTerm({term:e}),!e)return this.props.updateImages({images:[]}),void this.props.updateImageFetchStatus({fetchStatus:m.default.fetchStatus.NOT_FETCHED});this.imageFetch(e)}},{key:"imageFetch",value:function(e){var t=this;this.refs.Common.beforeImageFetch(),l.UnsplashConnector.photoSearch({query:e}).then(function(e){return t.refs.Common.handleImageReturn(e)})}},{key:"render",value:function(){return f.default.createElement(g.default,b({ref:"Common",sidePanel:v.default,connector:l.UnsplashConnector,onChange:this.onChange,onKeyPress:this.onKeyPress,onClear:this.onClear.bind(this),containerState:this.state},this.props))}}]),t}(f.default.Component),w=function(e){return{provider:e.browsePanel.unsplash}},C=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:m.default.providers.UNSPLASH});e(t(i))};return{updateDisplayedContent:function(e){t(h.updateDisplayedContent,e)},updatePhotoSearchTerm:function(e){t(h.updatePhotoSearchTerm,e)},updateImages:function(e){t(h.updateImages,e)},updateImageFetchStatus:function(e){t(h.updateImageFetchStatus,e)}}};t.default=(0,i.connect)(w,C)(_),e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/connectors/UrlContent",["exports","../constants","storymaps/tpl/utils/CommonHelper"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.URLConnector=void 0;var o=i(t),r=i(n),a=function(){var e=function(e){return new Promise(function(t,n){var r=u(e);if(!r)return void t(o.default.fetchStatus.NON_MATCHING_URL);i(r).then(function(i){if(!i)return void n({reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO"});var s=a(e);t(Object.assign({id:r,source:"vimeo",title:i.title,user:i.user_name,thumbUrl:i.thumbnail_small,url:d(r,s)},s))}).catch(function(e){n({reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO",error:e})})})},t=function(e){return new Promise(function(t,n){var i="https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id="+e+"&key="+app.cfg.MEDIA_KEYS.YOUTUBE_API;$.ajax({dataType:"json",url:i,timeout:4e3}).then(function(e){e&&e.items&&e.items.length?t(e.items[0]):n()},function(e){n(e)})})},n=function(e){var t=r.default.getUrlParams(e),n={};if(t.start&&(t.start.match(/[h|m|s]/)&&!t.t?t.t=t.start:n.start=parseInt(t.start)),t.end&&(n.end=parseInt(t.end)),t.t){var i=0,o=t.t.match(/\d+h/);o&&(i+=60*parseInt(o[0])*60);var a=t.t.match(/\d+m/);a&&(i+=60*parseInt(a[0]));var s=t.t.match(/\d+s/);s&&(i+=parseInt(s[0])),o||a||s||(i=parseInt(t.t)),i&&(n.start=i)}return n},i=function(e){return new Promise(function(t,n){var i="//vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+e;$.ajax({type:"GET",url:i,jsonp:"callback",dataType:"jsonp",timeout:4e3}).then(function(e){e&&"video"===e.type?t(e):n()},function(e){n(e)})})},a=function(e){var t=r.default.getUrlHash(e),n={},i=t.match(/t=\d+s/);if(i){var o=parseInt(i[0].slice(2,-1));n.start=o}return n},s=function(e){var t=/(youtube\.com\/(watch\?v\=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{3,20})/.exec(e);return t?t.pop():null},l=function(e){return e.match(/^[a-zA-Z0-9_-]{11}$/)},u=function(e){var t=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?|#)/.exec(e);return t?t.pop():null},c=function(e,t){var n="//www.youtube.com/embed/"+e;if(t&&Object.keys(t).length){var i=[];for(var o in t)i.push(o+"="+t[o]);i.length&&(n+="?"+i.join("&"))}return n},d=function(e,t){var n="//player.vimeo.com/video/"+e;return t&&t.start&&(n+="#t="+t.start+"s"),n};return{checkYoutubeUrl:function(e){return new Promise(function(i,r){var a=s(e);return a?l(a)?void t(a).then(function(t){if(!t)return void r({reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO"});var s=n(e);i(Object.assign({id:a,source:"youtube",title:t.snippet.title,user:t.snippet.channelTitle,thumbUrl:t.snippet.thumbnails.default.url,url:c(a,s)},s))}).catch(function(e){r(e&&403==e.status?{reason:o.default.fetchStatus.NOT_AUTHORIZED,type:"VIDEO",error:e}:{reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO",error:e})}):void r({reason:o.default.fetchStatus.BAD_FORMAT,type:"VIDEO"}):void i(o.default.fetchStatus.NON_MATCHING_URL)})},checkVimeoUrl:e,checkForIframe:function(e){return e.match(/^<iframe[^>][\s\S]*<\/iframe>$/)&&e.match(/<iframe/g).length<=2},getIframeSrc:function(e){var t=$(e).attr("src");return t||null},getIframeHeight:function(e){var t=$(e).attr("height");return t&&t.indexOf("%")<0?parseInt(t,10):null},checkForImage:function(e){return new Promise(function(t,n){if(e.match(/\.(jpe?g|png|gif)$/i)){e=e.replace(/^https?:\/\//,"//");var i=new Image;i.onload=function(){this.onload=null,t({url:e})},i.onerror=function(e){this.onload=null,this.onerror=null,n({reason:o.default.fetchStatus.NOT_FOUND,type:"IMAGE",error:e})},i.src=e}else t(o.default.fetchStatus.NON_MATCHING_URL)})},checkForAudio:function(e){return new Promise(function(t,n){if(e.match(/\.(mp3|m4a|wav)$/i)){var i=new Audio([e]);i.onloadedmetadata=function(){this.onloadedmetadata=null,this.onerror=null,t({url:e})},i.onerror=function(e){this.onloadedmetadata=null,this.onerror=null,n({reason:o.default.fetchStatus.NOT_FOUND,type:"AUDIO",error:e})},i.ondurationchange=function(){i.duration&&!isFinite(i.duration)&&n({reason:o.default.fetchStatus.NOT_FOUND,type:"AUDIO",error:"duration not finite"})}}else t(o.default.fetchStatus.NON_MATCHING_URL)})}}}();e.URLConnector=a}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/UrlContainer",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/UrlContainer",["module","exports","react","react-dom","react-redux","../actions","dojo/topic","../../connectors/UrlContent","../../utils/Helper","../../constants","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./UrlContainer"],function(e,t,n,i,o,r,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),g=d(i),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),b=d(a),y=d(l),_=d(u),w=d(c),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=w.default.builder.mediaPicker.browsePanel.providers.urlContent,x=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),C(t,[{key:"getAlertSpans",value:function(){if(Array.isArray(this.props.text)){return this.props.text.map(function(e,t){return m.default.createElement("span",{key:"errortext-"+t,className:"block-span"},e)})}return m.default.createElement("span",null,this.props.text)}},{key:"render",value:function(){return m.default.createElement("div",{className:"alert alert-danger",role:"alert"},this.getAlertSpans())}}]),t}(m.default.Component),E=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),C(t,[{key:"componentDidMount",value:function(){var e=this;$(g.default.findDOMNode(this)).parents(".modal").on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textareaInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textareaInput&&t<=0&&$(this.refs.textareaInput).focus()}}},{key:"render",value:function(){var e=this;return m.default.createElement("div",{className:"input-group search"},m.default.createElement("div",{className:"input-group-addon"},m.default.createElement("span",{className:"fa fa-link"})),m.default.createElement("textarea",{tabIndex:"1",ref:"textareaInput",type:"textarea",value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),m.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},m.default.createElement("span",{className:"fa fa-remove"})),m.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},m.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"check")})))}}]),t}(m.default.Component),T=function(e){function t(){p(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={textInputValue:"",contentTypeDescriptor:"generic",focusInput:!1,hasError:!1,errorText:""},e}return h(t,e),C(t,[{key:"compareArrays",value:function(e,t){return e.length===t.length&&(e.sort(),t.sort(),e.every(function(e,n){return t[n]===e}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.display&&!this.props.display||e.openFocus,n={focusInput:t,contentTypeDescriptor:this.computeContentTypes(e.authorizedMedia)},i=!this.compareArrays(e.authorizedMedia,this.props.authorizedMedia);if((t||i)&&Object.assign(n,{textInputValue:"",hasError:!1}),e.currentMedia){var o=e.currentMedia[e.currentMedia.type],r=app.data.appItem.item.id,a=o.url&&("url"===o.source||!o.thumbUrl)&&(!r||!o.url.match(r+"/resources"));switch(e.currentMedia.type){case"webpage":var s=e.currentMedia.webpage.url.replace(/^\/\//,""),l=s;e.currentMedia.webpage.height&&(l='<iframe src="'+s+'" height="'+e.currentMedia.webpage.height+'"></iframe>'),Object.assign(n,{textInputValue:l});break;case"image":a&&Object.assign(n,{textInputValue:o.url.replace(/^\/\//,"")});break;case"video":o.url?Object.assign(n,{textInputValue:o.url.replace(/^\/\//,"")}):console.warn("video fell through because no url");break;case"audio":a&&Object.assign(n,{textInputValue:o.url.replace(/^\/\//,"")});break;default:console.warn("currentMedia state fell through",e.currentMedia)}}this.setState(n)}},{key:"textInput",value:function(e){var t=e.target.value;t.trim()||(t=""),this.setState({textInputValue:t,hasError:!1})}},{key:"textKeypress",value:function(e){(e.charCode||0===e.charCode)&&(13!==e.charCode||e.shiftKey||(e.preventDefault&&e.preventDefault(),this.textSubmit()))}},{key:"textClear",value:function(e){13===e.charCode&&this.setState({textInputValue:"",focusInput:!0,hasError:!1})}},{key:"textSubmit",value:function(){this.processPageAddress()}},{key:"processPageAddress",value:function(){var e=this,t=this.state.textInputValue.trim();if(t){var n;s.URLConnector.checkForIframe(t)&&(n=s.URLConnector.getIframeHeight(t),t=s.URLConnector.getIframeSrc(t));var i=[],o=[];this.checkSingleMediaType("IMAGE")&&(i.push(s.URLConnector.checkForImage(t)),o.push(_.default.contentType.IMAGE)),this.checkSingleMediaType("VIDEO")&&(i.push(s.URLConnector.checkYoutubeUrl(t)),i.push(s.URLConnector.checkVimeoUrl(t)),o.push(_.default.contentType.VIDEO),o.push(_.default.contentType.VIDEO)),this.checkSingleMediaType("AUDIO")&&(i.push(s.URLConnector.checkForAudio(t)),o.push(_.default.contentType.AUDIO)),Promise.all(i).then(function(i){if(!i.some(function(t,n){return t!==_.default.fetchStatus.NON_MATCHING_URL&&(e.publishSelection(Object.assign({type:o[n]},t)),!0)})){if(e.checkSingleMediaType("WEBPAGE")&&!t.match(/\.(mp3|m4a|wav)$/i))return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")&&0!==t.indexOf("//")&&(t="//"+t),void e.publishSelection({type:"webpage",url:t,height:n});var r=[];"imageOnly"===e.state.contentTypeDescriptor?r.push(y.default.unescapeBrands(k.uploadErrors.imageOnly1),y.default.unescapeBrands(k.uploadErrors.imageOnly2)):"imageAndVideo"===e.state.contentTypeDescriptor?r.push(y.default.unescapeBrands(k.uploadErrors.imageAndVideo1),y.default.unescapeBrands(k.uploadErrors.imageAndVideo2)):r.push(y.default.unescapeBrands(k.uploadErrors.generic)),e.setState({hasError:!0,errorText:r})}}).catch(function(t){e.setState({hasError:!0,errorText:e.getErrorMessage(t)+" "+k.uploadErrors.tryAgain})})}}},{key:"getErrorMessage",value:function(e){return(e.reason===_.default.fetchStatus.BAD_FORMAT?k.uploadErrors.badFormat:k.uploadErrors.inaccessible).split(/\$\{(.+?)\}/).map(function(t){return"media-type"===t&&(t=k.uploadErrors.mediaTypes[e.type]||k.uploadErrors.mediaTypes.generic),t}).join("")}},{key:"publishSelection",value:function(e){this.textClear({
charCode:13}),b.default.publish("MEDIA-PICKER-SELECTION",e)}},{key:"computeContentTypes",value:function(e){return e&&e.length?e.includes(_.default.contentType.WEBPAGE)?"generic":e.includes(_.default.contentType.VIDEO)&&e.includes(_.default.contentType.IMAGE)?"imageAndVideo":e.includes(_.default.contentType.IMAGE)?"imageOnly":(console.warn("something funny happened with authorized media",e),"generic"):(console.warn("no authorized media"),"generic")}},{key:"getUploadHeader",value:function(){return k.uploadHeaders[this.state.contentTypeDescriptor]}},{key:"getAlert",value:function(){if(this.state.hasError)return m.default.createElement(x,{text:this.state.errorText})}},{key:"getMediaIcons",value:function(){var e=[];if(this.props.authorizedMedia&&this.props.authorizedMedia.length)return this.checkSingleMediaType("IMAGE")&&e.push(m.default.createElement("span",{className:"fa fa-picture-o",key:"media-picture-o"})),this.checkSingleMediaType("AUDIO")&&e.push(m.default.createElement("span",{className:"fa fa-volume-up",key:"media-volume-up"})),this.checkSingleMediaType("VIDEO")&&e.push(m.default.createElement("span",{className:"fa fa-vimeo",key:"media-vimeo"}),m.default.createElement("span",{className:"fa fa-youtube",key:"media-youtube"})),this.checkSingleMediaType("WEBPAGE")&&e.push(m.default.createElement("span",{className:"fa fa-code",key:"media-code"}),m.default.createElement("span",{className:"www",key:"media-www"},"www.")),e}},{key:"checkSingleMediaType",value:function(e){return this.props.authorizedMedia.includes(_.default.contentType[e])}},{key:"getHelpText",value:function(){var e=this.checkSingleMediaType("IMAGE"),t=this.checkSingleMediaType("VIDEO"),n=this.checkSingleMediaType("WEBPAGE"),i=[];return e&&t&&n?(i.push(m.default.createElement("div",{key:"link-text-1"},y.default.unescapeBrands(k.linkText.imageVideoWebpage1))),i.push(m.default.createElement("div",{key:"link-text-2"},y.default.unescapeBrands(k.linkText.imageVideoWebpage2)))):e&&t?(i.push(m.default.createElement("div",{key:"link-text-1"},y.default.unescapeBrands(k.linkText.imageAndVideo1))),i.push(m.default.createElement("div",{key:"link-text-2"},y.default.unescapeBrands(k.linkText.imageAndVideo2)))):e?i.push(m.default.createElement("div",{key:"link-text-1"},y.default.unescapeBrands(k.linkText.imageOnly))):i.push(m.default.createElement("div",{key:"link-text-1"},"NO RECOGNIZABLE CONTENT TYPES")),i.push(m.default.createElement("div",{key:"link-text-ender"},k.linkText.ender)),t&&i.push(m.default.createElement("div",{key:"terms",className:"small-text"},m.default.createElement("span",null,w.default.builder.mediaPicker.browsePanel.sidePanel.thirdPartyTerms),m.default.createElement("a",{className:"link",target:"_blank",rel:"noopener noreferrer",href:app.cfg.BUILDER_LINKS.TERMS.youtube},"YouTube"),",Â ",m.default.createElement("a",{className:"link",target:"_blank",rel:"noopener noreferrer",href:app.cfg.BUILDER_LINKS.TERMS.vimeo},"Vimeo"))),i}},{key:"render",value:function(){var e=k.placeholder.replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)});return m.default.createElement("div",{style:this.props.display?null:{display:"none"},className:"browse-panel-container url-container"},m.default.createElement("div",{className:"help-title"},this.getUploadHeader()),m.default.createElement(E,{placeholder:e,value:this.state.textInputValue,setFocus:this.state.focusInput,onKeyPress:this.textKeypress.bind(this),onChange:this.textInput.bind(this),onClear:this.textClear.bind(this),hasError:!this.state.isValid}),m.default.createElement("div",{className:"help-section"},m.default.createElement("div",{className:"media-icons"},this.getMediaIcons()),m.default.createElement("div",{className:"help-text"},this.getHelpText())),this.getAlert())}}]),t}(m.default.Component),S=function(e){return{provider:e.browsePanel.urlContent}},P=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:_.default.providers.URL});e(t(i))};return{updateImageFetchStatus:function(e){t(v.updateImageFetchStatus,e)}}};t.default=(0,o.connect)(S,P)(T),e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/Providers",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/providers/Providers",["module","exports","react","./GooglePhotosContainer","./FlickrContainer","./ArcGISContainer","./UnsplashContainer","./UrlContainer","../../constants","lib-build/less!./Providers"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(o),g=u(r),v=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={justOpened:!1},e}return p(t,e),_(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({justOpened:e.params.justOpened})}},{key:"displayTab",value:function(e){return this.props.browseSelectedProvider===e}},{key:"openFocus",value:function(e){return this.displayTab(e)&&this.state.justOpened}},{key:"render",value:function(){return f.default.createElement("div",{className:"mp-browse-panel-containers"},f.default.createElement(h.default,{display:this.displayTab(y.default.providers.GOOGLE_PHOTOS),openFocus:this.openFocus(y.default.providers.GOOGLE_PHOTOS),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(m.default,{display:this.displayTab(y.default.providers.FLICKR),openFocus:this.openFocus(y.default.providers.FLICKR),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(g.default,{display:this.displayTab(y.default.providers.ARCGIS),openFocus:this.openFocus(y.default.providers.ARCGIS),appId:this.props.params?this.props.params.appid:null,thisStory:this.props.params?this.props.params.arcgisThisStory:null,authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(v.default,{display:this.displayTab(y.default.providers.UNSPLASH),openFocus:this.openFocus(y.default.providers.UNSPLASH),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(b.default,{display:this.displayTab(y.default.providers.URL),openFocus:this.openFocus(y.default.providers.URL),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[],currentMedia:this.props.params?this.props.params.media:null}))}}]),t}(f.default.Component);t.default=w,e.exports=t.default}),define("storymaps-react/tpl/builder/mediaPicker/browsePanel/BrowsePanelContainer",["module","exports","react-redux","./providers/Providers"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(i),r=function(e){return{browseSelectedProvider:e.ui.browseSelectedProvider,authorizedMedia:e.ui.authorizedMedia}};t.default=(0,n.connect)(r)(o.default),e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mediaPicker/MediaPicker",[],function(){}),define("storymaps-react/tpl/builder/mediaPicker/MediaPicker",["module","exports","react","react-dom","redux","react-redux","./reducer","./actions","./browseToggle/BrowseToggleContainer","./browsePanel/BrowsePanelContainer","dojo/topic","dojo/Deferred","lib-build/less!./MediaPicker"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var v,b=p(n),y=p(i),_=p(a),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),C=p(l),k=p(u),x=p(c),E=p(d),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=(0,o.createStore)(_.default,window.devToolsExtension?window.devToolsExtension():{});x.default.subscribe("MEDIA-PICKER-SELECTION",function(e){v&&e&&v.resolve(g({type:e.type},e.type,e))}),x.default.subscribe("MEDIA-PICKER-SWAP-MAP-EDITOR",function(){v&&v.reject("swap-map-editor")});var P=function(e){function t(e){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.container=e,n.render(),n}return m(t,e),T(t,[{key:"open",value:function(e){var t=this;return v=new E.default,this.render(Object.assign(e,{justOpened:!0})),v.then(function(){t.render(Object.assign(e,{justOpened:!1}))},function(){t.render(Object.assign(e,{justOpened:!1}))}),e.selectedProvider&&S.dispatch(w.selectProvider(e.selectedProvider)),v}},{key:"render",value:function(e){y.default.render(b.default.createElement(r.Provider,{store:S},b.default.createElement("div",{className:"media-picker"},b.default.createElement(C.default,{authorizedMedia:e?e.authorizedMedia:null}),b.default.createElement(k.default,{params:e}))),document.getElementById(this.container))}}]),t}(b.default.Component);t.default=P,e.exports=t.default}),define("storymaps/tpl/builder/mediaPicker/MediaPickerPopup",["lib-build/tpl!./MediaPickerPopup","lib-build/less!./MediaPickerPopup","storymaps-react/tpl/builder/mediaPicker/MediaPicker","dojo/Deferred"],function(e,t,n,i){var o=["image","audio","video","webpage","webmap","webscene"];return function(t){var r=null,a=t&&t.container;if(!a)return void console.error("Could not initialize MediaPickerPopup");a.html(e({})),r=new n("media-picker"),this.open=function(e){var t=new i,n=null,s=!1;return e.arcgisThisStory=app.Controller.getArcGISContent(),e.appid=app.data.appItem.item.id,e.authorizedMedia=e.authorizedMedia||o,r.open(e).then(function(e){n=e,a.modal("hide")},function(e){"swap-map-editor"===e&&(s=!0,a.modal("hide"))}),a.modal({keyboard:!0}),a.on("hide.bs.modal",function(){if(!t.isFulfilled())if(n)t.resolve(n);else{var e="No media selected";s&&(e="swap-map-editor"),t.reject(e)}}),t},this.getContainerNode=function(){return a}}}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/Popup",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="modal-dialog hc-dialog">\n\t<div class="modal-content">\n\t\t<div class="modal-header">\n\t\t\t<div class="toggles">\n        <div class="toggle selected" data-tab="logo-sharing">'+a(r(null!=(o=null!=e?e.toggles:e)?o.logoSharing:o,e))+'</div>\n        <div class="toggle" data-tab="bookmarks">'+a(r(null!=(o=null!=e?e.toggles:e)?o.bookmarks:o,e))+'</div>\n        <div class="toggle" data-tab="theme">'+a(r(null!=(o=null!=e?e.toggles:e)?o.theme:o,e))+'</div>\n      </div>\n\t\t</div>\n\t\t<div class="modal-body">\n\t    <div class="modal-tab selected" data-tab="logo-sharing"></div>\n      <div class="modal-tab" data-tab="bookmarks"></div>\n\t\t\t<div class="modal-tab" data-tab="theme"></div>\n\t\t</div>\n\t\t<div class="modal-footer">\n      <button type="button" class="btn btn-primary btn-close apply">'+a(r(null!=(o=null!=e?e.dialog:e)?o.apply:o,e))+'</button>\n\t\t\t<button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal">'+a(r(null!=(o=null!=e?e.notification:e)?o.cancel:o,e))+"</button>\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/LogoSharing",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" hidden"},3:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='      <div class="hc-row org-logo-row">\n        <label class="hc-check-label">\n          <input type="checkbox" class="hc-checkbox org-logo-checkbox" ';return o=t.if.call(e,null!=(o=null!=(o=null!=e?e.settings:e)?o.orgLogoSettings:o)?o.useOrgLogo:o,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+'>\n          <span class="hc-check-label-text">'+a(r(null!=(o=null!=e?e.strings:e)?o.useOrgLogo:o,e))+'</span>\n        </label>\n        <i class="org-logo-tooltip fa fa-info-circle" aria-hidden="true" data-title="'+a(r(null!=(o=null!=e?e.strings:e)?o.useOrgLogoHelp:o,e))+'"></i>\n      </div>\n'},4:function(e,t,n,i){return"checked"},6:function(e,t,n,i){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing,u='<div class="hc-container split">\n  <div class="hc-item">\n    <div class="hc-row item-title">'+s(a(null!=(o=null!=e?e.strings:e)?o.logo:o,e))+'</div>\n    <div class="hc-row">\n      <div class="hc-item-container" style="background: '+s((r=null!=(r=t.background||(null!=e?e.background:e))?r:l,"function"==typeof r?r.call(e,{name:"background",hash:{},data:i}):r))+';">\n        <img src="'+s(a(null!=(o=null!=(o=null!=e?e.settings:e)?o.logo:o)?o.url:o,e))+'" class="hc-logo';return o=t.unless.call(e,null!=(o=null!=(o=null!=e?e.settings:e)?o.logo:o)?o.enabled:o,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='">\n        <div class="hc-logo-button',o=t.if.call(e,null!=(o=null!=(o=null!=e?e.settings:e)?o.logo:o)?o.enabled:o,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+=' btn btn-primary">'+s((r=null!=(r=t.useEsriLogoString||(null!=e?e.useEsriLogoString:e))?r:l,"function"==typeof r?r.call(e,{name:"useEsriLogoString",hash:{},data:i}):r))+'</div>\n        <div class="hc-action-icon-underlay">\n          <i class="hc-action-icon hc-settings fa fa-pencil"></i>\n          <i class="hc-action-icon hc-remove fa fa-trash',o=t.unless.call(e,null!=(o=null!=(o=null!=e?e.settings:e)?o.logo:o)?o.enabled:o,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='"></i>\n        </div>\n      </div>\n    </div>\n    <div class="hc-logo-upload-msg alert" role="alert"></div>\n',o=t.if.call(e,null!=(o=null!=(o=null!=e?e.settings:e)?o.orgLogoSettings:o)?o.hasOrgLogo:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='  </div>\n  <div class="hc-item">\n    <div class="hc-row item-title">'+s(a(null!=(o=null!=e?e.strings:e)?o.logoLink:o,e))+'</div>\n    <div class="hc-row">\n      <input type="text" value="'+s(a(null!=(o=null!=(o=null!=e?e.settings:e)?o.logo:o)?o.link:o,e))+'" class="hc-text-input logo-link" ',o=t.unless.call(e,null!=(o=null!=(o=null!=e?e.settings:e)?o.logo:o)?o.enabled:o,{name:"unless",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='>\n    </div>\n  </div>\n</div>\n<div class="hc-container split">\n  <div class="hc-item">\n    <div class="hc-row item-title">'+s(a(null!=(o=null!=e?e.strings:e)?o.customHeaderText:o,e))+'</div>\n    <div class="hc-row">\n      <input type="text" maxlength='+s((r=null!=(r=t.maxCharacters||(null!=e?e.maxCharacters:e))?r:l,"function"==typeof r?r.call(e,{name:"maxCharacters",hash:{},data:i}):r))+" size="+s((r=null!=(r=t.maxCharacters||(null!=e?e.maxCharacters:e))?r:l,"function"==typeof r?r.call(e,{name:"maxCharacters",hash:{},data:i}):r))+' value="'+s(a(null!=(o=null!=(o=null!=e?e.settings:e)?o.link:o)?o.title:o,e))+'" class="hc-text-input truncated link-title">\n    </div>\n  </div>\n  <div class="hc-item">\n    <div class="hc-row item-title">'+s(a(null!=(o=null!=e?e.strings:e)?o.link:o,e))+'</div>\n    <div class="hc-row tagline-link" data-toggle="tooltip" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.taglineLinkDisabledTooltip:o,e))+'">\n      <input type="text" ',o=t.if.call(e,null!=e?e.emptyTagline:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+=' value="'+s(a(null!=(o=null!=(o=null!=e?e.settings:e)?o.link:o)?o.url:o,e))+'" class="hc-text-input link-url">\n    </div>\n  </div>\n  <div class="hc-item">\n    <div class="hc-row">\n      <label class="hc-check-label">\n        <input type="checkbox" class="hc-checkbox social-checkbox" ',o=t.if.call(e,null!=(o=null!=(o=null!=e?e.settings:e)?o.social:o)?o.enabled:o,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+'>\n        <span class="hc-check-label-text">'+s(a(null!=(o=null!=e?e.strings:e)?o.enableSocialSharing:o,e))+"</span>\n      </label>\n    </div>\n  </div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/Bookmark",["Handlebars"],function(e){return e.template({1:function(e,t,n,i,o){var r,a,s=this.lambda,l=this.escapeExpression,u=t.helperMissing,c='    <li class="hc-row bookmark-row';return r=t.if.call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(2,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='" data-index="'+l(s(i&&i.index,e))+'">\n      <div class="hc-column first">\n        <label class="hc-check-label">\n          <input type="checkbox" class="hc-checkbox space bookmark-checkbox" ',r=t.unless.call(e,null!=e?e.disabled:e,{name:"unless",hash:{},fn:this.program(4,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\n          <span class="hc-check-label-text truncated">'+l((a=null!=(a=t.title||(null!=e?e.title:e))?a:u,"function"==typeof a?a.call(e,{name:"title",hash:{},data:i}):a))+'</span>\n        </label>\n      </div>\n      <div class="hc-column last">\n          <input type="text" ',r=t.if.call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(6,i,o),inverse:this.noop,data:i}),null!=r&&(c+=r),c+" maxlength="+l(s(null!=o[1]?o[1].maxCharacters:o[1],e))+" size="+l(s(null!=o[1]?o[1].maxCharacters:o[1],e))+' value="'+l((a=null!=(a=t.bookmark||(null!=e?e.bookmark:e))?a:u,"function"==typeof a?a.call(e,{name:"bookmark",hash:{},data:i}):a))+'" class="hc-text-input truncated bookmark-text">\n      </div>\n    </li>\n'},2:function(e,t,n,i){return" disabled"},4:function(e,t,n,i){return"checked"},6:function(e,t,n,i){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,o){var r,a=this.lambda,s=this.escapeExpression,l='<div class="hc-intro">'+s(a(null!=(r=null!=e?e.strings:e)?r.intro:r,e))+'</div>\n\n<div class="hc-container header-container">\n    <div class="hc-row">\n        <div class="hc-column first">'+s(a(null!=(r=null!=e?e.strings:e)?r.title:r,e))+'</div>\n        <div class="hc-column last">'+s(a(null!=(r=null!=e?e.strings:e)?r.bookmark:r,e))+'</div>\n    </div>\n</div>\n<ul class="hc-container content">\n';return r=t.each.call(e,null!=e?e.bookmarks:e,{name:"each",hash:{},fn:this.program(1,i,o),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"</ul>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/Appearance",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='          <li class="config-item ';return o=t.if.call(e,null!=e?e.selected:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'" data-colorid='+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'>\n            <div class="config-background" style="background: '+s((r=null!=(r=t.bgMain||(null!=e?e.bgMain:e))?r:a,"function"==typeof r?r.call(e,{name:"bgMain",hash:{},data:i}):r))+';">\n              <div class="color-sample">\n                <div class="fa fa-check"></div>\n                <div class="text-block width-1" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-2" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-1" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-2" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-1" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-1" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-2" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-1" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-2" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n                <div class="text-block width-1" style="background: '+s((r=null!=(r=t.textMain||(null!=e?e.textMain:e))?r:a,"function"==typeof r?r.call(e,{name:"textMain",hash:{},data:i}):r))+';"></div>\n              </div>\n            </div>\n            <span>'+s((r=null!=(r=t.label||(null!=e?e.label:e))?r:a,"function"==typeof r?r.call(e,{name:"label",hash:{},data:i}):r))+"</span>\n          </li>\n"},2:function(e,t,n,i){return"selected"},4:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'              <li><a href="#" data-fontid="'+a((o=null!=(o=t.label||(null!=e?e.label:e))?o:r,"function"==typeof o?o.call(e,{name:"label",hash:{},data:i}):o))+'" style="font-family: '+a((o=null!=(o=t.fontFamily||(null!=e?e.fontFamily:e))?o:r,"function"==typeof o?o.call(e,{name:"fontFamily",hash:{},data:i}):o))+'">'+a((o=null!=(o=t.label||(null!=e?e.label:e))?o:r,"function"==typeof o?o.call(e,{name:"label",hash:{},data:i}):o))+"</a></li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<div class="builder-config-section appearance-tab">\n  <div class="appearance-options">\n    <div class="hc-container split">\n      <div class="item-title">'+a(r(null!=(o=null!=e?e.strings:e)?o.themeLabel:o,e))+'</div>\n\n      <ul class="section-content horizontal color-list">\n';return o=t.each.call(e,null!=e?e.colors:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='      </ul>\n\n    </div>\n\n    <div class="hc-container split">\n      <div class="item-title">'+a(r(null!=(o=null!=e?e.strings:e)?o.fontLabel:o,e))+'</div>\n\n      <ul class="section-content horizontal font-list">\n        <li class="config-item">\n          <div class="item-subtitle">'+a(r(null!=(o=null!=e?e.strings:e)?o.fontsTitleLabel:o,e))+'</div>\n          <div class="dropdown">\n            <button class="btn btn-gray dropdown-toggle font-title-btn" type="button" data-toggle="dropdown">\n              <span class="font-label" style="font-family: '+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.titleFont:o)?o.fontFamily:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.titleFont:o)?o.label:o,e))+'</span>\n              <span class="fa fa-caret-down"></span>\n            </button>\n            <ul class="dropdown-menu title-font-list" data-selected-font='+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.titleFont:o)?o.label:o,e))+">\n",o=t.each.call(e,null!=(o=null!=e?e.fonts:e)?o.fontArr:o,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='            </ul>\n          </div>\n        </li>\n        <li class="config-item">\n          <div class="item-subtitle">'+a(r(null!=(o=null!=e?e.strings:e)?o.fontsBodyLabel:o,e))+'</div>\n          <div class="dropdown">\n            <button class="btn btn-gray dropdown-toggle font-body-btn" type="button" data-toggle="dropdown">\n              <span class="font-label" style="font-family: '+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.bodyFont:o)?o.fontFamily:o,e))+'">'+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.bodyFont:o)?o.label:o,e))+'</span>\n              <span class="fa fa-caret-down"></span>\n            </button>\n            <ul class="dropdown-menu body-font-list" data-selected-font='+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.bodyFont:o)?o.label:o,e))+">\n",o=t.each.call(e,null!=(o=null!=e?e.fonts:e)?o.fontArr:o,{name:"each",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+'            </ul>\n          </div>\n        </li>\n      </ul>\n\n    </div>\n  </div>\n\n  <div class="appearance-preview">\n    <div class="item-title">'+a(r(null!=(o=null!=e?e.strings:e)?o.previewLabel:o,e))+'</div>\n    <div class="config-background">\n      <div class="font-sample">\n        <div class="title-sample" style="font-family: '+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.titleFont:o)?o.fontFamily:o,e))+'">'+a(r(null!=(o=null!=e?e.strings:e)?o.loremTitle:o,e))+'</div>\n        <div class="body-sample" style="font-family: '+a(r(null!=(o=null!=(o=null!=e?e.fonts:e)?o.bodyFont:o)?o.fontFamily:o,e))+'">'+a(r(null!=(o=null!=e?e.strings:e)?o.loremBody:o,e))+"</div>\n      </div>\n    </div>\n  </div>\n\n</div>"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/builder/settings/Popup",[],function(){}),define("storymaps-react/tpl/builder/settings/Popup",["module","exports","storymaps-react/tpl/view/media/Media","lib-build/hbars!./Popup","lib-build/hbars!./LogoSharing","lib-build/hbars!./Bookmark","lib-build/hbars!./Appearance","storymaps/tpl/utils/CommonHelper","lib-build/i18n!resources/tpl/builder/nls/app","dojo/_base/lang","lib-build/less!./Popup"],function(e,t,n,i,o,r,a,s,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var f=c(n),h=c(i),m=c(o),g=c(r),v=c(a),b=c(s),y=c(l),_=c(u),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function(){function e(t){p(this,e),this.container=t.container,this.data=null,this.esriLogoUrl="resources/tpl/viewer/icons/esri-logo.png",this.esriLogoLink="https://www.esri.com",this.backupLogoUrl=this.esriLogoUrl,this.backupLogoLink=this.esriLogoLink,this.reject=null,this.resolve=null;var n={dialog:y.default.builder.dialog,notification:y.default.builder.notification,toggles:y.default.builder.headerConfig.toggles};this.container.append((0,h.default)(n)),this.attachModalEvents()}return w(e,[{key:"getColors",value:function(e){var t=this.data.settings.themeData,n=_.default.getObject("currentTheme.colors.id",!1,t),i=t.colorOptions;if(i.forEach(function(e){e.selected=n===e.id}),!e)return i;"current"===e&&(e=n);var o;return i.some(function(t){return t.id===e&&(o=t,!0)}),o}},{key:"getFonts",value:function(e){var t=this.data.settings.themeData,n=_.default.getObject("currentTheme.fonts.titleFont",!1,t),i=_.default.getObject("currentTheme.fonts.bodyFont",!1,t),o=t.fontOptions;if(!e)return{fontArr:o,titleFont:n,bodyFont:i};var r;return o.some(function(t){return t.label===e&&(r=t,!0)}),r}},{key:"attachModalEvents",value:function(){this.attachToggleEvents(),this.attachApplyEvents()}},{key:"attachApplyEvents",value:function(){var e=this;this.container.find(".btn-close").on("click",function(){e.detachEvents()}),this.container.find(".btn-close.btnCancel").on("click",function(){e.reject&&e.reject()}),this.container.find(".btn-close.apply").on("click",function(){e.container.find(".btn-close.apply").hasClass("disabled")||(e.applyBookmarkChanges(),e.applyLogoSharingChanges(),e.applyThemeChanges(),e.resolve&&e.resolve(e.data.settings),e.container.modal("hide"))})}},{key:"detachEvents",value:function(){this.container.find(".hc-logo-button").off("click"),this.container.find(".hc-action-icon.hc-remove").off("click"),this.container.find(".hc-action-icon.hc-settings").off("click"),this.container.find(".hc-checkbox.bookmark-checkbox").off("click")}},{key:"applyBookmarkChanges",value:function(){for(var e=this.container.find(".hc-row.bookmark-row"),t=0;t<e.length;t++){var n=$(e[t]),i=this.data.settings.bookmarks[t];if(!i)return;var o=n.find(".hc-text-input.bookmark-text").val(),r=this.sanitizeValue(o);r||n.addClass("disabled"),n.hasClass("disabled")?i.status="disabled":i.status="visible",i.bookmark=r}}},{key:"sanitizeValue",value:function(e){return $("<div>"+e+"</div>").text()}},{key:"applyLogoSharingChanges",value:function(){var e=this.container.find(".hc-checkbox.social-checkbox");this.data.settings.social.enabled=e.is(":checked");var t=!this.container.find(".hc-logo").hasClass("hidden");this.data.settings.logo.enabled=t;var n=this.container.find(".hc-text-input.logo-link").val(),i=this.sanitizeValue(n),o=b.default.prependURLHTTP(i);this.data.settings.logo.link=o;var r=this.container.find(".hc-text-input.link-title").val(),a=this.sanitizeValue(r);this.data.settings.link.title=a;var s=this.container.find(".hc-text-input.link-url").val(),l=this.sanitizeValue(s),u=b.default.prependURLHTTP(l);this.data.settings.link.url=u}},{key:"applyThemeChanges",value:function(){this.data.settings.themeData.currentTheme.colors=this.tempThemeSettings.colors,this.data.settings.themeData.currentTheme.fonts={titleFont:this.tempThemeSettings.titleFont,bodyFont:this.tempThemeSettings.bodyFont}}},{key:"attachToggleEvents",value:function(){var e=this,t=this.container.find(".toggle");t.on("click",function(n){var i=$(n.currentTarget),o=i.data("tab");t.removeClass("selected"),i.addClass("selected"),e.container.find(".modal-tab").removeClass("selected"),e.container.find('.modal-tab[data-tab="'+o+'"]').addClass("selected")})}},{key:"attachBookmarkEvents",value:function(){this.attachEnableBookmarkEvent()}},{key:"attachThemeEvents",value:function(){var e=this,t=this.container.find(".color-list .config-item");t.on("click",function(){t.removeClass("selected"),$(this).addClass("selected");var n=e.getColors($(this).data("colorid"));e.updateTempTheme({colors:n}),e.updatePreview()}),this.container.find(".font-list .dropdown-menu a").on("click",function(){
var t=$(this).data("fontid"),n=e.getFonts(t),i=$(this).parents(".dropdown");i.find(".font-label").text(t).attr("style","font-family: "+n.fontFamily);var o=i.find(".dropdown-menu").data("selected-font",t),r=o.hasClass("title-font-list")?"titleFont":"bodyFont";e.updateTempTheme(d({},r,n)),e.updatePreview()})}},{key:"updateTempTheme",value:function(e){Object.assign(this.tempThemeSettings,e)}},{key:"updatePreview",value:function(){var e=this.container.find(".appearance-preview"),t=this.tempThemeSettings;if(t.colors){var n="color: "+t.colors.textMain+"; background-color: "+t.colors.bgMain+";";e.find(".font-sample").attr("style",n)}t.titleFont&&e.find(".title-sample").attr("style","font-family: "+t.titleFont.fontFamily+";"),t.bodyFont&&e.find(".body-sample").attr("style","font-family: "+t.bodyFont.fontFamily+";")}},{key:"attachLogoSharingEvents",value:function(){this.attachRemoveLogoEvents(),this.attachUseEsriLogoEvents(),this.attachSelectLogoEvents(),this.attachToggleTaglineLinkEvents(),this.attachUseOrgLogoEvents(),this.container.find(".org-logo-tooltip").tooltip(),this.container.find(".hc-logo-upload-msg").removeClass("alert-success alert-warning alert-danger")}},{key:"attachUseOrgLogoEvents",value:function(){var e=this;this.container.find(".hc-checkbox.org-logo-checkbox").on("click",function(t){var n=$(t.currentTarget),i=e.container.find(".hc-text-input.logo-link"),o="";n.is(":checked")?(e.backupLogoUrl=e.data.settings.logo.url,e.backupLogoLink=e.data.settings.logo.link,o=e.data.settings.orgLogoSettings.orgLogo,e.container.find(".hc-logo").attr("src",o),e.container.find(".hc-text-input.logo-link").val(e.backupLogoLink),e.enableLogo(),b.default.isDefaultLogoLink(i.val())&&i.val("")):(o=f.default.addToken(e.backupLogoUrl),e.container.find(".hc-logo").attr("src",o),o===e.esriLogoUrl&&i.val(e.esriLogoLink)),e.data.settings.logo.url=o})}},{key:"attachToggleTaglineLinkEvents",value:function(){var e=this;this.container.find(".hc-text-input.link-title").on("keyup",function(t){t.currentTarget.value.trim().length?e.enableTaglineLink():e.disableTaglineLink()})}},{key:"enableTaglineLink",value:function(){this.container.find(".hc-text-input.link-url").removeAttr("disabled"),this.container.find('[data-toggle="tooltip"]').tooltip("disable")}},{key:"disableTaglineLink",value:function(){this.container.find(".hc-text-input.link-url").attr("disabled",""),this.container.find('[data-toggle="tooltip"]').tooltip("enable")}},{key:"enableLogo",value:function(){this.container.find(".hc-logo-button").addClass("hidden"),this.container.find(".hc-logo").removeClass("hidden"),this.container.find(".hc-action-icon.hc-remove").removeClass("hidden"),this.container.find(".hc-text-input.logo-link").removeAttr("disabled")}},{key:"attachUseEsriLogoEvents",value:function(){var e=this;this.container.find(".hc-logo-button").on("click",function(){e.container.find(".hc-logo").attr("src",e.esriLogoUrl),e.container.find(".hc-text-input.logo-link").val(e.esriLogoLink),e.data.settings.logo.url=e.esriLogoUrl,e.enableLogo()})}},{key:"attachRemoveLogoEvents",value:function(){var e=this;this.container.find(".hc-action-icon.hc-remove").on("click",function(t){var n=$(t.currentTarget);e.container.find(".hc-logo").addClass("hidden"),e.container.find(".hc-logo-button").removeClass("hidden"),e.container.find(".hc-text-input.logo-link").attr("disabled",""),e.container.find(".hc-logo").attr("src",""),e.container.find(".hc-checkbox.org-logo-checkbox").prop("checked",!1),n.addClass("hidden")})}},{key:"attachSelectLogoEvents",value:function(){var e=this;this.container.find(".hc-action-icon.hc-settings").on("click",function(){app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(t){if("image"===t.type){var n=t.image.url;t.image.dataUrl&&t.image.uploadDeferred?(n=t.image.dataUrl,e.data.settings.logo.url="",e.container.find(".btn.apply").addClass("disabled"),e.container.find(".hc-logo-upload-msg").html(y.default.builder.headerConfig.logoSharing.logoUploadProgress).addClass("alert-warning"),t.image.uploadDeferred.then(function(e){this.container.find(".hc-logo").attr("src",f.default.addToken(e.url)),this.container.find(".btn.apply").removeClass("disabled"),this.container.find(".hc-logo-upload-msg").html(y.default.builder.headerConfig.logoSharing.logoUploadSuccess).removeClass("alert-warning").addClass("alert-success"),this.data.settings.logo.url=e.url,setTimeout(function(){this.container.find(".hc-logo-upload-msg").removeClass("alert-success")}.bind(this),2e3)}.bind(e),function(){this.container.find(".hc-action-icon.hc-remove").click(),this.container.find(".btn.apply").removeClass("disabled"),this.container.find(".hc-logo-upload-msg").removeClass("alert-warning").addClass("alert-danger").html(y.default.builder.headerConfig.logoSharing.logoUploadError.replace(/\${ESRI}/g,"Esri")),setTimeout(function(){this.container.find(".hc-logo-upload-msg").removeClass("alert-danger")}.bind(this),2e3)}.bind(e))):e.data.settings.logo.url=n,e.container.find(".hc-logo").attr("src",f.default.addToken(n)),e.enableLogo(),e.container.find(".hc-checkbox.org-logo-checkbox").prop("checked",!1)}},function(){})})}},{key:"attachEnableBookmarkEvent",value:function(){this.container.find(".hc-checkbox.bookmark-checkbox").on("click",function(e){var t=$(e.currentTarget),n=t.closest(".hc-row.bookmark-row");n.hasClass("disabled")?(n.removeClass("disabled"),n.find(".hc-text-input.bookmark-text").removeAttr("disabled")):(n.addClass("disabled"),n.find(".hc-text-input.bookmark-text").attr("disabled",""))})}},{key:"open",value:function(e){var t=this;return new Promise(function(n,i){t.resolve=n,t.reject=i;t.data=$.extend(!0,{},e.settings),t.data.settings.bookmarks=t.data.settings.bookmarks.map(function(e){return e.bookmark=e.bookmark.substr(0,20),e});var o=t.data.settings.bookmarks.map(function(e){return Object.assign({},e,{disabled:"disabled"===e.status})});t.data.settings.orgLogoSettings.useOrgLogo&&b.default.isDefaultLogoLink(t.data.settings.logo.link)&&(t.data.settings.logo.link="");var r=_.default.clone({settings:t.data.settings,background:t.data.context.headerBackground,maxCharacters:50,strings:y.default.builder.headerConfig.logoSharing,useEsriLogoString:y.default.builder.headerConfig.logoSharing.logoButton.replace(/\${ESRI}/g,"Esri"),emptyTagline:!t.data.settings.link.title});r.settings.logo.url=f.default.addToken(r.settings.logo.url);var a={bookmarks:o,maxCharacters:20,strings:y.default.builder.headerConfig.bookmarks},s={strings:y.default.builder.headerConfig.appearance,colors:t.getColors(),fonts:t.getFonts()};t.container.find('.modal-tab[data-tab="logo-sharing"]').html((0,m.default)(r)),t.container.find('.modal-tab[data-tab="bookmarks"]').html((0,g.default)(a)),t.container.find('.modal-tab[data-tab="theme"]').html((0,v.default)(s)),t.tempThemeSettings={colors:t.getColors("current"),titleFont:s.fonts.titleFont,bodyFont:s.fonts.bodyFont},t.updatePreview(),t.attachBookmarkEvents(),t.attachLogoSharingEvents(),t.attachThemeEvents(),t.container.modal(),t.container.on("shown.bs.modal",function(){t.container.find('[data-toggle="tooltip"]').tooltip({container:"body"});var e=t.container.find(".hc-text-input.link-title")[0];e&&e.value.trim().length&&t.container.find('[data-toggle="tooltip"]').tooltip("disable")})})}}]),e}();t.default=C,e.exports=t.default}),define("storymaps-react/tpl/builder/AppParser",["module","exports","issue-checker/helpers/NormalizeHelper"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,null,[{key:"getMedia",value:function(e,t){var n={maps:o.default.createObject(),scenes:o.default.createObject(),images:o.default.createObject(),videos:o.default.createObject(),audio:o.default.createObject(),webpages:o.default.createObject()};if(t)return n;if(!e)return n;for(var i=0;i<e.length;i++){var r=e[i],a=r.id;switch(r.type){case"cover":case"sequence":case"title":this._parseSection(r.background,r.foreground.blocks,n,a);break;case"immersive":this._parseImmersiveSection(r,n,a);break;case"credits":this._parseCreditsSection(r,n,a)}}return n}},{key:"_parseImmersiveSection",value:function(e,t,n){for(var i=null,o=null,r=null,a=null,s=0;s<e.views.length;s++){r=e.views[s],i=r.background,o=[];for(var l=0;l<r.foreground.panels.length;l++)(a=r.foreground.panels[l])&&a.blocks&&a.blocks.length&&(o=o.concat(a.blocks));this._parseSection(i,o,t,n)}}},{key:"_parseCreditsSection",value:function(e,t,n){for(var i=[],o=null,r=0;r<e.foreground.panels.length;r++)o=e.foreground.panels[r],"blocks"===o.type&&o.blocks&&o.blocks.length&&(i=i.concat(o.blocks));this._parseSection(e.background,i,t,n)}},{key:"_parseSection",value:function(e,t,n,i){this._parseMediaItem(e,n,i),this._parseBlocks(t,n,i)}},{key:"_parseMediaItem",value:function(e,t,n){switch(e.alternate&&e.alternate.image&&this._updateMediaItem({instanceID:e.alternate.image.instanceID,id:e.alternate.image.url,media:t.images,sectionID:n,mediaType:"image"}),e.type){case"image":this._updateMediaItem({instanceID:e.image.instanceID,id:e.image.url,media:t.images,sectionID:n,alternateMedia:e.alternate&&e.alternate.image?e.alternate.image.instanceID:null,mediaType:"image"});break;case"audio":this._updateMediaItem({instanceID:e.audio.instanceID,id:e.audio.url,media:t.audio,sectionID:n,alternateMedia:e.alternate&&e.alternate.image?e.alternate.image.instanceID:null,mediaType:"audio"});break;case"webmap":this._updateMediaItem({instanceID:e.webmap.instanceID,id:e.webmap.id,media:t.maps,sectionID:n,alternateMedia:e.alternate&&e.alternate.image?e.alternate.image.instanceID:null,mediaType:"map"});break;case"webscene":this._updateMediaItem({instanceID:e.webscene.instanceID,id:e.webscene.id,media:t.scenes,sectionID:n,alternateMedia:e.alternate&&e.alternate.image?e.alternate.image.instanceID:null,mediaType:"scene"});break;case"video":this._updateMediaItem({instanceID:e.video.instanceID,id:e.video.url,media:t.videos,sectionID:n,alternateMedia:e.alternate&&e.alternate.image?e.alternate.image.instanceID:null,mediaType:"video"});break;case"webpage":this._updateMediaItem({instanceID:e.webpage.instanceID,id:e.webpage.url,media:t.webpages,sectionID:n,alternateMedia:e.alternate&&e.alternate.image?e.alternate.image.instanceID:null,mediaType:"webpage"})}}},{key:"_parseBlocks",value:function(e,t,n){if(e&&e.length){var i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"image-gallery"===l.type?this._parseImageGallery(l,t,n):this._parseMediaItem(l,t,n)}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}}}},{key:"_parseImageGallery",value:function(e,t,n){if(e&&e["image-gallery"]&&e["image-gallery"].images){var i=e["image-gallery"].images,o=!0,r=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;this._updateMediaItem({instanceID:u.instanceID,id:u.url,media:t.images,sectionID:n,mediaType:"image"})}}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}}}},{key:"_updateMediaItem",value:function(e){var t={instanceID:e.instanceID,id:e.id,section:e.sectionID,mediaType:e.mediaType};e.alternateMedia&&(t.alternateMedia=e.alternateMedia),e.media.allItems.push(e.instanceID),e.media.byId[e.instanceID]=t}}]),e}();t.default=a,e.exports=t.default}),define("storymaps/tpl/builder/BannerNotification",[],function(){"use strict";var e=[],t=function(t){return!(e.indexOf(t)>=0)&&(e.push(t),!0)};return function(e){var n,i={strings:i18n.viewer.bannerNotification},o={id:e.id,primaryColor:e.primaryColor||"#027bd2",secondaryColor:e.secondaryColor||"#fff",bannerMainActionText:e.bannerMainActionText||i.strings.learnMore,bannerCloseActionText:e.bannerCloseActionText||i.strings.close,dontShowAgainText:e.dontShowAgainText||i.strings.dontShowAgain,bannerMsg:e.bannerMsg,mainMsgHtml:e.mainMsgHtml,actions:[].concat(e.actions),cookie:{domain:e.cookie.domain,path:e.cookie.path,maxAge:e.cookie.maxAge||0},autohideAfter:void 0!==e.autohideAfter?e.autohideAfter:2,fadeAfter:void 0!==e.fadeAfter?e.fadeAfter:3e4,blockingNotifications:e.blockingNotifications||[]},r="bannerNotification_"+o.id+"_hidden",a=function(e){var t=o.cookie.domain?"domain="+o.cookie.domain+";":"",n=o.cookie.path?"path="+o.cookie.path+";":"",i=new Date((new Date).getTime()+1e3*o.cookie.maxAge).toUTCString(),a=document.querySelector("#"+o.id+"-banner-notification-dont-show");if(a&&a.checked)document.cookie=r+"=true;expires="+i+";"+t+n;else if(!0===e){var s=document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)"+r+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"),l=parseInt(s);0===o.autohideAfter?document.cookie=r+"=true;expires="+i+";"+t+n:0===s.length?document.cookie=r+"=0;expires="+i+";"+t+n:l!==isNaN&&l<o.autohideAfter-1?document.cookie=r+"="+(l+1)+";expires="+i+";"+t+n:l!==isNaN&&l>=o.autohideAfter-1&&(window.onbeforeunload=function(){"false"!==document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)"+r+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")&&(document.cookie=r+"=true;expires="+i+";"+t+n)})}else document.cookie=r+"=false;expires="+i+";"+t+n},s=function(){for(var e=!1,t=[].concat(o.blockingNotifications),n=0;n<t.length;n++)"true"!==document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)bannerNotification_"+t[n]+"_hidden\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")&&(e=!0);return e};if(!function(){var e=document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)"+r+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");return 0===o.autohideAfter?(a(!0),!0):!!(s()||window.location.href.search(o.cookie.domain)<0)||(a(!0),"true"===e)}()&&t(o.id)){var l='        <style type="text/css">          .mobile-view .banner-notification {            display: none;          }          .banner-notification {            position: fixed;            top: 0;            width: 100%;            z-index: 9999;            animation-duration: 1s;            animation-name: slideInBannerNotificationMiniMessage;            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;          }          #'+o.id+".banner-notification .mini-msg-popup {            background-color: "+o.primaryColor+";            color: "+o.secondaryColor+";            padding: 8px 45px 8px 8px;            text-align: center;            font-size: 16px;            cursor: pointer;            position: relative;          }          .banner-notification button {            border: solid 1px;            margin: 0;            padding: 3px 6px;            border-radius: 3px;            width: auto;            overflow: visible;            background: inherit;            font: inherit;            color: inherit;            cursor: pointer;            text-align: inherit;            -webkit-font-smoothing: inherit;            -moz-osx-font-smoothing: inherit;            -webkit-appearance: none;          }          .banner-notification .mini-msg-popup p {            display: inline-block;            font-size: 16px;            padding: 3px;          }          #"+o.id+".banner-notification .mini-msg-btn {            border-color: "+o.secondaryColor+";            background-color: "+o.primaryColor+";            font-size: 13px;            line-height: normal;          }          #"+o.id+".banner-notification .mini-msg-btn:hover,          #"+o.id+".banner-notification .mini-msg-btn:focus {            color: "+o.primaryColor+";            background-color: "+o.secondaryColor+';          }          .banner-notification .mini-close {            position: absolute;            border: none;            right: 1px;            top: 0;            border-radius: 0;            background: none;            padding: 0 10px 4px;            font-size: 36px;            line-height: 1;            opacity: 0.6;            overflow: hidden;            height: 100%;            margin: auto;          }          .banner-notification .mini-close:hover,          .banner-notification .mini-close:focus {            opacity: 1;          }          @keyframes slideInBannerNotificationMiniMessage {            from {              top: -50px;            }            to: {              top: 0            }          }                    .banner-notification .main-msg-wrapper {            display: none;            width: 100%;            background-color: #fff;            overflow: auto;            -webkit-overflow-scrolling: touch;          }          .banner-notification.msg-visible .main-msg-wrapper {            display: block;          }          .banner-notification.msg-visible .banner-notification-learn-more-btn {            display: none;          }          .banner-notification .text-column-wrapper {            width: 100%;            max-width: 700px;            margin: auto;            line-height: 1.6em;          }          .banner-notification .text-column-wrapper-inner {            width: 100%;            margin: 0 15px;          }          .banner-notification .banner-notification-text {            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;          }          .banner-notification .text-column-wrapper h1 {            font-size: 1.9em;            margin: 25px 0 15px;            font-weight: 400;          }          .banner-notification .text-column-wrapper h2 {            font-size: 1.5em;            margin: 30px 0 -10px;            font-weight: 400;          }          .banner-notification .text-column-wrapper h3 {            font-size: 1.3em;            margin: 30px 0 -10px;            font-weight: 400;          }          .banner-notification .text-column-wrapper p {            margin: 20px 0 0;            font-size: 1.1em;            font-weight: 200;           }          .banner-notification .text-column-wrapper p strong{            font-weight: 400;          }          #'+o.id+".banner-notification .text-column-wrapper p a {            font-weight: 200;            color: "+o.primaryColor+";          }          #"+o.id+".banner-notification .main-msg-btn {            margin: 15px 7px 0 0;            padding: 3px 22px;            border-color: "+o.primaryColor+";            font-size: 15px;          }          #"+o.id+".banner-notification .primary-action {            color: "+o.secondaryColor+";            background-color: "+o.primaryColor+";          }          #"+o.id+".banner-notification .primary-action:hover,          #"+o.id+".banner-notification .primary-action:focus {            color: "+o.secondaryColor+";            background-color: "+o.primaryColor+";            opacity: .75;          }          #"+o.id+".banner-notification .secondary-action {            color: "+o.primaryColor+";            background-color: "+o.secondaryColor+";          }          #"+o.id+".banner-notification .secondary-action:hover,          #"+o.id+".banner-notification .secondary-action:focus {            color: "+o.secondaryColor+";            background-color: "+o.primaryColor+";          }          .banner-notification .banner-notification-dont-show {            margin: 25px 0 0 0;          }          .banner-notification .banner-notification-dont-show label {            display: inline;            font-size: 0.9em;            vertical-align: middle;          }          .banner-notification .actions-buttons {            padding-bottom: 15px;          }                              .banner-notification.msg-visible .main-msg-wrapper {            opacity: 1;            animation-duration: 0.5s;             animation-name: openBannerNotificationMainMessage;           }          @keyframes openBannerNotificationMainMessage {            from {              opacity: 0;            }            to: {              opacity: 1;            }          }          .banner-notification.closing {            opacity: 0;            animation-duration: 0.5s;             animation-name: closeBannerNotificationMessage;           }          @keyframes closeBannerNotificationMessage {            from {              opacity: 1;            }            to: {              opacity: 0;            }          }        </style>      ",u='        <div class="mini-msg-popup">          <p class="banner-notification-text">'+o.bannerMsg+'</p>&nbsp;          <button type="button" class="mini-msg-btn banner-notification-learn-more-btn">'+o.bannerMainActionText+'</button>          <button type="button" class="banner-notification-close-btn mini-close" title='+o.bannerCloseActionText+">&times;</button>        </div>      ",c='        <div class="main-msg-wrapper">          <div class="text-column-wrapper">            '+o.mainMsgHtml+'            <form class="banner-notification-dont-show">            <input type="checkbox" id="'+o.id+'-banner-notification-dont-show">            <label class="banner-notification-text" for="'+o.id+'-banner-notification-dont-show">'+o.dontShowAgainText+'</label>            </form>            <div class="actions-buttons"></div>          </div>        </div>      ',d=function(){for(var e=document.querySelector("#"+o.id+" .actions-buttons"),t=0;t<o.actions.length;t++){var n=o.actions[t],i=document.createElement("button");i.innerHTML=n.string,i.setAttribute("type","button"),i.classList.add("main-msg-btn"),n.primary?i.classList.add("primary-action"):i.classList.add("secondary-action"),n.closeOnAction&&i.classList.add("banner-notification-close-btn"),"function"==typeof n.action&&(i.addEventListener("click",n.action),i.addEventListener("keypress",function(e){13===e.keyCode&&n.action()})),e.appendChild(i)}},p=function(e){27===e.keyCode&&m()},f=function(){var e=document.body.offsetHeight-document.querySelector("#"+o.id+".banner-notification .mini-msg-popup").offsetHeight;document.querySelector("#"+o.id+" .main-msg-wrapper").style.height=e+"px"},h=function(){document.querySelector("#"+o.id+".banner-notification").classList.add("msg-visible"),document.addEventListener("keyup",p),document.querySelector("#"+o.id+"-banner-notification-dont-show").checked=!0,a(),clearTimeout(n)},m=function(e){e&&e.stopPropagation&&e.stopPropagation(),document.removeEventListener("keyup",p),window.removeEventListener("resize",f);var t=document.querySelector("#"+o.id+".banner-notification");t.classList.add("closing"),setTimeout(function(){t.parentNode.removeChild(t)},500)},g=function(){document.querySelector("body").appendChild(b),d();var e=document.querySelector("#"+o.id+" .mini-msg-popup"),t=document.querySelectorAll("#"+o.id+" .banner-notification-close-btn"),i=document.querySelector("#"+o.id+"-banner-notification-dont-show");window.addEventListener("resize",f),e.addEventListener("click",h),e.addEventListener("keypress",function(e){13===e.keyCode&&h()});for(var r=0;r<t.length;r++){var s=t[r];s.addEventListener("click",m),s.addEventListener("keypress",function(e){13==e.keyCode&&m(e)})}n=setTimeout(m,o.fadeAfter),i.addEventListener("click",a),i.addEventListener("keypress",function(e){13===e.keyCode&&a()}),e.focus(),f()},v=l+u+c,b=document.createElement("div");b.setAttribute("id",o.id),b.className="banner-notification",b.innerHTML=v,setTimeout(function(){g()},2e3)}}}),define("issue-checker/CheckedItem",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,i){n(this,e),this.id=t,this.mediaType=i,this.errors=[],this.warnings=[],this.details={}};t.default=i,e.exports=t.default}),define("issue-checker/AGOLCheckedItem",["module","exports","./CheckedItem"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.layers=[],r}return r(t,e),t}(a.default);t.default=s,e.exports=t.default}),define("issue-checker/Result",["module","exports","./helpers/NormalizeHelper","./CheckedItem","./AGOLCheckedItem"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=r(o),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(t){a(this,e),this.media={maps:s.default.createObject(),scenes:s.default.createObject(),layers:s.default.createObject(),images:s.default.createObject(),videos:s.default.createObject(),audio:s.default.createObject(),webpages:s.default.createObject()},this.errors=s.default.createObject(),this.warnings=s.default.createObject(),t&&this._addMediaEntries(t)}return c(e,[{key:"_addMediaEntries",value:function(e){if(e.imageIDs){var t=!0,n=!1,i=void 0;try{for(var o,r=e.imageIDs[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,c=new l.default(a,"image");s.default.addEntry(this.media.images,a,c)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}if(e.audioIDs){var d=!0,p=!1,f=void 0;try{for(var h,m=e.audioIDs[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value,v=new l.default(g,"audio");s.default.addEntry(this.media.audio,g,v)}}catch(e){p=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(p)throw f}}}if(e.videoIDs){var b=!0,y=!1,_=void 0;try{for(var w,C=e.videoIDs[Symbol.iterator]();!(b=(w=C.next()).done);b=!0){var k=w.value,x=new l.default(k,"video");s.default.addEntry(this.media.videos,k,x)}}catch(e){y=!0,_=e}finally{try{!b&&C.return&&C.return()}finally{if(y)throw _}}}if(e.webpageIDs){var E=!0,T=!1,S=void 0;try{for(var P,O=e.webpageIDs[Symbol.iterator]();!(E=(P=O.next()).done);E=!0){var I=P.value,M=new l.default(I,"webpage");s.default.addEntry(this.media.webpages,I,M)}}catch(e){T=!0,S=e}finally{try{!E&&O.return&&O.return()}finally{if(T)throw S}}}if(e.mapIDs){var A=!0,N=!1,j=void 0;try{for(var L,D=e.mapIDs[Symbol.iterator]();!(A=(L=D.next()).done);A=!0){var R=L.value,F=new u.default(R,"map");s.default.addEntry(this.media.maps,R,F)}}catch(e){N=!0,j=e}finally{try{!A&&D.return&&D.return()}finally{if(N)throw j}}}if(e.sceneIDs){var B=!0,U=!1,H=void 0;try{for(var $,z=e.sceneIDs[Symbol.iterator]();!(B=($=z.next()).done);B=!0){var W=$.value,V=new u.default(W,"scene");s.default.addEntry(this.media.scenes,W,V)}}catch(e){U=!0,H=e}finally{try{!B&&z.return&&z.return()}finally{if(U)throw H}}}}},{key:"addLayerEntries",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=e.layers[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,l=this.media.layers.byId[a.id];l?-1===l.maps.indexOf(e.id)&&l.maps.push(e.id):(a.maps.push(e.id),s.default.addEntry(this.media.layers,a.id,a))}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}}]),e}();t.default=d,e.exports=t.default}),define("issue-checker/helpers/Formatter",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"removeProtocol",value:function(e){return e.replace(/(.*?):\/\//,"//")}},{key:"extractHostname",value:function(e){var t=/.*\/\/([^\/:]*)/.exec(e);return t&&t[1]?t[1]:e}}]),e}();t.default=o,e.exports=t.default}),define("issue-checker/media/Media",["module","exports","./../IssueTypes","dojo/request","esri/config","./../helpers/Formatter"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=a(n),u=a(i),c=a(o),d=a(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(){s(this,e)}return p(e,null,[{key:"check",value:function(e){var t=e.items,n=e.mediaType,i=e.appUrl,o=e.portal,r=[],a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,p=this._checkItem({item:d,mediaType:n,appUrl:i,portal:o});r.push(p)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}return Promise.all(r).then(function(e){return{mediaType:n,items:e}})}},{key:"_checkItem",value:function(e){var t=this,n=e.item,i=e.mediaType,o=e.appUrl,r=e.portal;return new Promise(function(e){t._isUrlHttp(n.id)?t._calculateHttpsFixPotential(n.id,r.portalHostname).then(function(t){var a=l.default[i][t];r.isPortal?n.warnings.push(a):!o||-1!==o.indexOf("https://")||r.allSSL?n.errors.push(a):n.warnings.push(a),e(n)}):e(n)})}},{key:"_isUrlHttp",value:function(e){return/http:\/\//.test(e)}},{key:"_calculateHttpsFixPotential",value:function(e,t){var n=this,i=d.default.extractHostname(e);return new Promise(function(e){n._isOnHttpsWhitelist(i,t)?e("httpContentFixable"):n._requestDomain(i,e)})}},{key:"_requestDomain",value:function(e,t){var n=c.default.defaults.io.proxyUrl+"?https://"+e;(0,u.default)(n,{method:"head",timeout:15e3}).response.then(function(e){t(200===e.status?"httpContentFixable":"httpContentIndeterminate")},function(){t("httpContentUnfixable")})}},{key:"_isOnHttpsWhitelist",value:function(e,t){return-1!==this._getHttpsEnabledDomains(t).findIndex(function(t){return t===e||-1!==e.indexOf("."+t)})}},{key:"_getHttpsEnabledDomains",value:function(e){return["arcgis.com","youtube.com","youtu.be","vimeo.com","staticflickr.com","flickr.com","ggpht.com","googleusercontent.com","unsplash.com",e]}}]),e}();t.default=f,e.exports=t.default}),define("issue-checker/media/Images",["module","exports","esri/IdentityManager","esri/arcgis/utils","./../IssueTypes","./Media"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}
}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,null,[{key:"check",value:function(e){return m(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{mediaType:"images"}))}},{key:"_checkItem",value:function(e){var n=this;return m(t.__proto__||Object.getPrototypeOf(t),"_checkItem",this).call(this,e).then(function(e){return new Promise(function(i){var o=new Image;e.details.source=t._getSource(e.id);var r=window.setTimeout(function(){t._onImageError(e,i)},15e3);o.onload=function(){window.clearTimeout(r),i(e)},o.onerror=function(){window.clearTimeout(r),t._onImageError(e,i)};var a=d.default.arcgisUrl.split("/sharing/")[0],s=c.default.findCredential(a),l=n._isAGOLImage(e),u="";s&&l&&-1===e.id.indexOf("?token")&&-1===e.id.indexOf("&token")&&(u="?token="+s.token),o.src=e.id+u})})}},{key:"_onImageError",value:function(e,t){e.errors.push(p.default.images.inaccessible),t(e)}},{key:"_getSource",value:function(e){var t={};return t=new RegExp("\\/\\/fbcdn|fbcdn\\.net"),t.test(e)?"facebook":(t=new RegExp("flickr\\.com"),t.test(e)?"flickr":(t=new RegExp("\\.ggpht\\.com|lh[1-9]\\.googleusercontent\\."),t.test(e)?"googlePlus":"url"))}},{key:"_isAGOLImage",value:function(e){return!(!e.id||!e.id.match(new RegExp("/sharing/rest/content/items/.*?/resources/")))}}]),t}(f.default);t.default=g,e.exports=t.default}),define("issue-checker/media/Videos",["module","exports","esri/request","esri/config","./../IssueTypes","./Media"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,null,[{key:"check",value:function(e){return m(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{mediaType:"videos"}))}},{key:"_checkItem",value:function(e){return m(t.__proto__||Object.getPrototypeOf(t),"_checkItem",this).call(this,Object.assign(e)).then(function(e){return new Promise(function(n){var i=/(youtube\.com\/(watch\?v\=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,o=/^.*(vimeo\.com\/)((video\/))?([0-9]+)/,r=i.exec(e.id),a=o.exec(e.id);r?t._checkYouTubeVideo(e,r,n):a?t._checkVimeoVideo(e,a,n):t._onVideoError(e,n)})})}},{key:"_checkYouTubeVideo",value:function(e,n,i){if(e.details.source="youTube",4!==n.length)t._onVideoError(e,i);else{var o=n[3];(0,c.default)({url:"https://www.googleapis.com/youtube/v3/videos",content:{part:"snippet",id:o,key:"AIzaSyCHc4DP7IJU2neC0lbuKh5Fg5g3RVeRoiE"},timeout:4e3}).then(function(n){n.items&&n.items.length>0?i(e):t._onVideoError(e,i)},function(){t._onVideoError(e,i)})}}},{key:"_checkVimeoVideo",value:function(e,n,i){if(e.details.source="vimeo",5!==n.length)t._onVideoError(e,i);else{var o=n[4];d.default&&d.default.defaults.io.corsEnabledServers.indexOf("vimeo.com")<0&&d.default.defaults.io.corsEnabledServers.push("vimeo.com"),(0,c.default)({url:"https://vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+o}).then(function(n){n&&"video"===n.type?i(e):t._onVideoError(e,i)},function(){t._onVideoError(e,i)})}}},{key:"_onVideoError",value:function(e,t){e.errors.push(p.default.videos.inaccessible),t(e)}}]),t}(f.default);t.default=g,e.exports=t.default}),define("issue-checker/media/Audio",["module","exports","esri/IdentityManager","esri/arcgis/utils","./../IssueTypes","./Media"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,null,[{key:"check",value:function(e){return m(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{mediaType:"audio"}))}},{key:"_checkItem",value:function(e){var n=this;return m(t.__proto__||Object.getPrototypeOf(t),"_checkItem",this).call(this,e).then(function(e){return new Promise(function(i){var o=new window.Audio,r=window.setTimeout(function(){t.resolveAndClear(e,r,i)},1e4);o.onloadedmetadata=function(){t.resolveAndClear(e,r,i)},o.ondurationchange=function(){o.duration&&(window.clearTimeout(r),isFinite(o.duration)?t.resolveAndClear(e,r,i):t._onAudioError(e,i))},o.onerror=function(){window.clearTimeout(r),t._onAudioError(e,i)};var a=d.default.arcgisUrl.split("/sharing/")[0],s=c.default.findCredential(a),l="";s&&n._isAGOLAudio(e)&&-1===e.id.indexOf("?token")&&-1===e.id.indexOf("&token")&&(l="?token="+s.token),e.id&&(o.src=e.id+l)})})}},{key:"resolveAndClear",value:function(e,t,n){window.clearTimeout(t),n(e)}},{key:"_onAudioError",value:function(e,t){e.errors.push(p.default.audio.inaccessible),t(e)}},{key:"_isAGOLAudio",value:function(e){return!(!e.id||!e.id.match(new RegExp("/sharing/rest/content/items/.*?/resources/")))}}]),t}(f.default);t.default=g,e.exports=t.default}),define("issue-checker/media/Webpages",["module","exports","./Media"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),s(t,null,[{key:"check",value:function(e){return l(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{mediaType:"webpages"}))}}]),t}(a.default);t.default=u,e.exports=t.default}),define("issue-checker/media/AGOLItem",["module","exports","./Media","esri/arcgis/utils","esri/request","esri/IdentityManager","./../IssueTypes"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(o),h=s(r),m=s(a),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,null,[{key:"check",value:function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e.items[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=this._checkItem({item:l,appAccess:e.appAccess,mediaType:t,privileges:e.privileges});n.push(u)}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return Promise.all(n).then(function(e){return{mediaType:t,items:e}})}},{key:"_checkItem",value:function(e){var t=this;return new Promise(function(n){var i=p.default.arcgisUrl+"/"+e.item.id;(0,f.default)({url:i,content:{f:"json"},timeout:15e3}).then(function(i){t._onItemSuccess(i,e,n)},function(i){t._onItemError(i,e,n)})})}},{key:"_onItemError",value:function(e,t,n){400===e.httpCode?t.item.errors.push(m.default[t.mediaType].deleted):403===e.httpCode?t.item.errors.push(m.default[t.mediaType].unauthorized):t.item.errors.push(m.default[t.mediaType].inaccessible),n(t.item)}},{key:"_onItemSuccess",value:function(e,t,n){if(t.item.details.sharingLevel=this._assignSharingLevel(e.access),t.item.details.owner=e.owner,"maps"===t.mediaType)t.item.details.title=e.title;else if("layers"===t.mediaType){var i=-1!==e.typeKeywords.indexOf("Hosted Service"),o=-1!==e.typeKeywords.indexOf("Service Proxy");t.item.details.hostedServiceOrServiceProxy=o||i}var r=p.default.arcgisUrl.split("/sharing/")[0],a=h.default.findCredential(r).userId,s=t.item.details.owner===a,l=this._determineCanShare(s,e.itemControl);t.item.details.privileges=this._findSharingPrivileges({privileges:t.privileges,canShare:l,isOwner:s}),this._checkSharingLevel(t,l),n(t.item)}},{key:"_assignSharingLevel",value:function(e){return"account"===e?"org":"shared"===e?"private":e}},{key:"_determineCanShare",value:function(e,t){return!!e||("admin"===t||"update"===t)}},{key:"_findSharingPrivileges",value:function(e){return e.canShare&&e.privileges?e.isOwner?{publicly:e.privileges.canShareMinePublic,org:e.privileges.canShareMineOrg}:{publicly:e.privileges.canShareOthersPublic,org:e.privileges.canShareOthersOrg}:{publicly:!1,org:!1}}},{key:"_checkSharingLevel",value:function(e,t){"public"===e.appAccess?"org"!==e.item.details.sharingLevel&&"private"!==e.item.details.sharingLevel||(t?e.item.errors.push(m.default[e.mediaType].unshared):e.item.errors.push(m.default[e.mediaType].othersUnshared)):"org"!==e.appAccess&&"account"!==e.appAccess||"private"===e.item.details.sharingLevel&&e.item.errors.push(m.default[e.mediaType].unshared)}}]),t}(d.default);t.default=v,e.exports=t.default}),define("issue-checker/media/layers/AGOLHostedLayer",["module","exports","esri/arcgis/utils","./../AGOLItem"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(){r(this,e)}return l(e,null,[{key:"check",value:function(e){return e.layerResults.details.title=e.layerItem.title,s.default._checkItem({item:e.layerResults,appAccess:e.appAccess,mediaType:e.mediaType,privileges:e.privileges}).then(function(e){var t=a.default.arcgisUrl.split("/sharing/")[0];return e.details.linkURL=t+"/home/item.html?id="+e.id,e})}}]),e}();t.default=u,e.exports=t.default}),define("issue-checker/media/layers/ServiceLayer",["module","exports","./../../IssueTypes","./../../helpers/Formatter"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(){r(this,e)}return l(e,null,[{key:"check",value:function(e){var t=this;return new Promise(function(n){e.layerResults.details.title=e.layer.title,e.layerResults.details.url=e.layer.url;var i=e.layer.url;i&&!e.keepProtocol&&(i=s.default.removeProtocol(e.layer.url));var o=new e.CalledClass(i),r=window.setTimeout(function(){t._onLayerError(null,e.layerResults,n)},15e3);o.on("load",function(i){if(window.clearTimeout(r),t._checkIfCredentialedLayer({layer:i.layer,orgId:e.orgId}))return t._checkSecureLayer({layer:e.layerResults,url:e.layer.url,resolve:n,appAccess:e.appAccess,premiumManager:e.premiumManager});n(e.layerResults)}),o.on("error",function(i){window.clearTimeout(r),t._onLayerError(i,e.layerResults,n)})})}},{key:"_checkSecureLayer",value:function(e){return e.premiumManager?e.premiumManager.checkSecureService(e.url).then(function(t){"public"!==e.appAccess||t.hasProxy||(t.isPremium?e.layer.errors.push(a.default.layers.premiumContent):t.isSubscription&&e.layer.errors.push(a.default.layers.subscriptionContent)),e.resolve(e.layer)},function(){e.resolve(e.layer)}):e.resolve(e.layer)}},{key:"_checkIfCredentialedLayer",value:function(e){var t=e.layer,n=e.orgId;return!(!t.credential||!n)}},{key:"_onLayerError",value:function(e,t,n){t.errors.push(a.default.layers.inaccessible),n(t)}}]),e}();t.default=u,e.exports=t.default}),define("issue-checker/media/layers/FeatureLayer",["module","exports","esri/layers/FeatureLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{CalledClass:l.default}))}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/ImageServiceLayer",["module","exports","esri/layers/ArcGISImageServiceLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{CalledClass:l.default}))}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/TiledMapServiceLayer",["module","exports","esri/layers/ArcGISTiledMapServiceLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{CalledClass:l.default}))}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/DynamicMapServiceLayer",["module","exports","esri/layers/ArcGISDynamicMapServiceLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{CalledClass:l.default}))}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/VectorTileLayer",["module","exports","esri/layers/VectorTileLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{CalledClass:l.default}))}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/GeoRSSLayer",["module","exports","esri/layers/GeoRSSLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},e,{CalledClass:l.default,keepProtocol:!0}))}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/LayerCheckedItem",["module","exports","./CheckedItem"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"layer"));return n.maps=[],n}return r(t,e),t}(a.default);t.default=s,e.exports=t.default}),define("issue-checker/media/Layers",["module","exports","./Media","./layers/AGOLHostedLayer","./layers/FeatureLayer","./layers/ImageServiceLayer","./layers/TiledMapServiceLayer","./layers/DynamicMapServiceLayer","./layers/VectorTileLayer","./layers/GeoRSSLayer","./../LayerCheckedItem","./../IssueTypes"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=p(n),v=p(i),b=p(o),y=p(r),_=p(a),w=p(s),C=p(l),k=p(u),x=p(c),E=p(d),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),T(t,null,[{key:"check",value:function(e){var t=[],n=!0,i=!1,o=void 0;try{for(var r,a=e.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,l=this._checkItem({item:s,appAccess:e.appAccess,premiumManager:e.premiumManager,orgId:e.orgId,privileges:e.privileges});t.push(l)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return Promise.all(t).then(function(e){return{mediaType:"layers",items:e}})}},{key:"_checkItem",value:function(e){if("VectorTileLayer"===e.item.layerType&&(e.item.url=e.item.styleUrl),e.item.itemId||e.item.url){if(e.item.itemId&&!e.item.url){var t=new x.default(e.item.itemId);return v.default.check({layerItem:e.item,appAccess:e.appAccess,mediaType:"layers",layerResults:t,privileges:e.privileges})}if("CSV"===e.item.type||"KML"===e.item.type||"WMS"===e.item.type||"WFS"===e.item.type||"WebTiledLayer"===e.item.type)return Promise.resolve({id:e.item.id,mediaType:"layer",errors:[],warnings:[],maps:[],details:{title:e.item.title,notChecked:!0}});if(e.item.itemId&&e.item.url){var n=new x.default(e.item.itemId);return this._checkItemURLService({item:e.item,appAccess:e.appAccess,layerResults:n,premiumManager:e.premiumManager,orgId:e.orgId,privileges:e.privileges})}var i=new x.default(e.item.id);return this._checkURLService({layer:e.item,appAccess:e.appAccess,layerResults:i,premiumManager:e.premiumManager,orgId:e.orgId})}return Promise.resolve({id:e.item.id,mediaType:"layer",errors:[],warnings:[],maps:[],details:{title:e.item.title}})}},{key:"_checkItemURLService",value:function(e){var t=this;return v.default.check({layerItem:e.item,appAccess:e.appAccess,mediaType:"layers",layerResults:e.layerResults,privileges:e.privileges}).then(function(n){return n.details.hostedServiceOrServiceProxy?n:(t._removeLayerIssue(n.errors,E.default.layers.deleted),t._removeLayerIssue(n.errors,E.default.layers.inaccessible),t._removeLayerIssue(n.errors,E.default.layers.unauthorized),t._checkURLService({layer:e.item,appAccess:e.appAccess,layerResults:n,premiumManager:e.premiumManager,orgId:e.orgId}))})}},{key:"_checkURLService",value:function(e){return"ArcGISFeatureLayer"===e.layer.layerType?b.default.check(e):"ArcGISImageServiceLayer"===e.layer.layerType?y.default.check(e):"ArcGISTiledMapServiceLayer"===e.layer.layerType?_.default.check(e):"ArcGISMapServiceLayer"===e.layer.layerType?w.default.check(e):"VectorTileLayer"===e.layer.layerType?C.default.check(e):"GeoRSS"===e.layer.layerType?k.default.check(e):w.default.check(e)}},{key:"_removeLayerIssue",value:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}]),t}(g.default);t.default=S,e.exports=t.default}),define("issue-checker/media/Maps",["module","exports","esri/request","esri/arcgis/utils","./AGOLItem","./Layers"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}
}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,null,[{key:"check",value:function(e){var n=this;return m(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,e,"maps").then(function(t){return n._checkAllLayers(t,e.appAccess,e.premiumManager,e.orgId,e.privileges)})}},{key:"_checkAllLayers",value:function(e,t,n,i,o){var r=this,a=[],s=!0,l=!1,u=void 0;try{for(var c,d=e.items[Symbol.iterator]();!(s=(c=d.next()).done);s=!0)!function(){var e=c.value,s=r._getAllLayers(e.id).then(function(e){return f.default.check({items:e,appAccess:t,premiumManager:n,orgId:i,privileges:o})}).then(function(t){return e.layers=t.items,e});a.push(s)}()}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}return Promise.all(a).then(function(){return e})}},{key:"_getAllLayers",value:function(e){return new Promise(function(t){(0,c.default)({url:d.default.arcgisUrl+"/"+e+"/data",content:{f:"json"},timeout:15e3}).then(function(e){var n=e.baseMap.baseMapLayers,i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.isBasemap=!0}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}var l=n.concat(e.operationalLayers);t(l)},function(){t([])})})}}]),t}(p.default);t.default=g,e.exports=t.default}),define("issue-checker/Issue",["module","exports","./IssueTypes"],function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){o(this,e);var i=e.getIssueDetails(t);this.id=t,this.mediaType=i.mediaType,this.media=n,this.actions=i.actions}return a(e,null,[{key:"getIssueDetails",value:function(e){var t;return(t={},i(t,r.default.images.inaccessible,{mediaType:"images",actions:[]}),i(t,r.default.images.httpContentFixable,{mediaType:"images",actions:[]}),i(t,r.default.images.httpContentUnfixable,{mediaType:"images",actions:[]}),i(t,r.default.images.httpContentIndeterminate,{mediaType:"images",actions:[]}),i(t,r.default.audio.inaccessible,{mediaType:"audio",actions:[]}),i(t,r.default.audio.httpContentFixable,{mediaType:"audio",actions:[]}),i(t,r.default.audio.httpContentUnfixable,{mediaType:"audio",actions:[]}),i(t,r.default.audio.httpContentIndeterminate,{mediaType:"audio",actions:[]}),i(t,r.default.videos.inaccessible,{mediaType:"videos",actions:[]}),i(t,r.default.videos.httpContentFixable,{mediaType:"videos",actions:[]}),i(t,r.default.videos.httpContentUnfixable,{mediaType:"videos",actions:[]}),i(t,r.default.videos.httpContentIndeterminate,{mediaType:"videos",actions:[]}),i(t,r.default.webpages.httpContentFixable,{mediaType:"webpages",actions:[]}),i(t,r.default.webpages.httpContentUnfixable,{mediaType:"webpages",actions:[]}),i(t,r.default.webpages.httpContentIndeterminate,{mediaType:"webpages",actions:[]}),i(t,r.default.maps.inaccessible,{mediaType:"maps",actions:[]}),i(t,r.default.maps.deleted,{mediaType:"maps",actions:[]}),i(t,r.default.maps.unauthorized,{mediaType:"maps",actions:[]}),i(t,r.default.maps.unshared,{mediaType:"maps",actions:["maps/share"]}),i(t,r.default.maps.othersUnshared,{mediaType:"maps",actions:[]}),i(t,r.default.layers.inaccessible,{mediaType:"layers",actions:[]}),i(t,r.default.layers.deleted,{mediaType:"layers",actions:[]}),i(t,r.default.layers.unauthorized,{mediaType:"layers",actions:[]}),i(t,r.default.layers.unshared,{mediaType:"layers",actions:["layers/share"]}),i(t,r.default.layers.othersUnshared,{mediaType:"layers",actions:[]}),i(t,r.default.layers.premiumContent,{mediaType:"layers",actions:["layers/sharePremiumContent"]}),i(t,r.default.layers.subscriptionContent,{mediaType:"layers",actions:["layers/shareSubscriptionContent"]}),i(t,r.default.layers.secureService,{mediaType:"layers",actions:[]}),t)[e]}}]),e}();t.default=s,e.exports=t.default}),define("issue-checker/Share",["module","exports","esri/arcgis/utils","esri/request","./media/Maps","./Result","./helpers/NormalizeHelper","./IssueTypes"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=l(n),d=l(i),p=l(o),f=l(r),h=l(a),m=l(s),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(){function e(){u(this,e)}return g(e,null,[{key:"shareApp",value:function(e){var t=this;return new Promise(function(n,i){var o=[];o.push(t.share({sharingLevel:e.sharingLevel,owner:e.owner,id:e.appID})),e.media.mapIDs&&o.push(t._shareMaps(e.media,e.sharingLevel,e.premiumManager,e.orgId,e.privileges)),Promise.all(o).then(function(t){var o=t[0],r=t[1],a=r&&r.unsharedItems.length;!o.success||a?i({appShared:o.success,sharedItems:r?r.sharedItems:[],unsharedItems:r?r.unsharedItems:[]}):n({sharingLevel:e.sharingLevel,itemsChanged:r?r.sharedItems:[]})})})}},{key:"_shareMaps",value:function(e,t,n,i,o){var r=this;return new Promise(function(a){var s=new f.default(e),l=h.default.getAllItems(s.media.maps);p.default.check({items:l,appAccess:t,premiumManager:n,orgId:i,privileges:o}).then(function(e){var i=[],o=!0,s=!1,l=void 0;try{for(var u,c=e.items[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;-1!==d.errors.indexOf(m.default.maps.unshared)&&i.push(r.share({sharingLevel:t,owner:d.details.owner,id:d.id}));var p=!0,f=!1,h=void 0;try{for(var g,v=d.layers[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=g.value;r._shareLayer({layer:b,promises:i,sharingLevel:t,premiumManager:n})}}catch(e){f=!0,h=e}finally{try{!p&&v.return&&v.return()}finally{if(f)throw h}}}}catch(e){s=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}Promise.all(i).then(function(e){r._onBulkShareComplete(e,a)})})})}},{key:"_shareLayer",value:function(e){-1!==e.layer.errors.indexOf(m.default.layers.unshared)&&e.promises.push(this.share({sharingLevel:e.sharingLevel,owner:e.layer.details.owner,id:e.layer.id})),-1!==e.layer.errors.indexOf(m.default.layers.subscriptionContent)&&e.promises.push(e.premiumManager.addProxies([{id:e.layer.id,url:e.layer.details.url}]).then(function(e){return{success:!0,id:e[0].id}},function(e){return{success:!1,id:e[0].id}}))}},{key:"_onBulkShareComplete",value:function(e,t){var n={sharedItems:[],unsharedItems:[]},i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.success?n.sharedItems.push(l.id):n.unsharedItems.push(l.id)}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}t(n)}},{key:"share",value:function(e){return new Promise(function(t){var n={org:"org"===e.sharingLevel||"account"===e.sharingLevel,public:"public"===e.sharingLevel},i=c.default.arcgisUrl.split("/items")[0];(0,d.default)({url:i+"/users/"+e.owner+"/shareItems",content:{f:"json",items:[e.id],everyone:n.public,org:n.org}},{usePost:!0}).then(function(n){var i=n.results[0];t(i.success?{id:e.id,success:!0}:{id:e.id,success:!1})},function(n){t({id:e.id,success:!1})})})}}]),e}();t.default=v,e.exports=t.default}),define("issue-checker/Fix",["module","exports","./Share"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,null,[{key:"fixMapsShare",value:function(e){return new Promise(function(t,n){var i=[],r=!0,a=!1,s=void 0;try{for(var l,u=e.items[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;i.push(o.default.share({id:c.id,owner:c.owner,sharingLevel:e.sharingLevel}))}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}Promise.all(i).then(function(e){var i=[],o=[],r=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;c.success?o.push(c.id):i.push(c.id)}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}i.length?n({fixedItems:o,unfixedItems:i}):t({fixedItems:o})})})}},{key:"fixPremiumSubscriptionContent",value:function(e,t){return new Promise(function(n,i){t.addProxies(e).then(function(e){var t=e.map(function(e){return e.id});n({fixedItems:t})},function(e){var t=e.map(function(e){return e.id});i({fixedItems:[],unfixedItems:t})})})}}]),e}();t.default=a,e.exports=t.default}),define("issue-checker/Privileges",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.canShareMineOrg=!1,this.canShareMinePublic=!1,this.canShareOthersOrg=!1,this.canShareOthersPublic=!1,t&&(this.canShareMineOrg=!0,this.canShareMinePublic=!0)}return i(e,null,[{key:"findPrivileges",value:function(t){if(t.user.orgId){var n=this._findOrgPrivileges(t.user.privileges),i=this._checkIfAdmin(t.user);return t.canSharePublic||i||(n.canShareMinePublic=!1,n.canShareOthersPublic=!1),n}return new e(!0)}},{key:"_findOrgPrivileges",value:function(t){var n=new e(!1),i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"portal:user:shareToPublic"===l?n.canShareMinePublic=!0:"portal:user:shareToOrg"===l?n.canShareMineOrg=!0:"portal:admin:shareToPublic"===l?(n.canShareMinePublic=!0,-1!==t.indexOf("portal:admin:viewItems")&&-1!==t.indexOf("portal:admin:updateItems")&&(n.canShareOthersPublic=!0)):"portal:admin:shareToOrg"===l&&(n.canShareMineOrg=!0,-1!==t.indexOf("portal:admin:viewItems")&&-1!==t.indexOf("portal:admin:updateItems")&&(n.canShareOthersOrg=!0))}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}},{key:"_checkIfAdmin",value:function(e){return"org_admin"===e.role.toLowerCase()&&!e.roleId}}]),e}();t.default=o,e.exports=t.default}),define("issue-checker/PremiumManager",["module","exports","dojo/on","esri/arcgis/AppProxyManager","esri/dijit/AppProxySettings","./helpers/Formatter"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=(a(n),a(i)),u=a(o),c=a(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(t,n){s(this,e),this._appProxyManager=null,this._appProxySettings=null;var i=/(.*\/)/.exec(n),o=i?i[0]:"",r=c.default.removeProtocol(o),a="http:"+r,d="https:"+r;this._appProxyManager=new l.default({appid:t,referrers:[a,d]}),this._appProxySettings=new u.default({proxyManagerOptions:{appid:t},webmaps:[]},null)}return d(e,[{key:"checkSecureService",value:function(e){var t=this;return this._checkIfPremiumContent(e).then(function(n){return(n.isPremium||n.isSubscription)&&(n.hasProxy=t._checkForProxy(e)),n})}},{key:"_checkForProxy",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._appProxyManager.proxies[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if(c.default.removeProtocol(e)===c.default.removeProtocol(a.sourceUrl))return!0}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return!1}},{key:"_checkIfPremiumContent",value:function(e){var t=this;return new Promise(function(n,i){if(t._appProxyManager.loaded){var o=t._resolvePremiumContent(e);n(o)}else t._appProxyManager.on("load",function(){var i=t._resolvePremiumContent(e);n(i)}),t._appProxyManager.on("error",function(){i()})})}},{key:"_resolvePremiumContent",value:function(e){var t=this._appProxySettings._isPremium(e),n=this._appProxySettings._isSubscriber(e);return n&&(t=!1),{isPremium:n,isSubscription:t,hasProxy:!1}}},{key:"addProxies",value:function(e){var t=this;return new Promise(function(n,i){var o=[],r=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;o.push({sourceUrl:c.url})}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}t._appProxyManager.createProxies(o).then(function(){n(e)},function(){i(e)})})}}]),e}();t.default=p,e.exports=t.default}),define("issue-checker/IssueChecker",["module","exports","esri/config","esri/arcgis/utils","./Result","./helpers/NormalizeHelper","./media/Images","./media/Videos","./media/Audio","./media/Webpages","./media/Maps","./Issue","./Share","./Fix","./Privileges","./PremiumManager"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h,m){"use strict";function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var b=g(n),y=g(i),_=g(o),w=g(r),C=g(a),k=g(s),x=g(l),E=g(u),T=g(c),S=g(d),P=g(p),O=g(f),I=g(h),M=g(m),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),N=function(){function e(t){v(this,e),this.owner=t?t.owner:"",this.privileges=t&&t.portal?I.default.findPrivileges(t.portal):null,t&&(t.proxyUrl&&(b.default.defaults.io.proxyUrl=t.proxyUrl),t.arcgisUrl&&(y.default.arcgisUrl=t.arcgisUrl),t.appUrl&&(this.appUrl=t.appUrl),t.appId&&t.appUrl&&!t.disablePremiumManager&&(this.premiumManager=new M.default(t.appId,t.appUrl)),t.portal&&(this.portal=t.portal),t.disablePremiumManager&&(this.disablePremiumManager=t.disablePremiumManager)),b.default.defaults.io.proxyUrl||(b.default.defaults.io.proxyUrl="https://www.arcgis.com/sharing/proxy")}return A(e,[{key:"onFirstAppSave",value:function(e){this.disablePremiumManager||(this.premiumManager=new M.default(e.appId,e.appUrl)),this.appUrl=e.appUrl}},{key:"check",value:function(e){var t=this,n=new _.default(e.media),i=w.default.getAllItems(n.media.images),o=C.default.check({items:i,appUrl:this.appUrl,portal:this.portal}),r=w.default.getAllItems(n.media.videos),a=k.default.check({items:r,appUrl:this.appUrl,portal:this.portal}),s=w.default.getAllItems(n.media.audio),l=x.default.check({items:s,appUrl:this.appUrl,portal:this.portal}),u=w.default.getAllItems(n.media.webpages),c=E.default.check({items:u,appUrl:this.appUrl,portal:this.portal}),d=w.default.getAllItems(n.media.maps),p=T.default.check({items:d,appAccess:e.appAccess,premiumManager:this.premiumManager,orgId:this.portal.user.orgId,privileges:this.privileges}).then(function(e){return t._groomMapLayerData(n,e),e}),f=[o,a,l,c,p];return Promise.all(f).then(function(){return n.errors=t._compileIssues(n.media,n.errors,"errors"),n.warnings=t._compileIssues(n.media,n.warnings,"warnings"),n})}},{key:"_groomMapLayerData",value:function(e,t){var n=!0,i=!1,o=void 0;try{for(var r,a=t.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;e.addLayerEntries(s);var l=s.layers.slice(0);s.layers=l.map(function(e){return e.id})}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"_compileIssues",value:function(e,t,n){for(var i in e)if(e.hasOwnProperty(i)){var o=w.default.getAllItems(e[i]),r=!0,a=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;this._compileItemIssues(c.id,t,c[n])}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}}return t}},{key:"_compileItemIssues",value:function(e,t,n){var i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=t.byId[l];if(u)u.media.push(e);else{var c=new S.default(l,[e]);w.default.addEntry(t,l,c)}}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}}},{key:"fix",value:function(e){return"maps/share"===e.action||"layers/share"===e.action||"content/share"===e.action?O.default.fixMapsShare({items:e.items,sharingLevel:e.details.sharingLevel}):"layers/sharePremiumContent"===e.action||"layers/shareSubscriptionContent"===e.action?O.default.fixPremiumSubscriptionContent(e.items,this.premiumManager):Promise.reject({fixedItems:[],unfixedItems:e.items.map(function(e){return e.id})})}},{key:"share",value:function(e){var t=Object.assign({},e,{owner:this.owner,premiumManager:this.premiumManager,orgId:this.portal.user.orgId,privileges:this.privileges});return P.default.shareApp(t)}}]),e}();t.default=N,e.exports=t.default});var CanvasImage=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};CanvasImage.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},CanvasImage.prototype.update=function(e){this.context.putImageData(e,0,0)},CanvasImage.prototype.getPixelCount=function(){return this.width*this.height},CanvasImage.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},CanvasImage.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var ColorThief=function(){};if(ColorThief.prototype.getColor=function(e,t){return this.getPalette(e,5,t)[0]},ColorThief.prototype.getPalette=function(e,t,n){void 0===t&&(t=10),(void 0===n||1>n)&&(n=10);for(var i,o,r,a,s=new CanvasImage(e),l=s.getImageData(),u=l.data,c=s.getPixelCount(),d=[],p=0;c>p;p+=n)i=4*p,o=u[i+0],r=u[i+1],a=u[i+2],u[i+3]>=125&&(o>250&&r>250&&a>250||d.push([o,r,a]));var f=MMCQ.quantize(d,t),h=f?f.palette():null;return s.removeCanvas(),h},!pv)var pv={map:function(e,t){var n={};return t?e.map(function(e,i){return n.index=i,t.call(n,e)}):e.slice()},naturalOrder:function(e,t){return t>e?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,i,o){return n.index=o,e+t.call(n,i)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?pv.map(e,t):e)}};var MMCQ=function(){function e(e,t,n){return(e<<2*l)+(t<<l)+n}function t(e){function t(){n.sort(e),i=!0}var n=[],i=!1;return{push:function(e){n.push(e),i=!1},peek:function(e){return i||t(),void 0===e&&(e=n.length-1),n[e]},pop:function(){return i||t(),n.pop()},size:function(){return n.length},map:function(e){return n.map(e)},debug:function(){return i||t(),n}}}function n(e,t,n,i,o,r,a){var s=this;s.r1=e,s.r2=t,s.g1=n,s.g2=i,s.b1=o,s.b2=r,s.histo=a}function i(){this.vboxes=new t(function(e,t){return pv.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function o(t){var n,i,o,r,a=1<<3*l,s=new Array(a);return t.forEach(function(t){i=t[0]>>u,o=t[1]>>u,r=t[2]>>u,n=e(i,o,r),s[n]=(s[n]||0)+1}),s}function r(e,t){var i,o,r,a=1e6,s=0,l=1e6,c=0,d=1e6,p=0;return e.forEach(function(e){i=e[0]>>u,o=e[1]>>u,r=e[2]>>u,a>i?a=i:i>s&&(s=i),l>o?l=o:o>c&&(c=o),d>r?d=r:r>p&&(p=r)}),new n(a,s,l,c,d,p,t)}function a(t,n){if(n.count()){var i=n.r2-n.r1+1,o=n.g2-n.g1+1,r=n.b2-n.b1+1,a=pv.max([i,o,r]);if(1==n.count())return[n.copy()];var s,l,u,c,d,p=0,f=[],h=[];if(a==i)for(s=n.r1;s<=n.r2;s++){for(c=0,l=n.g1;l<=n.g2;l++)for(u=n.b1;u<=n.b2;u++)d=e(s,l,u),c+=t[d]||0;p+=c,f[s]=p}else if(a==o)for(s=n.g1;s<=n.g2;s++){for(c=0,l=n.r1;l<=n.r2;l++)for(u=n.b1;u<=n.b2;u++)d=e(l,s,u),c+=t[d]||0;p+=c,f[s]=p}else for(s=n.b1;s<=n.b2;s++){for(c=0,l=n.r1;l<=n.r2;l++)for(u=n.g1;u<=n.g2;u++)d=e(l,u,s),c+=t[d]||0;p+=c,f[s]=p}return f.forEach(function(e,t){h[t]=p-e}),function(e){var t,i,o,r,a,l=e+"1",u=e+"2",c=0;for(s=n[l];s<=n[u];s++)if(f[s]>p/2){for(o=n.copy(),r=n.copy(),t=s-n[l],i=n[u]-s,a=i>=t?Math.min(n[u]-1,~~(s+i/2)):Math.max(n[l],~~(s-1-t/2));!f[a];)a++;for(c=h[a];!c&&f[a-1];)c=h[--a];return o[u]=a,r[l]=o[u]+1,[o,r]}}(a==i?"r":a==o?"g":"b")}}function s(e,n){function s(e,t){for(var n,i=1,o=0;c>o;)if(n=e.pop(),n.count()){var r=a(l,n),s=r[0],u=r[1];if(!s)return;if(e.push(s),u&&(e.push(u),i++),i>=t)return;if(o++>c)return}else e.push(n),o++}if(!e.length||2>n||n>256)return!1;var l=o(e),u=0;l.forEach(function(){u++});var p=r(e,l),f=new t(function(e,t){return pv.naturalOrder(e.count(),t.count())});f.push(p),s(f,d*n);for(var h=new t(function(e,t){return pv.naturalOrder(e.count()*e.volume(),t.count()*t.volume())});f.size();)h.push(f.pop());s(h,n-h.size());for(var m=new i;h.size();)m.push(h.pop());return m}var l=5,u=8-l,c=1e3,d=.75;return n.prototype={volume:function(e){var t=this;return(!t._volume||e)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var n=this,i=n.histo;if(!n._count_set||t){var o,r,a,s=0;for(o=n.r1;o<=n.r2;o++)for(r=n.g1;r<=n.g2;r++)for(a=n.b1;a<=n.b2;a++)index=e(o,r,a),s+=i[index]||0;n._count=s,n._count_set=!0}return n._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,i=n.histo;if(!n._avg||t){var o,r,a,s,u,c=0,d=1<<8-l,p=0,f=0,h=0;for(r=n.r1;r<=n.r2;r++)for(a=n.g1;a<=n.g2;a++)for(s=n.b1;s<=n.b2;s++)u=e(r,a,s),o=i[u]||0,c+=o,p+=o*(r+.5)*d,f+=o*(a+.5)*d,h+=o*(s+.5)*d;n._avg=c?[~~(p/c),~~(f/c),~~(h/c)]:[~~(d*(n.r1+n.r2+1)/2),~~(d*(n.g1+n.g2+1)/2),~~(d*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(e){var t=this,n=e[0]>>u;return gval=e[1]>>u,bval=e[2]>>u,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},i.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,i,o=this.vboxes,r=0;r<o.size();r++)n=Math.sqrt(Math.pow(e[0]-o.peek(r).color[0],2)+Math.pow(e[1]-o.peek(r).color[1],2)+Math.pow(e[2]-o.peek(r).color[2],2)),(t>n||void 0===t)&&(t=n,i=o.peek(r).color);return i},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return pv.naturalOrder(pv.sum(e.color),pv.sum(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,i=e[n].color;i[0]>251&&i[1]>251&&i[2]>251&&(e[n].color=[255,255,255])}},{quantize:s}}();define("lib/color-thief/dist/color-thief.min",function(){}),define("storymaps/tpl/builder/BuilderView",["lib-build/tpl!./BuilderView","lib-build/less!./BuilderView","storymaps-react/tpl/builder/Controller","storymaps/tpl/utils/UI","storymaps/tpl/builder/mediaPicker/MediaPickerPopup","storymaps-react/tpl/builder/settings/Popup","storymaps-react/tpl/builder/AppParser","storymaps/tpl/utils/CommonHelper","storymaps/tpl/builder/BuilderHelper","storymaps/tpl/builder/BannerNotification","issue-checker/helpers/NormalizeHelper","issue-checker/IssueChecker","dojo/Deferred","dojo/topic","dojo/_base/lang","esri/IdentityManager","esri/arcgis/utils","lib/color-thief/dist/color-thief.min"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h,m,g){return function(t,p){function v(){var e=app.data.sections;e&&e.length&&(app.Controller.renderHeader(),b())}function b(){var e=app.data.sections;if(e&&e.length){var t=e[e.length-1];if(t&&"credits"==t.type)e[e.length-2].setVisibility(!1);else{var n=e.length>3;n||("immersive"==e[1].type?n=!0:"sequence"==e[1].type&&e[1].getNumberOfBlocks()>=3&&(n=!0)),e[e.length-1].setVisibility(n)}}}function y(e){var t={config:{author:{name:""}},settings:{theme:{colors:app.Controller.THEME_DEFAULT_COLORS},header:app.Controller.SHARED_STYLE_HEADER_SETTINGS||{}},template:{name:app.cfg.TPL_NAME,createdWith:app.version,editedWith:app.version,dataVersion:"1.0.0"},sections:[]},n=h.clone(t),i=[{type:"text",text:{value:'<p class="block block-placeholder"></p>'}}];e.webmapId?i=[app.ui.MediaFactory.createInstance({mediaJSON:{type:"webmap",webmap:{id:e.webmapId}}}).serialize(!1)]:e.websceneId&&(i=[app.ui.MediaFactory.createInstance({mediaJSON:{type:"webscene",webscene:{id:e.websceneId}}}).serialize(!1)]);var o=h.getObject("story.settings.theme.colors.bgMain")||"#fff";return n.sections=[app.ui.SectionFactory.createInstance({type:"cover",foreground:{title:e.title,subtitle:e.subtitle}}).serialize(!1),app.ui.SectionFactory.createInstance({type:"sequence",background:app.ui.MediaFactory.createInstance({mediaJSON:{type:"color",color:{value:o}}}).serialize(!1),foreground:{blocks:i}}).serialize(!1)],n}$("#builder-views").append(e({}));var _=null,w=null,C=null;this.init=function(){app.builder.pendingChanges=0,w=new o({container:$(".media-picker-popup")}),app.builder.mediaPicker=w,_=new r({container:$("#settings-popup")}),app.builder.settingsPopup=_,f.subscribe("builder-section-update",v),f.subscribe("tpl-ready",function(){b(),f.publish("builder-story-title-update",app.Controller.getStoryTitle());var e=l.getPortalURL(),t=h.clone(app.data.appItem.item);C=new d({owner:t.owner||m.findCredential(e).userId,portal:app.portal,appId:app.builder.isDirectCreationFirstSave?null:app.data.appItem.item.id,appUrl:app.builder.isDirectCreationFirstSave?null:app.data.appItem.item.url,arcgisUrl:g.arcgisUrl}),this.scanApp(),f.subscribe("builder-should-check-story",function(){this.scanApp()}.bind(this)),app.isPortal||this.initBannerNotification()}.bind(this))},this.initBannerNotification=function(){var e=i18n.builder.httpsTransitionMessage;new u({id:"httpsTransitionMessage",bannerMsg:e.bannerMsg,mainMsgHtml:'          <h2 class="banner-notification-text">'+e.s1h1+'</h2>          <p class="banner-notification-text">'+e.s1p1+'</p>          <p class="banner-notification-text">'+e.s1p2+'</p>          <h2 class="banner-notification-text">'+e.s2h1+'</h2>          <p class="banner-notification-text">'+e.s2p1+"</p>        ",actions:[{primary:!0,string:e.action1,closeOnAction:!0},{string:e.action2,action:function(){window.open("https://storymaps.arcgis.com/en/my-stories/")}},{string:e.action3,action:function(){window.open("https://links.esri.com/storymaps/web_security_faq")}}],cookie:{domain:"arcgis.com",path:"/",maxAge:31536e3}})},this.appInitComplete=function(){var e=null;if(app.data.appItem||void 0===s.getUrlParams().fromScratch&&void 0===s.getUrlParams().fromscratch){if(app.data.appItem&&app.Controller.isStoryBlank()){var t=null,n=null;app.data.appItem.data&&app.data.appItem.data.values&&(t=app.data.appItem.data.values.webmap,n=app.data.appItem.data.values.webscene),e=y({webmapId:t,websceneId:n,title:app.data.appItem.item.title||"",subtitle:app.data.appItem.item.snippet||""})}}else e=y({title:"",subtitle:""}),app.data.appItem={item:l.getBlankAppJSON(),data:{values:null}},app.data.title=app.data.appItem.item.title;e&&(app.data.appItem.data.values=e),f.subscribe("builder-story-title-update",function(e){document.title=e}),f.publish("builder-story-title-update",app.Controller.getStoryTitle()),app.isProduction||"media-picker"!=s.getUrlParams().debug||app.builder.mediaPicker.open({mode:"add"}).then(function(){},function(){})},this.updateUI=function(){},this.saveApp=function(){var e=n.serializeStory(!1,!1);app.data.title=app.Controller.getStoryTitle(),app.data.appItem.data.values.sections=e,app.data.appItem.data.values.template.editedWith=app.version,p.saveApp()},this.saveFailed=function(e){"DUPLICATE"===e&&(app.data.sections[0].showTitleError(),app.Controller.navigateToSection({index:0,animate:!1}))},this.shareApp=function(e){var t=this.getScanData();return C.share({appID:app.data.appItem.item.id,sharingLevel:e,media:t.mediaIDs})},this.resize=function(){},this.onFirstAppSave=function(){C.onFirstAppSave({appId:app.data.appItem.item.id,appUrl:app.data.appItem.item.url})},this.scanApp=function(){f.publish("check-app-started");var e=this.getScanData();return C.check({media:e.mediaIDs,appAccess:app.data.appItem.item.access}).then(function(t){this.addAppContext(t,e);var n=this.getMediaBySections(e.media);app.Controller.addContextSpecificIssues(n),this.aggregateContextIssues(e.media,e.warnings),this.addFixMethods(e.errors);var i=this.compileIssueSections(e.media);app.Controller.reportScanResults(e,i)}.bind(this))},this.aggregateContextIssues=function(e,t){for(var n in e)e.hasOwnProperty(n)&&"layers"!==n&&this.aggregateContextIssuesByMediaType(e[n],t)},this.aggregateContextIssuesByMediaType=function(e,t){for(var n=c.getAllItems(e),i="content/noAlternateMedia",o=0;o<n.length;o++){var r=n[o],a=h.getObject("scanResult.warnings",!1,r);a&&a.length&&-1!==a.indexOf(i)&&(-1===t.allItems.indexOf(i)&&c.addEntry(t,i,{actions:[],id:i,media:[],mediaType:"content"}),t.byId[i].media.push(r.instanceID))}},this.getMediaBySections=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"layers"!==n&&this.getSectionMediaByMediaType(t,e[n]);return t},this.getSectionMediaByMediaType=function(e,t){for(var n=c.getAllItems(t),i=0;i<n.length;i++){var o=n[i],r=o.section;r in e||(e[r]={}),e[r][o.instanceID]=o}},this.getScanData=function(){var e=n.serializeStory(!0,!0),t=a.getMedia(e);return{mediaIDs:this.getMediaIDs(t),media:t}},this.getMediaIDs=function(e){return{mapIDs:this.flattenMediaById(e.maps),sceneIDs:this.flattenMediaById(e.scenes),imageIDs:this.flattenMediaById(e.images),videoIDs:this.flattenMediaById(e.videos),audioIDs:this.flattenMediaById(e.audio),webpageIDs:this.flattenMediaById(e.webpages)}},this.flattenMediaById=function(e){for(var t=[],n=0;n<e.allItems.length;n++){var i=e.allItems[n],o=e.byId[i];-1===t.indexOf(o.id)&&t.push(o.id)}return t},this.addAppContext=function(e,t){for(var n in e.media)e.media.hasOwnProperty(n)&&t.media.hasOwnProperty(n)&&this.addAppContextByMedia(e.media[n],t.media[n]);t.media.layers=this.addLayerContext(e.media.layers,t.media),t.errors=this.assignIssuesToInstances(e.errors,t.media),t.warnings=this.assignIssuesToInstances(e.warnings,t.media)},this.assignIssuesToInstances=function(e,t){for(var n=c.getAllItems(e),i=0;i<n.length;i++){for(var o=[],r=n[i],a=0;a<r.media.length;a++){var s=r.media[a],l=this.findInstancesById(s,t,r.mediaType);o=o.concat(l)}r.media=o}return e},this.findInstancesById=function(e,t,n){var i=[],o=[];switch(n){case"maps":o=c.getAllItems(t.maps);break;case"images":o=c.getAllItems(t.images);break;case"audio":o=c.getAllItems(t.audio);break;case"scenes":o=c.getAllItems(t.scenes);break;case"videos":o=c.getAllItems(t.videos);break;case"webpages":o=c.getAllItems(t.webpages);break;case"layers":o=c.getAllItems(t.layers)}for(var r=0;r<o.length;r++){var a=o[r];a.id===e&&i.push(a.instanceID)}return i},this.addAppContextByMedia=function(e,t){for(var n=c.getAllItems(t),i=0;i<n.length;i++){var o=n[i],r=e.byId[o.id];o.scanResult=$.extend(!0,{},r)}},this.addLayerContext=function(e,t){var n=c.createObject();return this.addLayerContextByMedia(t.maps,e,n,"map"),this.addLayerContextByMedia(t.scenes,e,n,"scene"),n},
this.addLayerContextByMedia=function(e,t,n,o){for(var r=c.getAllItems(e),a=0;a<r.length;a++){for(var s=r[a],l=[],u=0;u<s.scanResult.layers.length;u++){var d=s.scanResult.layers[u],p=t.byId[d],f={id:p.id,instanceID:i.getUID(),mediaType:"layer",section:s.section,scanResult:$.extend(!0,{},p)};delete f.scanResult.maps,delete f.scanResult.scenes,f.scanResult[o]=s.instanceID,l.push(f.instanceID),c.addEntry(n,f.instanceID,f)}s.scanResult.layers=l}},this.addFixMethods=function(e){for(var t=c.getAllItems(e),n=0;n<t.length;n++)this.addFixMethodsByIssue(t[n])},this.addFixMethodsByIssue=function(e){for(var t=null,n=0;n<e.actions.length;n++){t=e.actions[n];var i={id:t,fix:this.getFixFunction(t)};e.actions[n]=i}},this.getFixFunction=function(e){return function(t){return C.fix({action:e,items:t.items,details:t.details}).then(function(e){return this.scanApp().then(function(){return e})}.bind(this),function(e){return this.scanApp().then(function(){return e})}.bind(this))}.bind(this)},this.compileIssueSections=function(e){var t={errorSections:[],warningSections:[]};for(var n in e)e.hasOwnProperty(n)&&(this.compileIssueSectionsByMedia(e[n],t.errorSections,"errors"),this.compileIssueSectionsByMedia(e[n],t.warningSections,"warnings"));return t},this.compileIssueSectionsByMedia=function(e,t,n){for(var i=c.getAllItems(e),o=0;o<i.length;o++){var r=i[o];r.scanResult[n]&&r.scanResult[n].length&&this.addIssueSections(r.section,t)}},this.addIssueSections=function(e,t){-1===t.indexOf(e)&&t.push(e)}}}),define("lib-build/less!storymaps-react/tpl/view/media/Text",[],function(){}),define("storymaps-react/tpl/view/media/Text",["module","exports","lib-build/less!./Text"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){n(this,e),this.type="text",this._text=t}return i(e,[{key:"check",value:function(e){return this._text&&e?"block"==e.placement||(console.log("Could not render text block in section"),!1):(console.log("Could not render text block in section"),!1)}},{key:"render",value:function(e){return this.check(e)?this._text.value:null}},{key:"postCreate",value:function(){}},{key:"update",value:function(){}},{key:"load",value:function(){}},{key:"performAction",value:function(){}},{key:"getArcGISContent",value:function(){return[]}},{key:"getPreviewText",value:function(){return $(this._text.value).html()}}]),e}();t.default=o,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,"function"==typeof r?r.call(e,{name:"classes",hash:{},data:i}):r))+'" contenteditable="false">\n  <div class="block-media-wrapper">\n    <figure class="block-media" style="max-width:'+s((r=null!=(r=t.maxImageWidth||(null!=e?e.maxImageWidth:e))?r:a,"function"==typeof r?r.call(e,{name:"maxImageWidth",hash:{},data:i}):r))+';">\n      <div class="media-loading">\n        <span class="large-loader"></span>\n      </div>\n      <div class="image-container media-item" style="padding-top: '+s((r=null!=(r=t.padding||(null!=e?e.padding:e))?r:a,"function"==typeof r?r.call(e,{name:"padding",hash:{},data:i}):r))+'%" aria-label="'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+'" role="img"></div>\n      <div class="builder-ui media-cfg-invite"></div>\n      <div class="builder-ui img-gallery-invite">\n        <div class="img-gallery-invite-background"></div>\n        <i class="img-gallery-add fa fa-plus" aria-hidden="true" data-toggle="tooltip"></i>\n      </div>\n      <div class="builder-ui media-delete"></div>\n    </figure>\n  </div>\n  <figcaption class="block-caption" data-placeholder="'+s((r=null!=(r=t.placeholder||(null!=e?e.placeholder:e))?r:a,"function"==typeof r?r.call(e,{name:"placeholder",hash:{},data:i}):r))+'" contenteditable="'+s((r=null!=(r=t.captionEditable||(null!=e?e.captionEditable:e))?r:a,"function"==typeof r?r.call(e,{name:"captionEditable",hash:{},data:i}):r))+'">';return r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,o="function"==typeof r?r.call(e,{name:"caption",hash:{},data:i}):r,null!=o&&(l+=o),l+'</figcaption>\n  <div class="builder-ui media-cfg-panel"></div>\n</div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div class="media-loading">\n  <span class="large-loader"></span>\n</div>\n<div id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="'+a((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:r,"function"==typeof o?o.call(e,{name:"classes",hash:{},data:i}):o))+' media-item" aria-label="'+a((o=null!=(o=t.altText||(null!=e?e.altText:e))?o:r,"function"==typeof o?o.call(e,{name:"altText",hash:{},data:i}):o))+'" role="img"></div>\n\x3c!--<div class="caption">'+a((o=null!=(o=t.caption||(null!=e?e.caption:e))?o:r,"function"==typeof o?o.call(e,{name:"caption",hash:{},data:i}):o))+'</div>--\x3e\n<div class="builder-ui media-cfg-invite"></div>\n<div class="builder-ui media-cfg-panel"></div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Image",[],function(){}),define("storymaps-react/tpl/view/media/Image",["module","exports","./Media","storymaps/tpl/utils/CommonHelper","lib-build/hbars!./ImageBlock","lib-build/hbars!./ImageBackground","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/utils/UI","dojo/Deferred","lib-build/less!./Image"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(o),g=u(r),v=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},C="resources/tpl/builder/icons/media-placeholder/image.jpg",k="resources/tpl/builder/icons/immersive-panel/image.png",x=function(e){function t(e,n){c(this,t);var i=h.default.uploadedImageNeedsFixing(e.url);if(i&&(e.url=h.default.fixUploadedImageUrl(e.url),e.thumbUrl&&(e.thumbUrl=h.default.fixUploadedImageUrl(e.thumbUrl))),e.url&&(e.url=h.default.fixUrlWithMultipleQueryParams(e.url)),e.sizes&&e.sizes.length){var o=$("body").width()||window.screen.width;e.sizes.forEach(function(e){e.longestSide=Math.max(e.width,e.height),i&&(e.url=h.default.fixUploadedImageUrl(e.url)),e.url=h.default.fixUrlWithMultipleQueryParams(e.url)}),e.sizes.sort(function(e,t){return t.longestSide===e.longestSide?Math.min(t.width,t.height)-Math.min(e.width,e.height):t.longestSide-e.longestSide});var r=void 0,a=e.sizes[0];e.sizes.every(function(e){return e.longestSide>o-50&&(a=e,!0)}),e.sizes.every(function(e){return e.longestSide>=250&&(r=e,!0)}),a.url&&a.width&&a.height&&(e.url=a.url,e.width=a.width,e.height=a.height),r&&(e.thumbUrl=r.url)}var s=e.url;e.dataUrl&&e.uploadDeferred&&(s=b.default.getUID());var l=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"image",id:s,previewThumb:e.thumbUrl||e.dataUrl||e.url||C,previewIcon:k}));return l._image=e,l._placement=null,l._isNewMedia=n,l._image.options||(l._image.options={}),e.dataUrl&&e.uploadDeferred&&(l._isUploadPending=!0,l._image.url=e.dataUrl,delete l._image.dataUrl,e.uploadDeferred.then(l._onUploadSuccess.bind(l),l._onUploadFail.bind(l))),l}return p(t,e),_(t,[{key:"render",value:function(e){var t="",n=[];if(!this._image||!e)return console.log("Could not render image in section"),t;if(this._placement=e.placement,"block"==this._placement){this._setBlockFitHeight();var i=this._computeBlockStyle();n.push("block-size-"+i.size),i.isPortrait&&n.push("portrait"),"large"===i.size&&this._image.options.fitHeight&&n.push("fit-height"),t+=(0,m.default)({id:this._domID,classes:["block","image"].concat(n).join(" "),padding:i.padding,maxImageWidth:i.maxWidth,altText:this._image.altText,caption:this._image.caption,placeholder:v.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder})}else"background"==e.placement&&(t+=(0,g.default)({id:this._domID,classes:["image","image-background"].join(" "),altText:this._image.altText,caption:this._image.caption}));return t}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find("#"+this._domID).parent(),this._isUploadPending&&this._onUploadStart(),this._applyConfig())}},{key:"_applyConfig",value:function(){var e=this._image.options;this._applyPlacement(),this._applySize(e),"block"===this._placement&&"large"===e.size&&this._applyFitHeight(),w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e)}},{key:"_applySize",value:function(e){if(e.size=e.size||"small","block"===this._placement){var t=this._computeBlockStyle();this._node.find(".block-media").css("max-width",t.maxWidth)}}},{key:"_applyFitHeight",value:function(){this._node.toggleClass("fit-height",this._image.options.fitHeight)}},{key:"_applyPlacement",value:function(){if(this._image.options&&this._image.options.placement){var e=this._node.find(".image-background"),t=this._image.options.placement;if("fill"===t.type)if(e.css("background-size","cover"),t.fill){var n={width:e.width(),height:e.height()},i={width:this._image.width,height:this._image.height},o=f.default.getTargetDimensions(i,n),r=f.default.findCropDistance(o,e,t.fill);e.css("background-position",r.x+"px "+r.y+"px")}else e.css("background-position","50% 50%");else"fit"===t.type&&(e.css("background-color",t.fit.color),e.css("background-size","contain"),e.css("background-position","50% 50%"))}}},{key:"preload",value:function(){var e=new y.default,t=new window.Image;return t.onload=function(t){var n=t.currentTarget.naturalWidth,i=t.currentTarget.naturalHeight;e.resolve({width:n,height:i}),app.builder||this._isAlternate||this.removeError&&this.removeError()}.bind(this),t.onerror=function(){app.builder?this._isAlternate?this.setAlternateError({showLoadingError:!0}):this.setError({showLoadingError:!0}):this._isAlternate||this.setError({minimizeInViewer:!0})}.bind(this),t.src=f.default.addToken(this._image.url),e}},{key:"load",value:function(){var e=this;if(this._isAlternate)return this.loadAlternate();var t=new y.default;return this._isLoaded||!this._node?t:(this._isLoaded=!0,this.preload().then(function(t){if(t&&t.width&&t.height&&(e._image.width=t.width,e._image.height=t.height,"block"===e._placement)){var n=e._computeBlockStyle();e._node.find(".image-container").css("padding-top",n.padding+"%"),e._node.find(".block-media").css("max-width",n.maxWidth),e._node.find(".block-caption").css("max-width",n.maxWidth),e._node.find(".block-caption").css("min-width","30%")}e._fadeInMedia()}),"block"==this._placement?this._node.find(".image-container").css("backgroundImage",'url("'+f.default.addToken(this._image.url)+'")'):(this._node.find(".image-background").css("backgroundImage",'url("'+f.default.addToken(this._image.url)+'")'),this._image["mobile-pos"]&&b.default.isMobileBrowser()&&this._node.find(".image-background").css("backgroundPositionX",this._image["mobile-pos"])),t.resolve(),t)}},{key:"loadAlternate",value:function(){var e=this,t=new y.default;return this._isLoaded?t:(this._isLoaded=!0,this.preload().then(function(t){t&&t.width&&t.height&&(e._image.width=t.width,e._image.height=t.height)}),t.resolve(),t)}},{key:"performAction",value:function(){this._isLoaded||this.load()}},{key:"resize",value:function(){this._applyPlacement()}},{key:"isLoaded",value:function(){return!0}},{key:"getNode",value:function(){return this._node}},{key:"update",value:function(){}},{key:"isPlaceholder",value:function(){return!!this._image.isPlaceholder}},{key:"_computeBlockStyle",value:function(){var e="small";this._image.options&&this._image.options.size&&(e=this._image.options.size);var t=this._image.height>=this._image.width,n=this._image.height/this._image.width*100;return n=Math.round(10*n)/10,{size:e,padding:n,isPortrait:t,maxWidth:"large"!==e?this._image.width+"px":"none"}}},{key:"_setBlockFitHeight",value:function(){void 0===this._image.options.fitHeight&&(this._isNewMedia?this._image.options.fitHeight=!1:this._image.options.fitHeight=!0)}}]),t}(f.default);t.default=x,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageGallery",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression,s=this.lambda;return'    <img alt="" src="'+a((o=null!=(o=t.url||(null!=e?e.url:e))?o:r,"function"==typeof o?o.call(e,{name:"url",hash:{},data:i}):o))+'" data-index="'+a(s(i&&i.index,e))+'" data-image="'+a((o=null!=(o=t.url||(null!=e?e.url:e))?o:r,"function"==typeof o?o.call(e,{name:"url",hash:{},data:i}):o))+'" data-description="" data-width="'+a((o=null!=(o=t.width||(null!=e?e.width:e))?o:r,"function"==typeof o?o.call(e,{name:"width",hash:{},data:i}):o))+'" data-height="'+a((o=null!=(o=t.height||(null!=e?e.height:e))?o:r,"function"==typeof o?o.call(e,{name:"height",hash:{},data:i}):o))+'"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.imageGalleryID||(null!=e?e.imageGalleryID:e))?r:a,"function"==typeof r?r.call(e,{name:"imageGalleryID",hash:{},data:i}):r))+'" class="image-gallery-wrapper" contenteditable="false">\n';return o=t.each.call(e,null!=e?e.images:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='</div>\n<div class="builder-ui ig-add" data-toggle="tooltip">\n  <span class="ig-action-icon ig-add-icon glyphicon glyphicon-plus"></span>\n</div>\n<div class="builder-ui ig-temp-placeholder"></div>\n<div class="block-caption" data-placeholder="'+s((r=null!=(r=t.placeholder||(null!=e?e.placeholder:e))?r:a,"function"==typeof r?r.call(e,{name:"placeholder",hash:{},data:i}):r))+'" contenteditable="'+s((r=null!=(r=t.captionEditable||(null!=e?e.captionEditable:e))?r:a,"function"==typeof r?r.call(e,{name:"captionEditable",hash:{},data:i}):r))+'">',r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,o="function"==typeof r?r.call(e,{name:"caption",hash:{},data:i}):r,null!=o&&(l+=o),l+"</div>\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageGalleryActionOverlays",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return'<div class="builder-ui hidden ig-item ig-move ig-direction-backward" data-toggle="tooltip">\n  <div class="ig-background">\n    <i class="ig-action-icon ig-move-backward fa fa-arrow-left"></i>\n  </div>\n</div>\n'},3:function(e,t,n,i){return'<div class="builder-ui hidden ig-item ig-move ig-direction-forward" data-toggle="tooltip">\n  <div class="ig-background">\n    <i class="ig-action-icon ig-move-forward fa fa-arrow-right"></i>\n  </div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r='<div class="builder-ui hidden ig-item ig-media-swap">\n  <div class="ig-background"></div>\n  <i class="ig-action-icon ig-settings fa fa-pencil"></i>\n</div>\n';return o=t.unless.call(e,null!=(o=null!=e?e.itemProperties:e)?o.isFirst:o,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(r+=o),o=t.unless.call(e,null!=(o=null!=e?e.itemProperties:e)?o.isLast:o,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r+'<div class="builder-ui hidden ig-item ig-media-delete">\n  <div class="ig-background"></div>\n  <i class="ig-action-icon ig-remove fa fa-trash-o"></i>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/ImageGallery",[],function(){});var g_ugFunctions=new UGFunctions;if(jQuery.fn.unitegallery=function(e){var t=jQuery(this),n="#"+t.attr("id");if(!e)var e={};var i=new UniteGalleryMain;return i.run(n,e),new UG_API(i)},void 0!==g_ugFunctions?g_ugFunctions.registerTheme("tiles"):jQuery(document).ready(function(){g_ugFunctions.registerTheme("tiles")}),define("storymaps/tpl/utils/UniteGallery",function(){}),define("storymaps-react/tpl/view/media/ImageGallery",["module","exports","storymaps/tpl/utils/UI","./Media","storymaps/tpl/utils/CommonHelper","lib-build/hbars!./ImageGallery","lib-build/hbars!./ImageGalleryActionOverlays","lib-build/i18n!resources/tpl/viewer/nls/app","lib-build/i18n!resources/tpl/builder/nls/app","dojo/_base/lang","dojo/topic","lib-build/less!./ImageGallery","lib/jquery/dist/jquery.min","storymaps/tpl/utils/UniteGallery"],function(e,t,n,i,o,r,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),g=d(i),v=d(o),b=d(r),y=d(a),_=d(s),w=d(l),C=d(u),k=d(c),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},T=function(e){function t(e){p(this,t),e.images.forEach(function(e){v.default.uploadedImageNeedsFixing(e.url)&&(e.url=v.default.fixUploadedImageUrl(e.url),e.thumbUrl&&(e.thumbUrl=v.default.fixUploadedImageUrl(e.thumbUrl))),e.instanceID=m.default.getUID()});var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"image-gallery",id:null,previewThumb:null,previewIcon:null}));return n._images=e,n._placement=null,n._gallery=null,n._isLoaded=!1,n}return h(t,e),x(t,[{key:"render",value:function(e){return this._images&&e&&"block"==e.placement?(this._placement=e.placement,this._render(!0)):(console.log("Could not render image gallery in section"),"")}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container){this._node=e.container.find("#"+this._domID);return{isAsync:!0,promise:this._initGallery()}}}},{key:"_initGallery",value:function(){var e=this,t=200,n=5;return app.display.windowWidth<768?t=110:this._images.images.length<=4&&(n=15),this._gallery=this._node.find(".image-gallery-wrapper").unitegallery({gallery_theme:"tiles",gallery_control_keyboard:!1,tiles_type:"justified",theme_preloading_height:0,tile_enable_action:!1,tile_enable_overlay:!1,tiles_justified_row_height:t,tiles_justified_space_between:n,tile_background_color:"rgb(0,0,0,0)"}),this._isLoaded=!0,new Promise(function(t){e._gallery.on("load",function(){e._onGalleryLoaded(),t()}),e._gallery.on("resize",function(){k.default.publish("media-dynamic-resize")})})}},{key:"_onGalleryLoaded",value:function(){var e=this,t=this;if(this._node.find(".ug-thumb-wrapper").each(function(e){var n={isFirst:!1,isLast:!1};0===e?n.isFirst=!0:e===t._images.images.length-1&&(n.isLast=!0),$(this).append((0,y.default)({itemProperties:n}))}),!app.isInBuilder)for(var n=0;n<this._images.images.length;n++)!function(t){var n=e._images.images[t],i=new window.Image;i.onerror=function(){var n=w.default.builder.mediaErrors;e.setError({msg:n.placeholders.inaccessible.replace("${media-type}",n.mediaTypes.image),unfixable:!0,minimizeInViewer:!0,galleryIndex:t})},i.src=g.default.addToken(n.url)}(n)}},{key:"load",value:function(){if(!this._isLoaded)return this._initGallery()}},{key:"performAction",value:function(){}},{key:"resize",value:function(){}},{key:"_render",value:function(e){var t=(0,b.default)({images:this._addTokens(this._images.images),caption:this._images.caption,placeholder:_.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,imageGalleryID:"image-gallery"+this._domID});return e?'<div id="'+this._domID+'" class="block image-gallery" contenteditable="false">'+t+"</div>":t}},{key:"_addTokens",value:function(e){var t=C.default.clone(e),n=!0,i=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;s.url=g.default.addToken(s.url)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t}}]),t}(g.default);t.default=T,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.domId||(null!=e?e.domId:e))?r:a,"function"==typeof r?r.call(e,{name:"domId",hash:{},data:i}):r))+'" class="block block-type-video" contenteditable="false">\n  <div class="block-media-wrapper">\n    <figure class="block-media">\n      <div class="media-loading">\n        <span class="large-loader"></span>\n      </div>\n      <div class="media-media media-item video video-fg video-player" data-id="'+s((r=null!=(r=t.videoId||(null!=e?e.videoId:e))?r:a,"function"==typeof r?r.call(e,{name:"videoId",hash:{},data:i}):r))+'" aria-label="'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+'"></div>\n      <div class="builder-ui media-cfg-invite"></div>\n      <div class="builder-ui media-delete"></div>\n    </figure>\n  </div>\n  <figcaption class="block-caption" data-placeholder="'+s((r=null!=(r=t.placeholder||(null!=e?e.placeholder:e))?r:a,"function"==typeof r?r.call(e,{name:"placeholder",hash:{},data:i}):r))+'" contenteditable="'+s((r=null!=(r=t.captionEditable||(null!=e?e.captionEditable:e))?r:a,"function"==typeof r?r.call(e,{name:"captionEditable",hash:{},data:i}):r))+'">';return r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,o="function"==typeof r?r.call(e,{name:"caption",hash:{},data:i}):r,null!=o&&(l+=o),l+'</figcaption>\n  <div class="builder-ui media-cfg-panel"></div>\n</div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div class="media-loading">\n  <span class="large-loader"></span>\n</div>\n<div id="'+a((o=null!=(o=t.domId||(null!=e?e.domId:e))?o:r,"function"==typeof o?o.call(e,{name:"domId",hash:{},data:i}):o))+'" class="video-viewport">\n  <div class="media-media media-item video video-player" data-id="'+a((o=null!=(o=t.videoId||(null!=e?e.videoId:e))?o:r,"function"==typeof o?o.call(e,{name:"videoId",hash:{},data:i}):o))+'" aria-label="'+a((o=null!=(o=t.altText||(null!=e?e.altText:e))?o:r,"function"==typeof o?o.call(e,{name:"altText",hash:{},data:i}):o))+'"></div>\n</div>\n<button type="button" class="btn btn-link toggle-mute-button" data-placement="left" data-trigger="hover" data-title="'+a((o=null!=(o=t.muteUnmuteString||(null!=e?e.muteUnmuteString:e))?o:r,"function"==typeof o?o.call(e,{name:"muteUnmuteString",hash:{},data:i}):o))+'" aria-label="'+a((o=null!=(o=t.muteUnmuteString||(null!=e?e.muteUnmuteString:e))?o:r,"function"==typeof o?o.call(e,{name:"muteUnmuteString",hash:{},data:i}):o))+'">\n  <span class="toggle-mute-icon glyphicon glyphicon-volume-off"></span>\n</button>\n\n<div class="builder-ui media-cfg-invite"></div>\n<div class="builder-ui media-cfg-panel"></div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBackgroundError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing;return'<div id="'+(0,this.escapeExpression)((o=null!=(o=t.domId||(null!=e?e.domId:e))?o:r,"function"==typeof o?o.call(e,{name:"domId",hash:{},data:i}):o))+'" class="media-media media-item video media-error bring-in"></div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBackgroundErrorDetailed",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div id="'+a((o=null!=(o=t.domId||(null!=e?e.domId:e))?o:r,"function"==typeof o?o.call(e,{name:"domId",hash:{},data:i}):o))+'" class="media-media media-item video media-error bring-in">\n  <div class="media-error-text">'+a((o=null!=(o=t.message||(null!=e?e.message:e))?o:r,"function"==typeof o?o.call(e,{name:"message",hash:{},data:i}):o))+"</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoVimeo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<iframe id="'+a((o=null!=(o=t.domId||(null!=e?e.domId:e))?o:r,"function"==typeof o?o.call(e,{name:"domId",hash:{},data:i}):o))+'" class="'+a((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:r,"function"==typeof o?o.call(e,{name:"classes",hash:{},data:i}):o))+' media-item" src="'+a((o=null!=(o=t.url||(null!=e?e.url:e))?o:r,"function"==typeof o?o.call(e,{name:"url",hash:{},data:i}):o))+'" style="'+a((o=null!=(o=t.options||(null!=e?e.options:e))?o:r,"function"==typeof o?o.call(e,{name:"options",hash:{},data:i}):o))+'" aria-label="'+a((o=null!=(o=t.altText||(null!=e?e.altText:e))?o:r,"function"==typeof o?o.call(e,{name:"altText",hash:{},data:i}):o))+'" data-id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'"></iframe>\n'+a((o=null!=(o=t.playerControls||(null!=e?e.playerControls:e))?o:r,"function"==typeof o?o.call(e,{name:"playerControls",hash:{},data:i}):o))+"\n"},useData:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("lib/vimeo-player-js/dist/player",t):(e.Vimeo=e.Vimeo||{},e.Vimeo.Player=t())}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t){return 0===e.indexOf(t.toLowerCase())?e:"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function o(e){return e instanceof window.HTMLElement}function r(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function a(e){return/^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/.test(e)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.url,i=t||n;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(r(i))return"https://vimeo.com/".concat(i);if(a(i))return i.replace("http:","https:");if(t)throw new TypeError("â".concat(t,"â is not a valid video id."));throw new TypeError("â".concat(i,"â is not a vimeo.com url."))}function l(e,t,n){var i=x.get(e.element)||{};t in i||(i[t]=[]),i[t].push(n),x.set(e.element,i)}function u(e,t){return(x.get(e.element)||{})[t]||[]}function c(e,t,n){var i=x.get(e.element)||{};if(!i[t])return!0;if(!n)return i[t]=[],x.set(e.element,i),!0;var o=i[t].indexOf(n);return-1!==o&&i[t].splice(o,1),x.set(e.element,i),i[t]&&0===i[t].length}function d(e,t){var n=u(e,t);if(n.length<1)return!1;var i=n.shift();return c(e,t,i),i}function p(e,t){var n=x.get(e);x.set(t,n),x.delete(e)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E.reduce(function(t,n){var i=e.getAttribute("data-vimeo-".concat(n));return(i||""===i)&&(t[n]=""===i?1:i),t},t)}function h(e,t){var n=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=n,t.appendChild(i.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise(function(i,o){if(!a(e))throw new TypeError("â".concat(e,"â is not a vimeo.com url."));var r="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(e),"&domain=").concat(window.location.hostname);for(var s in t)t.hasOwnProperty(s)&&(r+="&".concat(s,"=").concat(encodeURIComponent(t[s])));var l="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;l.open("GET",r,!0),l.onload=function(){if(404===l.status)return void o(new Error("â".concat(e,"â was not found.")));if(403===l.status)return void o(new Error("â".concat(e,"â is not embeddable.")));try{var t=JSON.parse(l.responseText);if(403===t.domain_status_code)return h(t,n),void o(new Error("â".concat(e,"â is not embeddable.")));i(t)}catch(e){o(e)}},l.onerror=function(){var e=l.status?" (".concat(l.status,")"):"";o(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))},l.send()})}function g(e){return"string"==typeof e&&(e=JSON.parse(e)),e}function v(e,t,n){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var i={method:t};void 0!==n&&(i.value=n);var o=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));o>=8&&o<10&&(i=JSON.stringify(i)),e.element.contentWindow.postMessage(i,e.origin)}}function b(e,t){t=g(t);var n,i=[];if(t.event){if("error"===t.event){u(e,t.data.method).forEach(function(n){var i=new Error(t.data.message);i.name=t.data.name,n.reject(i),c(e,t.data.method,n)})}i=u(e,"event:".concat(t.event)),n=t.data}else if(t.method){var o=d(e,t.method);o&&(i.push(o),n=t.value)}i.forEach(function(t){try{if("function"==typeof t)return void t.call(e,n);t.resolve(n)}catch(e){}})}
var y="undefined"!=typeof global&&"[object global]"==={}.toString.call(global),_=void 0!==Array.prototype.indexOf,w="undefined"!=typeof window&&void 0!==window.postMessage;if(!(y||_&&w))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var C="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(e){function t(e){return Object(e)===e}if(!e.WeakMap){var n=Object.prototype.hasOwnProperty,i=function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}):e[t]=n};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id",r("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function o(e,i){if(!t(e)||!n.call(e,"_id"))throw new TypeError(i+" method called on incompatible receiver "+typeof e)}function r(e){return e+"_"+a()+"."+a()}function a(){return Math.random().toString().substring(2)}return i(e.prototype,"delete",function(e){if(o(this,"delete"),!t(e))return!1;var n=e[this._id];return!(!n||n[0]!==e)&&(delete e[this._id],!0)}),i(e.prototype,"get",function(e){if(o(this,"get"),t(e)){var n=e[this._id];return n&&n[0]===e?n[1]:void 0}}),i(e.prototype,"has",function(e){if(o(this,"has"),!t(e))return!1;var n=e[this._id];return!(!n||n[0]!==e)}),i(e.prototype,"set",function(e,n){if(o(this,"set"),!t(e))throw new TypeError("Invalid value used as weak map key");var r=e[this._id];return r&&r[0]===e?(r[1]=n,this):(i(e,this._id,[e,n]),this)}),i(e,"_polyfill",!0),e}()}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:C);var k=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(t,n,i){n[t]=n[t]||i(),e.exports&&(e.exports=n[t])}("Promise",C,function(){function e(e,t){p.add(e,t),d||(d=h(p.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)i(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function i(e,n,i){var o,r;try{!1===n?i.reject(e.msg):(o=!0===n?e.msg:n.call(void 0,e.msg),o===i.promise?i.reject(TypeError("Promise-chain cycle")):(r=t(o))?r.call(o,i.resolve,i.reject):i.resolve(o))}catch(e){i.reject(e)}}function o(i){var a,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(a=t(i))?e(function(){var e=new s(l);try{a.call(i,function(){o.apply(e,arguments)},function(){r.apply(e,arguments)})}catch(t){r.call(e,t)}}):(l.msg=i,l.state=1,l.chain.length>0&&e(n,l))}catch(e){r.call(new s(l),e)}}}function r(t){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=t,i.state=2,i.chain.length>0&&e(n,i))}function a(e,t,n,i){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){n(o,e)},i)}(o)}function s(e){this.def=e,this.triggered=!1}function l(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var i=new l(this);this.then=function(t,o){var r={success:"function"!=typeof t||t,failure:"function"==typeof o&&o};return r.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t}),i.chain.push(r),0!==i.state&&e(n,i),r.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){o.call(i,e)},function(e){r.call(i,e)})}catch(e){r.call(i,e)}}var c,d,p,f=Object.prototype.toString,h="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),c=function(e,t,n,i){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(e){c=function(e,t,n){return e[t]=n,e}}p=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,i;return{add:function(o,r){i=new e(o,r),n?n.next=i:t=i,n=i,i=void 0},drain:function(){var e=t;for(t=n=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var m=c({},"constructor",u,!1);return u.prototype=m,c(m,"__NPO__",0,!1),c(u,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),c(u,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),c(u,"all",function(e){var t=this;return"[object Array]"!=f.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var o=e.length,r=Array(o),s=0;a(t,e,function(e,t){r[e]=t,++s===o&&n(r)},i)})}),c(u,"race",function(e){var t=this;return"[object Array]"!=f.call(e)?t.reject(TypeError("Not an array")):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");a(t,e,function(e,t){n(t)},i)})}),u})}),x=new WeakMap,E=["autopause","autoplay","background","byline","color","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","title","transparent","url","width"],T=new WeakMap,S=new WeakMap,P=function(){function t(n){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),window.jQuery&&n instanceof jQuery&&(n.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),n=n[0]),"undefined"!=typeof document&&"string"==typeof n&&(n=document.getElementById(n)),!o(n))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==n.nodeName){var l=n.querySelector("iframe");l&&(n=l)}if("IFRAME"===n.nodeName&&!a(n.getAttribute("src")||""))throw new Error("The player element passed isnât a Vimeo embed.");if(T.has(n))return T.get(n);this.element=n,this.origin="*";var u=new k(function(e,t){var o=function(t){if(a(t.origin)&&i.element.contentWindow===t.source){"*"===i.origin&&(i.origin=t.origin);var n=g(t.data),o="event"in n&&"ready"===n.event,r="method"in n&&"ping"===n.method;if(o||r)return i.element.setAttribute("data-ready","true"),void e();b(i,n)}};if(window.addEventListener?window.addEventListener("message",o,!1):window.attachEvent&&window.attachEvent("onmessage",o),"IFRAME"!==i.element.nodeName){var l=f(n,r);m(s(l),l,n).then(function(e){var t=h(e,n);return i.element=t,i._originalElement=n,p(n,t),T.set(i.element,i),e}).catch(function(e){return t(e)})}});return S.set(this,u),T.set(this.element,this),"IFRAME"===this.element.nodeName&&v(this,"ping"),this}return n(t,[{key:"callMethod",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new k(function(i,o){return t.ready().then(function(){l(t,e,{resolve:i,reject:o}),v(t,e,n)}).catch(function(e){o(e)})})}},{key:"get",value:function(e){var t=this;return new k(function(n,o){return e=i(e,"get"),t.ready().then(function(){l(t,e,{resolve:n,reject:o}),v(t,e)})})}},{key:"set",value:function(e,t){var n=this;return k.resolve(t).then(function(t){if(e=i(e,"set"),void 0===t||null===t)throw new TypeError("There must be a value to set.");return n.ready().then(function(){return new k(function(i,o){l(n,e,{resolve:i,reject:o}),v(n,e,t)})})})}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===u(this,"event:".concat(e)).length&&this.callMethod("addEventListener",e).catch(function(){}),l(this,"event:".concat(e),t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");c(this,"event:".concat(e),t)&&this.callMethod("removeEventListener",e).catch(function(e){})}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=S.get(this)||new k(function(e,t){t(new Error("Unknown player. Probably unloaded."))});return k.resolve(e)}},{key:"addCuePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var e=this;return new k(function(t){S.delete(e),T.delete(e.element),e._originalElement&&(T.delete(e._originalElement),e._originalElement.removeAttribute("data-vimeo-initialized")),e.element&&"IFRAME"===e.element.nodeName&&e.element.remove(),t()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}]),t}();return y||!window.Vimeo||window.Vimeo.Player||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(e))};t.forEach(function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var t=f(e);m(s(t),t,e).then(function(t){return h(t,e)}).catch(n)}catch(e){n(e)}})}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=function(t){if(a(t.origin)&&t.data&&"spacechange"===t.data.event)for(var n=e.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow===t.source){var o=n[i].parentElement;o.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent&&window.attachEvent("onmessage",t)}()),P}),define("lib-build/less!storymaps-react/tpl/view/media/Video",[],function(){}),!window.YT)var YT={loading:0,loaded:0};if(!window.YTConfig)var YTConfig={host:"http://www.youtube.com"};YT.loading||(YT.loading=1,function(){var e=[];YT.ready=function(t){YT.loaded?t():e.push(t)},window.onYTReady=function(){YT.loaded=1;for(var t=0;t<e.length;t++)try{e[t]()}catch(e){}},YT.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&(YTConfig[t]=e[t])};var t=document.createElement("script");t.type="text/javascript",t.id="www-widgetapi-script",t.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflTQYWXP/www-widgetapi.js",t.async=!0;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()),define("lib/youtube-api/index",function(){}),define("storymaps-react/tpl/view/media/Video",["module","exports","./Media","lib-build/hbars!./VideoBlock","lib-build/hbars!./VideoBackground","lib-build/hbars!./VideoBackgroundError","lib-build/hbars!./VideoBackgroundErrorDetailed","lib-build/hbars!./VideoVimeo","storymaps/tpl/utils/UI","lib-build/i18n!resources/tpl/viewer/nls/app","dojo/Deferred","lib/vimeo-player-js/dist/player","lib-build/less!./Video","lib/youtube-api/index"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=p(n),v=p(i),b=p(o),y=p(r),_=p(a),w=p(s),C=p(l),k=p(u),x=p(c),E=p(d),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},P={ratio:16/9},O="resources/tpl/builder/icons/media-placeholder/video.png",I="resources/tpl/builder/icons/immersive-panel/video.png",M=function(e){function t(e){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"video",id:e.source+"-"+e.id,previewThumb:O,previewIcon:I}));return n._video=e,n._source=e.source,n._videoid=e.id,n._start=e.start,n._end=e.end,n._soundLevelPreImmersive=null,n._isMuted=!1,n._placement=null,n._videoPlayer=null,n._loadDeferred=null,n._isVideoLoaded=!1,n._pendingAction=null,n._isSupported=!0,n._sectionType="sequence",n._isBuilderAdd=!1,n._video.options||(n._video.options={}),n}return m(t,e),T(t,[{key:"render",value:function(e){var t="";return this._video&&e?(this._placement=e.placement,"block"==this._placement?t+=(0,v.default)({domId:this._domID,videoId:this.id,caption:this._video.caption,altText:this._video.altText,placeholder:k.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder}):"background"==this._placement&&(C.default.isMobileBrowser()?(this._isSupported=!1,app.data.errorVideoMobile=!0,"immersive"===e.sectionType?t+=(0,_.default)({domId:this._domID,message:k.default.viewer.media.loadingError}):t+=(0,y.default)({domId:this._domID})):t+=(0,b.default)({domId:this._domID,videoId:this.id,altText:this._video.altText,muteUnmuteString:k.default.viewer.media.videoMuteUnmute})),t):(console.log("Could not render video in section"),t)}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._sectionType=e.sectionType,"immersive"!==this._sectionType||this._placement||(this._placement="background"),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._isSupported?(this._node=e.container.find('.video[data-id="'+this.id+'"]').parent().parent(),this._node.find(".toggle-mute-button").tooltip()):this._node=e.container.find("#"+this._domID).parent(),this._nodeMedia=this._node.find(".video-player"),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"_applyConfig",value:function(){var e=this._video.options;if(this._isSupported){if("string"==typeof e&&(e={}),e.size=e.size||"small",this._isVideoLoaded&&e.audio){var n="muted"==this._video.options.audio,i=n?0:1;this._setVolume(i)}S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e)}}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._loadDeferred=new x.default,this._isLoaded||!this._isSupported)return this._loadDeferred.resolve(),this._loadDeferred;if(this._isLoaded=!0,this._isBuilderAdd=e.isBuilderAdd,this._cache[this.id])return this._videoPlayer=this._cache[this.id].videoPlayer,this._isVideoLoaded=!0,this._loadDeferred;if(this._node.find(".toggle-mute-button").on("click",function(){this._isVideoLoaded&&(this._isMuted?this._unMute():this._mute())}.bind(this)),this._isBuilderAdd&&"immersive"===this._sectionType&&this._node.find(".toggle-mute-button").toggleClass("mute-button-active",e.isActive&&"muted"!==this._video.options.audio),"vimeo"==this._source){this._videoPlayer=this.constructVimeoPlayer();try{this._onVimeoPlayerReady()}catch(e){console.error(e)}}else"youtube"==this._video.source&&(this._videoPlayer=this.constructYoutubePlayer());return this._cache[this.id]={videoPlayer:this._videoPlayer,params:{start:this._start,end:this._end}},this._loadDeferred}},{key:"constructVimeoPlayer",value:function(){var e="0",t="";"background"==this._placement?e="1":this._video.options&&"simple"==this._video.options.ui&&(e="1",t='<div class="player-controls"><button class="play">'+k.default.viewer.media.videoPlayPause+'</button>&nbsp;&nbsp;&nbsp;<button class="mute">'+k.default.viewer.media.videoMuteUnmute+"</button></div>");var n="foreground"==this._placement?"video-fg video-player":"video",i="https://player.vimeo.com/video/"+this._videoid+"?title=0&byline=0&portrait=0&transparent=0&api=1&background="+e+"&player_id=player-"+this._domID,o=$((0,w.default)({domId:"player-"+this._domID,classes:n+" initialized",url:i,options:this._video.options,altText:this._video.altText,playerControls:t,id:this.id}));return this._nodeMedia.replaceWith(o),this._nodeMedia=o,new E.default(o[0],{background:"background"===this._placement})}},{key:"constructYoutubePlayer",value:function(){var e,t;return"background"===this._placement&&(e=1,t=this._videoid),new window.YT.Player(this._node.find(".video-player[data-id="+this.id+"]")[0],{height:"",width:"",videoId:this._videoid,playerVars:{loop:e,rel:0,showinfo:0,wmode:"opaque",iv_load_policy:3,start:this._start,end:this._end,enablejsapi:1,playlist:t},events:{onReady:function(e){try{this._onYoutubePlayerReady(e,this._video.id)}catch(e){console.error(e)}}.bind(this),onStateChange:this.onYoutubeStateChange.bind(this),onError:function(){app.builder?this.setError({showLoadingError:!0}):this.setError()}.bind(this)}})}},{key:"resize",value:function(e){"background"==this._placement&&this._resizeVideoBackground(e)}},{key:"performAction",value:function(e){if(this._videoPlayer&&this._isSupported){if(!this._isVideoLoaded)return void(this._pendingAction=e);var t=void 0!==e.viewIndex,n="muted"===this._video.options.audio;t&&this._node.find(".toggle-mute-button").toggleClass("mute-button-active",e.isActive&&"muted"!==this._video.options.audio);try{if("vimeo"==this._video.source)e.isActive?("background"==this._placement&&t&&!n&&this._videoPlayer.getVolume().then(function(t){1!=t?this._soundLevelPreImmersive=t:e.visibilityProgress&&this._setVolume(e.visibilityProgress)}.bind(this)),this._videoPlayer.play()):(this._placement,this._videoPlayer.pause());else if("youtube"==this._video.source)if(e.isActive){if("background"==this._placement&&t&&!n){var i=this._videoPlayer.getVolume();100!=i&&(this._soundLevelPreImmersive=i),this._setVolume(1)}this._videoPlayer.getPlayerState()!==window.YT.PlayerState.PLAYING&&this._videoPlayer.playVideo()}else"background"==this._placement?(null!=this._soundLevelPreImmersive&&this._setVolume(e.visibilityProgress),this._videoPlayer.pauseVideo()):this._videoPlayer.pauseVideo()}catch(e){console.error(e)}}}},{key:"_onVimeoPlayerReady",value:function(){this._isVideoLoaded=!0,"block"==this._placement?this._videoPlayer.pause():(this._mute(),this._isBuilderAdd?this._videoPlayer.play():"immersive"==this._sectionType&&(this._cb=this.handleFirstVimeoImmersivePlay.bind(this),this._videoPlayer.on("play",this._cb)),this._videoPlayer.setLoop(!0)),this._videoPlayer.on("play",this.reloadOrReplayVimeoVideo.bind(this)),this._videoPlayer.on("seek",this.reloadOrReplayVimeoVideo.bind(this)),this._loadDeferred.resolve(),this.resize(),this._applyConfig(),this._fadeInMedia(),this._pendingAction&&(this.performAction(this._pendingAction),this._pendingAction=null)}},{key:"reloadOrReplayVimeoVideo",value:function(e){var t=this.getCachedParams(),n=t?t.start:this._start;(!e||e.seconds<1)&&n&&this._videoPlayer.setCurrentTime(n)}},{key:"handleFirstVimeoImmersivePlay",value:function(){this._videoPlayer.off("play",this._cb),this._node.hasClass("active")&&this._node.parents(".section-immersive.active").length||this._videoPlayer.pause(),this.reloadOrReplayVimeoVideo()}},{key:"_onYoutubePlayerReady",value:function(){this._isVideoLoaded=!0,"background"==this._placement&&(this._mute(),this._videoPlayer.setLoop(!0),this._isBuilderAdd&&this._videoPlayer.playVideo()),this._nodeMedia=this._node.find(".video-player"),this._loadDeferred.resolve(),this.resize(),this._applyConfig(),this._fadeInMedia(),this._pendingAction&&(this.performAction(this._pendingAction),this._pendingAction=null)}},{key:"onYoutubeStateChange",value:function(e){e.data===window.YT.PlayerState.ENDED&&this.reloadOrReplayYoutubeVideo()}},{key:"reloadOrReplayYoutubeVideo",value:function(){if(this._videoPlayer){var e=this.getCachedParams(),t={videoId:this._videoid,startSeconds:e?e.start:this._start,endSeconds:e?e.end:this._end};"background"===this._placement?this._videoPlayer.loadVideoById(t):this._videoPlayer.cueVideoById(t)}}},{key:"getCachedParams",value:function(){var e=this._cache?this._cache[this.id]:null;return e&&e.params}},{key:"_mute",value:function(){this._setVolume(0),"youtube"===this._video.source&&this._videoPlayer.mute(),this._isMuted=!0,this._node.find(".toggle-mute-icon").removeClass("glyphicon-volume-up").addClass("glyphicon-volume-off")}},{key:"_unMute",value:function(){this._isMuted=!1,"youtube"===this._video.source&&this._videoPlayer.unMute(),this._setVolume(1),this._node.find(".toggle-mute-icon").removeClass("glyphicon-volume-off").addClass("glyphicon-volume-up")}},{key:"_setVolume",value:function(e){if(!this._isMuted)try{"vimeo"===this._video.source?this._videoPlayer.setVolume(e):"youtube"!==this._video.source||this._videoPlayer.getVolume()||this._videoPlayer.setVolume(100*e)}catch(e){console.error(e)}}},{key:"_resizeVideoBackground",value:function(e){if(e=e||{windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight},this._nodeMedia&&this._isSupported){var t=-1,n=-1,i=app.display.windowWidth,o=app.display.windowHeight+60;i/o<P.ratio?(t=o*P.ratio,n=o):(t=i,n=t/P.ratio),this._nodeMedia.css({width:t,height:n}),this._nodeMedia.parent().css({width:i,height:o}),this._nodeMedia.parent().scrollLeft((t-i)/2),this._nodeMedia.parent().scrollTop((n-o)/2)}}}]),t}(g.default);t.default=M,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebMapBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,"function"==typeof r?r.call(e,{name:"classes",hash:{},data:i}):r))+'" contenteditable="false">\n  <div class="block-media-wrapper">\n    <figure class="block-media">\n      <div class="media-loading">\n        <span class="large-loader"></span>\n      </div>\n      <div class="media-media media-item map" data-builder-invite="" data-id="'+s((r=null!=(r=t.webmapId||(null!=e?e.webmapId:e))?r:a,"function"==typeof r?r.call(e,{name:"webmapId",hash:{},data:i}):r))+'" data-options="'+s((r=null!=(r=t.options||(null!=e?e.options:e))?r:a,"function"==typeof r?r.call(e,{name:"options",hash:{},data:i}):r))+'" aria-label="'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+'"></div>\n      <div class="interaction-container">\n        <button class="btn btn-default btn-sm">\n          <span class="int-container-disabled">\n            <span class="glyphicon glyphicon-fullscreen"></span>\n            '+s((r=null!=(r=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?r:a,"function"==typeof r?r.call(e,{name:"labelExploreStart",hash:{},data:i}):r))+'\n          </span>\n          <span class="int-container-enabled">\n            '+s((r=null!=(r=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?r:a,"function"==typeof r?r.call(e,{name:"labelExploreStop",hash:{},data:i}):r))+'\n          </span>\n        </button>\n      </div>\n      <div class="builder-ui media-cfg-invite"></div>\n      <div class="builder-ui media-delete"></div>\n      <div class="layer-list-container"></div>\n    </figure>\n  </div>\n  <figcaption class="block-caption" data-placeholder="'+s((r=null!=(r=t.placeholder||(null!=e?e.placeholder:e))?r:a,"function"==typeof r?r.call(e,{name:"placeholder",hash:{},data:i}):r))+'" contenteditable="'+s((r=null!=(r=t.captionEditable||(null!=e?e.captionEditable:e))?r:a,"function"==typeof r?r.call(e,{name:"captionEditable",hash:{},data:i}):r))+'">';return r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,o="function"==typeof r?r.call(e,{name:"caption",hash:{},data:i}):r,null!=o&&(l+=o),l+'</figcaption>\n  <div class="builder-ui media-cfg-panel"></div>\n</div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebMapBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div class="media-loading">\n  <span class="large-loader"></span>\n</div>\n<div class="media-media media-item map" data-id="'+a((o=null!=(o=t.webmapId||(null!=e?e.webmapId:e))?o:r,"function"==typeof o?o.call(e,{name:"webmapId",hash:{},data:i}):o))+'" aria-label="'+a((o=null!=(o=t.altText||(null!=e?e.altText:e))?o:r,"function"==typeof o?o.call(e,{name:"altText",hash:{},data:i}):o))+'"></div>\n<div class="interaction-container">\n  <button class="btn btn-default btn-sm">\n    <span class="int-container-disabled">\n      <span class="glyphicon glyphicon-fullscreen"></span>\n      '+a((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\n    </span>\n    <span class="int-container-enabled">\n      '+a((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+'\n    </span>\n  </button>\n</div>\n<div class="builder-ui media-cfg-invite"></div>\n<div class="builder-ui media-cfg-panel"></div>\n<div class="layer-list-container"></div>\n'},useData:!0})}),define("lib-build/css!storymaps/tpl/view/media/arcgis/WebMapCommand",[],function(){}),define("storymaps/tpl/view/media/arcgis/WebMapCommand",["lib-build/css!./WebMapCommand","dojo/has","esri/geometry/Point","dojo/on","esri/symbols/PictureMarkerSymbol","esri/layers/GraphicsLayer","esri/graphic","esri/config"],function(e,t,n,i,o,r,a,s){return function(e,i,l,u){function c(t){if(t)$(e.container).find(".mapCommandHomeBtn").addClass("loading"),h=Date.now();else{var n=Date.now()-h,i=0;n<450&&(i=450-n),setTimeout(function(){$(e.container).find(".mapCommandHomeBtn").removeClass("loading"),h=0},i)}}function d(){navigator.geolocation.getCurrentPosition(function(t){var i=new n(t.coords.longitude,t.coords.latitude);if(l&&"function"==typeof l&&l(!0,i,t),102100!=e.spatialReference.wkid&&4326!=e.spatialReference.wkid)return void s.defaults.geometryService.project([i],e.spatialReference,function(e){e&&e[0]&&p(e[0])});p(i)},f,{timeout:2e3})}function p(e){v.clear(),v.add(new a(e,g)),setTimeout(function(){$("#locateLayer_layer image").fadeOut({duration:800})},1e4)}function f(e){l(!1,e)}var h=0,m=$('<div class="esriSimpleSliderIncrementButton"><div class="mapCommandHomeBtn"><i class="fa fa-home" aria-hidden="true"></i></div></div>'),g=new o("app/storymaps/common/_resources/icons/mapcommand-location-marker.png",21,21),v=new r({id:"locateLayer"});m.click(function(){0!==h&&$("body").hasClass("mobile-view")||(i&&"function"==typeof i?i(e._params.extent):e.setExtent(e._params.extent))}),$(e.container).find(".esriSimpleSlider div:nth-child(1)").after(m),this.setMobile=function(t){$(".esriSimpleSlider, .mapCommandHomeBtn",e.container).toggleClass("touch",t)},this.destroy=function(){$(e.container).find(".esriSimpleSliderIncrementButton").remove(),$(e.container).find(".mapCommandLocation").remove()},this.startLoading=function(){c(!0)},this.stopLoading=function(){c(!1)},this.toggleLocationButton=function(t){$(".mapCommandLocation",e.container).toggleClass("hidden",!t)},this.hideHomeButton=function(){m.toggleClass("hidden",!0)},this.showHomeButton=function(){m.toggleClass("hidden",!1)},navigator&&navigator.geolocation&&($(".esriSimpleSlider",e.container).after('<div class="esriSimpleSlider esriSimpleSliderVertical mapCommandLocation"><i class="fa fa-crosshairs" aria-hidden="true"></i></div>'),$(".mapCommandLocation",e.container).click(d),this.toggleLocationButton(u),e.addLayer(v)),this.setMobile(!!t("touch"))}}),define("lib-build/less!storymaps-react/tpl/view/media/WebMap",[],function(){}),define("storymaps-react/tpl/view/media/WebMap",["module","exports","./Media","lib-build/hbars!./WebMapBlock","lib-build/hbars!./WebMapBackground","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/view/media/arcgis/WebMapCommand","esri/arcgis/utils","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/tasks/query","esri/tasks/QueryTask","esri/config","dojo/_base/lang","dojo/Deferred","storymaps/tpl/utils/UI","lib-build/less!./WebMap"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h,m,g,v){"use strict";function b(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var C=b(n),k=b(i),x=b(o),E=b(r),T=b(a),S=b(s),P=b(l),O=b(u),I=b(c),M=b(d),A=b(p),N=b(f),j=b(h),L=b(m),D=b(g),R=b(v),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),B=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)
},U="resources/tpl/builder/icons/media-placeholder/map.png",H="resources/tpl/builder/icons/immersive-panel/map.png",z=function(e){function t(e){y(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"webmap",id:e.id,previewThumb:U,previewIcon:H}));return n._webmap=e,n._bookmarks=null,n._placement=null,n._transition=null,n._swipeLayersNodes=[],n._swipePreviousWebMapLayers=null,n._lastScrollPosition=null,n._webmap.options||(n._webmap.options={interaction:"enabled"}),n._webmap.extras||(n._webmap.extras={locate:{enabled:!1},search:{enabled:!1},legend:{enabled:!1}}),n}return w(t,e),F(t,[{key:"render",value:function(e){var t="";if(!this._webmap||!e)return t;if(this._placement=e.placement,"block"==this._placement){var n=JSON.stringify({extent:this._webmap.extent,layers:this._webmap.layers,legend:this._webmap.legend,layers2:this._webmap.layers2}),i=["block","block-type-webmap"];t+=(0,k.default)({id:this._domID,webmapId:this.id,classes:i.join(" "),options:n,caption:this._webmap.caption,altText:this._webmap.altText,placeholder:E.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,labelExploreStart:E.default.viewer.media.exploreMap,labelExploreStop:E.default.viewer.media.exploreStop})}else t+=(0,x.default)({webmapId:this.id,altText:this._webmap.altText,labelExploreStart:E.default.viewer.media.exploreMap,labelExploreStop:E.default.viewer.media.exploreStop});return t}},{key:"_applyConfig",value:function(){var e=this._webmap.options;B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e),this._applyInteraction();var n=!(!this._webmap.extent&&!app.isInBuilder);this.performAction({allowExtentUpdate:n}).then(function(){app.isInBuilder&&this._configTabWebMap&&this._configTabWebMap.attachEvents()}.bind(this),function(){})}},{key:"_applyInteraction",value:function(e){var t=this._webmap.options.interaction;if("enabled"===t&&(app.isMobileView||R.default.isMobileBrowser())&&(t="button"),e&&e.isBuilder&&e.builderConfigOpen&&(t="enabled"),this._webmap.options.interaction){var n=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(n).addClass("interaction-"+t),this._node.find(".interaction-container").removeClass("enabled")}var i=this._cache[this.id]?this._cache[this.id].map:null;i&&("disabled"===t||"button"===t?this._disableMapEvents(i):this._enableMapEvents(i))}},{key:"_preventMapClick",value:function(e){e.stopPropagation()}},{key:"_enableMapEvents",value:function(e){e.enableMapNavigation(),e.disableScrollWheelZoom(),e.disableKeyboardNavigation(),this._node.find(".media-item.map")[0].removeEventListener("click",this._preventMapClick,!0)}},{key:"_disableMapEvents",value:function(e){e.disableMapNavigation(),this._node.find(".media-item.map")[0].addEventListener("click",this._preventMapClick,!0)}},{key:"_onEnableButtonClick",value:function(e,n){B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onEnableButtonClick",this).call(this,e),this._node.hasClass("interaction-enabled")?this._enableMapEvents(n):this._disableMapEvents(n)}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new D.default;if(this._node&&!this._isLoaded)return this._isLoaded=!0,this.loadMap(this._node.find(".map")[0],t,e),t}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find('.map[data-id="'+this.id+'"]').parent(),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"resize",value:function(){}},{key:"performAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new D.default,i=this._cache[this.id]?this._cache[this.id].map:null;if(!1!==e.isActive||e.isNewView){if(!i)return n.reject(),n;e.scrollPositionView&&(this._lastScrollPosition=e.scrollPositionView),e.transition&&(this._transition=e.transition),i.infoWindow&&i.infoWindow.hide();var o=this._webmap,r=!1;if(!0===e.allowExtentUpdate||void 0===e.allowExtentUpdate){var a=null;if(a=o.extent?new P.default(o.extent):this._getWebMapExtentFromItemExtent(this._cache[this.id].itemInfo.item.extent),JSON.stringify(a.toJson())!=this._cache[this.id].lastExtentApplied||e.forceSetExtent){this._cache[this.id].lastExtentApplied=JSON.stringify(a.toJson()),r=!0;var s=function(e){i.setExtent(e,!1).then(function(){o.popup&&t._applyPopupConfiguration(i,o.popup),n.resolve()}.bind(this),function(){n.resolve()})}.bind(this);i.spatialReference.wkid==a.spatialReference.wkid?s(a):j.default.defaults.geometryService.project([a],i.spatialReference,function(e){e&&e[0]&&s(e[0])}.bind(this))}}else n.resolve();if(o.popup&&!r&&t._applyPopupConfiguration(i,o.popup),JSON.stringify(o.layers)!=this._cache[this.id].lastLayersApplied){this._cache[this.id].lastLayersApplied=JSON.stringify(o.layers);var l=o.layers||[],u=this._cache[o.id].itemInfo.itemData.operationalLayers;$.each(u,function(e,t){var n;t.layerObject?(n=$(l).filter(function(e,n){return n.id==t.layerObject.id}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)):t.featureCollection&&t.featureCollection.layers&&$.each(t.featureCollection.layers,function(e,t){n=$(l).filter(function(e,n){return n.id.split("_").slice(0,-1).join("_")==t.layerObject.id.split("_").slice(0,-1).join("_")}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)})})}if("swipe-vertical"==this._transition||"swipe-horizontal"==this._transition){if(this._swipeLayersNodes&&this._swipeLayersNodes.length){var c=app.display.windowHeight;app.isInBuilder&&(c-=125);var d=c-1.3*this._lastScrollPosition,p=!0,f=!1,h=void 0;try{for(var m,g=this._swipeLayersNodes[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value,b=v.node,y=d,_=app.display.windowWidth,w=app.display.windowHeight,C=0;if(!v.isSVGLayer){var k=b.position();y+=-k.top,_+=-k.left,w+=-k.top,C+=-k.left}b.css("clip","rect("+y+"px,"+_+"px,"+w+"px,"+C+"px)"),b.data("sm-swipe-pos",d)}}catch(e){f=!0,h=e}finally{try{!p&&g.return&&g.return()}finally{if(f)throw h}}}}else this.resetSwipe();e.doNotApplyInteraction||this._applyInteraction();var x=!1;return this._webmap.extras&&this._webmap.extras.locate&&this._webmap.extras.locate.enabled&&(x=!0),this._cache[this.id].mapCommand.toggleLocationButton(x),n}}},{key:"resetSwipe",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._swipeLayersNodes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value,a=r.node;a.css("clip",""),a.data("sm-swipe-pos","")}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}},{key:"loadMap",value:function(e,t,n){var i=this,o={mapOptions:{smartNavigation:!1},usePopupManager:!0,editable:!1,bingMapsKey:app.cfg.BING_MAPS_KEY,layerMixins:app.data.appProxies||null};this._webmap.extent&&(o.mapOptions.extent=new P.default(this._webmap.extent)),this._node.addClass("media-is-loading"),$(e).css("pointer-events","none"),S.default.createMap(this.id,e,o).then(L.default.hitch(this,function(i){var o=this,r=i.map;this._fadeInMedia(),$(e).css("pointer-events",""),r.disableScrollWheelZoom(),r.disableKeyboardNavigation(),r.reposition(),r.resize(),$(e).find(".esriAttribution ~ div, .esriSimpleSlider div").attr("tabindex","-1"),this._cache[this.id]=i,app.isInBuilder&&this._onWebMapLoaded(),this._bookmarks=i.itemInfo.itemData.bookmarks,r.infoWindow&&(r.infoWindow.markerSymbol=(new O.default).setSize(0)),t.resolve(this.id),this._node.find(".interaction-container").click(function(e){o._onEnableButtonClick(e,r)}),this._cache[this.id].mapCommand=new T.default(r,this._onMapCommandHomeClick.bind(this),this._zoomToBrowserLocation.bind(this),!1),n&&!1===n.isUniqueInSection&&this.hideHomeButton(),this._cache[this.id].lastExtentApplied=null,this._cache[this.id].lastLayersApplied=null,this._applyConfig()}),function(e){console.warn("on loading webmap "+i.id+", err",e),i._node.removeClass("media-is-loading").find(".media-loading").hide(),app.builder?i.setError({showLoadingError:!0}):i.setError({minimizeInViewer:!0})})}},{key:"postLoad",value:function(){var e=this._cache[this.id].map;this.computeSwipeLayers(this._swipePreviousWebMapLayers),e.on("pan",function(){if(this._swipeLayersNodes&&this._isActive){var e=!0,t=!1,n=void 0;try{for(var i,o=this._swipeLayersNodes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value,a=r.node,s=a.data("sm-swipe-pos"),l=s,u=app.display.windowWidth,c=app.display.windowHeight,d=0;if(!r.isSVGLayer){var p=a.position();l+=-p.top,u+=-p.left,c+=-p.top,d+=-p.left}a.css("clip","rect("+l+"px,"+u+"px,"+c+"px,"+d+"px)")}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}})}},{key:"_zoomToBrowserLocation",value:function(e,t){var n=this._cache[this.id]?this._cache[this.id].map:null;e&&(102100!=n.spatialReference.wkid&&4326!=n.spatialReference.wkid?j.default.defaults.geometryService.project([t],n.spatialReference,function(e){e&&e[0]&&(n.extent.contains(e[0])||n.centerAt(e[0]))}):n.extent.contains(t)||n.centerAt(t))}},{key:"_onMapCommandHomeClick",value:function(){this.performAction({doNotApplyInteraction:!0,forceSetExtent:!0})}},{key:"computeSwipeLayers",value:function(e){if(this._swipeLayersNodes=[],this._swipePreviousWebMapLayers=[],e=e||[],this._webmap.layers=this._webmap.layers||[],!this._cache[this.id])return void(this._swipePreviousWebMapLayers=L.default.clone(e));var t=[],n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;t.push(JSON.stringify(l))}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}var u=!0,c=!1,d=void 0;try{for(var p,f=this._webmap.layers[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value;n.push(JSON.stringify(h))}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}var m=!0,g=!1,v=void 0;try{for(var b,y=t[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var _=b.value;if(-1==n.indexOf(_)){var w=JSON.parse(_);!1===w.visibility&&n.push(JSON.stringify({id:w.id,visibility:!0}))}}}catch(e){g=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(g)throw v}}var C=new Set(t),k=n.filter(function(e){return!C.has(e)}),x=!0,E=!0,T=!1,S=void 0;try{for(var P,O=k[Symbol.iterator]();!(E=(P=O.next()).done);E=!0){var I=P.value,M=JSON.parse(I).id,A=this._cache[this.id].map.getLayer(M);if(A){var N=A._div,j=!1;if(N&&N.rawNode){if(!x)continue;N=$(N.rawNode).parent()[0],j=!0,x=!1}this._swipeLayersNodes.push({node:$(N),isSVGLayer:j})}}}catch(e){T=!0,S=e}finally{try{!E&&O.return&&O.return()}finally{if(T)throw S}}}},{key:"serialize",value:function(e){return B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"webmap",this._webmap,e)}},{key:"getAuthorizedTransitionsWith",value:function(e){if(!e||e.id!=this.id)return[];var t=this.serialize(!1).webmap,n=JSON.stringify(t.extent)||"null",i=JSON.stringify(t.layers)||"[]",o=JSON.stringify(t.popup)||"null",r=e.serialize(!1).webmap,a=JSON.stringify(r.extent)||"null",s=JSON.stringify(r.layers)||"[]";return o!=(JSON.stringify(r.popup)||"null")||n!=a?[]:i==s?[]:["swipe-vertical"]}},{key:"getLayersConfiguration",value:function(){return this._webmap.layers}},{key:"_getWebMapExtentFromItemExtent",value:function(e){if(!e||2!=e.length)return null;var t=I.default.geographicToWebMercator(new M.default(e[0][0],e[0][1])),n=I.default.geographicToWebMercator(new M.default(e[1][0],e[1][1]));return new P.default({xmax:n.x,xmin:t.x,ymax:n.y,ymin:t.y,spatialReference:{wkid:102100}})}},{key:"hideHomeButton",value:function(){this._cache[this.id]&&this._cache[this.id].mapCommand&&this._cache[this.id].mapCommand.hideHomeButton()}},{key:"showHomeButton",value:function(){this._cache[this.id]&&this._cache[this.id].mapCommand&&this._cache[this.id].mapCommand.showHomeButton()}}],[{key:"_applyPopupConfiguration",value:function(e,n){if(e.infoWindow.hide(),n){var i=e.getLayer(n.layerId),o=n.layerId?n.layerId.split("_").slice(0,-1).join("_"):"",r=e.getLayer(o);if(e.infoWindow.clearFeatures(),i)if(i.updating)var a=i.on("update-end",function(){a.remove(),t._applyPopupConfigurationStep2(e,n)});else t._applyPopupConfigurationStep2(e,n);else if(r){var s=n.layerId.split("_").slice(-1).join("_"),l=r.url+"/"+s;t._applyPopupConfigurationStep2Alt(e,n,o,s,l)}else var u=e.on("update-end",function(){u.remove(),t._applyPopupConfiguration(e,n)})}}},{key:"_applyPopupConfigurationStep2",value:function(e,n){var i=new A.default,o=e.getLayer(n.layerId);o&&(i.objectIds=[n.fieldValue],o._collection||(i.returnGeometry=!0,i.outFields=["*"],i.outSpatialReference=e.spatialReference),o.queryFeatures&&o.queryFeatures(i).then(function(i){t._applyPopupConfigurationStep3(e,n,i.features)}.bind(this)))}},{key:"_applyPopupConfigurationStep2Alt",value:function(e,n,i,o,r){var a=new N.default(r),s=new A.default;e.getLayer(i)&&(s.objectIds=[n.fieldValue],s.returnGeometry=!0,s.outFields=["*"],s.outSpatialReference=e.spatialReference,a.execute(s,function(r){t._applyPopupConfigurationStep3(e,n,r.features,i,o)}.bind(this)))}},{key:"_applyPopupConfigurationStep3",value:function(e,t,n,i,o){if(e&&t&&n&&n.length){var r=n[0].geometry,a=null;a=t.anchorPoint?new M.default(t.anchorPoint):r.getExtent()?r.getExtent().getCenter():r,i?(n[0].infoTemplate=e.getLayer(i).infoTemplates[o].infoTemplate,e.infoWindow.setContent(n[0].getContent())):e.infoWindow.setFeatures(n),e.infoWindow.show(a),e.extent.contains(a)||e.centerAt(a)}}}]),t}(C.default);t.default=z,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="block block-type-webscene" contenteditable="false">\n  <div class="block-media-wrapper">\n    <figure class="block-media">\n      <div class="media-loading">\n        <span class="large-loader"></span>\n      </div>\n      <div class="media-media media-item scene" data-id="'+s((r=null!=(r=t.websceneId||(null!=e?e.websceneId:e))?r:a,"function"==typeof r?r.call(e,{name:"websceneId",hash:{},data:i}):r))+'" aria-label="'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+'"></div>\n      <div class="interaction-container">\n        <button class="btn btn-default btn-sm">\n          <span class="int-container-disabled">\n            <span class="glyphicon glyphicon-fullscreen"></span>\n            '+s((r=null!=(r=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?r:a,"function"==typeof r?r.call(e,{name:"labelExploreStart",hash:{},data:i}):r))+'\n          </span>\n          <span class="int-container-enabled">\n            '+s((r=null!=(r=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?r:a,"function"==typeof r?r.call(e,{name:"labelExploreStop",hash:{},data:i}):r))+'\n          </span>\n        </button>\n    </div>\n    <div class="builder-ui media-cfg-invite"></div>\n    <div class="builder-ui media-delete"></div>\n    </figure>\n    </div>\n  <figcaption class="block-caption" data-placeholder="'+s((r=null!=(r=t.placeholder||(null!=e?e.placeholder:e))?r:a,"function"==typeof r?r.call(e,{name:"placeholder",hash:{},data:i}):r))+'" contenteditable="'+s((r=null!=(r=t.captionEditable||(null!=e?e.captionEditable:e))?r:a,"function"==typeof r?r.call(e,{name:"captionEditable",hash:{},data:i}):r))+'">';return r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,o="function"==typeof r?r.call(e,{name:"caption",hash:{},data:i}):r,null!=o&&(l+=o),l+'</figcaption>\n  <div class="builder-ui media-cfg-panel"></div>\n</div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div class="media-loading">\n  <span class="large-loader"></span>\n</div>\n<div id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="media-media media-item scene" data-id="'+a((o=null!=(o=t.websceneId||(null!=e?e.websceneId:e))?o:r,"function"==typeof o?o.call(e,{name:"websceneId",hash:{},data:i}):o))+'" aria-label="'+a((o=null!=(o=t.altText||(null!=e?e.altText:e))?o:r,"function"==typeof o?o.call(e,{name:"altText",hash:{},data:i}):o))+'"></div>\n<div class="interaction-container">\n  <button class="btn btn-default btn-sm">\n    <span class="int-container-disabled">\n      <span class="glyphicon glyphicon-fullscreen"></span>\n      '+a((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\n    </span>\n    <span class="int-container-enabled">\n      '+a((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+'\n    </span>\n  </button>\n</div>\n<div class="builder-ui media-cfg-invite"></div>\n<div class="builder-ui media-cfg-panel"></div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBlockError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="media-media media-item block block-type-webscene media-error" contenteditable="false">\n  <div class="media-error-text">'+a((o=null!=(o=t.message||(null!=e?e.message:e))?o:r,"function"==typeof o?o.call(e,{name:"message",hash:{},data:i}):o))+"</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBackgroundError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="media-media media-item scene media-error bring-in">\n  <div class="media-error-text">'+a((o=null!=(o=t.message||(null!=e?e.message:e))?o:r,"function"==typeof o?o.call(e,{name:"message",hash:{},data:i}):o))+"</div>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/WebScene",[],function(){}),define("storymaps-react/tpl/view/media/WebScene",["module","exports","./Media","lib-build/hbars!./WebSceneBlock","lib-build/hbars!./WebSceneBackground","lib-build/hbars!./WebSceneBlockError","lib-build/hbars!./WebSceneBackgroundError","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/utils/UI","esri/IdentityManager","lib-build/less!./WebScene"],function(e,t,n,i,o,r,a,s,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=c(i),g=c(o),v=c(r),b=c(a),y=c(s),_=c(l),w=c(u),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},x="resources/tpl/builder/icons/media-placeholder/scene.png",E="resources/tpl/builder/icons/immersive-panel/scene.png",T=!0,S=function(e){function t(e){d(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"webscene",id:e.id,previewThumb:x,previewIcon:E}));return n._webscene=e,n._placement=null,n._isLoaded=!1,n._isSupported=_.default.hasWebGL()&&!_.default.isMobileBrowser(),n._stopMousewheel=function(e){e.stopImmediatePropagation()},n._isSupported||(app.data.errorWebGL=!0),n._webscene.options||(n._webscene.options={interaction:"enabled"}),void 0===n._webscene.slide&&(n._webscene.slide=-1),n._fourApiLoaded=n._loadFourApi(),n}return f(t,e),C(t,[{key:"render",value:function(e){var t="";return this._webscene&&e?(this._placement=e.placement,"background"==e.placement?this._isSupported?t+=(0,g.default)({id:this._domID,websceneId:this.id,altText:this._webscene.altText,labelExploreStart:y.default.viewer.media.exploreMap,labelExploreStop:y.default.viewer.media.exploreStop}):t+=(0,b.default)({id:this._domID,message:y.default.viewer.media.sceneNotSupported}):this._isSupported?t+=(0,m.default)({id:this._domID,websceneId:this.id,caption:this._webscene.caption,altText:this._webscene.altText,placeholder:y.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,labelExploreStart:y.default.viewer.media.exploreMap,labelExploreStop:y.default.viewer.media.exploreStop}):t+=(0,v.default)({id:this._domID,message:y.default.viewer.media.sceneNotSupported}),t):(console.log("Could not render webscene in section"),t)}},{key:"setLoaded",value:function(e){this._isLoaded=e}},{key:"_applyConfig",value:function(){var e=this._webscene.options;this._isSupported&&(k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e),this._applyInteraction(),this.performAction({}),app.isInBuilder&&this._configTabWebScene&&this._configTabWebScene.attachEvents())}},{key:"_applyInteraction",value:function(){if(this._webscene.options.interaction){var e=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(e).addClass("interaction-"+this._webscene.options.interaction),this._node.find(".interaction-container").removeClass("enabled")}}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._isSupported?this._node=e.container.find('.scene[data-id="'+this.id+'"]').parent():this._node=e.container.find("#"+this._domID).parent(),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"_loadFourApi",value:function(){var e=this;return new Promise(function(t){require(["esri4/config","esri4/core/urlUtils","esri4/identity/IdentityManager","esri4/identity/OAuthInfo","esri4/views/SceneView","esri4/portal/PortalItem","esri4/WebScene","esri4/core/watchUtils","lib-build/css!esri4/css/main.css"],function(e,n,i,o,r,a,s,l){this._esriConfig=e,this._urlUtils=n,this._esriId=i,this._OAuthInfo=o,this._SceneView=r,this._PortalItem=a,this._AGOLWebScene=s,this._watchUtils=l,t()}.bind(e))})}},{key:"load",value:function(){var e=this,t=this._node&&this._node.find(".scene").children().length>0;if(this._node&&!this._isLoaded&&this._isSupported&&!t){this.setLoaded(!0),this._node.addClass("media-is-loading");var n=w.default.toJson();this._fourApiLoaded.then(function(){var t=app.indexCfg.sharingurl.split("/sharing/")[0];if(e._esriConfig.portalUrl=t,e._esriConfig.workers.loaderUrl=app.pathJSAPI4+"dojo/dojo.js",e._esriConfig.workers.loaderConfig={baseUrl:app.pathJSAPI4+"dojo",packages:[{name:"esri4",location:"../esri"},{name:"esri",location:"../esri"},{name:"dojo",location:"."},{name:"dojox",location:"../dojox"},{name:"dstore",location:"../dstore"},{name:"moment",location:"../moment"},{name:"@dojo",location:"../@dojo"},{name:"cldrjs",location:"../cldrjs",main:"dist/cldr"},{name:"globalize",location:"../globalize",main:"dist/globalize"},{name:"maquette",location:"../maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",location:"../maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",location:"../maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",location:"../tslib",main:"tslib"}]},e._esriConfig.request.proxyUrl=location.protocol+app.indexCfg.proxyurl,app.cfg.PROXY_RULES&&app.cfg.PROXY_RULES.length&&$.each(app.cfg.PROXY_RULES,function(e,t){t&&t.urlPrefix&&t.proxyUrl&&this._urlUtils.addProxyRule(t)}),T){if(app.indexCfg.oAuthAppId){var i=new e._OAuthInfo({appId:app.indexCfg.oAuthAppId,popup:!1,portalUrl:"https:"+t});e._esriId.registerOAuthInfos([i]),e._esriId.checkSignInStatus("https:"+app.indexCfg.sharingurl.split("/sharing/")[0]+"/sharing").then(e._loadStep2.bind(e),function(){console.error("Error during oAuth process for web scene"),this._loadStep2.bind(this)()}.bind(e))}else{var o=!0,r=!1,a=void 0;try{for(var s,l=n.credentials[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;e._esriId.registerToken(u)}}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}e._loadStep2.bind(e)()}T=!1}else e._loadStep2.bind(e)()})}}},{key:"_loadStep2",value:function(){var e=new this._AGOLWebScene({portalItem:new this._PortalItem({id:this.id})});e.catch(function(){app.builder?this.setError({unfixable:!0,showLoadingError:!0}):this.setError({minimizeInViewer:!0})}.bind(this));var t=new this._SceneView({map:e,container:this._node.find(".scene")[0]});this._cache[this.id]={scene:e,view:t},t.when(function(){this._cache[this.id].initialViewpoint=t.viewpoint,t.ui.move("zoom","bottom-right"),t.ui.move("compass","bottom-right"),t.ui.remove("navigation-toggle"),this._fadeInMedia()}.bind(this)),t.surface.addEventListener("wheel",this._stopMousewheel,!0),void 0!==this._webscene.slide&&-1!==this._webscene.slide?this._watchUtils.init(e,"presentation.slides",function(e){var n=this;e&&e.items&&e.items.length&&t.when(function(){e.items[n._webscene.slide].applyTo(t,{animate:!1})}),app.isInBuilder&&this._onWebSceneLoaded()}.bind(this)):app.isInBuilder&&this._onWebSceneLoaded(),this._node.removeClass("media-is-loading").find(".interaction-container").click(this._onEnableButtonClick.bind(this))}},{key:"performAction",value:function(e){var t=this._cache[this.id],n=t?t.scene:null,i=t?t.view:null;n&&i&&i.ready&&this._isSupported&&(-1===this._webscene.slide?this._cache[this.id].initialViewpoint&&i.goTo(this._cache[this.id].initialViewpoint):void 0!==this._webscene.slide&&this._webscene.slide<=n.presentation.slides.items.length&&n.presentation.slides.items[this._webscene.slide].applyTo(i,{animate:!1!==e.animate}),this._applyInteraction())}},{key:"unload",value:function(){this._cache[this.id]&&this._cache[this.id].view&&(this._cache[this.id].view.surface.removeEventListener("wheel",this._stopMousewheel,!0),this._cache[this.id].view.destroy(),this._cache[this.id]=null),this.setLoaded(!1),this._node.find(".media-loading").show()}},{key:"resize",value:function(){}}]),t}(h.default);t.default=S,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebPageBlock",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'        <div class="interaction-container">\n          <button class="btn btn-default btn-sm">\n            <span class="int-container-disabled">\n              <span class="glyphicon glyphicon-fullscreen"></span>\n              '+a((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\n            </span>\n            <span class="int-container-enabled">\n              '+a((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+"\n            </span>\n          </button>\n        </div>\n"},3:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'    <div class="interaction-container">\n      <button class="btn btn-default btn-sm">\n        <span class="int-container-disabled">\n          <span class="glyphicon glyphicon-fullscreen"></span>\n          '+a((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\n        </span>\n        <span class="int-container-enabled">\n          '+a((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+"\n        </span>\n      </button>\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="block block-webpage scroll-off" contenteditable="false">\n  <div class="block-media-wrapper">\n    <figure class="block-media">\n      <div class="media-loading">\n        <span class="large-loader"></span>\n      </div>\n      <iframe class="media-media media-item webpage" data-src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,"function"==typeof r?r.call(e,{name:"url",hash:{},data:i}):r))+'" aria-label="'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+'"></iframe>\n';return o=t.unless.call(e,null!=e?e.isMobile:e,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='      <div class="builder-ui media-cfg-invite"></div>\n      <div class="builder-ui media-delete"></div>\n    </figure>\n  </div>\n  <figcaption class="block-caption" data-placeholder="'+s((r=null!=(r=t.placeholder||(null!=e?e.placeholder:e))?r:a,"function"==typeof r?r.call(e,{name:"placeholder",hash:{},data:i}):r))+'" contenteditable="'+s((r=null!=(r=t.captionEditable||(null!=e?e.captionEditable:e))?r:a,"function"==typeof r?r.call(e,{name:"captionEditable",hash:{},data:i}):r))+'">',r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,o="function"==typeof r?r.call(e,{name:"caption",hash:{},data:i}):r,null!=o&&(l+=o),l+="</figcaption>\n",o=t.if.call(e,null!=e?e.isMobile:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'  <div class="builder-ui media-cfg-panel"></div>\n</div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebPageBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div class="media-loading">\n  <span class="large-loader"></span>\n</div>\n<div id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="'+a((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:r,"function"==typeof o?o.call(e,{name:"classes",hash:{},data:i}):o))+'">\n  <iframe class="media-media media-item webpage" data-src="'+a((o=null!=(o=t.url||(null!=e?e.url:e))?o:r,"function"==typeof o?o.call(e,{name:"url",hash:{},data:i}):o))+'" style="width: 100%; height: 100%;" aria-label="'+a((o=null!=(o=t.altText||(null!=e?e.altText:e))?o:r,"function"==typeof o?o.call(e,{name:"altText",hash:{},data:i
}):o))+'"></iframe>\n  <div class="interaction-container">\n    <button class="btn btn-default btn-sm">\n      <span class="int-container-disabled">\n        <span class="glyphicon glyphicon-fullscreen"></span>\n        '+a((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\n      </span>\n      <span class="int-container-enabled">\n        '+a((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:r,"function"==typeof o?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+'\n      </span>\n    </button>\n  </div>\n</div>\n<div class="builder-ui media-cfg-invite"></div>\n<div class="builder-ui media-cfg-panel"></div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/WebPage",[],function(){}),define("storymaps-react/tpl/view/media/WebPage",["module","exports","./Media","lib-build/hbars!./WebPageBlock","lib-build/hbars!./WebPageBackground","lib-build/i18n!resources/tpl/viewer/nls/app","dojo/Deferred","storymaps/tpl/utils/UI","lib-build/less!./WebPage"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(o),m=l(r),g=l(a),v=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},_="resources/tpl/builder/icons/media-placeholder/webpage.png",w="resources/tpl/builder/icons/immersive-panel/webpage.png",C=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"webpage",id:e.url,previewThumb:_,previewIcon:w}));return n._webpage=e,n._nodeMedia=null,n._placement=null,n._webpage.options||(n._webpage.options={interaction:"button"}),n}return d(t,e),b(t,[{key:"getNode",value:function(){return this._node}},{key:"render",value:function(e){var t="";if(!this._webpage||!e)return console.log("Could not render webpage in section"),t;if(this._placement=e.placement,"block"==this._placement)t+=(0,f.default)({id:this._domID,url:this._webpage.url,caption:this._webpage.caption,altText:this._webpage.altText,placeholder:m.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,labelExploreStart:m.default.viewer.media.explore,labelExploreStop:m.default.viewer.media.exploreStop,isMobile:app.isMobileView||v.default.isMobileBrowser()});else if("background"==e.placement){t+=(0,h.default)({id:this._domID,url:this._webpage.url,classes:"webpage-container",altText:this._webpage.altText,labelExploreStart:m.default.viewer.media.explore,labelExploreStop:m.default.viewer.media.exploreStop})}return t}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container){if("block"==this._placement){if(this._node=e.container.find("#"+this._domID),this._nodeMedia=this._node.find("iframe"),this._webpage.height){var n=this._node.find(".block-media-wrapper");n[0].getBoundingClientRect().height>this._webpage.height&&n.css("padding-top",this._webpage.height)}}else this._nodeMedia=e.container.find('.webpage[data-src="'+this._webpage.url+'"]'),this._node=this._nodeMedia.parents(".background").eq(0);this._applyConfig()}}},{key:"_applyConfig",value:function(){var e=this._webpage.options;y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e);var n=this._webpage.options.interaction;if((app.isMobileView||v.default.isMobileBrowser())&&(n="button"),this._webpage.options.interaction){var i=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(i).addClass("interaction-"+n)}}},{key:"load",value:function(){var e=new g.default;return!this._nodeMedia||this._isLoaded?e:(this._isLoaded=!0,this._nodeMedia.parent(".webpage-container").addClass("initialized"),this._nodeMedia.attr("src",this._nodeMedia.data("src")).load(function(){this._fadeInMedia()}.bind(this)),this._node.find(".interaction-container").click(this._onEnableButtonClick.bind(this)),"mouseover"===this._webpage.options.interaction&&this._node.on("mouseenter",function(){this._node.removeClass("scroll-off")}.bind(this)),this._node.on("touchstart",function(){this._node.addClass("scroll-off")}.bind(this)),this._node.on("mousedown touchend",function(){this._node.removeClass("scroll-off")}.bind(this)),this._node.mouseleave(function(){this._node.addClass("scroll-off")}.bind(this)),this._nodeMedia.mouseleave(function(){this._node.addClass("scroll-off")}.bind(this)),e.resolve(),e)}},{key:"performAction",value:function(e){if(e&&e.viewIndex&&e.isActive)try{this._nodeMedia[0].contentWindow.performCascadeAction(e)}catch(e){}}},{key:"resize",value:function(){}}]),t}(p.default);t.default=C,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/AudioBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="block block-audio" contenteditable="false">\n  <div class="block-media-wrapper">\n    <figure class="block-media">\n      <div class="media-media media-item audio" aria-label="'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+'">\n        <audio type="'+s((r=null!=(r=t.mimeType||(null!=e?e.mimeType:e))?r:a,"function"==typeof r?r.call(e,{name:"mimeType",hash:{},data:i}):r))+'" preload="metadata" controls controlsList="nodownload" src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,"function"==typeof r?r.call(e,{name:"url",hash:{},data:i}):r))+'">\n          <a href="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,"function"==typeof r?r.call(e,{name:"url",hash:{},data:i}):r))+'">'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,"function"==typeof r?r.call(e,{name:"url",hash:{},data:i}):r))+'</a>\n        </audio>\n      </div>\n      <div class="builder-ui media-cfg-invite"></div>\n      <div class="builder-ui media-delete"></div>\n    </figure>\n  </div>\n  <figcaption class="block-caption" data-placeholder="'+s((r=null!=(r=t.placeholder||(null!=e?e.placeholder:e))?r:a,"function"==typeof r?r.call(e,{name:"placeholder",hash:{},data:i}):r))+'" contenteditable="'+s((r=null!=(r=t.captionEditable||(null!=e?e.captionEditable:e))?r:a,"function"==typeof r?r.call(e,{name:"captionEditable",hash:{},data:i}):r))+'">';return r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,o="function"==typeof r?r.call(e,{name:"caption",hash:{},data:i}):r,null!=o&&(l+=o),l+'</figcaption>\n  <div class="builder-ui media-cfg-panel"></div>\n</div>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/AudioBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="audio audio-background media-media media-item">\n  <audio type="audio/mpeg" preload controls src="'+a((o=null!=(o=t.url||(null!=e?e.url:e))?o:r,"function"==typeof o?o.call(e,{name:"url",hash:{},data:i}):o))+'"></audio>\n</div>\n<div class="builder-ui media-cfg-invite"></div>\n<div class="builder-ui media-cfg-panel"></div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Audio",[],function(){}),define("storymaps-react/tpl/view/media/Audio",["module","exports","./Media","lib-build/hbars!./AudioBlock","lib-build/hbars!./AudioBackground","storymaps/tpl/utils/UI","lib-build/i18n!resources/tpl/viewer/nls/app","dojo/Deferred","lib-build/less!./Audio"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(o),m=l(r),g=l(a),v=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},_="resources/tpl/builder/icons/media-placeholder/video.png",w="resources/tpl/builder/icons/immersive-panel/video.png",C=function(e){function t(e){u(this,t);var n=e.url,i=!1,o=e.uploadDeferred;o&&o.isResolved&&!o.isResolved()&&(i=!0,n=m.default.getUID());var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"audio",id:n,previewThumb:_,previewIcon:w}));return r._audio=e,r._nodeMedia=null,r._placement=null,r._isUploadPending=i,i&&(delete r._audio.dataUrl,e.uploadDeferred.then(r._onUploadSuccess.bind(r),r._onUploadFail.bind(r))),r._audio.options=r._audio.options||{},r}return d(t,e),b(t,[{key:"getNode",value:function(){return this._node}},{key:"render",value:function(e){var t="";return this._audio&&e?(this._placement=e.placement,"block"==this._placement?t+=(0,f.default)({id:this._domID,url:p.default.addToken(this._audio.url),mimeType:"audio/"+this.getMimeType(this._audio.url||this._audio.id),caption:this._audio.caption,altText:this._audio.altText,placeholder:g.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder}):"background"==e.placement&&(t+=(0,h.default)({id:this._domID,url:p.default.addToken(this._audio.url),altText:this._audio.altText,classes:"audio-container"})),t):(console.log("Could not render audio in section"),t)}},{key:"rerender",value:function(){var e=p.default.addToken(this._audio.url);this._node.find("audio").attr("src",e),this._node.find("a").attr("href",e).text(e)}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find("#"+this._domID).parent(),this._isUploadPending&&this._onUploadStart(),this._applyConfig())}},{key:"_applyConfig",value:function(){var e=this._audio.options;e.size=e.size||"small",y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e)}},{key:"preload",value:function(){var e=new v.default,t=new window.Audio;return t.onloadedmetadata=function(){e.resolve(),app.builder||this.removeError&&this.removeError()}.bind(this),t.onerror=function(){this.onAudioError(),e.resolve()}.bind(this),t.ondurationchange=function(){t.duration&&!isFinite(t.duration)&&(this.onAudioError(),e.resolve())}.bind(this),window.setTimeout(function(){e.resolve()},5e3),this._audio.url&&(t.src=p.default.addToken(this._audio.url)),e}},{key:"onAudioError",value:function(){app.builder?this.setError({showLoadingError:!0}):this.setError({minimizeInViewer:!0})}},{key:"load",value:function(){var e=this,t=new v.default;return this._isLoaded||!this._node?t:(this._isLoaded=!0,this._audio&&this._audio.url&&this.preload().then(function(){e._fadeInMedia()}),t.resolve(),t)}},{key:"getMimeType",value:function(e){if(e&&e.slice){var t=e.slice(e.lastIndexOf(".")+1).toLowerCase();switch(t){case"mp3":return"mpeg";case"m4a":return"mp4";case"wav":default:return t}}}},{key:"performAction",value:function(){this._isLoaded||this.load()}},{key:"resize",value:function(){}}]),t}(p.default);t.default=C,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/Empty",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'<div id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="media-empty">\n  <div class="me-placeholder"></div>\n  <div class="media-empty-add">\n    <img class="media-empty-icon-all" src="resources/tpl/builder/icons/text-editor/Media.png" />\n    <div class="media-empty-icon-image">\n      <i class="fa fa-picture-o" aria-hidden="true"></i>\n    </div>\n    <div class="media-empty-label">'+a((o=null!=(o=t.label||(null!=e?e.label:e))?o:r,"function"==typeof o?o.call(e,{name:"label",hash:{},data:i}):o))+"</div>\n  </div>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Empty",[],function(){}),define("storymaps-react/tpl/view/media/Empty",["module","exports","./Media","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./Empty","lib-build/less!./Empty"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h="resources/tpl/builder/icons/media-placeholder/image.jpg",m="resources/tpl/builder/icons/immersive-panel/image.png",g=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"empty",id:null,previewThumb:h,previewIcon:m}));return e._placement=null,e._onEdit=null,e}return l(t,e),p(t,[{key:"render",value:function(e){return e?(this._placement=e.placement,"block"==this._placement?"":(0,d.default)({id:this._domID,label:c.default.builder.immersiveViewPanel.addMedia})):(console.log("Could not render webmap in section"),"")}},{key:"load",value:function(){}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&(this._node=e.container.find("#"+this._domID).parent(),this._node.find(".me-placeholder").css("backgroundImage",'url("resources/tpl/builder/icons/immersive/background-placeholder.jpg")'),this._node.find(".media-empty-add").addClass("authorized-"+(e.mediaIcon||"all")).click(this.onPickMedia.bind(this)))}},{key:"resize",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"performAction",value:function(){}},{key:"serialize",value:function(){return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"empty","empty",!1)}},{key:"onPickMedia",value:function(){this._onAction("swap")}}]),t}(u.default);t.default=g,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/Color",[],function(){}),define("storymaps-react/tpl/view/media/Color",["module","exports","./Media","lib-build/less!./Color"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"color",id:null,previewThumb:"",previewIcon:""}));return n._color=e,n}return r(t,e),s(t,[{key:"render",value:function(e){return this._color&&e?'<div class="media-color"></div>':(console.log("Could not render color in section"),"")}},{key:"postCreate",value:function(e){e.container&&(this._node=e.container.find(".media-color"),this._applyConfig())}},{key:"_applyConfig",value:function(){this._node.css("background-color",this._color.value)}},{key:"updateColor",value:function(e){this._color.value=e,this._applyConfig()}},{key:"load",value:function(){}},{key:"update",value:function(e){this.updateColor(e)}},{key:"serialize",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"color",this._color,!1)}}]),t}(a.default);t.default=u,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/CreditsItemViewer",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'        <a href="'+a((o=null!=(o=t.link||(null!=e?e.link:e))?o:r,"function"==typeof o?o.call(e,{name:"link",hash:{},data:i}):o))+'" class="cr-item-input cr-source cr-link" target="_blank">'+a((o=null!=(o=t.source||(null!=e?e.source:e))?o:r,"function"==typeof o?o.call(e,{name:"source",hash:{},data:i}):o))+"</a>\n"},3:function(e,t,n,i){var o,r=t.helperMissing;return'        <div class="cr-item-input cr-source">'+(0,this.escapeExpression)((o=null!=(o=t.source||(null!=e?e.source:e))?o:r,"function"==typeof o?o.call(e,{name:"source",hash:{},data:i}):o))+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<li class="cr-item viewer">\n  <div class="cr-item-main">\n    <div class="cr-input-container first">\n      <div class="cr-item-input cr-content">'+s((r=null!=(r=t.label||(null!=e?e.label:e))?r:a,"function"==typeof r?r.call(e,{name:"label",hash:{},data:i}):r))+'</div>\n    </div>\n    <span class="cr-pipe"></span>\n    <div class="cr-input-container">\n';return o=t.if.call(e,null!=e?e.link:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(l+=o),l+"  </div>\n</li>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Credits",[],function(){}),define("storymaps-react/tpl/view/media/Credits",["module","exports","./Media","lib-build/hbars!./CreditsItemViewer","lib-build/less!./Credits"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"credits",id:null,previewThumb:"",previewIcon:""}));return n._credits=e,n}return s(t,e),c(t,[{key:"render",value:function(e){if(!this._credits||!e)return console.log("Could not render credits block in section"),"";var t='<div id="'+this._domID+'" class="block block-type-credits"><ul class="cr-list">';if(this._credits.length){var n=!0,i=!1,o=void 0;try{for(var r,a=this._credits[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;t+=(0,u.default)({label:s.label,link:s.link,source:s.source,empty:!1,incomplete:!1})}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}return t+="</ul></div>"}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&(this._node=e.container.find("#"+this._domID))}},{key:"load",value:function(){}},{key:"resize",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"performAction",value:function(){}}]),t}(l.default);t.default=p,e.exports=t.default}),define("lib-build/css!storymaps/tpl/view/media/Discover",[],function(){}),define("storymaps/tpl/view/media/Discover",["lib-build/css!./Discover"],function(){return function(e){this.render=function(t){var n="";return e&&t?(n+='<div class="discover">',n+=" <strong>"+e.title+"</strong>",n+=" <table><tr>",$.each(e.items,function(e,t){n+='<td><div class="discover-item"><a href="'+t.url+'" target="_blank"><img src="'+t.thumbnail+'" /><div>'+t.title+"</div></a></div></td>"}),n+=" </tr></table>",n+="</div>"):(console.log("Could not render Discover block in section"),n)}}}),define("storymaps-react/tpl/view/media/FactoryViewer",["module","exports","./Text","./Image","./ImageGallery","./Video","./WebMap","./WebScene","./WebPage","./Audio","./Empty","./Color","./Credits","storymaps/tpl/view/media/Discover","storymaps/tpl/utils/UI"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h){"use strict";function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var v=m(n),b=m(i),y=m(o),_=m(r),w=m(a),C=m(s),k=m(l),x=m(u),E=m(c),T=m(d),S=m(p),P=m(f),O=m(h),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function(){function e(){g(this,e)}return I(e,null,[{key:"getClasses",value:function(){return{Text:v.default,Image:b.default,ImageGallery:y.default,Video:_.default,WebMap:w.default,WebScene:C.default,WebPage:k.default,Audio:x.default,Empty:E.default,Color:T.default,Credits:S.default,Discover:P.default}}},{key:"_createMedia",value:function(e){var t=this._parseMedia(e.mediaJSON,e.isNewMedia);return t.setCache&&e.mediaCache&&t.setCache(e.mediaCache),t}},{key:"_createAlternateMedia",value:function(e){var t=Object.assign({},e,{mediaJSON:e.mediaJSON.alternate});return this._createMedia(t)}},{key:"createInstance",value:function(e){var t=app.isMobileView||O.default.isMobileBrowser(),n=null;if(t&&e.mediaJSON.alternate)n=this._createAlternateMedia(e);else if(n=this._createMedia(e),e.mediaJSON.alternate&&app.isInBuilder){var i=this._createAlternateMedia(e);n.setAlternate(i)}return n}},{key:"_parseMedia",value:function(e,t){var n=null,i=e.type;if(i&&!e[i])return console.error("Invalid json for: ",e),n;var o=this.getClasses();return"text"==i?n=new o.Text(e.text):"image"==i?n=new o.Image(e.image,t):"image-gallery"==i?n=new o.ImageGallery(e["image-gallery"]):"video"==i?n=new o.Video(e.video):"webmap"==i?n=new o.WebMap(e.webmap):"webscene"==i?n=new o.WebScene(e.webscene):"webpage"==i?n=new o.WebPage(e.webpage):"audio"==i?n=new o.Audio(e.audio):"color"==i?n=new o.Color(e.color):"credits"==i?n=new o.Credits(e.credits):"discover"==i?n=new o.Discover(e.discover):"empty"==i?n=new o.Empty(e.empty):console.error("Could not find corresponding media for: ",e),n}}]),e}();t.default=M,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabThumb",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" selected"},3:function(e,t,n,i){return'    <span class="border-error"></span>\n'},5:function(e,t,n,i){var o,r="";return o=t.if.call(e,null!=(o=null!=e?e.tab:e)?o.showWarnings:o,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=o&&(r+=o),r},6:function(e,t,n,i){return'        <span class="border-warning"></span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<li class="tab btn-clear lighter';return o=t.if.call(e,null!=e?e.isSelected:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='" data-tab="'+a(r(null!=(o=null!=e?e.tab:e)?o.type:o,e))+'">\n',o=t.if.call(e,null!=(o=null!=e?e.tab:e)?o.showErrors:o,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=o&&(s+=o),s+'  <span class="config-tab-icon fa '+a(r(null!=(o=null!=e?e.tab:e)?o.icon:o,e))+'"></span>\n  '+a(r(null!=(o=null!=e?e.tab:e)?o.title:o,e))+"\n</li>\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/PanelInvite",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-invite-background"></div>\n<i class="builder-invite-open fa fa-pencil" aria-hidden="true"></i>\n<i class="builder-invite-close fa fa-check" aria-hidden="true"></i>\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/PanelConfig",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config">\n  <div class="config-main">\n    <ul class="builder-tabs"></ul>\n    <div class="config-content">\n      <div class="builder-active-tab"></div>\n    </div>\n  </div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/Panel",[],function(){}),define("storymaps-react/tpl/view/media/builder/Panel",["module","exports","lib-build/hbars!./TabThumb","lib-build/hbars!./PanelInvite","lib-build/hbars!./PanelConfig","lib-build/less!./Panel"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=r(o),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d="config-panel-active",p=function(){function e(t){a(this,e),t=t||{},t.containerMedia&&t.tabs&&t.media&&t.onChange&&t.onAction&&(this._nodeMedia=t.containerMedia,this._nodeInvite=this._nodeMedia.find(".media-cfg-invite"),this._nodePanel=this._nodeMedia.find(".media-cfg-panel"),this._tabs=t.tabs,this._media=t.media,this._onChange=t.onChange,this._onToggle=t.onToggle,this._onAction=t.onAction,this._closeBtnStyle=t.closeBtnStyle,this._selectedTab=this._selectDefaultTab(),this.selectedClass="selected",this._init())}return c(e,[{key:"refreshTabs",value:function(e){var t=this;this._tabs=e,this._selectedTab=this._tabs.find(function(e){return e.type===t._selectedTab.type})||this._selectDefaultTab(),this._init()}},{key:"_init",value:function(){this._nodeMedia.removeClass(d),this._nodeInvite.html((0,l.default)({})),this._nodePanel.html((0,u.default)({})),this._nodeInvite.off("click").click(this._toggleConfigPanel.bind(this)),this._renderTabThumbs()}},{key:"_selectDefaultTab",value:function(){return this._tabs[0]}},{key:"_renderTabThumbs",value:function(){var e=this._nodePanel.find(".builder-tabs");e.find(".tab").off("click"),e.empty();var t=!0,n=!1,i=void 0;try{for(var o,r=this._tabs[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,s=this._renderTabThumb(a);e.append(s)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}this._addClickEvent()}},{key:"_addClickEvent",value:function(){var e=this,t=this._nodePanel.find(".builder-tabs"),n=t.find(".tab");n.off("click").on("click",function(i){e._onTabClick(i,t,n)})}},{key:"_onTabClick",value:function(e,t,n){var i=$(e.currentTarget),o=i.data("tab"),r=t.find(".tab."+this.selectedClass).data("tab"),a=this._tabs.find(function(e){return o===e.type}),s=this._tabs.find(function(e){return r===e.type});n.removeClass(this.selectedClass),i.addClass(this.selectedClass),s&&this.destroyTab(s),a&&this.renderTab(a)}},{key:"_renderTabThumb",value:function(e){return(0,s.default)({tab:e,isSelected:e.type===this._selectedTab.type})}},{key:"destroyTab",value:function(e){e.destroy()}},{key:"renderTab",value:function(e){var t=this._nodePanel.find(".builder-active-tab");t.html(e.render()),e.postCreate({container:t,media:this._media,onChange:this._onChange,onAction:this._onAction,rootNode:this._nodePanel}),this._selectedTab=e}},{key:"_toggleConfigPanel",value:function(e){this._nodeMedia.hasClass(d)?this.closePanel(e):this.openPanel(),this._onToggle&&this._onToggle()}},{key:"_findOverrideTab",value:function(){var e=null;return this._nodeMedia.hasClass("error")||this._nodeMedia.find(".error").length?(e=this._tabs.find(function(e){return"issues"===e.type}))||(e=this._tabs.find(function(e){return"manage"===e.type})):(this._nodeMedia.hasClass("warning")||this._nodeMedia.find(".warning").length)&&((e=this._tabs.find(function(e){return"issues"===e.type}))||(e=this._tabs.find(function(e){
return"alternate"===e.type}))),e}},{key:"openPanel",value:function(e){var t=this._selectedTab;if(!e){var n=this._findOverrideTab();if(n){this._nodePanel.find(".builder-tabs .tab."+this.selectedClass).removeClass(this.selectedClass);this._nodePanel.find('.builder-tabs .tab[data-tab="'+n.type+'"]').addClass(this.selectedClass),t=n}}t&&this.renderTab(t),this._renderTabThumbs(),this._nodeMedia.addClass(d)}},{key:"closePanel",value:function(e){if("light"!=this._closeBtnStyle||!$(e.target).hasClass("builder-invite-background")){var t=this._nodePanel.find(".builder-tabs .tab."+this.selectedClass),n=t.data("tab"),i=this._tabs.find(function(e){return n===e.type});i&&i.beforePanelDestroy(),i&&this.destroyTab(i),this._nodeMedia.removeClass(d)}}}]),e}();t.default=p,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSize",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section">\n  <ul class="section-content horizontal">\n    <li class="config-item" data-type="size" data-value="small">\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/small.png">\n      <span class="config-label">'+a(r(null!=(o=null!=e?e.strings:e)?o.small:o,e))+'</span>\n    </li>\n    <li class="config-item" data-type="size" data-value="medium">\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/medium.png">\n      <span class="config-label">'+a(r(null!=(o=null!=e?e.strings:e)?o.medium:o,e))+'</span>\n    </li>\n    <li class="config-item" data-type="size" data-value="large">\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/large.png">\n      <span class="config-label">'+a(r(null!=(o=null!=e?e.strings:e)?o.large:o,e))+"</span>\n    </li>\n  </ul>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabSize",["module","exports","./Tab","lib-build/hbars!./TabSize","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.title=d.default.builder.mediaConfig.tabs.size,e.type="size",e.icon="fa-arrows-alt",e._selectedSize="",e}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.size})}},{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._selectedSize=this._media.options.size||"large";var i=this._node.find('.config-item[data-type="size"]');this._node.find('.config-item[data-value="'+this._selectedSize+'"]').addClass(this.selectedClass),i.on("click",function(e){var t=$(e.currentTarget),o=n._getDistanceFromViewportBottom();n._selectedSize=t.data("value"),n.setConfig("size",n._selectedSize),i.removeClass(n.selectedClass),t.addClass(n.selectedClass),n._scrollToSamePosition(o)})}},{key:"_getDistanceFromViewportBottom",value:function(){var e=this._rootNode[0].getBoundingClientRect();return app.display.windowHeight-e.bottom}},{key:"_scrollToSamePosition",value:function(e){var t=this._getDistanceFromViewportBottom(),n=document.body.scrollTop||document.documentElement.scrollTop,i=n-(t-e);$(window).scrollTop(i),app.ui.update({forceUpdate:!0})}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-type="size"]').off("click")}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSizeImage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section size-image">\n  <ul class="section-content horizontal">\n    <li class="config-item" data-type="size" data-value="small">\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/small.png">\n      <span class="config-label">'+a(r(null!=(o=null!=e?e.strings:e)?o.small:o,e))+'</span>\n    </li>\n    <li class="config-item" data-type="size" data-value="medium">\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/medium.png">\n      <span class="config-label">'+a(r(null!=(o=null!=e?e.strings:e)?o.medium:o,e))+'</span>\n    </li>\n    <li class="config-item" data-type="size" data-value="large">\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/large.png">\n      <span class="config-label">'+a(r(null!=(o=null!=e?e.strings:e)?o.large:o,e))+'</span>\n      <div class="section-content crop-tall centered">\n        <span class="tall-crop-info fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="'+a(r(null!=(o=null!=e?e.strings:e)?o.noCropTallTooltip:o,e))+'"></span>\n        <label class="check"><input class="crop-tall-checkbox" type="checkbox" value="fit"> '+a(r(null!=(o=null!=e?e.strings:e)?o.noCrop:o,e))+"</label>\n      </div>\n    </li>\n  </ul>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabSizeImage",["module","exports","./TabSize","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./TabSizeImage","lib-build/less!./Common"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),p(t,[{key:"render",value:function(){return(0,d.default)({strings:c.default.builder.mediaConfig.size})}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.checkbox=this._node.find("input.crop-tall-checkbox"),this._node.find('[data-toggle="tooltip"]').tooltip(),this.crop=e.media.options.fitHeight,this._applyInitialUI(),this._addEvents()}},{key:"_applyInitialUI",value:function(){this.checkbox.prop("checked",!this.crop),this._toggleCropInput()}},{key:"_addEvents",value:function(){this.checkbox.on("click",this._onCheckboxClicked.bind(this)),this._node.find('.config-item[data-type="size"]').on("click",this._toggleCropInput.bind(this))}},{key:"_onCheckboxClicked",value:function(){var e=this._getDistanceFromViewportBottom();this.crop=!this.crop,this.setConfig("fitHeight",this.crop),this._scrollToSamePosition(e)}},{key:"_toggleCropInput",value:function(){this._node.find(".section-content.crop-tall").toggleClass("disabled","large"!==this._selectedSize)}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabBackground",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" safari-specific"},3:function(e,t,n,i){return""},5:function(e,t,n,i){return'        <div class="overview-dot"></div>\n'},7:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'    <div class="section-content crop-check">\n      <span class="crop-info fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="'+a(r(null!=(o=null!=e?e.strings:e)?o.cropExplanationImmersive:o,e))+'"></span>\n      <label class="check"><input class="fit-fill" type="checkbox" value="fit"> '+a(r(null!=(o=null!=e?e.strings:e)?o.noCrop:o,e))+'</label>\n      <div class="section-content" data-mode="fill">\n      </div>\n    </div>\n'},9:function(e,t,n,i){var o,r='    <div class="section-content" data-mode="fill">\n';return o=t.if.call(e,null!=e?e.isNarrativeOrPanel:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(10,i),data:i}),null!=o&&(r+=o),r+"    </div>\n"},10:function(e,t,n,i){var o,r=this.lambda;return'        <span class="crop-info fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="'+(0,this.escapeExpression)(r(null!=(o=null!=e?e.strings:e)?o.cropExplanation:o,e))+'"></span>\n'},12:function(e,t,n,i){return"  <div></div>\n"},14:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<div class="builder-config-section larger preview-config-section">\n  <ul class="section-content horizontal preview-section">\n    <li class="config-item preview-item horizontal">\n      <h4 class="responsive-preview-title">'+a(r(null!=(o=null!=e?e.strings:e)?o.previews:o,e))+'</h4>\n      <div class="responsive-frame-container">\n        <div class="responsive-backing backing-horizontal"></div>\n        <div class="responsive-preview preview-horizontal';return o=t.if.call(e,null!=e?e.isTitle:e,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='"></div>\n        <img class="responsive-frame frame-horizontal" src="resources/tpl/builder/icons/media-config/previewLandscape.png" />\n      </div>\n    </li>\n    <li class="config-item preview-item">\n      <div class="responsive-frame-container">\n        <div class="responsive-backing backing-vertical"></div>\n        <div class="responsive-preview preview-vertical',o=t.if.call(e,null!=e?e.isTitle:e,{name:"if",hash:{},fn:this.program(15,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+'"></div>\n        <img class="responsive-frame frame-vertical" src="resources/tpl/builder/icons/media-config/previewPortrait.png" />\n      </div>\n    </li>\n  </ul>\n</div>\n'},15:function(e,t,n,i){return" preview-title"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<div class="builder-config-section">\n  <div class="section-content vertical-list fit-fill">\n    <div class="section-content two-pane" data-mode="fill">\n      <div class="content-pane">\n      </div>\n      <div class="content-pane overview-thumbnail-pane';return o=t.if.call(e,null!=e?e.isSafari:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(s+=o),s+='">\n        <img class="overview-thumbnail" src=""/>\n',o=t.if.call(e,null!=e?e.isNarrativeOrPanel:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=o&&(s+=o),s+='      </div>\n    </div>\n    <div class="section-content vertical-list" data-mode="fit">\n      <h4 class="title">'+a(r(null!=(o=null!=e?e.strings:e)?o.color:o,e))+'</h4>\n      <div class="section-content fit-content-container">\n        <div class="content-pane fit-content">\n          <ul class="fit-palette"></ul>\n        </div>\n        <div class="content-pane fit-content">\n          <div class="fit-color-picker not-alone">\n            <div class="color-picker-icons">\n              <i class="fit-brush fa fa-paint-brush"></i>\n              <i class="fit-down-arrow fa fa-chevron-down"></i>\n            </div>\n            <span class="fit-color-picker-color"></span>\n          </div>\n          <div class="fit-color-picker-color"></div>\n        </div>\n        <div class="content-pane fit-loading">\n          <span class="fit-loading-icon large-loader"></span>\n        </div>\n      </div>\n    </div>\n',o=t.if.call(e,null!=e?e.isImmersive:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),null!=o&&(s+=o),s+="  </div>\n</div>\n",o=t.if.call(e,null!=e?e.isNarrativeOrPanel:e,{name:"if",hash:{},fn:this.program(12,i),inverse:this.program(14,i),data:i}),null!=o&&(s+=o),s},useData:!0})}),function(e){"use strict";"function"==typeof define&&define.amd?define("lib/spectrum/spectrum",["jquery"],e):"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";function n(t,n,i,o){for(var r=[],a=0;a<t.length;a++){var s=t[a];if(s){var l=tinycolor(s),u=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(n,s)?" sp-thumb-active":"";var c=l.toString(o.preferredFormat||"rgb"),d=g?"background-color:"+l.toRgbString():"filter:"+l.toFilter();r.push('<span title="'+c+'" data-color="'+l.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{r.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",o.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+r.join("")+"</div>"}function i(){for(var e=0;e<h.length;e++)h[e]&&h[e].hide()}function o(t,n){var i=e.extend({},f,t);return i.callbacks={move:u(i.move,n),change:u(i.change,n),show:u(i.show,n),hide:u(i.hide,n),beforeShow:u(i.beforeShow,n)},i}function r(r,s){function u(){if(V.showPaletteOnly&&(V.showPalette=!0),Re.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),V.palette){pe=V.palette.slice(0),fe=e.isArray(pe[0])?pe:[pe],he={};for(var t=0;t<fe.length;t++)for(var n=0;n<fe[t].length;n++){var i=tinycolor(fe[t][n]).toRgbString();he[i]=!0}}Ce.toggleClass("sp-flat",G),Ce.toggleClass("sp-input-disabled",!V.showInput),Ce.toggleClass("sp-alpha-enabled",V.showAlpha),Ce.toggleClass("sp-clear-enabled",Ye),Ce.toggleClass("sp-buttons-disabled",!V.showButtons),Ce.toggleClass("sp-palette-buttons-disabled",!V.togglePaletteOnly),Ce.toggleClass("sp-palette-disabled",!V.showPalette),Ce.toggleClass("sp-palette-only",V.showPaletteOnly),Ce.toggleClass("sp-initial-disabled",!V.showInitial),Ce.addClass(V.className).addClass(V.containerClassName),B()}function f(){if(K&&window.localStorage){try{var t=window.localStorage[K].split(",#");t.length>1&&(delete window.localStorage[K],e.each(t,function(e,t){y(t)}))}catch(e){}try{me=window.localStorage[K].split(";")}catch(e){}}}function y(t){if(q){var n=tinycolor(t).toRgbString();if(!he[n]&&-1===e.inArray(n,me))for(me.push(n);me.length>ge;)me.shift();if(K&&window.localStorage)try{window.localStorage[K]=me.join(";")}catch(e){}}}function _(){var e=[];if(V.showPalette)for(var t=0;t<me.length;t++){var n=tinycolor(me[t]).toRgbString();he[n]||e.push(me[t])}return e.reverse().slice(0,V.maxSelectionSize)}function w(){var t=N(),i=e.map(fe,function(e,i){return n(e,t,"sp-palette-row sp-palette-row-"+i,V)});f(),me&&i.push(n(_(),t,"sp-palette-row sp-palette-row-selection",V)),Ae.html(i.join(""))}function C(){if(V.showInitial){var e=Ve,t=N();Ne.html(n([e,t],t,"sp-palette-row-initial",V))}}function k(){(te<=0||ee<=0||ie<=0)&&B(),Z=!0,Ce.addClass(ve),be=null,_e.trigger("dragstart.spectrum",[N()])}function x(){Z=!1,Ce.removeClass(ve),_e.trigger("dragstop.spectrum",[N()])}function E(){var e=Me.val();if(null!==e&&""!==e||!Ye){var t=tinycolor(e);t.isValid()?(A(t),L(),F()):Me.addClass("sp-validation-error")}else A(null),L(),F()}function T(){J?I():S()}function S(){var t=e.Event("beforeShow.spectrum");if(J)return void B();_e.trigger(t,[N()]),!1===Q.beforeShow(N())||t.isDefaultPrevented()||(i(),J=!0,e(ye).on("keydown.spectrum",P),e(ye).on("click.spectrum",O),e(window).on("resize.spectrum",X),He.addClass("sp-active"),Ce.removeClass("sp-hidden"),B(),D(),Ve=N(),C(),Q.show(Ve),_e.trigger("show.spectrum",[Ve]))}function P(e){27===e.keyCode&&I()}function O(e){2!=e.button&&(Z||(qe?F(!0):M(),I()))}function I(){J&&!G&&(J=!1,e(ye).off("keydown.spectrum",P),e(ye).off("click.spectrum",O),e(window).off("resize.spectrum",X),He.removeClass("sp-active"),Ce.addClass("sp-hidden"),Q.hide(N()),_e.trigger("hide.spectrum",[N()]))}function M(){A(Ve,!0),F(!0)}function A(e,t){if(tinycolor.equals(e,N()))return void D();var n,i;!e&&Ye?Ke=!0:(Ke=!1,n=tinycolor(e),i=n.toHsv(),le=i.h%360/360,ue=i.s,ce=i.v,de=i.a),D(),n&&n.isValid()&&!t&&(Ge=V.preferredFormat||n.getFormat())}function N(e){return e=e||{},Ye&&Ke?null:tinycolor.fromRatio({h:le,s:ue,v:ce,a:Math.round(1e3*de)/1e3},{format:e.format||Ge})}function j(){return!Me.hasClass("sp-validation-error")}function L(){D(),Q.move(N()),_e.trigger("move.spectrum",[N()])}function D(){Me.removeClass("sp-validation-error"),R();var e=tinycolor.fromRatio({h:le,s:1,v:1});xe.css("background-color",e.toHexString());var t=Ge;de<1&&(0!==de||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=N({format:t}),i="";if(ze.removeClass("sp-clear-display"),ze.css("background-color","transparent"),!n&&Ye)ze.addClass("sp-clear-display");else{var o=n.toHexString(),r=n.toRgbString();if(g||1===n.alpha?ze.css("background-color",r):(ze.css("background-color","transparent"),ze.css("filter",n.toFilter())),V.showAlpha){var a=n.toRgb();a.a=0;var s=tinycolor(a).toRgbString(),l="linear-gradient(left, "+s+", "+o+")";m?Pe.css("filter",tinycolor(s).toFilter({gradientType:1},o)):(Pe.css("background","-webkit-"+l),Pe.css("background","-moz-"+l),Pe.css("background","-ms-"+l),Pe.css("background","linear-gradient(to right, "+s+", "+o+")"))}i=n.toString(t)}V.showInput&&Me.val(i),V.showPalette&&w(),C()}function R(){var e=ue,t=ce;if(Ye&&Ke)Ie.hide(),Se.hide(),Ee.hide();else{Ie.show(),Se.show(),Ee.show();var n=e*ee,i=te-t*te;n=Math.max(-ne,Math.min(ee-ne,n-ne)),i=Math.max(-ne,Math.min(te-ne,i-ne)),Ee.css({top:i+"px",left:n+"px"});var o=de*re;Ie.css({left:o-ae/2+"px"});var r=le*ie;Se.css({top:r-se+"px"})}}function F(e){var t=N(),n="",i=!tinycolor.equals(t,Ve);t&&(n=t.toString(Ge),y(t)),Fe&&_e.val(n),e&&i&&(Q.change(t),_e.trigger("change",[t]))}function B(){J&&(ee=xe.width(),te=xe.height(),ne=Ee.height(),oe=Te.width(),ie=Te.height(),se=Se.height(),re=Oe.width(),ae=Ie.width(),G||(Ce.css("position","absolute"),V.offset?Ce.offset(V.offset):Ce.offset(a(Ce,$e))),R(),V.showPalette&&w(),_e.trigger("reflow.spectrum"))}function U(){_e.show(),$e.off("click.spectrum touchstart.spectrum"),Ce.remove(),He.remove(),h[Qe.id]=null}function H(n,i){return n===t?e.extend({},V):i===t?V[n]:(V[n]=i,"preferredFormat"===n&&(Ge=V.preferredFormat),void u())}function $(){we=!1,_e.attr("disabled",!1),$e.removeClass("sp-disabled")}function z(){I(),we=!0,_e.attr("disabled",!0),$e.addClass("sp-disabled")}function W(e){V.offset=e,B()}var V=o(s,r),G=V.flat,q=V.showSelectionPalette,K=V.localStorageKey,Y=V.theme,Q=V.callbacks,X=d(B,10),J=!1,Z=!1,ee=0,te=0,ne=0,ie=0,oe=0,re=0,ae=0,se=0,le=0,ue=0,ce=0,de=1,pe=[],fe=[],he={},me=V.selectionPalette.slice(0),ge=V.maxSelectionSize,ve="sp-dragging",be=null,ye=r.ownerDocument,_e=(ye.body,e(r)),we=!1,Ce=e(b,ye).addClass(Y),ke=Ce.find(".sp-picker-container"),xe=Ce.find(".sp-color"),Ee=Ce.find(".sp-dragger"),Te=Ce.find(".sp-hue"),Se=Ce.find(".sp-slider"),Pe=Ce.find(".sp-alpha-inner"),Oe=Ce.find(".sp-alpha"),Ie=Ce.find(".sp-alpha-handle"),Me=Ce.find(".sp-input"),Ae=Ce.find(".sp-palette"),Ne=Ce.find(".sp-initial"),je=Ce.find(".sp-cancel"),Le=Ce.find(".sp-clear"),De=Ce.find(".sp-choose"),Re=Ce.find(".sp-palette-toggle"),Fe=_e.is("input"),Be=Fe&&"color"===_e.attr("type")&&p(),Ue=Fe&&!G,He=Ue?e(v).addClass(Y).addClass(V.className).addClass(V.replacerClassName):e([]),$e=Ue?He:_e,ze=He.find(".sp-preview-inner"),We=V.color||Fe&&_e.val(),Ve=!1,Ge=V.preferredFormat,qe=!V.showButtons||V.clickoutFiresChange,Ke=!We,Ye=V.allowEmpty&&!Be;!function(){function t(t){return t.data&&t.data.ignore?(A(e(t.target).closest(".sp-thumb-el").data("color")),L()):(A(e(t.target).closest(".sp-thumb-el").data("color")),L(),V.hideAfterPaletteSelect?(F(!0),I()):F()),!1}if(m&&Ce.find("*:not(input)").attr("unselectable","on"),u(),Ue&&_e.after(He).hide(),Ye||Le.hide(),G)_e.after(Ce).hide();else{var n="parent"===V.appendTo?_e.parent():e(V.appendTo);1!==n.length&&(n=e("body")),n.append(Ce)}f(),$e.on("click.spectrum touchstart.spectrum",function(t){we||T(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(_e.is(":disabled")||!0===V.disabled)&&z(),Ce.click(l),Me.change(E),Me.on("paste",function(){setTimeout(E,1)}),Me.keydown(function(e){13==e.keyCode&&E()}),je.text(V.cancelText),je.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),M(),I()}),Le.attr("title",V.clearText),Le.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Ke=!0,L(),G&&F(!0)}),De.text(V.chooseText),De.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),m&&Me.is(":focus")&&Me.trigger("change"),j()&&(F(!0),I())}),Re.text(V.showPaletteOnly?V.togglePaletteMoreText:V.togglePaletteLessText),Re.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),V.showPaletteOnly=!V.showPaletteOnly,V.showPaletteOnly||G||Ce.css("left","-="+(ke.outerWidth(!0)+5)),u()}),c(Oe,function(e,t,n){de=e/re,Ke=!1,n.shiftKey&&(de=Math.round(10*de)/10),L()},k,x),c(Te,function(e,t){le=parseFloat(t/ie),Ke=!1,V.showAlpha||(de=1),L()},k,x),c(xe,function(e,t,n){if(n.shiftKey){if(!be){var i=ue*ee,o=te-ce*te,r=Math.abs(e-i)>Math.abs(t-o);be=r?"x":"y"}}else be=null;var a=!be||"x"===be,s=!be||"y"===be;a&&(ue=parseFloat(e/ee)),s&&(ce=parseFloat((te-t)/te)),Ke=!1,V.showAlpha||(de=1),L()},k,x),We?(A(We),D(),Ge=V.preferredFormat||tinycolor(We).format,y(We)):D(),G&&S();var i=m?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ae.on(i,".sp-thumb-el",t),Ne.on(i,".sp-thumb-el:nth-child(1)",{ignore:!0},t)}();var Qe={show:S,hide:I,toggle:T,reflow:B,option:H,enable:$,disable:z,offset:W,set:function(e){A(e),F()},get:N,destroy:U,container:Ce};return Qe.id=h.push(Qe)-1,Qe}function a(t,n){var i=t.outerWidth(),o=t.outerHeight(),r=n.outerHeight(),a=t[0].ownerDocument,s=a.documentElement,l=s.clientWidth+e(a).scrollLeft(),u=s.clientHeight+e(a).scrollTop(),c=n.offset(),d=c.left,p=c.top;return p+=r,d-=Math.min(d,d+i>l&&l>i?Math.abs(d+i-l):0),p-=Math.min(p,p+o>u&&u>o?Math.abs(o+r-0):0),{top:p,bottom:c.bottom,left:d,right:c.right,width:c.width,height:c.height}}function s(){}function l(e){e.stopPropagation()}function u(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}function c(t,n,i,o){function r(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(e){if(c){if(m&&u.documentMode<9&&!e.button)return l();var i=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],o=i&&i.pageX||e.pageX,a=i&&i.pageY||e.pageY,s=Math.max(0,Math.min(o-d.left,f)),g=Math.max(0,Math.min(a-d.top,p));h&&r(e),n.apply(t,[s,g,e])}}function s(n){(n.which?3==n.which:2==n.button)||c||!1!==i.apply(t,arguments)&&(c=!0,p=e(t).height(),f=e(t).width(),d=e(t).offset(),e(u).on(g),e(u.body).addClass("sp-dragging"),a(n),r(n))}function l(){c&&(e(u).off(g),e(u.body).removeClass("sp-dragging"),setTimeout(function(){o.apply(t,arguments)},0)),c=!1}n=n||function(){},i=i||function(){},o=o||function(){};var u=document,c=!1,d={},p=0,f=0,h="ontouchstart"in window,g={};g.selectstart=r,g.dragstart=r,g["touchmove mousemove"]=a,g["touchend mouseup"]=l,e(t).on("touchstart mousedown",s)}function d(e,t,n){var i;return function(){var o=this,r=arguments,a=function(){i=null,e.apply(o,r)};n&&clearTimeout(i),!n&&i||(i=setTimeout(a,t))}}function p(){return e.fn.spectrum.inputTypeColorSupport()}var f={beforeShow:s,move:s,change:s,show:s,hide:s,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},h=[],m=!!/msie/i.exec(window.navigator.userAgent),g=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var e="";if(m)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();e.fn.spectrum=function(t,n){if("string"==typeof t){var i=this,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=h[e(this).data("spectrum.id")];if(n){var r=n[t];if(!r)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?i=n.get():"container"==t?i=n.container:"option"==t?i=n.option.apply(n,o):"destroy"==t?(n.destroy(),e(this).removeData("spectrum.id")):r.apply(n,o)}}),i}return this.spectrum("destroy").each(function(){var n=e.extend({},e(this).data(),t),i=r(this,n);e(this).data("spectrum.id",i.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=c,e.fn.spectrum.defaults=f,e.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var n=e("<input type='color'/>")[0];t._cachedResult="color"===n.type&&""!==n.value}return t._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!p()&&t.spectrum({preferredFormat:"hex6"})},function(){function e(e){var n={r:0,g:0,b:0},o=1,a=!1,s=!1;return"string"==typeof e&&(e=M(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(n=t(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=P(e.s),e.v=P(e.v),n=r(e.h,e.s,e.v),a=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=P(e.s),e.l=P(e.l),n=i(e.h,e.s,e.l),a=!0,s="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=w(o),{ok:a,format:e.format||s,r:R(255,F(n.r,0)),g:R(255,F(n.g,0)),b:R(255,F(n.b,0)),a:o}}function t(e,t,n){return{r:255*C(e,255),g:255*C(t,255),b:255*C(n,255)}}function n(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var i,o,r=F(e,t,n),a=R(e,t,n),s=(r+a)/2;if(r==a)i=o=0;else{var l=r-a;switch(o=s>.5?l/(2-r-a):l/(r+a),r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:o,l:s}}function i(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var o,r,a;if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)o=r=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;o=i(l,s,e+1/3),r=i(l,s,e),a=i(l,s,e-1/3)}return{r:255*o,g:255*r,b:255*a}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var i,o,r=F(e,t,n),a=R(e,t,n),s=r,l=r-a;if(o=0===r?0:l/r,r==a)i=0;else{switch(r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:o,v:s}}function r(e,t,n){e=6*C(e,360),t=C(t,100),n=C(n,100);var i=L.floor(e),o=e-i,r=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),l=i%6;return{r:255*[n,a,r,r,s,n][l],g:255*[s,n,n,a,r,r][l],b:255*[r,r,s,n,n,a][l]}}function a(e,t,n,i){var o=[S(D(e).toString(16)),S(D(t).toString(16)),S(D(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function s(e,t,n,i){return[S(O(i)),S(D(e).toString(16)),S(D(t).toString(16)),S(D(n).toString(16))].join("")}function l(e,t){t=0===t?0:t||10;var n=U(e).toHsl();return n.s-=t/100,n.s=k(n.s),U(n)}function u(e,t){t=0===t?0:t||10;var n=U(e).toHsl();return n.s+=t/100,n.s=k(n.s),U(n)}function c(e){return U(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=U(e).toHsl();return n.l+=t/100,n.l=k(n.l),U(n)}function p(e,t){t=0===t?0:t||10;var n=U(e).toRgb();return n.r=F(0,R(255,n.r-D(-t/100*255))),n.g=F(0,R(255,n.g-D(-t/100*255))),n.b=F(0,R(255,n.b-D(-t/100*255))),U(n)}function f(e,t){t=0===t?0:t||10;var n=U(e).toHsl();return n.l-=t/100,n.l=k(n.l),U(n)}function h(e,t){var n=U(e).toHsl(),i=(D(n.h)+t)%360;return n.h=i<0?360+i:i,U(n)}function m(e){var t=U(e).toHsl();return t.h=(t.h+180)%360,U(t)}function g(e){var t=U(e).toHsl(),n=t.h;return[U(e),U({h:(n+120)%360,s:t.s,l:t.l}),U({h:(n+240)%360,s:t.s,l:t.l})]}function v(e){var t=U(e).toHsl(),n=t.h;return[U(e),U({h:(n+90)%360,s:t.s,l:t.l}),U({h:(n+180)%360,s:t.s,l:t.l}),U({h:(n+270)%360,s:t.s,l:t.l})]}function b(e){var t=U(e).toHsl(),n=t.h;return[U(e),U({h:(n+72)%360,s:t.s,l:t.l}),U({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var i=U(e).toHsl(),o=360/n,r=[U(e)];for(i.h=(i.h-(o*t>>1)+720)%360;--t;)i.h=(i.h+o)%360,r.push(U(i));return r}function _(e,t){t=t||6;for(var n=U(e).toHsv(),i=n.h,o=n.s,r=n.v,a=[],s=1/t;t--;)a.push(U({h:i,s:o,v:r})),r=(r+s)%1;return a}function w(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function C(e,t){E(e)&&(e="100%");var n=T(e);return e=R(t,F(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),L.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function k(e){return R(1,F(0,e))}function x(e){return parseInt(e,16)}function E(e){
return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function T(e){return"string"==typeof e&&-1!=e.indexOf("%")}function S(e){return 1==e.length?"0"+e:""+e}function P(e){return e<=1&&(e=100*e+"%"),e}function O(e){return Math.round(255*parseFloat(e)).toString(16)}function I(e){return x(e)/255}function M(e){e=e.replace(A,"").replace(N,"").toLowerCase();var t=!1;if(H[e])e=H[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=z.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=z.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=z.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=z.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=z.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=z.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=z.hex8.exec(e))?{a:I(n[1]),r:x(n[2]),g:x(n[3]),b:x(n[4]),format:t?"name":"hex8"}:(n=z.hex6.exec(e))?{r:x(n[1]),g:x(n[2]),b:x(n[3]),format:t?"name":"hex"}:!!(n=z.hex3.exec(e))&&{r:x(n[1]+""+n[1]),g:x(n[2]+""+n[2]),b:x(n[3]+""+n[3]),format:t?"name":"hex"}}var A=/^[\s,#]+/,N=/\s+$/,j=0,L=Math,D=L.round,R=L.min,F=L.max,B=L.random,U=function(t,n){if(t=t||"",n=n||{},t instanceof U)return t;if(!(this instanceof U))return new U(t,n);var i=e(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=D(1e3*this._a)/1e3,this._format=n.format||i.format,this._gradientType=n.gradientType,this._r<1&&(this._r=D(this._r)),this._g<1&&(this._g=D(this._g)),this._b<1&&(this._b=D(this._b)),this._ok=i.ok,this._tc_id=j++};U.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=w(e),this._roundA=D(1e3*this._a)/1e3,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=D(360*e.h),n=D(100*e.s),i=D(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=n(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=n(this._r,this._g,this._b),t=D(360*e.h),i=D(100*e.s),o=D(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+o+"%)":"hsla("+t+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return a(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return s(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:D(this._r),g:D(this._g),b:D(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+D(this._r)+", "+D(this._g)+", "+D(this._b)+")":"rgba("+D(this._r)+", "+D(this._g)+", "+D(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:D(100*C(this._r,255))+"%",g:D(100*C(this._g,255))+"%",b:D(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+D(100*C(this._r,255))+"%, "+D(100*C(this._g,255))+"%, "+D(100*C(this._b,255))+"%)":"rgba("+D(100*C(this._r,255))+"%, "+D(100*C(this._g,255))+"%, "+D(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&($[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){n=U(e).toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(g,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},U.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:P(e[i]));e=n}return U(e,t)},U.equals=function(e,t){return!(!e||!t)&&U(e).toRgbString()==U(t).toRgbString()},U.random=function(){return U.fromRatio({r:B(),g:B(),b:B()})},U.mix=function(e,t,n){n=0===n?0:n||50;var i,o=U(e).toRgb(),r=U(t).toRgb(),a=n/100,s=2*a-1,l=r.a-o.a;i=s*l==-1?s:(s+l)/(1+s*l),i=(i+1)/2;var u=1-i,c={r:r.r*i+o.r*u,g:r.g*i+o.g*u,b:r.b*i+o.b*u,a:r.a*a+o.a*(1-a)};return U(c)},U.readability=function(e,t){var n=U(e),i=U(t),o=n.toRgb(),r=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),l=Math.max(o.r,r.r)-Math.min(o.r,r.r)+Math.max(o.g,r.g)-Math.min(o.g,r.g)+Math.max(o.b,r.b)-Math.min(o.b,r.b);return{brightness:Math.abs(a-s),color:l}},U.isReadable=function(e,t){var n=U.readability(e,t);return n.brightness>125&&n.color>500},U.mostReadable=function(e,t){for(var n=null,i=0,o=!1,r=0;r<t.length;r++){var a=U.readability(e,t[r]),s=a.brightness>125&&a.color>500,l=a.brightness/125*3+a.color/500;(s&&!o||s&&o&&l>i||!s&&!o&&l>i)&&(o=s,i=l,n=U(t[r]))}return n};var H=U.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$=U.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(H),z=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=U}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}),define("lib-build/css!lib/spectrum/spectrum",[],function(){}),define("lib-build/less!storymaps-react/tpl/builder/ColorPicker",[],function(){}),define("storymaps-react/tpl/builder/ColorPicker",["module","exports","lib-build/i18n!resources/tpl/builder/nls/app","lib/spectrum/spectrum","lib-build/css!lib/spectrum/spectrum","lib-build/less!./ColorPicker"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,null,[{key:"initPicker",value:function(e){var t=[["#005a32","#238443","#41ab5d","#78c679","#addd8e","#d9f0a3","#f7fcb9","#ffffe5"],["#005824","#238b45","#41ae76","#66c2a4","#99d8c9","#ccece6","#e5f5f9","#f7fcfd"],["#016450","#02818a","#369BC0","#67a9cf","#a6bfdb","#D0DAE6","#ece2f0","#fff7ff"],["#034e7b","#0570b0","#3690c0","#74a9cf","#a6bddb","#d0d1e6","#ece7f2","#fff7fb"],["#0c2c84","#225ea8","#1d91c0","#41b6c4","#7fcdbb","#c7e9b4","#edf8b1","#ffffd9"],["#4a1486","#6a51a3","#807dba","#9e9ac8","#bcbddc","#dadaeb","#efedf5","#fcfbfd"],["#7a0177","#ae017e","#dd3497","#f768a1","#fa9fb5","#fcc5c0","#fde0dd","#fff7f3"],["#91003f","#ce1256","#e7298a","#df65b0","#c994c7","#d4b9da","#e7e1ef","#f7f4f9"],["#b10026","#e31a1c","#fc4e2a","#fd8d3c","#feb24c","#fed976","#ffeda0","#ffffcc"],["#8c2d04","#cc4c02","#ec7014","#fe9929","#fec44f","#fee391","#fff7bc","#ffffe6"],["#444444","#7D7D7D","#B5B5B5","#EEEEEE","#3A3921","#777762","#B3B3A1","#F0F0E1"]];$(e.element).spectrum({allowEmpty:e.showClear||!1,color:e.color||"#000",showInput:!0,showAlpha:e.showAlpha||!1,showPalette:e.showPalette||!1,showInitial:!1,showSelectionPalette:!1,hideAfterPaletteSelect:!1,clickoutFiresChange:!1,preferredFormat:"hex3",appendTo:e.appendTo||"body",palette:e.palette||t,chooseText:o.default.builder.textEditor.color.choose,cancelText:o.default.builder.textEditor.color.cancel,clearText:o.default.builder.textEditor.color.clear,show:function(t){e.onShowCallback&&e.onShowCallback(t?t.toRgbString():null)},move:function(t){e.onMoveCallback&&e.onMoveCallback(t?t.toRgbString():null)},change:function(t){e.onChangeCallback&&e.onChangeCallback(t?t.toRgbString():null)},hide:function(t){e.onHideCallback&&e.onHideCallback(t?t.toRgbString():null)},beforeShow:function(){$(e.element).spectrum("container").find(".sp-clear").html('<i class="fa fa-undo" aria-hidden="true"></i>').css("background-image","none"),e.beforeShowCallback&&e.beforeShowCallback()}})}}]),e}();t.default=a,e.exports=t.default}),ColorThief.prototype.getPalette=function(e,t,n){void 0===t&&(t=10),(void 0===n||n<1)&&(n=10);var i=new CanvasImage(e),o=i.getImageData();if(!o)return null;for(var r,a,s,l,u=o.data,c=i.getPixelCount(),d=[],p=0;p<c;p+=n)r=4*p,a=u[r+0],s=u[r+1],l=u[r+2],u[r+3]>=125&&(a>255&&s>255&&l>255||d.push([a,s,l]));var f=MMCQ.quantize(d,t),h=f?f.palette():null;return i.removeCanvas(),h},CanvasImage.prototype.getImageData=function(){var e=null;try{e=this.context.getImageData(0,0,this.width,this.height)}catch(t){e=null}return e},define("storymaps/tpl/utils/ColorThiefOverrides",function(){}),define("storymaps-react/tpl/view/media/builder/TabBackground",["module","exports","./Tab","./../Media","lib-build/hbars!./TabBackground","dojo/sniff","storymaps-react/tpl/builder/ColorPicker","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common","lib/color-thief/dist/color-thief.min","storymaps/tpl/utils/ColorThiefOverrides"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(o),m=l(r),g=l(a),v=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},_=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=v.default.builder.mediaConfig.tabs.background,n.type="background",n.icon="fa-arrows-alt",n.placement=null,n._mediaContext=e.placement,n.focusDot=null,n.previewThumbnail=null,n.checkbox=null,n.responsivePreview=null,n.colorPickerTrigger=null,n.colorPickerThumbnail=null,n.sectionType=e.sectionType,n.imageUrl="",n.colors=null,n}return d(t,e),b(t,[{key:"render",value:function(){var e=(0,m.default)("safari");return(0,h.default)({isTitle:"title"===this.sectionType,isImmersive:"immersive"===this.sectionType&&"background"===this._mediaContext,isNarrativeOrPanel:"block"===this._mediaContext,strings:v.default.builder.mediaConfig.background,isSafari:e})}},{key:"postCreate",value:function(e){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.imageUrl=e.media.url?f.default.addToken(e.media.url):"",this.placement=e.media.options.placement||{type:"fill",fit:{color:""},fill:{x:.5,y:.5}},this.placement.fit||(this.placement.fit={color:""}),this.placement.fill||(this.placement.fill={x:.5,y:.5}),this.setConfig("placement",this.placement),this.focusDot=this._node.find(".overview-dot"),this.previewThumbnail=this._node.find(".overview-thumbnail"),this.checkbox=this._node.find("input.fit-fill"),this.responsivePreview=this._node.find(".responsive-preview"),this.colorPickerTrigger=this._node.find(".color-picker-icons"),this.colorPickerThumbnail=this._node.find(".fit-color-picker-color"),this._applyInitialUI(),this._node.find('[data-toggle="tooltip"]').tooltip(),this._node.closest(".config-content").addClass("placement-config"),this._initColorPicker(),this.addEvents()}},{key:"_applyInitialUI",value:function(){this.responsivePreview.css("background-image","url('"+this.imageUrl+"')"),this.previewThumbnail.attr("src",this.imageUrl),this.focusDot.css("left",100*this.placement.fill.x+"%"),this.focusDot.css("top",100*this.placement.fill.y+"%"),this._getColorPalette(),"fill"===this.placement.type?(this.checkbox.prop("checked",!1),this._node.find('.section-content[data-mode="fit"]').addClass("content-hidden"),this._node.find('.section-content[data-mode="fill"]').removeClass("content-hidden")):(this.checkbox.prop("checked",!0),this._node.find('.section-content[data-mode="fill"]').addClass("content-hidden"),this._node.find('.section-content[data-mode="fit"]').removeClass("content-hidden")),this._loadPreviewFrames()}},{key:"_loadPreviewFrames",value:function(){var e=this,t=new Image,n=!1,i=!1;t.onload=function(){(n=!0)&&i&&e._applyResponsivePreview()},t.onerror=function(){},t.src="resources/tpl/builder/icons/media-config/previewLandscape.png";var o=new Image;o.onload=function(){i=!0,n&&i&&e._applyResponsivePreview()},o.onerror=function(){},o.src="resources/tpl/builder/icons/media-config/previewPortrait.png"}},{key:"_showFitLoading",value:function(){this._node.find(".content-pane.fit-content").hide(),this._node.find(".content-pane.fit-loading").show()}},{key:"_hideFitLoading",value:function(){this._node.find(".content-pane.fit-loading").hide(),this._node.find(".content-pane.fit-content").show()}},{key:"_getColorPalette",value:function(){var e=this;if(!this.colors){this._showFitLoading();var t=new Image;t.onload=function(){e._onImageLoaded(t)},t.onerror=this._onImageError.bind(this),t.crossOrigin="anonymous";var n=this.imageUrl;if(-1!==this.imageUrl.indexOf(".unsplash.com")){var i="?";-1!==this.imageUrl.indexOf("?")&&(i="&"),n=this.imageUrl+i+"storymapsCacheBust="+Date.now()}t.src=n}}},{key:"_onImageLoaded",value:function(e){var t=new window.ColorThief;if(this.colors=t.getPalette(e,10,10),!this.colors)return void this._onImageError();if(this._hideFitLoading(),this._renderPalette(this._node.find(".fit-palette")),this._addPaletteEvents(),this.placement.fit&&!this.placement.fit.color){var n=this._node.find(".fit-palette-item:first-child");this._applyColor(n.css("background-color")),n.addClass("palette-selected")}}},{key:"_onImageError",value:function(){this._node.find(".fit-color-picker").removeClass("not-alone"),this._applyColorPickerColor("rgb(0,0,0)"),this._hideFitLoading()}},{key:"_initColorPicker",value:function(){var e=null,t=null;g.default.initPicker({element:this.colorPickerTrigger,color:this.placement.fit.color,appendTo:this._node.find(".fit-color-picker"),onShowCallback:function(){e=!1,t=this.placement.fit.color}.bind(this),onChangeCallback:function(){e=!0}.bind(this),onHideCallback:function(n){e?this._applyColorPickerColor(n):this._applyColorPickerColor(t)}.bind(this),onMoveCallback:function(e){this._applyColorPickerColor(e)}.bind(this)}),this.colorPickerThumbnail.css("background-color",this.placement.fit.color)}},{key:"_applyColorPickerColor",value:function(e){this._applyColor(e),this.colorPickerThumbnail.css("background-color",e),this.colorPickerThumbnail.css("visibility","visible")}},{key:"_renderPalette",value:function(e){var t="";this.placement.fit&&this.placement.fit.color&&(t=this.placement.fit.color.replace(/ |;/g,"")),e.empty();for(var n=0;n<this.colors.length;n++){var i=this.colors[n],o="",r="rgb("+i.join(",")+")";r===t&&(o="palette-selected",this.colorPickerThumbnail.css("visibility","hidden")),e.append('<li class="fit-palette-item '+o+'" style="background-color:'+r+';"></li>')}}},{key:"_addPaletteEvents",value:function(){var e=this;this._node.find(".fit-palette-item").on("click",function(t){var n=$(t.currentTarget).css("background-color");e._applyColor(n),$(t.currentTarget).addClass("palette-selected")})}},{key:"_applyColor",value:function(e){this._node.find(".fit-palette-item").removeClass("palette-selected"),this.colorPickerThumbnail.css("visibility","hidden"),this.colorPickerTrigger.spectrum("set",e),this.placement.fit={color:e},this.setConfig("placement",this.placement),this._applyResponsivePreview()}},{key:"addEvents",value:function(){var e=this,t=this._node.find(".overview-thumbnail-pane");this.checkbox.on("click",function(){e._onCheckboxClicked()}),this.previewThumbnail.on("click",function(t){e._onThumbnailClicked(t)}),this.focusDot.on("mousedown",function(){t.on("mousemove",function(t){e._onDotDragged(t)})}),t.on("mouseup mouseleave",function(){t.off("mousemove")})}},{key:"_onCheckboxClicked",value:function(){"fill"===this.placement.type?(this._node.find('.section-content[data-mode="fill"]').addClass("content-hidden"),this._node.find('.section-content[data-mode="fit"]').removeClass("content-hidden"),this.placement.type="fit"):(this._node.find('.section-content[data-mode="fit"]').addClass("content-hidden"),this._node.find('.section-content[data-mode="fill"]').removeClass("content-hidden"),this.placement.type="fill"),this.setConfig("placement",this.placement),this._applyResponsivePreview()}},{key:"_applyResponsivePreview",value:function(){var e=this;if("fill"===this.placement.type){var t={width:this._media.width,height:this._media.height};this.responsivePreview.each(function(n,i){var o=$(i),r={width:o.width(),height:o.height()},a=f.default.getTargetDimensions(t,r),s=f.default.findCropDistance(a,o,e.placement.fill);o.css("background-position",s.x+"px "+s.y+"px")}),this.responsivePreview.css("background-size","cover")}else this.responsivePreview.css("background-color",this.placement.fit.color),this.responsivePreview.css("background-size","contain"),this.responsivePreview.css("background-position","50% 50%")}},{key:"_onThumbnailClicked",value:function(e){var t=e.pageX-this.previewThumbnail.offset().left,n=e.pageY-this.previewThumbnail.offset().top,i=t/this.previewThumbnail.width(),o=n/this.previewThumbnail.height();this._applyCrop(i,o)}},{key:"_onDotDragged",value:function(e){var t=e.pageX-this.previewThumbnail.offset().left,n=e.pageY-this.previewThumbnail.offset().top,i=this.previewThumbnail.offset().left+this.previewThumbnail.width(),o=this.previewThumbnail.offset().top+this.previewThumbnail.height();t<0&&(t=0),n<0&&(n=0),e.pageX>i&&(t=this.previewThumbnail.width()),e.pageY>o&&(n=this.previewThumbnail.height());var r=t/this.previewThumbnail.width(),a=n/this.previewThumbnail.height();this._applyCrop(r,a)}},{key:"_applyCrop",value:function(e,t){var n=100*e,i=100*t;this.focusDot.css("left",n+"%"),this.focusDot.css("top",i+"%");var o={x:e,y:t};this.placement.fill=o,this.setConfig("placement",this.placement),this._applyResponsivePreview()}},{key:"beforePanelDestroy",value:function(){"fill"===this.placement.type?delete this.placement.fit:delete this.placement.fill,this.setConfig("placement",this.placement)}},{key:"destroy",value:function(){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.checkbox.off("click"),this.previewThumbnail.off("click"),this.focusDot.off("mousedown"),this.focusDot.off("mouseup mouseleave"),this._node.find(".fit-palette-item").off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy"),this.colorPickerTrigger.spectrum("destroy"),this._node.closest(".config-content").removeClass("placement-config"),this.colors=null}}]),t}(p.default);t.default=_,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageImage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing;return'<div class="builder-config-section centered">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="swap">\n      <div class="edit-media-icons">\n        <i class="fa fa-image icon-image"></i>\n        <i class="fa fa-globe icon-globe"></i>\n        <i class="fa fa-map icon-map"></i>\n        '+s(a(null!=(o=null!=e?e.strings:e)?o.changeMedia:o,e))+'\n      </div>\n    </div>\n  </div>\n</div>\n<div class="builder-config-section centered">\n  <div class="section-content button centered">\n    <div class="config-item button btn btn-bw" data-action="remove">\n      <i class="config-icon fa fa-trash-o"></i>\n      '+s(a(null!=(o=null!=e?e.strings:e)?o.remove:o,e))+'\n    </div>\n  </div>\n</div>\n\n<div class="alt-text-container">\n    <span class="config-icon alt-text-icon fa fa-lg fa-universal-access" data-toggle="tooltip" data-placement="top" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.altTextHelptip:o,e))+'"></span>\n    <textarea class="alt-text-text" rows="1" placeholder="'+s(a(null!=(o=null!=e?e.strings:e)?o.altTextPlaceholder:o,e))+'">'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:l,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+"</textarea>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageImage",["module","exports","./Tab","lib-build/hbars!./TabManageImage","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=d.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n.altText=e.altText,n}return l(t,e),p(t,[{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find('[data-toggle="tooltip"]').tooltip(),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){this._onAction("remove")}.bind(this)),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")}),this._node.find(".alt-text-text").on("input",function(){n.setMedia("altText",n._node.find(".alt-text-text").val()),n.altText=n._node.find(".alt-text-text").val()})}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy"),this._node.find(".alt-text-text").off("input")}},{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.manage,altText:this.altText})}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSectionAppearance",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda;return'<div class="builder-config-section section-appearance no-spread larger">\n  <h4 class="title">'+(0,this.escapeExpression)(r(null!=(o=null!=e?e.strings:e)?o.theme:o,e))+'</h4>\n  <ul class="section-content horizontal section-appearance-container">\n    <li class="config-item" data-type="style" data-value="shadow-light" data-shadow="true" data-text="light">\n      <div class="config-item">\n        <i class="check-mark fa fa-check active"></i>\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/shadowTextLight.png"/>\n      </div>\n    </li>\n    <li class="config-item" data-type="style" data-value="shadow-dark" data-shadow="true" data-text="dark">\n      <div class="config-item">\n        <i class="check-mark fa fa-check active"></i>\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/shadowTextDark.png"/>\n      </div>\n    </li>\n    <li class="config-item" data-type="style" data-value="background-dark" data-background="dark" data-text="light">\n      <div class="config-item">\n        <i class="check-mark fa fa-check active"></i>\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/backgroundDark.png"/>\n      </div>\n    </li>\n    <li class="config-item" data-type="style" data-value="background-light" data-background="light" data-text="dark">\n      <div class="config-item">\n        <i class="check-mark fa fa-check active"></i>\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/backgroundLight.png"/>\n      </div>\n    </li>\n  </ul>\n</div>\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabSectionAppearance",["module","exports","./Tab","lib-build/hbars!./TabSectionAppearance","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=d.default.builder.mediaConfig.tabs.appearance,n.type="section-appearance",n.icon="fa-magic",n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.sectionAppearance})}},{key:"postCreate",
value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var i=this._node.find('.config-item[data-type="style"]'),o=this._getTitleStyle();this._node.find('.config-item[data-value="'+o+'"]').addClass(this.selectedClass),i.on("click",function(e){var t=$(e.currentTarget),o={shadow:!!t.data("shadow"),text:t.data("text"),background:t.data("background")||null};n.setSectionConfig("titleStyle",o),i.removeClass(n.selectedClass),t.addClass(n.selectedClass)})}},{key:"_getTitleStyle",value:function(){var e=this._sectionOptions.titleStyle;return e?e.background?"dark"===e.background?"background-dark":"background-light":e.shadow&&"dark"===e.text?"shadow-dark":"shadow-light":"background-light"}},{key:"beforePanelDestroy",value:function(){}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/builder/notification/Cancel",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return"has-notification-btn"},3:function(e,t,n,i){var o,r=t.helperMissing;return'      <button class="btn btn-primary btn-sm btn-cancel">'+(0,this.escapeExpression)((o=null!=(o=t.labelCancel||(null!=e?e.labelCancel:e))?o:r,"function"==typeof o?o.call(e,{name:"labelCancel",hash:{},data:i}):o))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="builder-notification notification-cancel ';return o=t.if.call(e,null!=e?e.displayCancel:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='">\n  <div class="alert alert-dismissible" role="alert">\n    '+s((r=null!=(r=t.label||(null!=e?e.label:e))?r:a,"function"==typeof r?r.call(e,{name:"label",hash:{},data:i}):r))+"\n",o=t.if.call(e,null!=e?e.displayCancel:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'    <button type="button" class="close" data-dismiss="alert" aria-label="'+s((r=null!=(r=t.labelClose||(null!=e?e.labelClose:e))?r:a,"function"==typeof r?r.call(e,{name:"labelClose",hash:{},data:i}):r))+'">\n      <span aria-hidden="true">&times;</span>\n    </button>\n    <div class="info-icon">\n      <i class="fa fa-info-circle" aria-hidden="true"></i>\n    </div>\n  </div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/builder/notification/Cancel",[],function(){}),define("storymaps-react/tpl/builder/notification/Cancel",["module","exports","./Notification","lib-build/hbars!./Cancel","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Cancel"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._type="start",n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({id:this._id,label:this._label,displayCancel:"start"==this._type,labelCancel:d.default.builder.notification.cancel,labelClose:d.default.builder.notification.close})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._type=e.type,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e)}},{key:"postCreate",value:function(){this._initEvents()}},{key:"_initEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delay||5e3;"start"!=this._type&&setTimeout(function(){this._node.fadeOut({complete:function(){this._node.remove()}.bind(this)}),this._resultDeferred.reject()}.bind(this),t),this._node.find(".btn-cancel").click(function(){this._node.remove(),this._resultDeferred.resolve()}.bind(this))}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/ImageBuilder",[],function(){}),define("storymaps-react/tpl/view/media/ImageBuilder",["module","exports","./Image","lib-build/i18n!resources/tpl/builder/nls/app","./builder/Panel","./builder/TabSizeImage","./builder/TabBackground","./builder/TabManageImage","./builder/TabSectionAppearance","storymaps/tpl/utils/CommonHelper","../../builder/notification/Cancel","dojo/_base/lang","dojo/topic","issue-checker/IssueTypes","lib-build/less!./ImageBuilder"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var b=h(n),y=h(i),_=h(o),w=h(r),C=h(a),k=h(s),x=h(l),E=h(u),T=h(c),S=h(d),P=h(p),O=h(f),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},A=y.default.builder,N=function(e){function t(e,n){m(this,t);var i=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._uploadNotification=null,i._onToggleMediaConfig=null,i._foregroundOptions=null,i._applySectionConfig=null,i}return v(t,e),I(t,[{key:"postCreate",value:function(e){if(this._isAlternate)return void this.postCreateAlternate();M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,this._foregroundOptions=e.foregroundOptions,this._applySectionConfig=e.applySectionConfig,this._image.isPlaceholder?this._node.find(".media-cfg-invite").hide():(this._initConfigPanel(),this._node.find(".img-gallery-invite").click(this._onCreateImageGallery.bind(this)),this._node.find(".img-gallery-add").tooltip({container:"body",title:A.imageGallery.addImage})),this._scanListener=P.default.subscribe("scan/images/"+this._instanceID,S.default.hitch(this,this.checkErrors)),this.initBuilderUI()}},{key:"postCreateAlternate",value:function(){this._isUploadPending&&this._onUploadStart()}},{key:"_initConfigTabs",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._builderConfigurationTabs[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if("size"==a)e.push(new w.default);else if("section-appearance"==a)e.push(new x.default({sectionOptions:this._foregroundOptions,onSectionChange:this._applySectionConfig}));else if("background"==a)e.push(new C.default({sectionType:this._sectionType,placement:this._placement}));else if("manage"==a){var s=this._createManageTab();e.push(s)}}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return this._createIssuesTab(e),e}},{key:"_initConfigPanel",value:function(){M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initConfigPanel",this).call(this),this._builderConfigPanel=new _.default({containerMedia:this._node,tabs:this._initConfigTabs(),media:this._image,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"isUnfixableError",value:function(e){var t=A.mediaErrors;return e.indexOf(O.default.images.inaccessible)>=0&&{msg:t.placeholders.inaccessible,unfixable:!0,showLoadingError:!0}}},{key:"serialize",value:function(e){return this._image.uploadDeferred&&delete this._image.uploadDeferred,this._node&&(this._image.caption=this._node.find(".block-caption").html()),M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"image",this._image,e)}},{key:"_onConfigChange",value:function(){this._applyConfig(),M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}},{key:"_onUploadStart",value:function(){this._isAlternate||(this._uploadNotification=new T.default({container:this._node.parents(".section").eq(0),label:A.media.mediaUpload}),this._node.find(".img-gallery-invite").addClass("disabled"),this._uploadNotification.display().then(function(){this._onAction("remove")}.bind(this),function(){}))}},{key:"_onUploadSuccess",value:function(e){this._image.url=e.url,e.thumbUrl&&(this._image.thumbUrl=e.thumbUrl,this.previewThumb=e.thumbUrl),this._image.dataUrl&&(this._image.dataUrl=null),this._uploadNotification&&this._uploadNotification.update({type:"success",label:A.media.mediaUploadSuccess}),this._isLoaded=!1,this.preload().then(this.load.bind(this)),P.default.publish("builder-media-update"),this._isAlternate||this._node.find(".img-gallery-invite").removeClass("disabled")}},{key:"_onUploadFail",value:function(){this._uploadNotification&&this._uploadNotification.update({type:"error",label:A.media.mediaUploadFail}),"block"==this._placement?this._onAction("remove"):this._isAlternate||this._onAction("swap",{type:"empty",empty:"empty"})}},{key:"_onCreateImageGallery",value:function(){this._onAction("image-to-image-gallery")}},{key:"_createManageTab",value:function(){return new k.default({hideRemove:"background"==this._placement,altText:this._image.altText,showErrors:this.scanResults.errors&&this.scanResults.errors.filter(function(e){return!e.isAlternate}).length&&this.scanResults.unfixable})}},{key:"_makeUrlsHttps",value:function(){if(this._image.url=E.default.forceHttpsUrl(this._image.url),this._image.thumbUrl&&(this._image.thumbUrl=E.default.forceHttpsUrl(this._image.thumbUrl)),this._image.sizes&&this._image.sizes.length){var e=!0,t=!1,n=void 0;try{for(var i,o=this._image.sizes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;r.url=E.default.forceHttpsUrl(r.url)}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}}}]),t}(b.default);t.default=N,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/ImageGalleryBuilder",[],function(){}),define("storymaps-react/tpl/view/media/ImageGalleryBuilder",["module","exports","storymaps/tpl/utils/UI","./Media","./ImageGallery","lib-build/i18n!resources/tpl/builder/nls/app","../../builder/notification/Cancel","dojo/topic","issue-checker/IssueTypes","lib-build/less!./ImageGalleryBuilder"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(o),g=u(r),v=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},C=function(e){function t(e){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return p(t,e),_(t,[{key:"postCreate",value:function(e){var n=this,i=w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);return i.promise.then(function(){if(2==n._images.images.length){var e=n._images.images[1];if(e.dataUrl&&e.uploadDeferred)n._addImageAtIndex(e,1);else{var t=app.data.appItem.item.id;t&&e.url&&e.url.match(t+"/resources")&&n._addImageAtIndex(e,1)}}}),i}},{key:"getPreviewThumbnail",value:function(){if(this._images.images&&this._images.images.length){var e=this._images.images[0];return e.previewThumb?h.default.addToken(e.previewThumb):h.default.addToken(e.url)}return null}},{key:"addEditEvent",value:function(){var e=this;this._node.find(".ig-settings").off("click").on("click",function(t){var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index();e._openMediaPickerForIndex(i)})}},{key:"addAddEvent",value:function(){var e=this;this._node.find(".ig-add").off("click").on("click",function(t){var n=e._images.images.length;$(t.currentTarget).hasClass("disabled")||e._openMediaPickerForIndex(n)})}},{key:"_openMediaPickerForIndex",value:function(e){var t=this;app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(n){"image"===n.type&&t._addImageAtIndex(n.image,e)},function(){})}},{key:"_addImageAtIndex",value:function(e,t){var n=e.url;e.dataUrl&&e.uploadDeferred?(e.uploadDeferred.then(function(e){this._onUploadSuccess(e.url,t)}.bind(this),function(){this._onUploadFail(t)}.bind(this)),this._images.images[t]={url:n,dataUrl:e.dataUrl,instanceID:f.default.getUID()},this._onUploadStart(t)):this._loadImage(n,t)}},{key:"_loadImage",value:function(e,t){var n=this,i=new window.Image;i.onload=function(i){var o=i.currentTarget.naturalWidth,r=i.currentTarget.naturalHeight;o&&r&&(n._images.images[t]={height:r,width:o,url:e,instanceID:f.default.getUID()},n._update())},i.src=h.default.addToken(e)}},{key:"_onUploadStart",value:function(e){this._uploadNotification=new v.default({label:g.default.builder.media.mediaUpload}),this._uploadNotification.display().then(function(){this._images.images.splice(e,1),this._update()}.bind(this),function(){})}},{key:"_onUploadSuccess",value:function(e,t){this._uploadNotification&&this._uploadNotification.update({type:"success",label:g.default.builder.media.mediaUploadSuccess}),b.default.publish("builder-media-update"),this._loadImage(e,t)}},{key:"_onUploadFail",value:function(e){this._uploadNotification&&this._uploadNotification.update({type:"error",label:g.default.builder.media.mediaUploadFail}),this._images.images.splice(e,1),this._update()}},{key:"addRemoveEvent",value:function(){var e=this;this._node.find(".ig-remove").off("click").on("click",function(t){var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index();if(e._images.images.splice(i,1),1==e._images.images.length)return void e._onAction("image-gallery-to-image");e._update()})}},{key:"addReorderEvent",value:function(){var e=this;this._node.find(".ig-move-backward").on("click",function(t){$(t.currentTarget).closest(".ig-move").tooltip("hide");var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index(),o=e._images.images[i];e._images.images[i]=e._images.images[i-1],e._images.images[i-1]=o,e._update()}),this._node.find(".ig-move-forward").on("click",function(t){$(t.currentTarget).closest(".ig-move").tooltip("hide");var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index(),o=e._images.images[i];e._images.images[i]=e._images.images[i+1],e._images.images[i+1]=o,e._update()})}},{key:"_update",value:function(){var e=this;b.default.publish("builder-media-update");var t=this._node.find(".image-gallery-wrapper");this._fadeOutGallery(t),window.setTimeout(function(){var n=t.outerHeight();e._destroyGallery(),e._injectNewGallery(n);var i=e._node.find(".image-gallery-wrapper"),o=e._node.find(".ig-temp-placeholder");e._isLoaded=!1;var r=e.load();r&&r.then(function(){e._fadeInGallery(i,o)})},400)}},{key:"_fadeOutGallery",value:function(e){e.removeClass("show-me"),e.addClass("hide-me")}},{key:"_injectNewGallery",value:function(e){this._node.html(this._render(!1));var t=this._node.find(".image-gallery-wrapper");t.css("display","none"),t.css("opacity",0);var n=this._node.find(".ig-temp-placeholder");n.height(e),n.css("display","block")}},{key:"_fadeInGallery",value:function(e,t){b.default.publish("builder-should-check-story"),e.css("display","block"),t.css("display","none"),e.removeClass("hide-me"),e.addClass("show-me")}},{key:"_destroyGallery",value:function(){this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-backward").tooltip("destroy"),this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-forward").tooltip("destroy"),this._node.find(".ig-add").tooltip("destroy"),this._gallery&&this._gallery.destroy()}},{key:"_addBuilderEvents",value:function(){this.addRemoveEvent(),this.addEditEvent(),this.addAddEvent(),this.addReorderEvent(),this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-backward").tooltip({container:"body",title:g.default.builder.imageGallery.moveBackward}),this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-forward").tooltip({container:"body",title:g.default.builder.imageGallery.moveForward}),this._node.find(".ug-thumb-wrapper").hover(function(e){$(e.currentTarget).find(".builder-ui.ig-item").removeClass("hidden")},function(e){$(e.currentTarget).find(".builder-ui.ig-item").addClass("hidden")})}},{key:"load",value:function(){return w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}},{key:"_onGalleryLoaded",value:function(){var e=this;w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onGalleryLoaded",this).call(this);var n=this._node.find(".ig-add");n.removeClass("disabled"),n.tooltip({container:"body",title:g.default.builder.imageGallery.addImage}),this._addBuilderEvents();var i=!0,o=!1,r=void 0;try{for(var a,s=this._images.images[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)!function(){var t=a.value;b.default.subscribe("scan/images/"+t.instanceID,function(n){var i=e._images.images.findIndex(function(e){return e.url===t.url});e.checkErrors(n,{index:i})})}()}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}}},{key:"isUnfixableError",value:function(e,t){var n=g.default.builder.mediaErrors;return e.indexOf(y.default.images.inaccessible)>=0&&{msg:n.placeholders.inaccessible.replace("${media-type}",n.mediaTypes.image),unfixable:!0,showLoadingError:!0,galleryIndex:t.index}}},{key:"serialize",value:function(){this._node&&(this._images.caption=this._node.find(".block-caption").html());var e=!0,n=!1,i=void 0;try{for(var o,r=this._images.images[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;delete a.dataUrl,delete a.adjustedHeight}}catch(e){n=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}return w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"image-gallery",this._images,!1)}}]),t}(m.default);t.default=C,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabVideo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'\x3c!--\n<div class="builder-config-section larger">\n  <h4 class="title">Play</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray" data-type="play" data-value="automatic">Play Automatically</li>\n    <li class="config-item btn btn-gray" data-type="play" data-value="click">Play on Click</li>\n  </ul>\n</div>\n--\x3e\n<div class="builder-config-section">\n  <h4 class="title">'+a(r(null!=(o=null!=e?e.strings:e)?o.audio:o,e))+'</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray" data-type="audio" data-value="on">'+a(r(null!=(o=null!=e?e.strings:e)?o.buttonToEnable:o,e))+'</li>\n    <li class="config-item btn btn-gray" data-type="audio" data-value="muted">'+a(r(null!=(o=null!=e?e.strings:e)?o.muted:o,e))+'</li>\n  </ul>\n  <span class="aside">'+a(r(null!=(o=null!=e?e.strings:e)?o.volumeAside:o,e))+"</span>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabVideo",["module","exports","./Tab","lib-build/hbars!./TabVideo","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.title=d.default.builder.mediaConfig.tabs.appearance,e.type="appearance",e.icon="fa-sliders",e}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.appearance})}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindPlayOptions(),this.bindAudioOptions()}},{key:"bindPlayOptions",value:function(){var e=this,t=this._node.find('.config-item[data-type="play"]'),n=this._media.play||"automatic";this._node.find('.config-item[data-type="play"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),o=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("play",o)})}},{key:"bindAudioOptions",value:function(){var e=this,t=this._node.find('.config-item[data-type="audio"]'),n=this._media.options&&this._media.options.audio||"on";this._node.find('.config-item[data-type="audio"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),o=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("audio",o)})}},{key:"unbindPlayOptions",value:function(){this._node.find('.config-item[data-type="play"]').off("click")}},{key:"unbindAudioOptions",value:function(){this._node.find('.config-item[data-type="audio"]').off("click")}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindPlayOptions(),this.unbindAudioOptions()}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageMedia",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing;return'<div class="builder-config-section centered">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="swap">\n      <div class="edit-media-icons">\n        <i class="fa fa-image icon-image"></i>\n        <i class="fa fa-globe icon-globe"></i>\n        <i class="fa fa-map icon-map"></i>\n        '+s(a(null!=(o=null!=e?e.strings:e)?o.changeMedia:o,e))+'\n      </div>\n    </div>\n  </div>\n</div>\n<div class="builder-config-section centered">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="remove">\n      <i class="config-icon fa fa-trash-o"></i>\n      '+s(a(null!=(o=null!=e?e.strings:e)?o.remove:o,e))+'\n    </div>\n  </div>\n</div>\n\n<div class="alt-text-container">\n    <span class="config-icon alt-text-icon fa fa-lg fa-universal-access" data-toggle="tooltip" data-placement="top" title="'+s(a(null!=(o=null!=e?e.strings:e)?o.altTextHelptip:o,e))+'"></span>\n    <textarea class="alt-text-text" rows="1" placeholder="'+s(a(null!=(o=null!=e?e.strings:e)?o.altTextPlaceholder:o,e))+'">'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:l,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+"</textarea>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageMedia",["module","exports","./Tab","lib-build/hbars!./TabManageMedia","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=d.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n.altText=e.altText,n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.manage,altText:this.altText})}},{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find('[data-toggle="tooltip"]').tooltip(),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")}),this._node.find(".alt-text-text").on("input",function(){n.setMedia("altText",n._node.find(".alt-text-text").val()),n.altText=n._node.find(".alt-text-text").val()})}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy"),this._node.find(".alt-text-text").off("input")}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabAlternateMedia",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div class="builder-config-section centered">\n  <div class="tab-alternate-issue block-media show-loading-error error">\n    ';return r=null!=(r=t.errorTemplate||(null!=e?e.errorTemplate:e))?r:a,o="function"==typeof r?r.call(e,{name:"errorTemplate",hash:{},data:i}):r,null!=o&&(l+=o),l+'\n  </div>\n  <span class="fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="'+s((r=null!=(r=t.errorTooltip||(null!=e?e.errorTooltip:e))?r:a,"function"==typeof r?r.call(e,{name:"errorTooltip",hash:{},data:i}):r))+'"></span>\n</div>\n'},3:function(e,t,n,i){var o,r,a=t.helperMissing,s="  ";return r=null!=(r=t.backgroundTpl||(null!=e?e.backgroundTpl:e))?r:a,o="function"==typeof r?r.call(e,{name:"backgroundTpl",hash:{},data:i}):r,null!=o&&(s+=o),s+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<div class="builder-config-section alt-media">\n  <h4 class="title">'+a(r(null!=(o=null!=(o=null!=e?e.strings:e)?o.altMedia:o)?o.alternativeMedia:o,e))+'</h4>\n  <div class="section-content button">\n    <div class="alt-image-swap config-item button btn btn-bw" data-action="swap">\n      <span class="fa fa-image fa-lg"/>\n      '+a(r(null!=(o=null!=(o=null!=e?e.strings:e)?o.altMedia:o)?o.changeAltImage:o,e))+'\n    </div>\n  </div>\n  <div class="section-content button">\n    <div class="alt-image-remove config-item button btn btn-bw" data-action="remove">\n      <i class="config-icon fa fa-trash-o fa-lg"></i>\n      '+a(r(null!=(o=null!=(o=null!=e?e.strings:e)?o.manage:o)?o.remove:o,e))+'\n    </div>\n  </div>\n  <span class="alt-image-tooltip fa fa-info-circle fa-lg" data-toggle="tooltip" data-placement="top" title="'+a(r(null!=(o=null!=(o=null!=e?e.strings:e)?o.altMedia:o)?o.explanation:o,e))+'"></span>\n</div>\n';return o=t.if.call(e,null!=e?e.hasError:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(s+=o),s},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/TabAlternateMedia",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabAlternateMedia",["module","exports","./TabBackground","lib-build/hbars!./TabAlternateMedia","lib-build/hbars!./../MediaError","issue-checker/IssueTypes","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common","lib-build/less!./TabAlternateMedia"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{
default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(o),h=s(r),m=s(a),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=m.default.builder.mediaErrors,y=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=m.default.builder.mediaConfig.tabs.mobile,n.type="alternate",n.icon="fa-mobile-phone fa-lg",n.media=e.media,n.errorId=e.errorId,n}return c(t,e),g(t,[{key:"render",value:function(){return(0,p.default)({hasError:this.errorId&&this.errorId===h.default.images.inaccessible,errorTemplate:(0,f.default)({message:b.placeholders.generic}),errorTooltip:b.contentIssues.altImageBroken,strings:m.default.builder.mediaConfig,backgroundTpl:v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)})}},{key:"postCreate",value:function(e){var n=this;e.media=this.media,v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("alternate-media-swap")}),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("alternate-media-remove")}),this._node.find('[data-toggle="tooltip"]').tooltip()}},{key:"destroy",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="swap"]').off("click"),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy")}}]),t}(d.default);t.default=y,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabAlternateEmpty",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l=this.lambda;return'    <div class="warning-summary">\n      <div class="title-wrapper">\n        <div class="warning-title">'+s((r=null!=(r=t.warningTitle||(null!=e?e.warningTitle:e))?r:a,"function"==typeof r?r.call(e,{name:"warningTitle",hash:{},data:i}):r))+'</div>\n        <div class="warning-description">'+s((r=null!=(r=t.warningDescription||(null!=e?e.warningDescription:e))?r:a,"function"==typeof r?r.call(e,{name:"warningDescription",hash:{},data:i}):r))+'</div>\n      </div>\n        <div class="fix-btn config-item btn btn-primary" data-action="add">\n          <span class="small-loader hidden"></span>\n          <span>'+s(l(null!=(o=null!=e?e.strings:e)?o.uploadAltImage:o,e))+"</span>\n        </div>\n      </div>\n"},3:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l=this.lambda;return'      <div class="section-content button">\n        <span class="mobile-tab-help">'+s((r=null!=(r=t.emptyWarningDescription||(null!=e?e.emptyWarningDescription:e))?r:a,"function"==typeof r?r.call(e,{name:"emptyWarningDescription",hash:{},data:i}):r))+'</span>\n        <div class="alt-image-add config-item button btn btn-bw" data-action="add">\n          <span class="fa fa-image fa-lg"/>\n          '+s(l(null!=(o=null!=e?e.strings:e)?o.uploadAltImage:o,e))+"\n        </div>\n      </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression,s='<div class="builder-config-section alt-media-empty">\n  <h4 class="title alt-media-title">'+a(r(null!=(o=null!=e?e.strings:e)?o.alternativeMedia:o,e))+'</h4>\n  <div class="section-content">\n';return o=t.if.call(e,null!=e?e.hasWarnings:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=o&&(s+=o),s+"  </div>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/TabAlternateEmpty",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabAlternateEmpty",["module","exports","./Tab","lib-build/hbars!./TabAlternateEmpty","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./TabAlternateEmpty","lib-build/less!./Common"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=d.default.builder.mediaConfig.tabs.mobile,n.type="alternate",n.icon="fa-mobile-phone fa-lg",n}return l(t,e),p(t,[{key:"render",value:function(){var e=d.default.builder.mediaErrors.contentIssues,t=e.noAltImageUnsupported,n=e.noAltImageWarning,i=d.default.builder.mediaErrors.contentWarnings,o=i.noAltImageUnsupported,r=i.noAltImageWarning;return(0,c.default)({strings:d.default.builder.mediaConfig.altMedia,hasWarnings:this.showWarnings,warningTitle:this.mobileSupported?n:t,warningDescription:this.mobileSupported?r:o,emptyWarningDescription:r})}},{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find('.config-item[data-action="add"]').on("click",function(){n._onAction("alternate-media-add")}),this._node.find('[data-toggle="tooltip"]').tooltip()}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="add"]').off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy")}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/VideoBuilder",[],function(){}),define("storymaps-react/tpl/view/media/VideoBuilder",["module","exports","./Video","./builder/Panel","./builder/TabSize","./builder/TabVideo","./builder/TabManageMedia","./builder/TabSectionAppearance","./builder/TabAlternateMedia","./builder/TabAlternateEmpty","storymaps/tpl/utils/CommonHelper","dojo/_base/lang","dojo/topic","issue-checker/IssueTypes","../../builder/Issues","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./VideoBuilder"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h,m){"use strict";function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var _=g(n),w=g(i),C=g(o),k=g(r),x=g(a),E=g(s),T=g(l),S=g(u),P=g(c),O=g(d),I=g(p),M=g(f),A=g(h),N=g(m),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),L=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},D=N.default.builder.mediaErrors,R=function(e){function t(e){v(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onToggleMediaConfig=null,n._foregroundOptions=null,n._applySectionConfig=null,n}return y(t,e),j(t,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"block"==e.placement&&this._video.title&&(this._video.caption=this._video.title),delete this._video.title,L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,this._foregroundOptions=e.foregroundOptions,this._applySectionConfig=e.applySectionConfig,this._initConfigPanel(),this.initBuilderUI(),this._scanListener=I.default.subscribe("scan/videos/"+this._instanceID,O.default.hitch(this,this.checkErrors))}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getAlternate();return n&&n.load(),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e)}},{key:"onDuplicateOrEdit",value:function(e,t){this._placement=e._placement,this._videoPlayer=e._videoPlayer,this._isVideoLoaded=!0,t&&this.reload()}},{key:"reload",value:function(){"vimeo"===this._video.source?this.reloadOrReplayVimeoVideo():"youtube"===this._video.source&&this.reloadOrReplayYoutubeVideo()}},{key:"isUnfixableError",value:function(e){return e.indexOf(M.default.videos.inaccessible)>=0&&{msg:D.placeholders.inaccessible.replace("${media-type}",D.mediaTypes.video),showLoadingError:!0,unfixable:!0}}},{key:"serialize",value:function(e){return delete this._video.user,delete this._video.thumbUrl,this._node&&(this._video.caption=this._node.find(".block-caption").html()),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"video",this._video,e)}},{key:"_initConfigTabs",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._builderConfigurationTabs[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if("size"==a)e.push(new C.default);else if("appearance"==a)"immersive"==this._sectionType&&"background"===this._placement&&e.push(new k.default);else if("section-appearance"==a)e.push(new E.default({sectionOptions:this._foregroundOptions,onSectionChange:this._applySectionConfig}));else if("manage"==a){var s=this._createManageTab();e.push(s)}else if("alternate"==a){var l=this._createAlternateTab(this._sectionType);e.push(l)}}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return this._createIssuesTab(e),e}},{key:"_initConfigPanel",value:function(){L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initConfigPanel",this).call(this),this._builderConfigPanel=new w.default({containerMedia:this._node,tabs:this._initConfigTabs(),media:this._video,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"_onConfigChange",value:function(){this._applyConfig(),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this),"background"===this._placement&&"immersive"===this._sectionType&&this._isVideoLoaded&&(this._node.find(".toggle-mute-button").toggleClass("mute-button-active","muted"!==this._video.options.audio),"muted"===this._video.options.audio&&this._mute())}},{key:"_createAlternateTab",value:function(e){var t=this.getAlternate(),n=O.default.getObject("scanResults.errors",!1,this),i=O.default.getObject("scanResults.warnings",!1,this),o=n?n.find(function(e){return e.isAlternate}):null,r=i&&i.some(function(e){return e.id===A.default.content.noAlternateMedia});return t?new T.default({sectionType:e,media:t._image,errorId:o?o.id:null,showErrors:o,placement:this._placement}):new S.default({showWarnings:r,mobileSupported:"block"===this._placement})}},{key:"_createManageTab",value:function(){return new x.default({hideRemove:"background"==this._placement,showErrors:this.scanResults.errors&&this.scanResults.errors.filter(function(e){return!e.isAlternate}).length&&this.scanResults.unfixable})}},{key:"_makeUrlsHttps",value:function(){this._video.url=P.default.forceHttpsUrl(this._video.url)}},{key:"updateParams",value:function(e){this._start=e._start,this._end=e._end,this._video.start=e._start,this._video.end=e._end,this._cache&&this._cache[this.id]&&(this._cache[this.id].params={start:e._start,end:e._end})}}]),t}(_.default);t.default=R,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManage",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" disabled"},3:function(e,t,n,i){return'        <span class="config-icon fa-stack">\n          <i class="fa fa-map-o"></i>\n          <i class="fa fa-pencil overlaid-icon"></i>\n        </span>\n'},5:function(e,t,n,i){return'        <i class="config-icon fa fa-external-link"></i>\n'},7:function(e,t,n,i){var o,r=this.lambda;return'    <span class="aside">'+(0,this.escapeExpression)(r(null!=(o=null!=e?e.strings:e)?o.editAside:o,e))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l=this.lambda,u='<div class="webmap-name">'+s((r=null!=(r=t.mapName||(null!=e?e.mapName:e))?r:a,"function"==typeof r?r.call(e,{name:"mapName",hash:{},data:i}):r))+'</div>\n\n<div class="builder-config-section larger">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="swap">\n      <div class="edit-media-icons">\n        <i class="fa fa-image icon-image"></i>\n        <i class="fa fa-globe icon-globe"></i>\n        <i class="fa fa-map icon-map"></i>\n        '+s(l(null!=(o=null!=e?e.strings:e)?o.changeMedia:o,e))+'\n      </div>\n    </div>\n  </div>\n</div>\n<div class="builder-config-section larger">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw';return o=t.if.call(e,null!=e?e.showErrors:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='" data-action="edit" data-toggle="tooltip" data-placement="top" title="'+s(l(null!=(o=null!=e?e.strings:e)?o.editAside:o,e))+'">\n',o=t.if.call(e,null!=e?e.mapEditorEnabled:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.program(5,i),data:i}),null!=o&&(u+=o),u+="      "+s(l(null!=(o=null!=e?e.strings:e)?o.edit:o,e))+"\n    </div>\n  </div>\n",o=t.unless.call(e,null!=e?e.mapEditorEnabled:e,{name:"unless",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+'</div>\n<div class="builder-config-section">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="remove">\n      <i class="config-icon fa fa-trash-o"></i>\n      '+s(l(null!=(o=null!=e?e.strings:e)?o.remove:o,e))+'\n    </div>\n  </div>\n</div>\n\n<div class="alt-text-container">\n    <span class="config-icon alt-text-icon fa fa-lg fa-universal-access" data-toggle="tooltip" data-placement="top" title="'+s(l(null!=(o=null!=e?e.strings:e)?o.altTextHelptip:o,e))+'"></span>\n    <textarea class="alt-text-text" rows="1" placeholder="'+s(l(null!=(o=null!=e?e.strings:e)?o.altTextPlaceholder:o,e))+'">'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+"</textarea>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/TabManage",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabManage",["module","exports","./Tab","lib-build/hbars!./TabManage","lib-build/i18n!resources/tpl/builder/nls/app","storymaps/tpl/builder/BuilderHelper","lib-build/less!./Common","lib-build/less!./TabManage"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=p.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n.mapName=e.mapName,n.altText=e.altText,n._mediaType=e.mediaType,n._mediaId=e.mediaId,n._showErrors=e.showErrors,n._mapEditorEnabled=e.mapEditorEnabled,n}return u(t,e),h(t,[{key:"setMapName",value:function(e){this.mapName=e,this._node&&this.updateMapName()}},{key:"updateMapName",value:function(){this._node.find(".webmap-name").text(this.mapName)}},{key:"render",value:function(){return(0,d.default)({mapName:this.mapName,strings:p.default.builder.mediaConfig.manage,altText:this.altText,showErrors:this._showErrors,mapEditorEnabled:this._mapEditorEnabled})}},{key:"postCreate",value:function(e){var n=this;m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find('[data-toggle="tooltip"]').tooltip(),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find(".alt-text-text").on("input",function(){n.setMedia("altText",n._node.find(".alt-text-text").val()),n.altText=n._node.find(".alt-text-text").val()}),this._node.find('.config-item[data-action="edit"]').on("click",function(){n._mediaType&&n._mediaId&&("webmap"==n._mediaType?n._mapEditorEnabled?n._onAction("arcgis-edit"):n._onAction("arcgis-edit-external"):"webscene"==n._mediaType&&window.open(f.default.getSceneViewerLink(n._mediaId),"_blank"))}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="edit"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy"),this._node.find(".alt-text-text").off("input")}}]),t}(c.default);t.default=g,e.exports=t.default}),define("storymaps-react/tpl/view/media/builder/TabArcGIS",["module","exports","./Tab","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=u.default.builder.mediaConfig.tabs.appearance,n.type="appearance",n.icon="fa-sliders",n}return s(t,e),c(t,[{key:"postCreate",value:function(e){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindPopup(),this.bindInteraction(),this.bindView(),this.bindExtras()}},{key:"bindPopup",value:function(){var e=this,t=this._node.find('.config-item[data-type="popup"]'),n=this._media.popup||!0,i=n?"enabled":"disabled";this._node.find('.config-item[data-type="popup"][data-value="'+i+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),o="enabled"===i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setMedia("popup",o)})}},{key:"unbindPopup",value:function(){this._node.find('.config-item[data-type="popup"]').off("click")}},{key:"bindInteraction",value:function(){var e=this,t=this._node.find('.config-item[data-type="interaction"]'),n=this._media.options.interaction||"enabled";this._node.find('.config-item[data-type="interaction"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),o=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("interaction",o)})}},{key:"unbindInteraction",value:function(){this._node.find('.config-item[data-type="interaction"]').off("click")}},{key:"bindView",value:function(){}},{key:"unbindView",value:function(){}},{key:"bindExtras",value:function(){var e=this._node.find('.config-item[data-type="extra"]'),t=!1,n=!1,i=!1;this._media.extras&&(t=this._media.extras.legend&&this._media.extras.legend.enabled,n=this._media.extras.search&&this._media.extras.search.enabled,i=this._media.extras.locate&&this._media.extras.locate.enabled),this._node.find('.config-item[data-type="extra"][data-value="legend"] input[type="checkbox"]').prop("checked",t),this._node.find('.config-item[data-type="extra"][data-value="search"] input[type="checkbox"]').prop("checked",n),this._node.find('.config-item[data-type="extra"][data-value="locate"] input[type="checkbox"]').prop("checked",i);var o=this;e.on("click",function(e){var t=$(e.currentTarget),n=t.data("value"),i=t.find('input[type="checkbox"]').is(":checked");o.setExtras(n,i)})}},{key:"unbindExtras",value:function(){this._node.find('.config-item[data-type="extra"]').off("click")}},{key:"setExtras",value:function(e,t){this._media.extras||(this._media.extras={}),this._media.extras[e]||(this._media.extras[e]={}),this._media.extras[e].enabled=t,this.onChange()}},{key:"destroy",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindPopup(),this.unbindInteraction(),this.unbindView(),this.unbindExtras()}}]),t}(l.default);t.default=p,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebMap",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section">\n  <h4 class="title">'+a(r(null!=(o=null!=e?e.strings:e)?o.view:o,e))+'</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray disabled" data-type="reset" data-value="location">'+a(r(null!=(o=null!=e?e.strings:e)?o.resetLocation:o,e))+'</li>\n    <li class="config-item btn btn-gray disabled" data-type="reset" data-value="layers">'+a(r(null!=(o=null!=e?e.strings:e)?o.resetLayers:o,e))+'</li>\n    <li class="config-item btn btn-gray disabled" data-type="reset" data-value="popup">'+a(r(null!=(o=null!=e?e.strings:e)?o.clearPopup:o,e))+'</li>\n  </ul>\n</div>\n<div class="builder-config-section larger">\n  <h4 class="title">'+a(r(null!=(o=null!=e?e.strings:e)?o.interaction:o,e))+'</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="disabled">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionDisabled:o,e))+'</li>\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="button">'+a(r(null!=(o=null!=e?e.strings:e)?o.buttonToEnable:o,e))+'</li>\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="enabled">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionEnabled:o,e))+' <sup style="vertical-align: 0;">*</sup></li>\n  </ul>\n  <span class="aside">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionAside:o,e))+'</span>\n</div>\n\x3c!--<div class="builder-config-section">\n  <h4 class="title">Pop-Ups</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray" data-type="popup" data-value="disabled">Disabled</li>\n    <li class="config-item btn btn-gray" data-type="popup" data-value="enabled">Enabled</li>\n  </ul>\n</div>\n<div class="builder-config-section">\n  <h4 class="title">Extras</h4>\n  <ul class="section-content vertical-list checkmarks">\n    <li class="config-item btn btn-gray" data-type="extra" data-value="legend">\n      <label class="check"><input type="checkbox" value="legend"> Legend</label>\n    </li>\n    <li class="config-item btn btn-gray" data-type="extra" data-value="search">\n      <label class="check"><input type="checkbox" value="search"> Search</label>\n    </li>\n    <li class="config-item btn btn-gray" data-type="extra" data-value="locate">\n      <label class="check"><input type="checkbox" value="locate"> Locate</label>\n    </li>\n  </ul>\n</div>--\x3e\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebMap",["module","exports","./TabArcGIS","esri/dijit/LayerList","esri/arcgis/utils","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./TabWebMap"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(o),h=s(r),m=s(a),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.map=e.map,n.layerList=null,n._layerListNode=e.layerListNode,n._eventExtent=null,n._eventPopup=null,n._eventPopup2=null,n._isFirstOpening=!0,n}return c(t,e),g(t,[{key:"setMap",value:function(e){e&&(this.map=e),this.attachEvents(),this._node&&this.initLayerList()}},{key:"attachEvents",value:function(){this._media&&this.map&&(this._eventExtent||(this._eventExtent=this.map.map.on("extent-change",function(e){this._isActive&&(this.setMedia("extent",e.extent.toJson()),this._updateLocationReset())}.bind(this))),this._eventPopup||(this._eventPopup=this.map.map.on("click",function(){if(this._isActive){var e=this.getSelectedFeatureInfo();if(e){this._node.find('.config-item[data-type="reset"][data-value="popup"]').removeClass("disabled"),this.setMedia("popup",e)}}}.bind(this))),this._eventPopup2||(this._eventPopup2=$(this.map.map.infoWindow.domNode).find(".titleButton.close").click(function(){if(this._isActive){this._node.find('.config-item[data-type="reset"][data-value="popup"]').addClass("disabled"),this.setMedia("popup",null)}}.bind(this))))}},{key:"detachEvents",value:function(){this._eventExtent&&(this._eventExtent.remove(),this._eventExtent=null),this._eventPopup&&(this._eventPopup.remove(),this._eventPopup=null),this._eventPopup2&&(this._eventPopup2.remove(),this._eventPopup2=null)}},{key:"initLayerList",value:function(){var e=this;if(!this.layerList&&this._rootNode&&this._media&&this.map){this._layerListNode.html('<div class="layer-list"></div>');var t=this._layerListNode.find(".layer-list")[0],n=this._node.find('.config-item[data-type="reset"][data-value="layers"]'),i=f.default.getLayerList(this.map);if(this._media.layers)for(var o=0;o<this._media.layers.length;o++)!function(t){var n=e._media.layers[t],o=i.find(function(e){var t=e.id;return e.layer&&e.layer.id&&(t=e.layer.id),e.featureCollection&&(t=e.featureCollection.layers[0].id),n.id===t});o&&(o.visibility=n.visibility)}(o);this.layerList=new p.default({map:this.map.map,layers:i,showSubLayers:!1},t),this.layerList.startup(),this._media.layers&&this._media.layers.length>0&&n.removeClass("disabled");var r=this;this.layerList.on("toggle",function(t){if(e._isActive){e._media.layers||(e._media.layers=[]);var i=r.layerList.layers[t.layerIndex],o=r._media.layers.findIndex(function(e){var t=i.id;return e.layer&&e.layer.id&&(t=e.layer.id),i.featureCollection&&(t=i.featureCollection.layers[0].id),e.id===t});if(-1!==o)r._media.layers.splice(o,1);else{var a=i.id
;i.layer&&i.layer.id&&(a=i.layer.id),i.featureCollection&&(a=i.featureCollection.layers[0].id),r._media.layers.push({id:a,visibility:i.visibility})}e.onChange(),r._media.layers.length>0?n.removeClass("disabled"):n.addClass("disabled")}})}}},{key:"postCreate",value:function(e){var n=this;this._isFirstOpening=!1,v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.map&&this.initLayerList();var i=this._node.find('.config-item[data-type="reset"][data-value="location"]'),o=this._node.find('.config-item[data-type="reset"][data-value="popup"]'),r=this._node.find('.config-item[data-type="reset"][data-value="layers"]');this._media.popup&&o.removeClass("disabled"),i.on("click",function(){n.detachEvents(),n.setMedia("extent",null),n._updateLocationReset()}),o.on("click",function(){o.addClass("disabled"),n.setMedia("popup",null)}),r.on("click",function(){n.layerList.destroy(),n.layerList=null,r.addClass("disabled"),n.setMedia("layers",[]),n.initLayerList()}),this._updateLocationReset(),this.attachEvents(),this.map&&$(this.map.map.container).addClass("appearance-invite")}},{key:"_updateLocationReset",value:function(){this._node.find('.config-item[data-type="reset"][data-value="location"]').toggleClass("disabled",!this._media.extent)}},{key:"destroy",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-type="reset"][data-value="location"]').off("click"),this.layerList&&(this.layerList.destroy(),this.layerList=null),this.map&&$(this.map.map.container).removeClass("appearance-invite")}},{key:"render",value:function(){return(0,m.default)({strings:h.default.builder.mediaConfig.appearance})}},{key:"getSelectedFeatureInfo",value:function(){var e=this.map.map.infoWindow.getSelectedFeature();if(!e)return null;var t=e.getLayer(),n=t.fields;if(!n)return null;var i;if(t.objectIdField?i=[{name:t.objectIdField}]:(i=$.grep(n,function(e){return"esriFieldTypeOID"===e.type}),t&&n&&!i.length&&(i=$.grep(n,function(e){return"OBJECTID"===e.name||"FID"===e.name||"objectId"===e.name}),i.length||(i=$.grep(n,function(e){return"esriFieldTypeInteger"===e.type})))),i.length){var o=i[0].name;return{layerId:t.id,fieldName:o,fieldValue:e.attributes[o],anchorPoint:this.map.map.infoWindow.location.toJson()}}return null}},{key:"onConfigClose",value:function(){this._isActive=!1}}]),t}(d.default);t.default=b,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabIssueItems",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r=t.helperMissing,a=this.escapeExpression;return'        <div class="layer" data-lyr-id="'+a((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{name:"id",hash:{},data:i}):o))+'">\n          <span class="error-icon fa fa-exclamation-triangle"></span>\n          <span>'+a((o=null!=(o=t.lyrTitle||(null!=e?e.lyrTitle:e))?o:r,"function"==typeof o?o.call(e,{name:"lyrTitle",hash:{},data:i}):o))+"</span>\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div class="issue-items">\n    <div class="webmap-info">\n      <span class="error-icon fa fa-exclamation-triangle"></span>\n      <span>'+s((r=null!=(r=t.webmapLabel||(null!=e?e.webmapLabel:e))?r:a,"function"==typeof r?r.call(e,{name:"webmapLabel",hash:{},data:i}):r))+'</span>\n    </div>\n    <div class="layers-info">\n';return o=t.each.call(e,null!=e?e.layers:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+"    </div>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/TabIssueItems",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabIssuesMap",["module","exports","./TabIssues","lib-build/hbars!./TabIssueItems","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./TabIssues","lib-build/less!./TabIssueItems","lib-build/less!./Common"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=d.default.builder.mediaErrors.mapIssues,m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._mapEditorEnabled=e.mapEditorEnabled,e.map&&n.setMap(e.map),n}return l(t,e),p(t,[{key:"setMap",value:function(e){e&&(this.map=e,this.mapItem=this.map.itemInfo.item)}},{key:"render",value:function(){var e=this.scanResults.layers.slice().reverse();e.forEach(function(e){e.details&&e.details.title&&(e.lyrTitle=e.details.title.replace(/_/g," "))});var n=(0,c.default)({layers:e,webmapLabel:h.mapLabel+" "+this.scanResults.details.title});return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,{itemsTemplate:n,showDefaultButton:!0,isMap:!0})}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.displayErrors(),this.highlightFromError(this.scanResults.errors[0]);var n=this._node.find(".fix-tooltip");n.tooltip({container:this._node}),n.on("click",function(){var e=$(this).data("link");e&&window.open(e,"_blank")});var i=this._node.find(".carousel");i.find(".carousel-control.left").addClass("hidden"),i.find(".item").eq(0).addClass("active"),i.find(".carousel-indicators li").eq(0).addClass("active"),i.on("slide.bs.carousel",function(e){var t=parseInt($(e.relatedTarget).data("slide-to"));this.updateCarouselArrows(i,this,t);var n=this.scanResults.errors[t];this.highlightFromError(n,this)}.bind(this)),this._addFixButtonEvents()}},{key:"_addFixButtonEvents",value:function(){var e=this;this._node.find(".fix-btn").each(function(t,n){var i=e.scanResults.errors[t],o=e.getFixOptions(i),r=$(n).find(".small-loader");$(n).on("click",function(){i.actions.length?(r.removeClass("hidden"),i.actions.forEach(function(e){e.fix(o).then(function(){r.addClass("hidden")})})):e._mapEditorEnabled?e._onAction("arcgis-edit"):e._onAction("arcgis-edit-external")})})}},{key:"displayErrors",value:function(){this._node.find(".webmap-info").toggleClass("error",this.mapHasError());var e=this._node.find(".layers-info"),t=this.getLayersWithErrors();this.scanResults.layers.forEach(function(n){var i=t.indexOf(n.id)>=0;e.find('[data-lyr-id="'+n.id+'"]').toggleClass("error",i)})}},{key:"highlightFromError",value:function(e,t){t=t||this;var n=this._node.find(".webmap-info"),i=this._node.find(".layers-info .layer");if(n.add(i).removeClass("highlight"),"map"!==e.mediaType&&"content"!==e.mediaType||n.addClass("highlight"),"layer"===e.mediaType||"content"===e.mediaType){var o=t.getLayersFromError(e);i.filter(function(e,t){var n=$(t).data("lyr-id");return!!n&&o.indexOf(n)>=0}).addClass("highlight")}}},{key:"getLayersWithErrors",value:function(){return this.scanResults.errors.map(this.getLayersFromError).reduce(function(e,t){return e.concat(t)})}},{key:"getLayersFromError",value:function(e){var t=[];return"layer"!==e.mediaType&&"content"!==e.mediaType||!e.layers||!e.layers.length?[]:(e.layers.forEach(function(e){t.push(e.id)}),t)}},{key:"mapHasError",value:function(){return this.scanResults.errors.some(function(e){return"map"===e.mediaType||"content"===e.mediaType})}},{key:"getFixOptions",value:function(e){var t=[],n=[],i=[];return"map"!==e.mediaType&&"content"!==e.mediaType||(n=[{id:this._media.id,owner:this.mapItem.owner}],t=n),"layer"!==e.mediaType&&"content"!==e.mediaType||(i=e.layers.map(function(e){return{id:e.id,url:e.details.url,owner:e.details.owner}}),t=i),"content"===e.mediaType&&(t=t.concat(n)),t.length||console.warn("HOW DID I GET HERE?!?!?",e),{items:t,details:{sharingLevel:app.data.appItem.item.access}}}}]),t}(u.default);t.default=m,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/WebMapBuilder",[],function(){}),define("storymaps-react/tpl/view/media/WebMapBuilder",["module","exports","./WebMap","./builder/Panel","./builder/TabSize","./builder/TabManage","./builder/TabWebMap","./builder/TabIssuesMap","./builder/TabAlternateMedia","./builder/TabAlternateEmpty","dojo/_base/lang","dojo/topic","issue-checker/IssueTypes","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./WebMapBuilder"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var b=h(n),y=h(i),_=h(o),w=h(r),C=h(a),k=h(s),x=h(l),E=h(u),T=h(c),S=h(d),P=h(p),O=h(f),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},A=O.default.builder.mediaErrors,N=function(e){function t(e){m(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._configTabWebMap=null,n._configTabIssues=null,n._configTabManage=null,n._configTabAlternate=null,n._isMultiViewSection=!1,n._onToggleMediaConfig=null,n._sectionType=null,n}return v(t,e),I(t,[{key:"postCreate",value:function(e){M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,this._sectionType=e.sectionType,e.delayBuilderInit||this._initConfigPanel(),this._scanListener=S.default.subscribe("scan/maps/"+this._instanceID,T.default.hitch(this,this.checkErrors)),this.initBuilderUI(),this._node.find(".media-media").attr("data-builder-invite",O.default.builder.mediaConfig.appearance.mapExtentPrompt)}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getAlternate();return n&&n.load(),M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e)}},{key:"isUnfixableError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";if(e.indexOf(P.default.maps.deleted)>=0)t=A.placeholders.deleted.replace("${media-type}",A.mediaTypes.webmap);else if(e.indexOf(P.default.maps.inaccessible)>=0)t=A.placeholders.inaccessible.replace("${media-type}",A.mediaTypes.webmap);else{if(!(e.indexOf(P.default.maps.unauthorized)>=0))return!1;t=A.placeholders.unauthorized.replace("${media-type}",A.mediaTypes.webmap)}return{unfixable:!0,showLoadingError:!0,msg:t}}},{key:"performAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.performBuilderInit&&(this._builderConfigPanel?(this._destroyConfigTabs(),this._refreshConfigTabs()):this._initConfigPanel()),M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"performAction",this).call(this,e)}},{key:"serialize",value:function(e){return this._node&&(this._webmap.caption=this._node.find(".block-caption").html()),M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,e)}},{key:"getMapName",value:function(e){if(!e)return"";var t=e.itemInfo&&e.itemInfo.item;return t?t.title||t.name:""}},{key:"maybeCloseConfig",value:function(){this._node.hasClass("builder-config-open")&&(this._builderConfigPanel._onToggle(),this._configTabWebMap&&this._configTabWebMap.onConfigClose())}},{key:"_initConfigTabs",value:function(){var e=this,t=[];this._configTabWebMap=new C.default({map:this._cache[this.id],layerListNode:this._node.find(".layer-list-container"),onOpen:function(){e.map&&e.performAction({forceSetExtent:!0})}});var n=!0,i=!1,o=void 0;try{for(var r,a=this._builderConfigurationTabs[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;if("size"==s)t.push(new _.default);else if("appearance"==s)t.push(this._configTabWebMap);else if("manage"==s){var l=this._createManageTab();t.push(l)}else if("alternate"==s){var u=this._createAlternateTab(this._sectionType);t.push(u)}}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}var c=T.default.getObject("scanResults.errors",!1,this);return this.scanResults&&this.scanResults.hasErrors&&!this.scanResults.unfixable&&c&&c.filter(function(e){return!e.isAlternate}).length&&(this._configTabIssues=new k.default({map:this._cache[this.id],scanResults:this.scanResults,issues:this.scanResults.errors.map(function(e){return{id:e.id,severity:"error"}}),instanceID:this._instanceID,mapEditorEnabled:!app.isSelfHosted}),t.push(this._configTabIssues)),t}},{key:"_initConfigPanel",value:function(){M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initConfigPanel",this).call(this),this._builderConfigPanel=new y.default({containerMedia:this._node,tabs:this._initConfigTabs(),media:this._webmap,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this),this._applyInteraction({isBuilder:!0,builderConfigOpen:this._node.hasClass("builder-config-open")})}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"_onWebMapLoaded",value:function(){if(this._configTabWebMap&&this._configTabWebMap.setMap(this._cache[this.id]),this._configTabIssues&&this._configTabIssues.setMap(this._cache[this.id]),this._configTabManage){var e=this.getMapName(this._cache[this.id]);this._configTabManage.setMapName(e)}}},{key:"_createAlternateTab",value:function(e){var t=this.getAlternate(),n=null,i=T.default.getObject("scanResults.errors",!1,this),o=i?this.scanResults.errors.find(function(e){return e.isAlternate}):null;return n=t?new x.default({sectionType:e,media:t._image,errorId:o?o.id:null,showErrors:o,placement:this._placement}):new E.default({showWarnings:!1,mobileSupported:!0}),this._configTabAlternate=n,this._configTabAlternate}},{key:"_createManageTab",value:function(){var e=this.getMapName(this._cache[this.id]),t=T.default.getObject("scanResults.errors",!1,this);return this._configTabManage=new w.default({hideRemove:"background"==this._placement,mediaType:"webmap",mediaId:this.id,altText:this._webmap.altText,showErrors:t&&t.filter(function(e){return!e.isAlternate}).length&&this.scanResults.unfixable,mapName:e,mapEditorEnabled:!app.isSelfHosted}),this._configTabManage}},{key:"_onConfigChange",value:function(){this._applyConfig(),M(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(b.default);t.default=N,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageScene",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="webscene-name">'+s((r=null!=(r=t.sceneName||(null!=e?e.sceneName:e))?r:a,"function"==typeof r?r.call(e,{name:"sceneName",hash:{},data:i}):r))+'</div>\n\n<div class="builder-config-section larger">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="swap">\n      <div class="edit-media-icons">\n        <i class="fa fa-image icon-image"></i>\n        <i class="fa fa-globe icon-globe"></i>\n        <i class="fa fa-map icon-map"></i>\n        '+s(l(null!=(o=null!=e?e.strings:e)?o.changeMedia:o,e))+'\n      </div>\n    </div>\n    <div class="image-preview">\n      <div class="overlay">\n        <span class="icon">'+s(l(null!=(o=null!=e?e.strings:e)?o.edit:o,e))+'</span>\n        <span class="icon">'+s(l(null!=(o=null!=e?e.strings:e)?o.remove:o,e))+'</span>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="builder-config-section larger">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="edit" data-toggle="tooltip" data-placement="top" title="'+s(l(null!=(o=null!=e?e.strings:e)?o.editAside:o,e))+'">\n      <i class="config-icon fa fa-external-link"></i>\n      '+s(l(null!=(o=null!=e?e.strings:e)?o.edit:o,e))+'\n    </div>\n  </div>\n</div>\n<div class="builder-config-section">\n  <div class="section-content button">\n    <div class="config-item button btn btn-bw" data-action="remove">\n      <i class="config-icon fa fa-trash-o"></i>\n      '+s(l(null!=(o=null!=e?e.strings:e)?o.remove:o,e))+'\n    </div>\n  </div>\n</div>\n\n<div class="alt-text-container">\n    <span class="config-icon alt-text-icon fa fa-lg fa-universal-access" data-toggle="tooltip" data-placement="top" title="'+s(l(null!=(o=null!=e?e.strings:e)?o.altTextHelptip:o,e))+'"></span>\n    <textarea class="alt-text-text" rows="1" placeholder="'+s(l(null!=(o=null!=e?e.strings:e)?o.altTextPlaceholder:o,e))+'">'+s((r=null!=(r=t.altText||(null!=e?e.altText:e))?r:a,"function"==typeof r?r.call(e,{name:"altText",hash:{},data:i}):r))+"</textarea>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageScene",["module","exports","./Tab","lib-build/hbars!./TabManageScene","storymaps/tpl/builder/BuilderHelper","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=f.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n.sceneName=e.sceneName,n.altText=e.altText,n._mediaType=e.mediaType,n._mediaId=e.mediaId,n}return u(t,e),h(t,[{key:"setSceneName",value:function(e){this.sceneName=e,this._node&&this.updateSceneName()}},{key:"updateSceneName",value:function(){this._node.find(".webscene-name").text(this.sceneName)}},{key:"render",value:function(){return(0,d.default)({sceneName:this.sceneName,altText:this.altText,strings:f.default.builder.mediaConfig.manage})}},{key:"postCreate",value:function(e){var n=this;m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find('[data-toggle="tooltip"]').tooltip(),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find(".alt-text-text").on("input",function(){n.setMedia("altText",n._node.find(".alt-text-text").val()),n.altText=n._node.find(".alt-text-text").val()}),this._node.find('.config-item[data-action="edit"]').on("click",function(){n._mediaType&&n._mediaId&&window.open(p.default.getSceneViewerLink(n._mediaId),"_blank")}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="edit"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy"),this._node.find(".alt-text-text").off("input")}}]),t}(c.default);t.default=g,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebScene",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section">\n  <h4 class="title">'+a(r(null!=(o=null!=e?e.strings:e)?o.slide:o,e))+'</h4>\n  <select class="section-content" name="slides"></select>\n  <div class="section-content no-slides">\n    <span class="">'+a(r(null!=(o=null!=e?e.strings:e)?o.noSlides:o,e))+'</span>\n  </div>\n</div>\n<div class="builder-config-section larger">\n  <h4 class="title">'+a(r(null!=(o=null!=e?e.strings:e)?o.interaction:o,e))+'</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="disabled">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionDisabled:o,e))+'</li>\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="button">'+a(r(null!=(o=null!=e?e.strings:e)?o.buttonToEnable:o,e))+'</li>\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="enabled">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionEnabled:o,e))+' <sup style="vertical-align: 0;">*</sup></li>\n  </ul>\n  <span class="aside">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionAside:o,e))+'</span>\n</div>\n\x3c!--\n<div class="builder-config-section">\n  <h4 class="title">Pop-Ups</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray" data-type="popup" data-value="disabled">Disabled</li>\n    <li class="config-item btn btn-gray" data-type="popup" data-value="enabled">Enabled</li>\n  </ul>\n</div>\n<div class="builder-config-section">\n  <h4 class="title">Extras</h4>\n  <ul class="section-content vertical-list checkmarks">\n    <li class="config-item btn btn-gray" data-type="extra" data-value="legend">\n      <label class="check"><input type="checkbox" value="legend"> Legend</label>\n    </li>\n    <li class="config-item btn btn-gray" data-type="extra" data-value="search">\n      <label class="check"><input type="checkbox" value="search"> Search</label>\n    </li>\n    <li class="config-item btn btn-gray" data-type="extra" data-value="locate">\n      <label class="check"><input type="checkbox" value="locate"> Locate</label>\n    </li>\n  </ul>\n</div>\n--\x3e\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebScene",["module","exports","./TabArcGIS","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./TabWebScene"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scene=e.scene,n}return l(t,e),p(t,[{key:"setScene",value:function(e){this.scene=e,this._node&&this.renderSceneSection()}},{key:"renderSceneSection",value:function(){var e=this,t=this.scene.scene,n=this._node.find('.section-content[name="slides"]'),i=this._node.find(".section-content.no-slides");if(t.presentation&&t.presentation.slides&&t.presentation.slides.items&&t.presentation.slides.items.length>0){var o=t.presentation.slides.items;i.hide(),n.show(),n.append('<option class="config-item" data-type="slides" value="-1">'+c.default.builder.mediaConfig.appearance.homeView+"</option>");for(var r=0;r<o.length;r++)n.append('<option class="config-item" data-type="slides" value="'+r+'">'+o[r].title.text+"</option>");this._media.slide>=0&&n.val(this._media.slide),n.on("change",function(t){var n=$(t.currentTarget).val(),i=parseInt(n,10);isNaN(i)||e.setMedia("slide",i)})}else n.hide(),i.show()}},{key:"attachEvents",value:function(){this._media}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.scene&&this.renderSceneSection()}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return(0,d.default)({strings:c.default.builder.mediaConfig.appearance})}}]),t}(u.default);t.default=h,e.exports=t.default}),define("storymaps-react/tpl/view/media/WebSceneBuilder",["module","exports","./WebScene","./builder/Panel","./builder/TabSize","./builder/TabManageScene","./builder/TabWebScene","./builder/TabAlternateMedia","./builder/TabAlternateEmpty","dojo/_base/lang","dojo/topic","../../builder/Issues"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=p(n),v=p(i),b=p(o),y=p(r),_=p(a),w=p(s),C=p(l),k=p(u),x=p(c),E=p(d),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},P=function(e){function t(e){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._configTabWebScene=null,n._configTabManageScene=null,n._onToggleMediaConfig=null,n._sectionType="",n}return m(t,e),T(t,[{key:"postCreate",value:function(e){S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,this._sectionType=e.sectionType,e.delayBuilderInit||this._initConfigPanel(),this._scanListener=x.default.subscribe("scan/scenes/"+this._instanceID,k.default.hitch(this,this.checkErrors)),this.initBuilderUI()}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getAlternate();return n&&n.load(),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e)}},{key:"isUnfixableError",value:function(){return!1}},{key:"performAction",value:function(e){return e.performBuilderInit&&(this._builderConfigPanel?(this._destroyConfigTabs(),this._refreshConfigTabs()):this._initConfigPanel()),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"performAction",this).call(this,e)}},{key:"serialize",value:function(e){return this._node&&(this._webscene.caption=this._node.find(".block-caption").html()),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"webscene",this._webscene,e)}},{key:"_initConfigTabs",value:function(){var e=[];this._configTabWebScene=new _.default({scene:this._cache[this.id]});var t=!0,n=!1,i=void 0;try{for(var o,r=this._builderConfigurationTabs[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if("size"==a)e.push(new b.default);else if("appearance"==a)e.push(this._configTabWebScene);else if("manage"==a){var s=this._createManageTab();e.push(s)}else if("alternate"==a){var l=this._createAlternateTab(this._sectionType);e.push(l)}}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return e}},{key:"_initConfigPanel",value:function(){S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initConfigPanel",this).call(this),this._builderConfigPanel=new v.default({containerMedia:this._node,tabs:this._initConfigTabs(),media:this._webscene,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"getSceneName",value:function(e){var t=this.getSceneItem(e);return t?t.title||t.name:""}},{key:"getSceneItem",value:function(e){return e&&e.scene&&e.scene.portalItem}},{key:"findAndSetSceneName",value:function(e){var t=this,n=this.getSceneItem(e);if(n){var i=void 0;if(n.loaded)return i=n.title||n.name,
this._configTabManageScene&&this._configTabManageScene.setSceneName(i),i;n.when(function(){i=n.title||n.name,t._configTabManageScene&&t._configTabManageScene.setSceneName(i)})}}},{key:"_onWebSceneLoaded",value:function(){this._initConfigPanel(),this._configTabWebScene.setScene(this._cache[this.id]),this._configTabManageScene&&this.findAndSetSceneName(this._cache[this.id])}},{key:"_onConfigChange",value:function(){this._applyConfig(),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}},{key:"_createAlternateTab",value:function(e){var t=this.getAlternate(),n=k.default.getObject("scanResults.errors",!1,this),i=k.default.getObject("scanResults.warnings",!1,this),o=n?n.find(function(e){return e.isAlternate}):null,r=i&&i.some(function(e){return e.id===E.default.content.noAlternateMedia});return t?new w.default({sectionType:e,media:t._image,errorId:o?o.id:null,showErrors:o,placement:this._placement}):new C.default({showWarnings:r,mobileSupported:!1})}},{key:"_createManageTab",value:function(){var e=this.getSceneName(this._cache[this.id]);return this._configTabManageScene=new y.default({hideRemove:"background"==this._placement,mediaType:"webscene",mediaId:this.id,altText:this._webscene.altText,showErrors:this.scanResults.errors&&this.scanResults.errors.length&&this.scanResults.errors.filter(function(e){return!e.isAlternate}).length,sceneName:e}),this._configTabManageScene}}]),t}(g.default);t.default=P,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebPage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section no-spread">\n  <h4 class="title">'+a(r(null!=(o=null!=e?e.strings:e)?o.interaction:o,e))+'</h4>\n  <ul class="section-content vertical-list">\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="disabled">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionDisabled:o,e))+'</li>\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="button">'+a(r(null!=(o=null!=e?e.strings:e)?o.buttonToEnable:o,e))+'</li>\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="enabled">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionEnabled:o,e))+' <sup style="vertical-align: 0;">*</sup></li>\n  </ul>\n  <span class="aside">'+a(r(null!=(o=null!=e?e.strings:e)?o.interactionAside:o,e))+"</span>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebPage",["module","exports","./Tab","lib-build/hbars!./TabWebPage","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n),c=r(i),d=r(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.title=d.default.builder.mediaConfig.tabs.appearance,e.type="appearance",e.icon="fa-sliders",e}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.appearance})}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindInteraction()}},{key:"bindInteraction",value:function(){var e=this,t=this._media.options.interaction||"button";"mouseover"!==t||this._node.find('.config-item[data-type="interaction"][data-value="mouseover"]').length||this._node.find('.config-item[data-type="interaction"]').last().after('<li class="config-item btn btn-gray" data-type="interaction" data-value="mouseover">Mouseover</li>'),this._node.find('.config-item[data-type="interaction"][data-value="'+t+'"]').addClass(this.selectedClass);var n=this._node.find('.config-item[data-type="interaction"]');n.on("click",function(t){var i=$(t.currentTarget),o=i.data("value");n.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("interaction",o)})}},{key:"unbindInteraction",value:function(){this._node.find('.config-item[data-type="interaction"]').off("click")}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindInteraction()}}]),t}(u.default);t.default=h,e.exports=t.default}),define("storymaps-react/tpl/view/media/WebPageBuilder",["module","exports","./WebPage","./builder/Panel","./builder/TabSize","./builder/TabManageMedia","./builder/TabWebPage","./builder/TabAlternateMedia","./builder/TabAlternateEmpty","storymaps/tpl/utils/CommonHelper","dojo/_base/lang","dojo/topic","../../builder/Issues"],function(e,t,n,i,o,r,a,s,l,u,c,d,p){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=f(n),b=f(i),y=f(o),_=f(r),w=f(a),C=f(s),k=f(l),x=f(u),E=f(c),T=f(d),S=f(p),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},I=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onToggleMediaConfig=null,n}return g(t,e),P(t,[{key:"postCreate",value:function(e){O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,this._initConfigPanel(),this.initBuilderUI(),this._scanListener=T.default.subscribe("scan/webpages/"+this._instanceID,E.default.hitch(this,this.checkErrors))}},{key:"_initConfigTabs",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._builderConfigurationTabs[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if("size"==a)e.push(new y.default);else if("appearance"==a)e.push(new w.default);else if("manage"==a){var s=this._createManageTab();e.push(s)}else if("alternate"==a){var l=this._createAlternateTab(this._sectionType);e.push(l)}}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return this._createIssuesTab(e),e}},{key:"_initConfigPanel",value:function(){O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initConfigPanel",this).call(this),this._builderConfigPanel=new b.default({containerMedia:this._node,tabs:this._initConfigTabs(),media:this._webpage,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getAlternate();return n&&n.load(),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e)}},{key:"serialize",value:function(e){return this._node&&(this._webpage.caption=this._node.find(".block-caption").html()),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"webpage",this._webpage,e)}},{key:"_onConfigChange",value:function(){this._applyConfig(),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}},{key:"_createAlternateTab",value:function(e){var t=this.getAlternate(),n=E.default.getObject("scanResults.errors",!1,this),i=E.default.getObject("scanResults.warnings",!1,this),o=n?n.find(function(e){return e.isAlternate}):null,r=i&&i.some(function(e){return e.id===S.default.content.noAlternateMedia});return t?new C.default({sectionType:e,media:t._image,errorId:o?o.id:null,showErrors:o,placement:this._placement}):new k.default({showWarnings:r,mobileSupported:!0})}},{key:"_createManageTab",value:function(){return new _.default({hideRemove:"background"==this._placement,altText:this._webpage.altText,showErrors:this.scanResults.errors&&this.scanResults.errors.filter(function(e){return!e.isAlternate}).length&&this.scanResults.unfixable})}},{key:"_makeUrlsHttps",value:function(){this._webpage.url=x.default.forceHttpsUrl(this._webpage.url)}}]),t}(v.default);t.default=I,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/AudioBuilder",[],function(){}),define("storymaps-react/tpl/view/media/AudioBuilder",["module","exports","./Audio","lib-build/i18n!resources/tpl/builder/nls/app","./builder/Panel","./builder/TabManageMedia","storymaps/tpl/utils/CommonHelper","../../builder/notification/Cancel","dojo/_base/lang","dojo/topic","issue-checker/IssueTypes","lib-build/less!./AudioBuilder"],function(e,t,n,i,o,r,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),g=d(i),v=d(o),b=d(r),y=d(a),_=d(s),w=d(l),C=d(u),k=d(c),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},T=g.default.builder,S=function(e){function t(e,n){p(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._onToggleMediaConfig=null,i}return h(t,e),x(t,[{key:"postCreate",value:function(e){E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,this._initConfigPanel(),this._scanListener=C.default.subscribe("scan/audio/"+this._instanceID,w.default.hitch(this,this.checkErrors)),this.initBuilderUI()}},{key:"_initConfigPanel",value:function(){E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initConfigPanel",this).call(this),this._builderConfigPanel=new v.default({containerMedia:this._node,tabs:this._initConfigTabs(),media:this._audio,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"_initConfigTabs",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._builderConfigurationTabs[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){"manage"==o.value&&e.push(new b.default({hideRemove:"background"==this._placement,altText:this._audio.altText,showErrors:this.scanResults.errors&&this.scanResults.errors.filter(function(e){return!e.isAlternate}).length&&this.scanResults.unfixable}))}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return this._createIssuesTab(e),e}},{key:"isUnfixableError",value:function(e){var t=T.mediaErrors;return e.indexOf(k.default.audio.inaccessible)>=0&&{msg:t.placeholders.inaccessible,unfixable:!0,showLoadingError:!0}}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e)}},{key:"serialize",value:function(e){return this._audio.uploadDeferred&&delete this._audio.uploadDeferred,this._node&&(this._audio.caption=this._node.find(".block-caption").html()),E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"audio",this._audio,e)}},{key:"_onConfigChange",value:function(){this._applyConfig(),E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}},{key:"_onUploadStart",value:function(){this._uploadNotification=new _.default({container:this._node.parents(".section").eq(0),label:T.media.mediaUpload}),this._uploadNotification.display().then(function(){this._onAction("remove")}.bind(this),function(){})}},{key:"_onUploadSuccess",value:function(e){this._audio.url=e.url,this._audio.thumbUrl=e.thumbUrl||e.dataUrl,this.previewThumb=this._audio.thumbUrl,delete this._audio.dataUrl,delete this._audio.uploadDeferred,this._uploadNotification&&this._uploadNotification.update({type:"success",label:T.media.mediaUploadSuccess}),this.rerender(),this._isLoaded=!1,this.preload().then(this.load.bind(this)),C.default.publish("builder-media-update")}},{key:"_onUploadFail",value:function(){this._uploadNotification&&this._uploadNotification.update({type:"error",label:T.media.mediaUploadFail}),"block"==this._placement&&this._onAction("remove")}},{key:"_makeUrlsHttps",value:function(){this._audio.url=y.default.forceHttpsUrl(this._audio.url)}}]),t}(m.default);t.default=S,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/CreditsItemBuilder",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" cr-empty"},3:function(e,t,n,i){return" cr-incomplete"},5:function(e,t,n,i){return" cr-link"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=t.helperMissing,u='<li class="cr-item builder';return o=t.if.call(e,null!=e?e.empty:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),o=t.if.call(e,null!=e?e.incomplete:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+='">\n  <div class="cr-item-main">\n    <div class="cr-input-container first">\n      <div class="cr-validation-warning cr-hidden">\n        '+s(a(null!=(o=null!=e?e.text:e)?o.warning:o,e))+'\n      </div>\n      <div class="cr-item-input cr-content" contenteditable="true" placeholder="'+s(a(null!=(o=null!=e?e.text:e)?o.content:o,e))+'">'+s((r=null!=(r=t.label||(null!=e?e.label:e))?r:l,"function"==typeof r?r.call(e,{name:"label",hash:{},data:i}):r))+'</div>\n    </div>\n    <span class="cr-pipe"></span>\n    <div class="cr-input-container">\n      <div class="cr-item-input cr-source',o=t.if.call(e,null!=e?e.link:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+'" contenteditable="true" placeholder="'+s(a(null!=(o=null!=e?e.text:e)?o.source:o,e))+'" data-toggle="popover" data-link="'+s((r=null!=(r=t.link||(null!=e?e.link:e))?r:l,"function"==typeof r?r.call(e,{name:"link",hash:{},data:i}):r))+'">'+s((r=null!=(r=t.source||(null!=e?e.source:e))?r:l,"function"==typeof r?r.call(e,{name:"source",hash:{},data:i}):r))+'</div>\n      <div class="cr-item-remove cr-hidden">\n        <i class="cr-remove-icon fa fa-trash"></i>\n      </div>\n  </div>\n  <div class="cr-builder-ui cr-hidden">\n    <div class="cr-add-line">\n      <div class="cr-add-button cr-hidden">\n        <i class="cr-add-icon fa fa-plus"></i>\n      </div>\n    </div>\n  </div>\n</li>\n'},useData:!0})}),define("storymaps-react/tpl/view/media/CreditsBuilder",["module","exports","./Credits","storymaps/tpl/utils/CommonHelper","lib-build/hbars!./CreditsItemBuilder","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=a(r),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},g=function(e){function t(e){s(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onContentChange=null,n}return u(t,e),h(t,[{key:"render",value:function(e){if(!this._credits||!e)return console.log("Could not render credits block in section"),"";var t='<div id="'+this._domID+'" class="block block-type-credits" contenteditable="false"><ul class="cr-list">';if(this._credits.length){var n=!0,i=!1,o=void 0;try{for(var r,a=this._credits[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;t+=(0,p.default)({label:s.label,link:s.link,source:s.source,text:f.default.builder.credits,empty:!1,incomplete:!1})}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}else t+=(0,p.default)({label:null,link:null,source:null,text:f.default.builder.credits,empty:!0,incomplete:!0});return t+="</ul></div>"}},{key:"addPopoverEvents",value:function(e){e.find('.cr-item-input[data-toggle="popover"]').popover({html:!0,content:function(){var e=$(this).data("link");return'<div class="form-group form-group-sm"><input type="text" class="credit-link" placeholder="'+f.default.builder.credits.linkPrompt+'" value="'+e+'"></div>'},trigger:"manual",placement:"top"}),e.find('.cr-item-input[data-toggle="popover"]').focus(function(e){var t=$(e.currentTarget);t.data("bs.popover").$tip?t.data("bs.popover").$tip.hasClass("in")||t.popover("show"):t.popover("show")}),e.find('.cr-item-input[data-toggle="popover"]').blur(function(e){var t=$(e.currentTarget);setTimeout(function(){var e=t.data("bs.popover");e.$tip&&!e.$tip.find(".credit-link").is(":focus")&&t.popover("hide")},50)});var t=this;e.find('.cr-item-input[data-toggle="popover"]').on("shown.bs.popover",function(){var n=$(this),i=$(this).data("bs.popover");i.$tip&&i.$tip.find(".credit-link").blur(function(){setTimeout(function(){n.is(":focus")||n.popover("hide")},50),t._onContentChange(),t.validate(e,n)}),i.$tip&&i.$tip.find(".credit-link").on("keyup",function(){t._onContentChange()}),i.$tip&&i.$tip.find(".credit-link").on("paste",function(e){var n=$(e.currentTarget);setTimeout(function(){var e=t.sanitizeText(n[0].value);n[0].value=e},0)})}),e.find('.cr-item-input[data-toggle="popover"]').on("hide.bs.popover",function(){var e=$(this).data("bs.popover");if(e.$tip){var t=e.$tip.find(".credit-link").val(),n=t.trim();n?$(this).addClass("cr-link"):$(this).removeClass("cr-link");var i=d.default.prependURLHTTP(n);$(this).data("link",i)}})}},{key:"showValidationError",value:function(e){e.find(".cr-item-input").addClass("cr-error"),e.find(".cr-validation-warning").removeClass("cr-hidden")}},{key:"hideValidationError",value:function(e){e.find(".cr-item-input").removeClass("cr-error"),e.find(".cr-validation-warning").addClass("cr-hidden")}},{key:"addEvents",value:function(e){var t=this;this.addPopoverEvents(e),e.find(".cr-builder-ui").hover(function(e){var t=$(e.currentTarget);t.removeClass("cr-hidden"),t.find(".cr-add-button").removeClass("cr-hidden")},function(e){var t=$(e.currentTarget);t.addClass("cr-hidden"),t.find(".cr-add-button").addClass("cr-hidden")}),e.find(".cr-item-main").hover(function(e){var n=$(e.currentTarget),i=n.closest(".cr-item"),o=t._node.find(".cr-item").length;(!i.hasClass("cr-empty")||o>1)&&n.find(".cr-item-remove").removeClass("cr-hidden")},function(e){$(e.currentTarget).find(".cr-item-remove").addClass("cr-hidden")}),e.find(".cr-add-button").on("click",function(e){var n=$(e.currentTarget),i=n.closest(".cr-item");i.after(t.renderEmptyCredit()),t.addEvents(i.next(".cr-item")),t._onContentChange()}),e.find(".cr-item-remove").on("click",function(e){var n=$(e.currentTarget),i=n.closest(".cr-item");if(i.find('.cr-item-input[data-toggle="popover"]').popover("destroy"),i.remove(),0===t._node.find(".cr-item").length){var o=t.renderEmptyCredit(),r=t._node.find(".cr-list");r.append(o),t.addEvents(r.children(":last"))}t._onContentChange()}),e.find(".cr-item-input").on("keyup",function(e){if(8===e.keyCode||46===e.keyCode){var n=e.currentTarget;!n.textContent&&n.innerHTML&&(n.innerHTML="")}var i=$(e.currentTarget).closest(".cr-item"),o=i.find(".cr-item-input.cr-content")[0],r=i.find(".cr-item-input.cr-source")[0];if(o&&r){var a=o.textContent,s=r.textContent;a.length>0||s.length>0?i.removeClass("cr-empty"):i.addClass("cr-empty"),a.length>0&&s.length>0?(i.removeClass("cr-incomplete"),t.hideValidationError(i)):0===a.length&&0===s.length?t.hideValidationError(i):i.addClass("cr-incomplete")}t._onContentChange()}),e.find(".cr-item-input").on("keydown",function(e){if(13===e.keyCode){var n=$(e.currentTarget).closest(".cr-item");n.hasClass("cr-incomplete")||(n.after(t.renderEmptyCredit()),t.addEvents(n.next(".cr-item"))),e.preventDefault()}if(e.ctrlKey||e.metaKey){var i=e.keyCode;if(66==i||98==i||73==i||105==i||85==i||117==i)return!1}}),e.find(".cr-item-input").on("paste",function(e){var n=$(e.currentTarget);setTimeout(function(){var e=t.sanitizeText(n[0].textContent);n[0].innerHTML=e},0)}),e.find(".cr-item-input").blur(function(n){var i=$(n.currentTarget);t.validate(e,i),t._onContentChange()})}},{key:"validate",value:function(e,t){var n=this;setTimeout(function(){var i=t.closest(".cr-item"),o=e.find(".cr-item-input").is(":focus"),r=e.find(".popover .credit-link").is(":focus"),a=i.hasClass("cr-incomplete")&&!i.hasClass("cr-empty");o||r||!a?n.hideValidationError(i):n.showValidationError(i)},50)}},{key:"renderEmptyCredit",value:function(){return(0,p.default)({label:"",link:"",source:"",text:f.default.builder.credits,empty:!0,incomplete:!0})}},{key:"postCreate",value:function(e){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onContentChange=e.onContentChange,this.addEvents(this._node.find(".cr-item"))}},{key:"sanitizeText",value:function(e){return $("<div>"+e+"</div>").text()}},{key:"serialize",value:function(){this._credits=[];var e=this._node.find(".cr-item:not(.cr-empty)"),n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value,l=$(s),u=this.sanitizeText(l.find(".cr-item-input.cr-content").text()),c=this.sanitizeText(l.find(".cr-item-input.cr-source").text()),d=this.sanitizeText(l.find(".cr-item-input.cr-source").data("link")),p={label:u,source:c,link:d};this._credits.push(p)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this,"credits",this._credits,!1)}}]),t}(c.default);t.default=g,e.exports=t.default}),define("storymaps-react/tpl/view/media/FactoryBuilder",["module","exports","./FactoryViewer","./Text","./ImageBuilder","./ImageGalleryBuilder","./VideoBuilder","./WebMapBuilder","./WebSceneBuilder","./WebPageBuilder","./AudioBuilder","./Empty","./Color","./CreditsBuilder","storymaps/tpl/view/media/Discover"],function(e,t,n,i,o,r,a,s,l,u,c,d,p,f,h){"use strict";function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var y=m(n),_=m(i),w=m(o),C=m(r),k=m(a),x=m(s),E=m(l),T=m(u),S=m(c),P=m(d),O=m(p),I=m(f),M=m(h),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),N=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),A(t,null,[{key:"getClasses",value:function(){return{Text:_.default,Image:w.default,ImageGallery:C.default,Video:k.default,WebMap:x.default,WebScene:E.default,WebPage:T.default,Audio:S.default,Empty:P.default,Color:O.default,Credits:I.default,Discover:M.default}}}]),t}(y.default);t.default=N,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/builder/mapEditor/WebMapEditor",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h4 class="modal-title">'+a(r(null!=(o=null!=e?e.strings:e)?o.dialogTitle:o,e))+'</h4>\n    </div>\n\n    <div class="modal-body">\n      <div class="loading-container">\n        <div>\n          <img src="resources/tpl/viewer/icons/loading-light.gif" />\n        </div>\n        <div class="loading-lbl">'+a(r(null!=(o=null!=e?e.strings:e)?o.loading:o,e))+'</div>\n      </div>\n      <div class="error-container hide">\n        <div class="error-msg"></div>\n      </div>\n\n      <div class="webmap-builder-container">\n        <iframe class="webmap-builder"></iframe>\n      </div>\n\n    </div>\n\n    <div class="modal-footer">\n      <span class="error"></span>\n      <button class="btnSubmit btn btn-primary hide" ></button>\n      <a role="button" tabindex="0" class="btn btnCancel btn-naked btn-close">'+a(r(null!=(o=null!=e?e.strings:e)?o.close:o,e))+"</a>\n    </div>\n  </div>\n</div>\n"},useData:!0})}),define("storymaps-react/tpl/builder/mapEditor/MapViewerWrapperUtils",["module","exports","esri/arcgis/utils"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,null,[{key:"isWhiteListedDomain",value:function(){return document.location.host.match(/\.esri\.com$/)||document.location.host.match(/\.arcgis\.com$/)}},{key:"getMapViewerLink",value:function(e){return this.getMapViewerURL()+"?webmap="+e}},{key:"getMapViewerURL",value:function(){return this.getPortalURL()+"/home/webmap/viewer.html"}},{key:"getPortalURL",value:function(){var e=o.default.arcgisUrl.split("/sharing/")[0];return app.portal.allSSL&&(e=e.replace("http:","https:")),e}},{key:"getPortalDomain",value:function(e){var t=document.createElement("a");return t.setAttribute("href",e),t.protocol+"//"+t.hostname}},{key:"viewerIsSameDomain",value:function(){var e=this.getPortalURL().split("//").slice(-1)[0],t=e.split("."),n=document.location.host,i=n.split(".");return e===n||e.split("/").length>1&&e.split("/")[0]===n||(i.length<3?n===e:i.slice(1).join(".")===t.slice(-2).join("."))}}]),e}();t.default=a,e.exports=t.default}),define("storymaps-react/tpl/builder/mapEditor/MapViewerWrapper",["module","exports","esri/IdentityManager","./MapViewerWrapperUtils","storymaps/tpl/builder/BuilderHelper","lib-build/i18n!resources/tpl/builder/nls/app","dojo"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=s(n),c=s(i),d=s(o),p=s(r),f=s(a),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(t){l(this,e),this._viewerIsloaded=!1,this._viewerMapIsLoaded=!1,this._isNewMap=!1,this._mapViewerLoadingPolling=null,this._mapViewerChangesCheck=null;var n=c.default.getPortalURL();this.MAP_VIEWER_DOMAIN=c.default.getPortalDomain(n),this._frameWindow=t.frameWindow,this._onSaveSucceedCallback=t.onSaveSucceed,this._onSaveErrorCallback=t.onSaveError,this._onLoadCallback=t.onLoad,this._onErrorCallback=t.onError,this._onEnableSaveCallback=t.onEnableSave,this.CONFIG={mapViewerOpt:"embedded=1&hide=share,save,analysis,directions,measure"},window.addEventListener("message",this.receiveMessage.bind(this),!1)}return h(e,[{key:"load",value:function(e,t){var n=d.default.getPortalURL(),i=u.default.findCredential(n).token,o="";if(!e&&!t)throw"INVALID CALL TO MapViewerWrapper.load";if(!(this._onSaveSucceedCallback&&this._onSaveErrorCallback&&this._onLoadCallback&&this._onErrorCallback&&this._onEnableSaveCallback&&this._frameWindow))throw"INVALID CALL TO MapViewerWrapper.load";if(o+=c.default.getMapViewerURL(),e?(this._isNewMap=!0,o+="?"+this.CONFIG.mapViewerOpt):(o+="?webmap="+t,o+="&"+this.CONFIG.mapViewerOpt),o+="&locale="+f.default.locale,!c.default.viewerIsSameDomain()&&c.default.isWhiteListedDomain())o+="#"+i;else if(!c.default.viewerIsSameDomain()&&!c.default.isWhiteListedDomain())throw p.default.builder.mapEditor.unauthorizedDomain;return this._viewerIsloaded=!1,this._viewerMapIsLoaded=!1,
this._mapViewerLoadingPolling=setInterval(this.pollMapViewerLoading.bind(this),500),o}},{key:"cancelLoading",value:function(){clearInterval(this._mapViewerLoadingPolling),this.stopUnsavedChangesCheck()}},{key:"_send",value:function(e){try{this._frameWindow.postMessage(JSON.stringify(e),this.MAP_VIEWER_DOMAIN)}catch(e){this._onErrorCallback(e)}}},{key:"close",value:function(){this._mapViewerLoadingPolling&&clearInterval(this._mapViewerLoadingPolling),this.stopUnsavedChangesCheck()}},{key:"pollMapViewerLoading",value:function(){this._viewerMapIsLoaded?clearInterval(this._mapViewerLoadingPolling):this._send({type:"isLoaded"})}},{key:"startUnsavedChangesCheck",value:function(){this._mapViewerChangesCheck||(this._mapViewerChangesCheck=setInterval(this.checkUnsavedChanges.bind(this),1e3))}},{key:"stopUnsavedChangesCheck",value:function(){this._mapViewerChangesCheck&&(clearInterval(this._mapViewerChangesCheck),this._mapViewerChangesCheck=null)}},{key:"checkUnsavedChanges",value:function(){this._send({type:"hasUnsavedChanges"})}},{key:"saveExistingMap",value:function(){this._send({type:"saveMap"})}},{key:"receiveMessage",value:function(e){var t=this;if(e.origin===this.MAP_VIEWER_DOMAIN&&e.source===this._frameWindow){var n=JSON.parse(e.data);switch(n.type){case"mapSaved":this._onSaveSucceedCallback(n.webmapId);break;case"mapSaveError":this._onSaveErrorCallback();break;case"webmapId":this.startUnsavedChangesCheck(),this._isNewMap&&this._onEnableSaveCallback(),setTimeout(function(){t._send({type:"isWebmapEditable"})},1e3);break;case"webmapEditable":n.value||this._onEnableSaveCallback();break;case"unsavedChanges":n.value&&this._onEnableSaveCallback();break;case"loaded":this._viewerMapIsLoaded=n.value,this._viewerMapIsLoaded?this._viewerIsloaded?setTimeout(function(){t._send({type:"isWebmapEditable"})},1e3):(this._onLoadCallback(),this._send({type:"getWebmapId"}),this._viewerIsloaded=!0):(this._viewerIsloaded||(setTimeout(this._onLoadCallback.bind(this),500),this._send({type:"getWebmapId"})),this._viewerIsloaded=!0)}}}}]),e}();t.default=m,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/mapEditor/WebMapEditor",[],function(){}),function(e){e.fn.smConfirmPopover=function(t){function n(){var n=e.extend({trigger:"focus",placement:"auto top"},t),i='<div class="sm-confirm-button-container"><button class="sm-confirm-button btn btn-sm btn-danger">'+n.confirmButtonText+'</button><button class="sm-deny-button btn btn-sm btn-default">'+n.denyButtonText+"</button></div>";this.popover({trigger:n.trigger,container:n.container||!1,placement:n.placement,html:!0,title:n.title,content:i}),o.bind(this)(n)}function i(){r.bind(this)(),this.popover("destroy")}function o(t){this.on("shown.bs.popover",function(){e(".sm-confirm-button").on("click",function(e){t.onConfirmButtonClick&&t.onConfirmButtonClick(e)}),e(".sm-deny-button").on("click",function(e){t.onDenyButtonClick&&t.onDenyButtonClick(e)})})}function r(){e(".sm-confirm-button").off("click"),e(".sm-deny-button").off("click")}return"destroy"===t?i.bind(this)():n.bind(this)(),this}}(jQuery),define("storymaps/tpl/utils/smConfirmPopover",function(){}),define("lib-build/less!storymaps/tpl/utils/smConfirmPopover",[],function(){}),define("storymaps-react/tpl/builder/mapEditor/WebMapEditor",["module","exports","lib-build/hbars!./WebMapEditor","lib-build/i18n!resources/tpl/builder/nls/app","./MapViewerWrapper","dojo/Deferred","lib-build/less!./WebMapEditor","storymaps/tpl/utils/smConfirmPopover","lib-build/less!storymaps/tpl/utils/smConfirmPopover"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=a(n),u=a(i),c=a(o),d=a(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this._node=t.container,this._resultDeferred=null,this._mapViewerWrapper=null,this._viewerMapIsLoaded=!1,this._hasCreatedMap=!1,this._hasSavedMap=!1,this._newMapInfos=null,this._params=null,this._isSaving=!1,this._node.append((0,l.default)({strings:u.default.builder.mapEditor})),this._mapViewerWrapper=new c.default({frameWindow:this.getFrameWindow(),onSaveSucceed:this.onSaveSucceed.bind(this),onSaveError:this.onSaveError.bind(this),onLoad:this.mapViewerLoaded.bind(this),onError:this.mapViewerFatalError.bind(this),onEnableSave:this.onEnableSave.bind(this)})}return p(e,[{key:"present",value:function(e){var t=this;this._resultDeferred=new d.default,this._viewerMapIsLoaded=!1,this._hasCreatedMap=!1,this._hasSavedMap=!1,this._newMapInfos=null,this._params=e,this.initUI();var n="";try{n=this._mapViewerWrapper.load(e.newMap,e.id)}catch(e){return this.mapViewerFatalError(e),this._resultDeferred.reject(e),this._resultDeferred}return this._node.modal({keyboard:!1}),this.mapViewerLoading(),setTimeout(function(){t._node.find(".webmap-builder").attr("src",n)},50),this._node.find(".btnSubmit").click(this.onSave.bind(this)),this._node.on("hide.bs.modal",this.onClose.bind(this)),this._node.on("hidden.bs.modal",this.onModalHidden.bind(this)),this._resultDeferred}},{key:"initUI",value:function(){this._node.removeClass("firefox-hide-fix"),this._node.find(".modal-footer .error").hide(),this._node.find(".btnSubmit").addClass("disabled"),this.updateCloseButton()}},{key:"mapViewerLoading",value:function(){this._node.find(".webmap-builder-container").addClass("hide"),this._node.find(".loading-container").removeClass("hide"),this._node.find(".btnSubmit").removeClass("hide").addClass("disabled").html(u.default.builder.mapEditor.save),this.updateCloseButton()}},{key:"mapViewerLoaded",value:function(){this._node.find(".webmap-builder-container").removeClass("hide"),this._node.find(".loading-container").addClass("hide"),this._viewerMapIsLoaded=!0}},{key:"mapViewerFatalError",value:function(e){console.error(e),this._node.find(".error-container").removeClass("hide"),this._node.find(".error-msg").html(u.default.builder.mapEditor.loadFail+"<br />"+e),this._node.find(".loading-container").addClass("hide"),this._node.find(".webmap-builder-container").addClass("hide")}},{key:"onEnableSave",value:function(){this._isSaving||(this._node.find(".btnSubmit").removeClass("disabled").html(u.default.builder.mapEditor.save),this.updateCloseButton(!0))}},{key:"updateCloseButton",value:function(e){var t=this;this._node.find(".btnCancel").hasClass("open")||e&&this._node.find(".btnCancel").hasClass("has-confirmation")||(this._node.find(".btnCancel").off("click").smConfirmPopover("destroy"),e?(this._node.find(".btnCancel").smConfirmPopover({container:".mapEditPopup .modal-dialog",title:u.default.builder.mapEditor.cancelTitle,confirmButtonText:u.default.builder.mapEditor.confirm,denyButtonText:u.default.builder.mapEditor.deny,onConfirmButtonClick:function(){t.onClickClose(!0)}}),this._node.find(".btnCancel").addClass("has-confirmation")):this._node.find(".btnCancel").click(this.onClickClose.bind(this)).removeClass("has-confirmation"))}},{key:"onSave",value:function(){this._viewerMapIsLoaded&&(this._node.find(".btnSubmit").hasClass("disabled")||(this._isSaving=!0,this._node.find(".btnSubmit").addClass("disabled").html('<span class="small-loader"></span>'+u.default.builder.mapEditor.saving),this.updateCloseButton(!0),this._node.find(".modal-footer .error").html("").hide(),this._mapViewerWrapper.saveExistingMap()))}},{key:"onClickClose",value:function(e){this._node.modal("hide"),e&&this._node.find(".webmap-builder").attr("src","about:blank")}},{key:"onClose",value:function(){this._mapViewerWrapper.close(),this._resultDeferred&&(this._hasSavedMap||this._hasCreatedMap?this._resultDeferred.resolve({newMap:this._hasCreatedMap,newMapInfos:this._newMapInfos}):this._resultDeferred.reject())}},{key:"onModalHidden",value:function(){$("#mapEditPopup").empty()}},{key:"onSaveSucceed",value:function(e){this._params.id!==e?(this._params.id=e,this._newMapInfos={id:e},this._hasCreatedMap=!0):this._hasSavedMap=!0,this.updateSavedUI()}},{key:"updateSavedUI",value:function(){var e=this;this._node.find(".btnSubmit").addClass("disabled").html('<span class="glyphicon glyphicon-ok"></span> '+u.default.builder.mapEditor.success),this.updateCloseButton(),setTimeout(function(){e._node.find(".btnSubmit").html(u.default.builder.mapEditor.save),e._node.find(".btnSubmit").toggleClass("disabled",!0),e._isSaving=!1},2e3)}},{key:"onSaveError",value:function(){this._node.find(".btnSubmit").removeClass("disabled").html(u.default.builder.mapEditor.save),this._node.find(".modal-footer .error").html(u.default.builder.mapEditor.errorSave).show()}},{key:"getFrameWindow",value:function(){return this._node.find(".webmap-builder")[0].contentWindow}}]),e}();t.default=f,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Common",[],function(){}),define("storymaps-react/tpl/view/section/Common",["module","exports","storymaps-react/tpl/builder/mapEditor/WebMapEditor","storymaps/tpl/utils/CommonHelper","dojo/topic","lib-build/less!./Common"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=r(o),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(){a(this,e)}return c(e,null,[{key:"initMedia",value:function(e){return app.ui.MediaFactory.createInstance({mediaJSON:e.media,mediaCache:e.mediaCache,isNewMedia:e.isNewMedia})}},{key:"checkErrors",value:function(e,t,n){var i=!1;if(t.background&&t.foreground?(e.backgroundMedia.indexOf(t.background.type)<0&&(console.error("Section ",n," is using invalid background"),i=!0),t.foreground.layout&&(!e.foregroundLayout||!e.foregroundLayout.length||e.foregroundLayout.indexOf(t.foreground.layout)<0)&&(console.error("Section ",n," is using invalid foreground"),i=!0)):t.views?$.each(t.views,function(t,o){e.backgroundMedia.indexOf(o.background.type)<0&&(console.error("Section ",n," - view "+t+"is using invalid background"),i=!0)}):console.error("Section ",n," is not using a proper background/foreground configuration"),i)return void console.error("Section",n," ignored")}},{key:"renderBlocks",value:function(e){var t="",n=null,i=[],o=null,r="",a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(o=app.ui.MediaFactory.createInstance({mediaJSON:d}),r=d[d.type].style||[],!o)return;n&&"text"==n||r.push("first-letter-huge"),t+=o.render({placement:"block",style:r}),n=d.type,i.push(o)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}return{output:t,blocks:i}}},{key:"createBlock",value:function(e){return app.ui.MediaFactory.createInstance({mediaJSON:e,isNewMedia:!0})}},{key:"renderBackground",value:function(e){var t="";if(e=e||{},!e.media)return t;if(!e.noBackgroundTag){var n=" "+(e.media.options||""),i=[];e.transition&&i.push(" transition-"+e.transition),t+='<div class="background background-type-'+e.media.type+" "+i.join(" ")+'" style="'+n+'">'}return t+=e.media.render({placement:"background",sectionType:e.sectionType}),e.noBackgroundTag||(t+="</div>"),t}},{key:"getMediaIndexes",value:function(e,t,n){if(!e||!e.length||!t)return-1;var i=t.type,o=null;o=n?t:t[i];var r=[];return $.each(e,function(e,t){t.type==i&&("webmap"==t.type||"webscene"==t.type?t.id==o.id&&r.push(e):"webpage"==t.type?t.id==o.url&&r.push(e):"audio"==t.type?t.id==o.url&&r.push(e):"video"==t.type?t.id==o.source+"-"+o.id&&r.push(e):"image"==t.type&&t.id==o.id&&r.push(e))}),r}},{key:"resize",value:function(){}},{key:"onEditMediaAlternate",value:function(e){var t=this.initMedia({media:e.newMediaJSON,isNewMedia:!0});e.mainMedia.setAlternate(t),t.postCreate(),t.load(),e.oldMedia&&e.oldMedia.destroy(),this.checkMedia(e.newMediaJSON)}},{key:"onRemoveMediaAlternate",value:function(e){e.mainMedia.removeAlternate(),e.media&&e.media.destroy(),this.checkMedia()}},{key:"_applyTitleBackground",value:function(e,t){e.background?"light"===e.background?(t.addClass("background-light"),t.removeClass("background-dark")):(t.addClass("background-dark"),t.removeClass("background-light")):(t.removeClass("background-dark"),t.removeClass("background-light"))}},{key:"_applyTitleText",value:function(e,t){e.text&&("light"===e.text?(t.addClass("text-light"),t.removeClass("text-dark")):(t.addClass("text-dark"),t.removeClass("text-light")))}},{key:"_applyTextShadow",value:function(e,t){e.shadow?t.addClass("text-shadow"):t.removeClass("text-shadow")}},{key:"applyTitleStyle",value:function(e,t,n){e?(this._applyTitleBackground(e,n),this._applyTitleText(e,t),this._applyTextShadow(e,t)):t.addClass("text-shadow")}},{key:"checkMedia",value:function(e){e&&"image-gallery"===e.type||(e&&"image"===e.type&&e.image.uploadDeferred?e.image.uploadDeferred.then(function(){u.default.publish("builder-should-check-story")},function(){u.default.publish("builder-should-check-story")}):u.default.publish("builder-should-check-story"))}},{key:"launchMapEditor",value:function(e){return new Promise(function(t,n){var i=new s.default({container:$("#mapEditPopup")}),o=e?{id:e.id}:{newMap:!0};i.present(o).then(function(n){var i=null;if(n.newMap&&n.newMapInfos)i={type:"webmap",id:n.newMapInfos.id};else{var o="_"+e.type;i=e[o]}t({type:"webmap",webmap:i})},function(){n()})})}},{key:"launchMapEditorFromMediaPicker",value:function(){var e=this;return new Promise(function(t,n){var i=app.builder.mediaPicker.getContainerNode();i.on("hidden.bs.modal",function(){setTimeout(function(){e.launchMapEditor(null).then(function(e){t(e)},function(){n()})},500),i.off("hidden.bs.modal")})})}},{key:"isSameMediaWithSecureProtocol",value:function(e,t){var n=t.type===e.type;if("webpage"!==e.type&&"image"!==e.type&&"audio"!==e.type&&"video"!==e.type||!n)return!1;var i=e["_"+t.type].url,o=t[t.type].url,r=l.default.forceHttpsUrl(i)===o,a=l.default.forceProtocolRelativeUrl(i)===o;return-1!==i.indexOf("http://")&&(r||a)}},{key:"onEditBackgroundVideo",value:function(e,t,n){var i=this.getMediaIndexes(e,t);$.each(i,function(t,i){var o=e[i];o.updateParams&&o.updateParams(n)})}}]),e}();t.default=d,e.exports=t.default}),define("storymaps/tpl/view/section/Cover/CoverCommonEffects",[],function(){function e(e){var t=e.$currentSection.find(".foreground"),n=e.$currentSection.find(".background");setTimeout(function(){n.addClass("scale-out")},c),setTimeout(function(){n.css("transform","scale(1)"),n.css("opacity",1),n.removeClass("scale-out")},c+1500),setTimeout(function(){t.addClass("slide-text")},c+200),setTimeout(function(){t.css("transform","translateY(0)"),t.css("opacity",1),t.removeClass("slide-text")},c+1700)}function t(e){var t=e.$currentSection.find(".background");setTimeout(function(){t.addClass("fade-in-background")},c),setTimeout(function(){e.$currentSection.find(".cover-title").addClass("fade-in-cover-title")},c+500),setTimeout(function(){e.$currentSection.find(".cover-subtitle").addClass("fade-in-cover-subtitle")},c+1200),setTimeout(function(){e.$currentSection.find(".cover-title").css("opacity",1)},c+2500),setTimeout(function(){e.$currentSection.find(".cover-subtitle").css("opacity",1)},c+3e3)}function n(e,t){var n=e.$currentSection.data("views"),i=n*app.display.windowHeight,o=e.currentSectionScroll/i,r=t?1.5:2.5,a=Math.pow(1-o,r);e.$currentSection.find(".foreground, .scroll-invite").css("opacity",a)}function i(e,t){var n=t?-1:-5,i=e.$currentSection.find(".foreground"),o=e.currentSectionScroll/100*n;o=parseInt(o,10),i.css("transform","translateY("+o+"px)")}function o(e){var t=e.$currentSection.data("views"),n=t*app.display.windowHeight,i=e.currentSectionScroll/n,o=1-i,r=e.currentSectionScroll*o,a=(e.currentSectionScroll-100)/n,s=(1-a)*e.currentSectionScroll;r=parseInt(r,10),s=parseInt(s,10),e.$currentSection.find(".cover-title").css("transform","translateY("+r+"px)"),e.$currentSection.find(".cover-subtitle").css("transform","translateY("+s+"px)")}function r(e,t){var n=e.$currentSection.find(".background"),i=e.$currentSection.data("views"),o=i*app.display.windowHeight,r=0,a=t?6:10;o>0&&(r=e.currentSectionScroll/o*a),n.css({webkitFilter:"blur("+r+"px)",filter:"blur("+r+"px)"})}function a(e,t,n){var i=e.$currentSection.find(".background"),o=1,r=0,a=t?4:20,s=e.$currentSection.find(".foreground");e.currentSectionScroll>0&&(r=e.currentSectionScroll/app.display.windowHeight,o=1+r/a),i.css("transform","scale("+o+")"),n&&s.css("transform","scale("+o+")")}function s(e){var t=e.$currentSection.find(".wrapper"),n=1;e.currentSectionScroll>0&&(n=1-e.currentSectionScroll/app.display.windowHeight),t.css("opacity",n)}function l(e,t){var n=e.$currentSection.data("views"),i=n*app.display.windowHeight,o=e.$currentSection.find(".wrapper"),r=100,a="";e.currentSectionScroll>0&&(r=t?100*(1-e.currentSectionScroll/i):(i-e.currentSectionScroll)/app.display.windowHeight*100)>100&&(r=100),a="brightness("+r.toFixed(1)+"%)",o.css({webkitFilter:a,filter:a})}function u(e){var t=e.$currentSection.find(".background"),n=e.$currentSection.data("views"),i=n*app.display.windowHeight,o=e.currentSectionScroll>=.1*i,r=1;o&&(r=1-(e.currentSectionScroll-.1*i)/(.9*i*.7)),t.css("opacity",r)}var c=900;return{scaleFadeInCover:e,fadeInBackground:t,fadeOutForeground:n,translateForeground:i,translateForegroundDown:o,blurBackground:r,scaleBackground:a,blendCoverWithHeader:s,darkenCover:l,fadeOutCover:u}}),define("storymaps/tpl/view/section/Cover/CoverStatic",["./CoverCommonEffects"],function(){return function(){this.dataViews=1,this.layoutType="static",this.displayCover=function(){},this.onScroll=function(){}}}),define("storymaps/tpl/view/section/Cover/CoverScale",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!1),e.fadeOutCover(t)}function n(t){e.translateForeground(t,!0),e.fadeOutForeground(t)}this.dataViews=1.25,this.layoutType="scale",this.displayCover=function(t){e.scaleFadeInCover(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverBlur",["./CoverCommonEffects"],function(e){return function(){function t(t){e.blurBackground(t,!1)}function n(t){e.fadeOutForeground(t)}this.dataViews=1.5,this.layoutType="blur",this.displayCover=function(t){e.scaleFadeInCover(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverPartialPage",["./CoverCommonEffects"],function(e){return function(){function t(t){e.blurBackground(t,!0),e.darkenCover(t,!0)}function n(t){e.translateForeground(t,!1),e.fadeOutForeground(t,!0)}this.dataViews=.7,this.layoutType="partial-page",this.displayCover=function(){},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverDelay",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!1),e.darkenCover(t,!1)}function n(t){e.translateForeground(t,!1),e.fadeOutForeground(t,!1)}this.dataViews=1.5,this.layoutType="delay",this.displayCover=function(t){e.fadeInBackground(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverBlendHeader",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!0,!0),e.blendCoverWithHeader(t)}function n(e){e.$currentSection.css("background-color","rgba(0,0,0,1)")}this.dataViews=1,this.layoutType="blend-header",this.displayCover=function(e){n(e)},this.onScroll=function(e){t(e)}}}),define("storymaps/tpl/view/section/Cover/CoverCurtain",["./CoverCommonEffects"],function(e){return function(){function t(t){e.darkenCover(t,!1)}function n(t){e.translateForegroundDown(t)}this.dataViews=1,this.layoutType="curtain",this.displayCover=function(t){e.fadeInBackground(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverStyleFactory",["./CoverStatic","./CoverScale","./CoverBlur","./CoverPartialPage","./CoverDelay","./CoverBlendHeader","./CoverCurtain"],function(e,t,n,i,o,r,a){function s(s){var u=null;if(!(u=l()))switch(s){case"scale":u=new t;break;case"blur":u=new n;break;case"partial-page":u=new i;break;case"delay":u=new o;break;case"blend-header":u=new r;break;case"curtain":u=new a;break;default:u=new e}return u}function l(){var e=window.location.href,s=null;return-1!==e.indexOf("coverStyle=blur")?s=new n:-1!==e.indexOf("coverStyle=scale")?s=new t:-1!==e.indexOf("coverStyle=partial-page")?s=new i:-1!==e.indexOf("coverStyle=delay")?s=new o:-1!==e.indexOf("coverStyle=blend-header")?s=new r:-1!==e.indexOf("coverStyle=curtain")&&(s=new a),s}return{createInstance:s}}),define("lib-build/hbars!storymaps-react/tpl/view/section/Cover/Cover",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r=t.helperMissing;return'            <h2 class="cover-subtitle title-text">'+(0,this.escapeExpression)((o=null!=(o=t.subtitle||(null!=e?e.subtitle:e))?o:r,"function"==typeof o?o.call(e,{name:"subtitle",hash:{},data:i}):o))+"</h2>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l=this.lambda,u='<div class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,"function"==typeof r?r.call(e,{name:"classes",hash:{},data:i}):r))+'" data-views="'+s((r=null!=(r=t.nbViews||(null!=e?e.nbViews:e))?r:a,"function"==typeof r?r.call(e,{name:"nbViews",hash:{},data:i}):r))+'">\n  <div class="wrapper">\n\n    ';return r=null!=(r=t.background||(null!=e?e.background:e))?r:a,o="function"==typeof r?r.call(e,{name:"background",hash:{},data:i}):r,null!=o&&(u+=o),u+='\n\n    <div class="foreground">\n      <div class="foo">\n        <div class="title-error-container hidden">\n          <div class="title-error-message">'+s(l(null!=(o=null!=e?e.strings:e)?o.saveError:o,e))+'</div>\n        </div>\n        <div class="text-background">\n          <h1 class="cover-title title-text">'+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,"function"==typeof r?r.call(e,{name:"title",hash:{},data:i}):r))+'</h1>\n          \x3c!--<span class="cover-title-mock-cursor"></span>--\x3e\n',o=t.if.call(e,null!=e?e.showSubtitle:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(u+=o),u+'        </div>\n      </div>\n\n      <div class="cover-media-placeholder">\n        <div class="cover-media-placeholder-wrapper">\n          <i class="fa fa-picture-o ph-icon-media" aria-hidden="true"></i>\n          <div class="cover-media-placeholder-label">'+s(l(null!=(o=null!=e?e.strings:e)?o.mediaPlaceholder:o,e))+'</div>\n        </div>\n      </div>\n    </div>\n\n    <div class="scroll-invite">\n      <div class="scroll-invite-btn"></div>\n    </div>\n\n    <div class="foreground ios-embed-link">\n      <div class="text-background">\n        <h4 class="title-text">'+s(l(null!=(o=null!=e?e.strings:e)?o.iosEmbedLink:o,e))+'</h4>\n      </div>\n    </div>\n\n    <div class="cover-credits-left">'+s((r=null!=(r=t.creditsLeft||(null!=e?e.creditsLeft:e))?r:a,"function"==typeof r?r.call(e,{name:"creditsLeft",hash:{},data:i}):r))+'</div>\n    <div class="cover-credits-right">'+s((r=null!=(r=t.creditsRight||(null!=e?e.creditsRight:e))?r:a,"function"==typeof r?r.call(e,{name:"creditsRight",hash:{},data:i}):r))+"</div>\n  </div>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Cover/Cover",[],function(){}),define("storymaps-react/tpl/view/section/Cover/Cover",["module","exports","storymaps-react/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/view/section/Cover/CoverStyleFactory","lib-build/hbars!./Cover","lib-build/less!./Cover"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=l(n),d=l(i),p=l(o),f=l(r),h=l(a),m=l(s),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(){function e(t){u(this,e),this.type="cover",this.id=d.default.getUID(),this._section=t,this._section.options=this._section.options||{},this._node=null,this._isLoaded=!1,this._backgroundMedia=null,this._cover=h.default.createInstance(this._section.layout)}return g(e,[{key:"render",value:function(){return this._backgroundMedia=c.default.initMedia({media:this._section.background}),(0,m.default)({classes:["section","section-layout-cover",this._section.layout,this._cover.layoutType].join(" "),nbViews:this._cover.dataViews,background:c.default.renderBackground({media:this._backgroundMedia}),title:this._section.foreground.title,subtitle:this._section.foreground.subtitle,showSubtitle:this._section.foreground.subtitle||app.isInBuilder,creditsLeft:this._section.foreground["credits-left"],creditsRight:this._section.foreground["credits-right"],strings:Object.assign({},p.default.builder.cover,f.default.viewer.cover)})}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate({container:e,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"cover"}),$(".scroll-invite").click(function(){app.Controller.navigateToSection({index:1,animate:!0})}),this._applyConfig()}},{key:"_applyConfig",value:function(){var e=this._node.find(".foreground .title-text"),t=this._node.find(".foreground .text-background"),n=null;this._section.foreground&&this._section.foreground.options&&(n=this._section.foreground.options.titleStyle),c.default.applyTitleStyle(n,e,t)}},{key:"onScroll",value:function(e){if("unload"==e.status)this._backgroundMedia.performAction({visible:!1});else{if("preload"==e.status)return;if("current"==e.status)this._isLoaded?this._backgroundMedia.performAction({isActive:!0}):(this._isLoaded=!0,this._backgroundMedia.load().then(function(){this._backgroundMedia.performAction({isActive:!0})}.bind(this))),this._cover.displayCover(e),this.updateContent(e,!0);else{if(!this._isLoaded)return;this.updateContent(e,!1)}}}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||""}}},{key:"getPreviewText",value:function(){return this._section.foreground.title}},{key:"updateContent",value:function(e,t){0==e.currentSectionIndex&&(e.currentSectionScroll>app.display.sectionHeight/2?$(".story-header").css("background-color","rgba(0,0,0,"+e.currentSectionScroll/app.display.sectionHeight+")"):$(".story-header").css("background-color","rgba(0,0,0,0)")),t||"current"!==e.status||this._cover.onScroll(e)}},{key:"resize",value:function(e){this._backgroundMedia.resize(e)}},{key:"getArcGISContent",value:function(){return this._backgroundMedia.getArcGISContent()}}]),e}();t.default=v,e.exports=t.default}),define("storymaps-react/tpl/utils/Viewport",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"isInViewport",value:function(e){var t=app.display.scrollTop,n=t+app.display.windowHeight,i=e.offset().top,o=i+e.outerHeight(),r=o<t,a=n<i;return!r&&!a}},{key:"isNearViewportBottom",value:function(e,t){var n=app.display.scrollTop,i=n+app.display.windowHeight,o=e.offset().top,r=o+e.outerHeight(),a=o-i<=t,s=r>=n;return!(!a||!s)}},{key:"isNearViewportTop",value:function(e,t){var n=app.display.scrollTop,i=n+app.display.windowHeight,o=e.offset().top,r=o+e.outerHeight(),a=n-r<=t,s=o<=i;return!(!a||!s)}}]),e}();t.default=o,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Sequence",[],function(){}),define("storymaps-react/tpl/view/section/Sequence",["module","exports","storymaps-react/tpl/view/section/Common","storymaps/tpl/utils/UI","storymaps-react/tpl/utils/Viewport","dojo/_base/lang","lib-build/less!./Sequence"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=a(n),c=a(i),d=a(o),p=a(r),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h={backgroundMedia:["color","image"],foregroundLayout:["sequence-1"],foregroundMedia:["image","video","webscene","webpage"]},m=function(){function e(t){l(this,e),this.type="sequence",this.id=c.default.getUID(),this._section=t,this._node=null,this._isLoaded=!1,this._blocks=null,this._backgroundMedia=null,this._isActive=!1,this._sectionIndex=null}return f(e,[{key:"render",value:function(e){var t="",n=this._section.foreground;if(u.default.checkErrors(h,this._section,e))return t;if(this._sectionIndex=e,t+='<div class="section section-layout-sequence '+this._section.layout+'">',this._backgroundMedia=u.default.initMedia({media:this._section.background}),t+=u.default.renderBackground({media:this._backgroundMedia}),t+='<div class="foreground">',n.blocks){var i=u.default.renderBlocks(n.blocks);this._blocks=i.blocks,t+=i.output}return t+="</div>",t+="</div>"}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate&&this._backgroundMedia.postCreate({container:this._node});var t=[],n=!0,i=!1,o=void 0;try{for(var r,a=this._blocks[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;if(s.postCreate){var l=s.postCreate({container:e,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS,sectionType:"sequence"});l&&l.isAsync&&t.push(l.promise)}}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getNumberOfBlocks",value:function(){return this._section.foreground&&this._section.foreground.blocks?this._section.foreground.blocks.length:0}},{key:"changeTheme",value:function(){var e=p.default.getObject("app.data.appItem.data.values.settings.theme.colors.bgMain");e&&this._backgroundMedia&&this._backgroundMedia.update&&this._backgroundMedia.update(e)}},{key:"onScroll",value:function(e){if("unload"==e.status)this._isActive=!1,$.each(this._blocks,function(e,t){t.performAction({isActive:!1})});else if("preload"==e.status){if(this._isLoaded)return
;this._isLoaded=!0,this._backgroundMedia.load(),$.each(this._blocks,function(e,t){"webscene"!==t.type&&t.load()}),this._loadWebScenes(e.webSceneCache,!0,e.scrollDifference)}else"visible"!=e.status&&"current"!=e.status||(this._isLoaded||$.each(this._blocks,function(e,t){"webscene"!==t.type&&t.load()}),app.isInBuilder||this._loadBlocks(),this._loadWebScenes(e.webSceneCache,!1,e.scrollDifference),this._isLoaded=!0)}},{key:"_loadBlocks",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value,a=r._node;if(a&&"text"!==r.type)if(a.hasClass("bring-in")){var s=app.display.scrollTop,l=s+app.display.windowHeight,u=a.offset().top;u>l&&a.removeClass("bring-in")}else{var c=d.default.isNearViewportBottom(a,100);c&&a.addClass("bring-in")}}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}},{key:"_loadWebScenes",value:function(e,t,n){if(!app.data.errorWebGL){var i=!t,o=this._blocks.filter(function(e){return"webscene"===e.type}),r=!0,a=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)!function(){var o=l.value;if(!o._isLoaded){var r=!1;if(r=n>=0?d.default.isNearViewportBottom(o._node,750):d.default.isNearViewportTop(o._node,750),t||r){var a={item:o,sectionType:"sequential",canRemove:function(){return!d.default.isInViewport(o._node)}};e.add(a,i)}}}()}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}}}},{key:"resize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;a.resize&&a.resize()}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}this._loadWebScenes(e.webSceneCache,!1,0)}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;e.push.apply(e,s(a.getArcGISContent()))}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return e}}]),e}();t.default=m,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Title",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r=t.helperMissing;return'      <div class="text-background">\n        <h1 class="fg-title title-text">'+(0,this.escapeExpression)((o=null!=(o=t.title||(null!=e?e.title:e))?o:r,"function"==typeof o?o.call(e,{name:"title",hash:{},data:i}):o))+"</h1>\n      </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,"function"==typeof r?r.call(e,{name:"classes",hash:{},data:i}):r))+'" id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'">\n\n  ';return r=null!=(r=t.background||(null!=e?e.background:e))?r:a,o="function"==typeof r?r.call(e,{name:"background",hash:{},data:i}):r,null!=o&&(l+=o),l+='\n\n  <div class="foreground">\n',o=t.if.call(e,null!=e?e.showTitle:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+'  </div>\n\n  <div class="fg-credits">'+s((r=null!=(r=t.credits||(null!=e?e.credits:e))?r:a,"function"==typeof r?r.call(e,{name:"credits",hash:{},data:i}):r))+'</div>\n  <div class="builder-section-add-menu"></div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Title",[],function(){}),define("storymaps-react/tpl/view/section/Title",["module","exports","storymaps-react/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Title","lib-build/less!./Title"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=r(o),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(t){a(this,e),this.type="title",this.id=l.default.getUID(),this._section=t,this._node=null,this._isLoaded=!1,this._backgroundMedia=null}return c(e,[{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getPreviewThumbnail",value:function(){return this._backgroundMedia.getPreviewThumbnail()}},{key:"getPreviewText",value:function(){return this._section.foreground?this._section.foreground.title:""}},{key:"getPreviewIcon",value:function(){return""}},{key:"render",value:function(){var e=this._section.background,t=this._section.foreground,n=[],i=this._section.options,o="medium";return i&&i.size&&(o=i.size),n.push("size-"+o),this._backgroundMedia=s.default.initMedia({media:e}),(0,u.default)({classes:["section","section-layout-title"].concat(n).join(" "),id:this.id,background:s.default.renderBackground({media:this._backgroundMedia}),title:t.title,showTitle:app.isInBuilder||t.title,credits:t.credits})}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate({container:e,mediaIcon:"image",onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"title"}),this._applyConfig()}},{key:"_applyConfig",value:function(){var e=this._node.find(".title-text"),t=this._node.find(".text-background"),n=null;this._section.foreground&&this._section.foreground.options&&(n=this._section.foreground.options.titleStyle),s.default.applyTitleStyle(n,e,t)}},{key:"onScroll",value:function(e){"unload"!=e.status&&("preload"==e.status?this._isLoaded||(this._backgroundMedia.load(),this._isLoaded=!0):this._backgroundMedia.performAction({isActive:!0,progress:0}))}},{key:"resize",value:function(e){this._backgroundMedia.resize(e)}},{key:"getArcGISContent",value:function(){return this._backgroundMedia.getArcGISContent()}}]),e}();t.default=d,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/Immersive",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='    <div class="background-title">\n      <div class="background-title-wrapper text-background">\n        <h2 class="title-text">'+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,"function"==typeof r?r.call(e,{name:"title",hash:{},data:i}):r))+"</h2>\n        ";return r=null!=(r=t.titleConfigPanel||(null!=e?e.titleConfigPanel:e))?r:a,o="function"==typeof r?r.call(e,{name:"titleConfigPanel",hash:{},data:i}):r,null!=o&&(l+=o),l+"\n      </div>\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,"function"==typeof r?r.call(e,{name:"classes",hash:{},data:i}):r))+'" data-views="'+s((r=null!=(r=t.viewsCount||(null!=e?e.viewsCount:e))?r:a,"function"==typeof r?r.call(e,{name:"viewsCount",hash:{},data:i}):r))+'">\n';return o=t.if.call(e,null!=e?e.showTitle:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=o&&(l+=o),l+='  <div class="background-credits">'+s((r=null!=(r=t.credits||(null!=e?e.credits:e))?r:a,"function"==typeof r?r.call(e,{name:"credits",hash:{},data:i}):r))+'</div>\n  <div class="background-filler"></div>\n\n  ',r=null!=(r=t.background||(null!=e?e.background:e))?r:a,o="function"==typeof r?r.call(e,{name:"background",hash:{},data:i}):r,null!=o&&(l+=o),l+='\n\n  <div class="background-swipe-trans-extras">\n    <div class="separator-vertical"></div>\n    <div class="separator-horizontal"></div>\n  </div>\n\n  <div class="foreground">\n    ',r=null!=(r=t.foreground||(null!=e?e.foreground:e))?r:a,o="function"==typeof r?r.call(e,{name:"foreground",hash:{},data:i}):r,null!=o&&(l+=o),l+'\n  </div>\n\n  <div class="builder-panel"></div>\n  <div class="builder-section-add-menu"></div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/Immersive",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/Immersive",["module","exports","storymaps-react/tpl/view/section/Common","storymaps/tpl/utils/UI","storymaps-react/tpl/utils/Viewport","lib-build/hbars!./Immersive","lib-build/less!./Immersive"],function(e,t,n,i,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=a(n),c=a(i),d=a(o),p=a(r),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t){l(this,e),this.type="immersive",this.id=c.default.getUID(),this._section=t,this._section.options=this._section.options||{},this._nbViews=0,this._isLoaded=!1,this._isActive=!1,this._currentViewIndex=-1,this._isNavigatingAway=!1,this._currentViewScrollPosition=-1,this._currentViewNode=null,this._swipeTransitionExtrasNode=null,this._previousMedia=null,this._medias=[],this._panels=[],this._transitions=[],this._mediaCache={}}return f(e,[{key:"render",value:function(e){var t=this._section.views,n=this._section.options;t=t||[],n=n||{},this._nbViews=t.length;var i=[],o="",r="",a="",s="";n.style&&i.push(n.style),t.length&&t[0].foreground.panels&&t[0].foreground.panels[0]&&i.push("layout-"+t[0].foreground.panels[0].layout),n.events&&i.push("events-"+n.events),n["events-btn"]&&i.push("events-"+n["events-btn"]),c.default.isMobileBrowser()&&n["events-btn"]&&(this._nbViews=1.2),t.length&&t[0].foreground.title&&t[0].foreground.title.value&&(o=t[0].foreground.title.value),n.credits&&(r=n.credits);var l=!0,d=!1,f=void 0;try{for(var h,m=t[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var g=h.value,v=this.isMediaAlreadyLoaded(g.background),b=u.default.initMedia({media:g.background,mediaCache:this._mediaCache});v||(a+=u.default.renderBackground({media:b,transition:g.transition,sectionType:"immersive"})),this._medias.push(b);var y=g.foreground.panels?g.foreground.panels[0]:null;if(y){var _=app.ui.ImmersivePanelFactory.createInstance(y,g.transition,{onUpdateLayout:app.isInBuilder?this.onUpdatePanelLayout.bind(this):null,onChange:app.isInBuilder?this._onContentChange.bind(this):null});this._panels.push(_),s+=_.render()}this._transitions.push(g.transition)}}catch(e){d=!0,f=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw f}}return(0,p.default)({classes:["section","section-immersive"].concat(i).join(" "),viewsCount:this._nbViews+1,title:o,showTitle:app.isInBuilder||o,credits:r,background:a,foreground:s,titleConfigPanel:app.isInBuilder&&e?e.titleConfigPanel:null})}},{key:"postCreate",value:function(e){this._node=e,this._swipeTransitionExtrasNode=this._node.find(".background-swipe-trans-extras");var t=!0,n=!1,i=void 0;try{for(var o,r=this._medias[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){o.value.postCreate({container:e,delayBuilderInit:!0,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"})}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}var a=!0,s=!1,l=void 0;try{for(var u,c=this._panels[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.postCreate({container:e,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL})}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}this._node.find(".background").first().addClass("first-view"),this._update()}},{key:"update",value:function(){this._update()}},{key:"_update",value:function(){this._nbViews=this._medias.length;var e=this._nbViews+1;1==e&&this._node.find(".background").hasClass("background-type-image")&&(e*=1.1),this._applyTransitionRules(),this._computeWebMapsSwipeLayers(),this._applyTitleConfig()}},{key:"_applyTitleConfig",value:function(){if(this._section.views.length&&this._section.views[0].foreground&&this._section.views[0].foreground.title){var e=this._section.views[0].foreground.title.style,t=this._node.find(".background-title-wrapper h2"),n=this._node.find(".background-title-wrapper");u.default.applyTitleStyle(e,t,n)}}},{key:"onScroll",value:function(e){var t=this,n=0;this._currentViewNode=this._node.find(".imm-panel").eq(0),"current"===e.status&&this._node.find(".imm-panel").each(function(i,o){e.currentSectionScroll+e.windowHeight>$(o).position().top&&(n=i,t._currentViewNode=$(o))}),n+=1;var i=this._node.position().top+this._node.outerHeight(),o=i>e.scrollTop&&i<e.scrollTop+e.windowHeight;if(this._isNavigatingAway="current"===e.status&&o,"current"!==e.status||this._isNavigatingAway?this._currentViewScrollPosition=0:(this._currentViewScrollPosition=e.currentSectionScroll+e.windowHeight-this._currentViewNode.position().top,this._currentViewScrollPosition<0&&(this._currentViewScrollPosition=0)),"unload"==e.status){this._isActive=!1;var r=!0,a=!1,s=void 0;try{for(var l,u=this._medias[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){l.value.performAction({isActive:!1,animate:!1})}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}return this._medias[0]&&(1===this._currentViewIndex&&this._medias[0].getNode().nextAll().removeClass("active"),this._medias[0].getNode().addClass("active"),this._medias[0].performAction({isActive:!1,transition:this._transitions[0],isNewView:!0,viewIndex:0,visibilityProgress:0,scrollPositionSection:0,scrollPositionView:0,performBuilderInit:!1,animate:!1})),this._node.toggleClass("hide-title hide-credits",!0),this._currentViewIndex=-1,void(this._previousMedia=null)}var c=this._medias[n-1];if(c){if(!this._isLoaded){this._isLoaded=!0,this.loadMedias(),this._loadWebScenes({cache:e.webSceneCache,currentMedia:c,viewIndex:n,isPreload:!0,scrollDifference:e.scrollDifference});var d=!0,p=!1,f=void 0;try{for(var h,m=this._panels[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){h.value.load()}}catch(e){p=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(p)throw f}}this._node.find(".background").eq(0).addClass("active")}var g=this._currentViewIndex;if("visible"!==e.status&&"current"!==e.status||(this._currentViewIndex=n,this._loadWebScenes({cache:e.webSceneCache,currentMedia:c,viewIndex:n,isPreload:!1,scrollDifference:e.scrollDifference})),"current"==e.status){var v={isActive:"current"==e.status,transition:this._transitions[n-1],isNewView:g!=n||!this._isActive&&"current"===e.status,viewIndex:n,visibilityProgress:1,scrollPositionSection:e.currentSectionScroll,scrollPositionView:this._currentViewScrollPosition,performBuilderInit:g!=n||!this._isActive&&"current"===e.status};this._isActive=!0;var b=!1;if("current"==e.status){var y=this._transitions[n-1],_=this._medias[n-2];b=this._isTransitionDoneByMedia(y,c,_)}var w=v.isNewView;if(w||"webmap"!=c.type||this._isNavigatingAway||(w=b),w&&c.performAction(v),"current"==e.status){if(this._node.toggleClass("hide-title hide-credits",!1),v.isNewView&&(c.getNode().nextAll().removeClass("active"),c.getNode().addClass("active"),this._previousMedia&&"video"==this._previousMedia.type&&!this._previousMedia.isSameMedia(c)&&this._previousMedia.performAction({isActive:!1}),this._previousMedia=c),!this._isNavigatingAway)if("swipe-vertical"==y||"swipe-horizontal"==y){if(b)this._swipeTransitionExtrasNode.removeClass("active");else{var C=null,k=app.display.windowWidth,x=e.windowHeight;if(app.isInBuilder&&(x-=125),"swipe-vertical"==y)C=x-1.3*this._currentViewScrollPosition,c.getNode().css("clip","rect("+C+"px,"+k+"px,"+app.display.windowHeight+"px,0px)"),this._swipeTransitionExtrasNode.css({top:C,left:""}).toggleClass("trans-vertical",!0).toggleClass("trans-horizontal",!1).addClass("active");else if("swipe-horizontal"==y){var E=1.3*this._currentViewScrollPosition/x;C=k-E*k,c.getNode().css("clip","rect(0px,"+k+"px,"+app.display.windowHeight+"px,"+C+"px)"),this._swipeTransitionExtrasNode.css({top:"",left:C}).toggleClass("trans-vertical",!1).toggleClass("trans-horizontal",!0).addClass("active")}}}else this._swipeTransitionExtrasNode.removeClass("active");if(this._panels&&this._panels.length){if("scroll-partial"===this._panels[0].layout){var T=this._getNearbyPanels(),S=!0,P=!1,O=void 0;try{for(var I,M=T[Symbol.iterator]();!(S=(I=M.next()).done);S=!0){I.value.updatePosition({windowHeight:e.windowHeight})}}catch(e){P=!0,O=e}finally{try{!S&&M.return&&M.return()}finally{if(P)throw O}}}else{this._panels[n-1].updatePosition({viewScroll:this._currentViewScrollPosition,isNavigatingAway:this._isNavigatingAway,windowHeight:e.windowHeight})}}n==this._nbViews&&this._node.toggleClass("hide-title hide-credits",this._isNavigatingAway)}}}}},{key:"_getNearbyPanels",value:function(){var e=[],t=this._panels[this._currentViewIndex-2];t&&e.push(t);var n=this._panels[this._currentViewIndex-1];n&&e.push(n);var i=this._panels[this._currentViewIndex];return i&&e.push(i),e}},{key:"_loadWebScenes",value:function(e){var t=this;if(!app.data.errorWebGL){var n=!e.isPreload,i=this._medias.filter(function(e){return"webscene"===e.type}),o=!0,r=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)!function(){var i=s.value;if(!i._isLoaded){var o=t._medias[e.viewIndex-2],r=t._medias[e.viewIndex],a={item:i,sectionType:"immersive",canRemove:function(){return t._canRemoveWebScene(i)},viewIndex:e.viewIndex-1};if(e.isPreload){var l=t._medias.findIndex(function(e){return e.id===i.id&&e._node===i._node});a.viewIndex=l,e.cache.add(a,n)}else if(e.currentMedia===i)e.cache.add(a,n);else if(o===i)a.viewIndex=e.viewIndex-2,e.cache.add(a,n);else if(e.scrollDifference>=0&&r===i){var u=t._currentViewNode.outerHeight()-t._currentViewScrollPosition;u<=750&&(a.viewIndex=e.viewIndex,e.cache.add(a,n))}}}()}catch(e){r=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}}}},{key:"_canRemoveWebScene",value:function(e){return!d.default.isInViewport(this._node)||this._medias[this._currentViewIndex-1]!==e&&this._medias[this._currentViewIndex-2]!==e}},{key:"loadMedias",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._medias[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,s=!1;"webmap"==a.type&&(e.indexOf(a.id)>-1?s=!0:e.push(a.id)),s||"webscene"===a.type||this.loadMediaItem(a)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"loadMediaItem",value:function(e){var t=null;(t="webmap"===e.type?e.load({isUniqueInSection:this.isMediaUniqueInSection(e.serialize(!1))}):e.load())&&t.then(function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._medias[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;a.id==e&&a.postLoad()}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}.bind(this))}},{key:"navigateToViewByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!=e.index&&void 0!=e.animate){var t=this._node.find(".imm-panel").eq(e.index),n=t.offset().top,i=Math.floor(n-125);e.animate?$("html,body").animate({scrollTop:i}):(document.body.scrollTop=i,document.documentElement.scrollTop=i)}}},{key:"isMediaAlreadyLoaded",value:function(e){return u.default.getMediaIndexes(this._medias,e).length>0}},{key:"isMediaUniqueInSection",value:function(e){return 1==u.default.getMediaIndexes(this._medias,e).length}},{key:"resize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._medias[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){o.value.resize(e)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}this._loadWebScenes({cache:e.webSceneCache,currentMedia:this._medias[this._currentViewIndex-1],viewIndex:this._currentViewIndex,isPreload:!1,scrollDifference:0})}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"_computeWebMapsSwipeLayers",value:function(){for(var e=0;e<this._medias.length;e++){var t=this._getTransitionInfo(e),n=this._medias[e];0!=e&&("webmap"==n.type&&t.isDuplicateConsecutive&&this._medias[e].computeSwipeLayers(this._medias[e-1].getLayersConfiguration()))}}},{key:"_isTransitionDoneByMedia",value:function(e,t,n){return e&&t&&n&&("swipe-vertical"==e||"swipe-horizontal"==e)&&"webmap"==t.type&&"webmap"==n.type&&t.id==n.id}},{key:"_applyTransitionRules",value:function(){for(var e=0;e<this._medias.length;e++){var t=this._getTransitionInfo(e);0!=e?t.isDuplicateConsecutive?-1==t.duplicateConsecutiveTransitions.indexOf(this._transitions[e])&&(this._transitions[e]="none"):t.isDuplicate&&t.firstOccurenceTransition&&"image"!=this._medias[e].type&&(this._transitions[e]="none"):this._transitions[e]="fade-fast"}}},{key:"_getTransitionInfo",value:function(e){var t=this._medias[e],n=u.default.getMediaIndexes(this._medias,t,!0),i=!1,o=null,r=!1,a=[];return n.length>1&&n[0]<e&&(i=!0,o=this._transitions[n[0]],n[n.indexOf(e)-1]==e-1&&(r=!0,a=t.getAuthorizedTransitionsWith(this._medias[e-1]))),{isDuplicate:i,isDuplicateConsecutive:r,firstOccurenceTransition:o,duplicateConsecutiveTransitions:a}}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._medias[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;e.push.apply(e,s(a.getArcGISContent()))}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d,p=this._panels[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;e.push.apply(e,s(f.getArcGISContent()))}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}return e}}]),e}();t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Credits",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s='<div class="section section-layout-credits" role="contentinfo">\n\n  ';return r=null!=(r=t.background||(null!=e?e.background:e))?r:a,o="function"==typeof r?r.call(e,{name:"background",hash:{},data:i}):r,null!=o&&(s+=o),s+='\n\n  <div class="foreground">\n    <div class="credits">\n      ',r=null!=(r=t.credits||(null!=e?e.credits:e))?r:a,o="function"==typeof r?r.call(e,{name:"credits",hash:{},data:i}):r,null!=o&&(s+=o),s+'\n    </div>\n  </div>\n  <div class="builder-section-add-menu"></div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Credits",[],function(){}),define("lib-build/css!storymaps-react/tpl/view/ui/AuthorInfo",[],function(){}),define("storymaps-react/tpl/view/section/Credits",["module","exports","storymaps-react/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Credits","lib-build/less!./Credits","lib-build/css!../ui/AuthorInfo"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=r(o),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d={backgroundMedia:["color"],foregroundLayout:["credits-1"]},p=function(){function e(t){a(this,e),this.type="credits",this.id=l.default.getUID(),this._section=t,this._node=null,this._backgroundMedia=null,this._panels=[]}return c(e,[{key:"render",value:function(e){var t=this._section.background,n=this._section.foreground,i="";if(s.default.checkErrors(d,this._section,e))return"";this._backgroundMedia=s.default.initMedia({media:t});var o=!0,r=!1,a=void 0;try{for(var l,c=n.panels[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var p=l.value;if("blocks"===p.type){var f=s.default.renderBlocks(p.blocks);this._panels.push({type:"blocks",blocks:f.blocks,editor:null});i+='<div class="blocks">'+f.output+"</div>"}else if("credits"===p.type){var h=s.default.initMedia({media:p,mediaCache:null});this._panels.push({type:"credits",credits:h,editor:null}),i+=h.render({placement:"block"})}}}catch(e){r=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(r)throw a}}return(0,u.default)({background:s.default.renderBackground({media:this._backgroundMedia}),credits:i})}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate&&this._backgroundMedia.postCreate({container:this._node});var t=!0,n=!1,i=void 0;try{for(var o,r=this._panels[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if("blocks"===a.type){var s=!0,l=!1,u=void 0;try{for(var c,d=a.blocks[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){c.value.postCreate({container:e})}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}}else"credits"===a.type&&a.credits.postCreate({container:e,onContentChange:app.isInBuilder?this._onContentChange.bind(this):null})}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"getPreviewThumbnail",value:function(){return""}},{key:"getPreviewText",value:function(){return""}},{key:"getPreviewIcon",value:function(){return""}},{key:"getArcGISContent",value:function(){return[]}},{key:"onScroll",value:function(){}},{key:"resize",value:function(){}}]),e}();t.default=p,e.exports=t.default}),define("storymaps-react/tpl/view/section/FactoryViewer",["module","exports","./Cover/Cover","./Sequence","./Title","./Immersive/Immersive","./Credits"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=s(n),c=s(i),d=s(o),p=s(r),f=s(a),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(){l(this,e)}return h(e,null,[{key:"getClasses",value:function(){return{Cover:u.default,Sequence:c.default,Title:d.default,Immersive:p.default,Credits:f.default,CreditsPlaceholder:function(){}}}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,n=e.type;if(!n)return console.error("Invalid json for: ",e),t;var i=this.getClasses();return"cover"==n?t=new i.Cover(e):"sequence"==n?t=new i.Sequence(e):"title"==n?t=new i.Title(e):"immersive"==n?t=new i.Immersive(e):"credits"==n?t=new i.Credits(e):"credits-placeholder"==n?t=new i.CreditsPlaceholder(e):console.error("Could not find corresponding layout for: ",e),t}}]),e}();t.default=m,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Cover/CoverBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Cover/CoverBuilder",["module","exports","./Cover","lib-build/i18n!resources/tpl/builder/nls/app","storymaps-react/tpl/view/section/Common","storymaps-react/tpl/builder/mediaPicker/constants","dojo/topic","dojo/_base/lang","lib-build/less!./CoverBuilder"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(o),m=l(r),g=l(a),v=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},_=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scanResults={hasErrors:!1,hasWarnings:!1},n.MEDIA_BUILDER_TABS_BACKGROUND=["section-appearance","background","manage","alternate"],n}return d(t,e),b(t,[{key:"render",value:function(){return this._section.background||(this._section.layout="cover-1",this._section.background={type:"image",image:{url:this._getCoverPlaceholderImage(),isPlaceholder:!0}},this._section.foreground.options={titleStyle:{shadow:!1,text:"dark",background:"light"}}),this._section.foreground.options||(this._section.foreground.options={}),this._section.foreground.options.titleStyle||(this._section.foreground.options.titleStyle={shadow:!0,text:"light",background:null}),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){var n=this;y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find(".cover-title").attr("contenteditable",!0).attr("placeholder",f.default.builder.cover.titlePrompt).on("blur keyup",function(e){if(8===e.keyCode||46===e.keyCode){var t=e.currentTarget;!t.textContent&&t.innerHTML&&(t.innerHTML="")}var i=$("<div>"+$(e.target).text()+"</div>").text();i!=app.Controller.getStoryTitle()&&(n._section.foreground.title=i,g.default.publish("builder-story-title-update",i),n._onContentChange())}).on("paste",function(){setTimeout(function(){n._node.find(".cover-title").html($("<div>"+n._node.find(".cover-title").text()+"</div>").text());var e=n._node.find(".cover-title").text();n._section.foreground.title=e,g.default.publish("builder-story-title-update",e),n._onContentChange()},0)}).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}n._node.find(".cover-title").removeClass("title-error"),n._node.find(".title-error-container").addClass("hidden")}),this._node.find(".cover-subtitle").attr("contenteditable",!0).attr("placeholder",f.default.builder.cover.subtitlePrompt).on("blur keyup",function(e){if(8===e.keyCode||46===e.keyCode){var t=e.currentTarget;!t.textContent&&t.innerHTML&&(t.innerHTML="")}var i=$("<div>"+$(e.target).text()+"</div>").text();i!=n._section.foreground.subtitle&&(n._section.foreground.subtitle=i,n._onContentChange())}).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}}).on("paste",function(){setTimeout(function(){n._node.find(".cover-subtitle").html($("<div>"+n._node.find(".cover-subtitle").text()+"</div>").text())},0)}),
this._backgroundMedia.isPlaceholder()&&(this._node.find(".cover-media-placeholder").addClass("active"),this._node.find(".cover-media-placeholder-wrapper").click(this._onEditPlaceholderMedia.bind(this)))}},{key:"serialize",value:function(e){return this._node&&(this._section.foreground.title=$("<div>"+this._node.find(".cover-title").text()+"</div>").text(),this._section.foreground.subtitle=$("<div>"+this._node.find(".cover-subtitle").text()+"</div>").text(),this._section.background=this._backgroundMedia.serialize(e)),v.default.clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"showTitleError",value:function(){this._node.find(".cover-title").addClass("title-error"),this._node.find(".title-error-container").removeClass("hidden")}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}},{key:"addContextSpecificIssues",value:function(e){var t=this._backgroundMedia._instanceID,n=e[t];n&&"video"===n.mediaType&&(n.alternateMedia||n.scanResult.warnings.push("content/noAlternateMedia"))}},{key:"_onContentChange",value:function(){g.default.publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(){this._node.toggleClass("hide-scroll-invite")}},{key:"_onEditPlaceholderMedia",value:function(){var e=this;app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image","video"]}).then(function(t){e._onEditMedia(e._backgroundMedia,t),e._node.find(".cover-media-placeholder").removeClass("active"),e._onContentChange()},function(){})}},{key:"_onMediaConfigAction",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.action&&(t.media||"alternate-media-add"===t.action)){if("swap"===t.action||"alternate-media-swap"===t.action||"alternate-media-add"===t.action||"https-open-picker"===t.action){var n=-1!==t.action.indexOf("alternate-"),i="alternate-media-add"===t.action,o=n?["image"]:["image","video"];app.builder.mediaPicker.open({mode:i?"add":"edit",media:i?null:t.media.serialize(!1),authorizedMedia:o,selectedProvider:"https-open-picker"===t.action?m.default.providers.URL:""}).then(function(i){n?(h.default.onEditMediaAlternate({mainMedia:t.mainMedia,newMediaJSON:i,oldMedia:t.media,sectionType:"cover"}),e._onContentChange()):h.default.isSameMediaWithSecureProtocol(t.media,i)?(t.media.convertToHttps(),g.default.publish("builder-should-check-story")):(e._onToggleMediaConfig(),e._onEditMedia(t.media,i))},function(){})}else"alternate-media-remove"===t.action&&h.default.onRemoveMediaAlternate({mainMedia:t.mainMedia,media:t.media,sectionType:"cover"});this._onContentChange()}}},{key:"_applySectionConfig",value:function(){this._applyConfig(),this._onContentChange()}},{key:"_onEditMedia",value:function(e,t){var n=h.default.initMedia({media:t,isNewMedia:!0});this._node.find(".background").remove(),this._node.find(".wrapper").prepend(h.default.renderBackground({media:n})),n.postCreate({container:this._node,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"cover"}),n.load({isBuilderAdd:!0}),e.destroy(),this._backgroundMedia=n,h.default.checkMedia(t),this._applySectionConfig()}},{key:"_getCoverPlaceholderImage",value:function(){var e=["AndrewNeel.jpg","AustinD.jpg","BlakeRichardVerdoorn.jpg","ChristianNielsen.jpg","DariuszSankowski.jpg","JamieHagan.jpg","JarrenSimmons.jpg","JOHNTOWNER.jpg","KamalJ.jpg","KoushikC.jpg","KristoferSelbekk.jpg","SteveRichey.jpg","YuxXiang.jpg","ZbysiuRodak.jpg","14828.jpg","24241.jpg","24963.jpg","57688.jpg","93092.jpg","123972.jpg","124325.jpg","134977.jpg","136526.jpg","152227.jpg","154060.jpg","162286.jpg","173199.jpg","182304.jpg","183942.jpg","196539.jpg","198863.jpg","207956.jpg"];return"resources/tpl/viewer/cover-placeholder/"+e[Math.floor(Math.random()*e.length)]}}]),t}(p.default);t.default=_,e.exports=t.default}),"classList"in document.createElement("_")||function(e){"use strict";if("Element"in e){var t=e.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},s=function(e){for(var t=i.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],o=0,r=n.length;o<r;o++)this.push(n[o]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s.prototype=[],u=function(){return new s(this)};if(r.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",-1!==a(this,e)},l.add=function(){var e,t=arguments,n=0,i=t.length,o=!1;do{e=t[n]+"",-1===a(this,e)&&(this.push(e),o=!0)}while(++n<i);o&&this._updateClassName()},l.remove=function(){var e,t,n=arguments,i=0,o=n.length,r=!1;do{for(e=n[i]+"",t=a(this,e);-1!==t;)this.splice(t,1),r=!0,t=a(this,e)}while(++i<o);r&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),i=n?!0!==t&&"remove":!1!==t&&"add";return i&&this[i](e),!0===t||!1===t?t:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var c={get:u,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",c)}catch(e){-2146823252===e.number&&(c.enumerable=!1,n.defineProperty(t,"classList",c))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",u)}}(self),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},o=n.prototype,r=i.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=e.URL||e.webkitURL||e,d=c.createObjectURL,p=c.revokeObjectURL,f=c,h=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=r.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(f=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(b),n.origin=t&&t[1])),n}),f.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):d?d.call(c,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(c,e)},o.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var o="",r=new v(e),l=0,u=r.length;l<u;l++)o+=String.fromCharCode(r[l]);n.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var c=new a;n.push(c.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},r.slice=function(e,t,n){var o=arguments.length;return o<3&&(n=null),new i(this.data.slice(e,o>1?t:this.data.length),n,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,n){var i=n?n.type||"":"",o=new t;if(e)for(var r=0,a=e.length;r<a;r++)Uint8Array&&e[r]instanceof Uint8Array?o.append(e[r].buffer):o.append(e[r]);var s=o.getBlob(i);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";"object"==typeof module&&"undefined"!=typeof process&&process&&process.versions&&process.versions.electron||"object"!=typeof module?"function"==typeof define&&define.amd?define("lib/medium-editor/dist/js/medium-editor",[],function(){return t}):e.MediumEditor=t:module.exports=t}(this,function(){"use strict";function e(e,t){return this.init(e,t)}return e.extensions={},function(t){function n(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var o=0;o<i.length;o++){var r=i[o];if(r)for(n in r)r.hasOwnProperty(n)&&void 0!==r[n]&&(e||!1===t.hasOwnProperty(n))&&(t[n]=r[n])}return t}var i=!1;try{var o=document.createElement("div"),r=document.createTextNode(" ");o.appendChild(r),i=o.contains(r)}catch(e){}var a={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(e){return!!(a.isMac&&e.metaKey||!a.isMac&&e.ctrlKey)},isKey:function(e,t){var n=a.getKeyCode(e);return!1===Array.isArray(t)?n===t:-1!==t.indexOf(n)},getKeyCode:function(e){var t=e.which;return null===t&&(t=null!==e.charCode?e.charCode:e.keyCode),t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},createLink:function(e,t,n,i){var o=e.createElement("a");return a.moveTextRangeIntoElement(t[0],t[t.length-1],o),o.setAttribute("href",n),i&&("_blank"===i&&o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target",i)),o},findOrCreateMatchingTextNodes:function(e,t,n){for(var i=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),o=[],r=0,s=!1,l=null,u=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!s&&n.start<r+l.nodeValue.length&&(s=!0,u=a.splitStartNodeIfNeeded(l,n.start,r)),s&&a.splitEndNodeIfNeeded(l,u,n.end,r),s&&r===n.end)break;if(s&&r>n.end+1)throw new Error("PerformLinking overshot the target!");s&&o.push(u||l),r+=l.nodeValue.length,null!==u&&(r+=u.nodeValue.length,i.nextNode()),u=null}else"img"===l.tagName.toLowerCase()&&(!s&&n.start<=r&&(s=!0),s&&o.push(l));return o},splitStartNodeIfNeeded:function(e,t,n){return t!==n?e.splitText(t-n):null},splitEndNodeIfNeeded:function(e,t,n,i){var o,r;o=i+e.nodeValue.length+(t?t.nodeValue.length:0)-1,r=n-i-(t?e.nodeValue.length:0),o>=n&&i!==o&&0!==r&&(t||e).splitText(r)},splitByBlockElements:function(t){if(3!==t.nodeType&&1!==t.nodeType)return[];var n=[],i=e.util.blockContainerElementNames.join(",");if(3===t.nodeType||0===t.querySelectorAll(i).length)return[t];for(var o=0;o<t.childNodes.length;o++){var r=t.childNodes[o];if(3===r.nodeType)n.push(r);else if(1===r.nodeType){var a=r.querySelectorAll(i);0===a.length?n.push(r):n=n.concat(e.util.splitByBlockElements(r))}}return n},findAdjacentTextNodeWithContent:function(e,t,n){var i,o=!1,r=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(i=r.nextNode();i;){if(i===t)o=!0;else if(o&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=r.nextNode()}return i},findPreviousSibling:function(e){if(!e||a.isMediumEditorElement(e))return!1;for(var t=e.previousSibling;!t&&!a.isMediumEditorElement(e.parentNode);)e=e.parentNode,t=e.previousSibling;return t},isDescendant:function(e,t,n){if(!e||!t)return!1;if(e===t)return!!n;if(1!==e.nodeType)return!1;if(i||3!==t.nodeType)return e.contains(t);for(var o=t.parentNode;null!==o;){if(o===e)return!0;o=o.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},throttle:function(e,t){var n,i,o,r=null,a=0,s=function(){a=Date.now(),r=null,o=e.apply(n,i),r||(n=i=null)};return t||0===t||(t=50),function(){var l=Date.now(),u=t-(l-a);return n=this,i=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),a=l,o=e.apply(n,i),r||(n=i=null)):r||(r=setTimeout(s,u)),o}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(a.isMediumEditorElement(e))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,n){var i,o,r,s,l,u,c,d=!1,p=["insertHTML",!1,n];if(!e.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,p)}catch(e){}if(i=t.getSelection(),i.rangeCount){if(o=i.getRangeAt(0),c=o.commonAncestorContainer,a.isMediumEditorElement(c)&&!c.firstChild)o.selectNode(c.appendChild(t.createTextNode("")));else if(3===c.nodeType&&0===o.startOffset&&o.endOffset===c.nodeValue.length||3!==c.nodeType&&c.innerHTML===o.toString()){for(;!a.isMediumEditorElement(c)&&c.parentNode&&1===c.parentNode.childNodes.length&&!a.isMediumEditorElement(c.parentNode);)c=c.parentNode;o.selectNode(c)}for(o.deleteContents(),r=t.createElement("div"),r.innerHTML=n,s=t.createDocumentFragment();r.firstChild;)l=r.firstChild,u=s.appendChild(l);o.insertNode(s),u&&(o=o.cloneRange(),o.setStartAfter(u),o.collapse(!0),e.selection.selectRange(t,o)),d=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(p,d),d},execFormatBlock:function(t,n){var i,o=a.getTopBlockContainer(e.selection.getSelectionStart(t));if("blockquote"===n){if(o&&(i=Array.prototype.slice.call(o.childNodes),i.some(function(e){return a.isBlockContainer(e)})))return t.execCommand("outdent",!1,null);if(a.isIE)return t.execCommand("indent",!1,n)}if(o&&n===o.nodeName.toLowerCase()&&(n="p"),a.isIE&&(n="<"+n+">"),o&&"blockquote"===o.nodeName.toLowerCase()){if(a.isIE&&"<p>"===n)return t.execCommand("outdent",!1,n);if((a.isFF||a.isEdge)&&"p"===n)return i=Array.prototype.slice.call(o.childNodes),i.some(function(e){return!a.isBlockContainer(e)})&&t.execCommand("formatBlock",!1,n),t.execCommand("outdent",!1,n)}return t.execCommand("formatBlock",!1,n)},setTargetBlank:function(e,t){var n,i=t||!1;if("a"===e.nodeName.toLowerCase())e.target="_blank",e.rel="noopener noreferrer";else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)!1!==i&&i!==e[n].attributes.href.value||(e[n].target="_blank",e[n].rel="noopener noreferrer")},removeTargetBlank:function(e,t){var n;if("a"===e.nodeName.toLowerCase())e.removeAttribute("target"),e.removeAttribute("rel");else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)t===e[n].attributes.href.value&&(e[n].removeAttribute("target"),e[n].removeAttribute("rel"))},addClassToAnchors:function(e,t){var n,i,o=t.split(" ");if("a"===e.nodeName.toLowerCase())for(i=0;i<o.length;i+=1)e.classList.add(o[i]);else{var r=e.getElementsByTagName("a");if(0===r.length){var s=a.getClosestTag(e,"a");e=s?[s]:[]}else e=r;for(n=0;n<e.length;n+=1)for(i=0;i<o.length;i+=1)e[n].classList.add(o[i])}},isListItem:function(e){if(!e)return!1;if("li"===e.nodeName.toLowerCase())return!0;for(var t=e.parentNode,n=t.nodeName.toLowerCase();"li"===n||!a.isBlockContainer(t)&&"div"!==n;){if("li"===n)return!0;if(!(t=t.parentNode))return!1;n=t.nodeName.toLowerCase()}return!1},cleanListDOM:function(t,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(a.unwrap(i.parentElement,t),e.selection.moveCursor(t,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(e,t,n){for(var i=t,o=null,r=!n;i!==e;){var a,s=i.parentNode,l=s.cloneNode(!1),u=r?i:s.firstChild;for(o&&(r?l.appendChild(o):a=o),o=l;u;){var c=u.nextSibling;u===i?(u.hasChildNodes()?u=u.cloneNode(!1):u.parentNode.removeChild(u),u.textContent&&o.appendChild(u),u=r?c:null):(u.parentNode.removeChild(u),(u.hasChildNodes()||u.textContent)&&o.appendChild(u),u=c)}a&&o.appendChild(a),i=s}return o},moveTextRangeIntoElement:function(e,t,n){if(!e||!t)return!1;var i=a.findCommonRoot(e,t);if(!i)return!1;if(t===e){var o=e.parentNode,r=e.nextSibling;return o.removeChild(e),n.appendChild(e),r?o.insertBefore(n,r):o.appendChild(n),n.hasChildNodes()}for(var s,l,u,c=[],d=0;d<i.childNodes.length;d++)if(u=i.childNodes[d],s){if(a.isDescendant(u,t,!0)){l=u;break}c.push(u)}else a.isDescendant(u,e,!0)&&(s=u);var p=l.nextSibling,f=i.ownerDocument.createDocumentFragment();return s===e?(s.parentNode.removeChild(s),f.appendChild(s)):f.appendChild(a.splitOffDOMTree(s,e)),c.forEach(function(e){e.parentNode.removeChild(e),f.appendChild(e)}),l===t?(l.parentNode.removeChild(l),f.appendChild(l)):f.appendChild(a.splitOffDOMTree(l,t,!0)),n.appendChild(f),l.parentNode===i?i.insertBefore(n,l):p?i.insertBefore(n,p):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(e){for(var t=0,n=e;null!==n.parentNode;)n=n.parentNode,t++;return t},findCommonRoot:function(e,t){for(var n=a.depthOfNode(e),i=a.depthOfNode(t),o=e,r=t;n!==i;)n>i?(o=o.parentNode,n-=1):(r=r.parentNode,i-=1);for(;o!==r;)o=o.parentNode,r=r.parentNode;return o},isElementAtBeginningOfBlock:function(e){for(var t,n;!a.isBlockContainer(e)&&!a.isMediumEditorElement(e);){for(n=e;n=n.previousSibling;)if(t=3===n.nodeType?n.nodeValue:n.textContent,t.length>0)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&e.getAttribute&&!!e.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(e){return a.traverseUp(e,function(e){return a.isMediumEditorElement(e)})},isBlockContainer:function(e){return e&&3!==e.nodeType&&-1!==a.blockContainerElementNames.indexOf(e.nodeName.toLowerCase())},getClosestBlockContainer:function(e){return a.traverseUp(e,function(e){return a.isBlockContainer(e)||a.isMediumEditorElement(e)})},getTopBlockContainer:function(e){var t=!!a.isBlockContainer(e)&&e;return a.traverseUp(e,function(e){return a.isBlockContainer(e)&&(t=e),!(t||!a.isMediumEditorElement(e))&&(t=e,!0)}),t},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;if(e=a.traverseUp(e,function(e){return-1===a.emptyElementNames.indexOf(e.nodeName.toLowerCase())}),"table"===e.nodeName.toLowerCase()){var t=e.querySelector("th, td");t&&(e=t)}return e},getFirstTextNode:function(e){return a.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),a._getFirstTextNode(e)},_getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var n=a._getFirstTextNode(e.childNodes[t]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(e){return-1===e.indexOf("://")?"http://"+e:e},warn:function(){void 0!==t.console&&"function"==typeof t.console.warn&&t.console.warn.apply(t.console,arguments)},deprecated:function(e,t,n){var i=e+" is deprecated, please use "+t+" instead.";n&&(i+=" Will be removed in "+n),a.warn(i)},deprecatedMethod:function(e,t,n,i){a.deprecated(e,t,i),"function"==typeof this[t]&&this[t].apply(this,n)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){-1!==t.indexOf(e.nodeName.toLowerCase())&&e.parentNode.removeChild(e)},unwrapTags:function(t,n){-1!==n.indexOf(t.nodeName.toLowerCase())&&e.util.unwrap(t,document)},getClosestTag:function(e,t){return a.traverseUp(e,function(e){return e.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var n=t.createDocumentFragment(),i=Array.prototype.slice.call(e.childNodes),o=0;o<i.length;o++)n.appendChild(i[o]);n.childNodes.length?e.parentNode.replaceChild(n,e):e.parentNode.removeChild(e)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};e.util=a}(window),function(){var t=function(t){e.util.extend(this,t)};t.extend=function(t){var n,i=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},e.util.extend(n,i);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,t&&e.util.extend(n.prototype,t),n},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){t.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(t){return e.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(t,n){var i,o,r=n.getSelection();return 0!==r.rangeCount&&(i=r.getRangeAt(0),o=i.commonAncestorContainer,e.util.traverseUp(o,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return e.util.isMediumEditorElement(t)},t)},exportSelection:function(e,t){if(!e)return null;var n=null,i=t.getSelection();if(i.rangeCount>0){var o,r=i.getRangeAt(0),a=r.cloneRange();a.selectNodeContents(e),a.setEnd(r.startContainer,r.startOffset),o=a.toString().length,n={start:o,end:o+r.toString().length},this.doesRangeStartWithImages(r,t)&&(n.startsWithImage=!0);var s=this.getTrailingImageCount(e,n,r.endContainer,r.endOffset);if(s&&(n.trailingImageCount=s),0!==o){var l=this.getIndexRelativeToAdjacentEmptyBlocks(t,e,r.startContainer,r.startOffset);-1!==l&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(e,t,n,i){if(e&&t){var o=n.createRange();o.setStart(t,0),o.collapse(!0);var r,a=t,s=[],l=0,u=!1,c=!1,d=0,p=!1,f=!1,h=null;for((i||e.startsWithImage||void 0!==e.emptyBlocksIndex)&&(f=!0);!p&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if(e.trailingImageCount&&c&&("img"===a.nodeName.toLowerCase()&&d++,d===e.trailingImageCount)){for(var m=0;a.parentNode.childNodes[m]!==a;)m++;o.setEnd(a.parentNode,m+1),p=!0}if(!p&&1===a.nodeType)for(var g=a.childNodes.length-1;g>=0;)s.push(a.childNodes[g]),g-=1}else r=l+a.length,!u&&e.start>=l&&e.start<=r&&(f||e.start<r?(o.setStart(a,e.start-l),u=!0):h=a),u&&e.end>=l&&e.end<=r&&(e.trailingImageCount?c=!0:(o.setEnd(a,e.end-l),p=!0)),l=r;p||(a=s.pop())}!u&&h&&(o.setStart(h,h.length),o.setEnd(h,h.length)),void 0!==e.emptyBlocksIndex&&(o=this.importSelectionMoveCursorPastBlocks(n,t,e.emptyBlocksIndex,o)),i&&(o=this.importSelectionMoveCursorPastAnchor(e,o)),this.selectRange(n,o)}},importSelectionMoveCursorPastAnchor:function(t,n){var i=function(e){return"a"===e.nodeName.toLowerCase()};if(t.start===t.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&e.util.traverseUp(n.startContainer,i)){for(var o=n.startContainer,r=n.startContainer.parentNode;null!==r&&"a"!==r.nodeName.toLowerCase();)r.childNodes[r.childNodes.length-1]!==o?r=null:(o=r,r=r.parentNode);if(null!==r&&"a"===r.nodeName.toLowerCase()){for(var a=null,s=0;null===a&&s<r.parentNode.childNodes.length;s++)r.parentNode.childNodes[s]===r&&(a=s);n.setStart(r.parentNode,a+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,o,r){var a,s,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),u=r.startContainer,c=0;for(o=o||1,a=3===u.nodeType&&e.util.isBlockContainer(u.previousSibling)?u.previousSibling:e.util.getClosestBlockContainer(u);l.nextNode();)if(s){if(s=l.currentNode,++c===o)break;if(s.textContent.length>0)break}else a===l.currentNode&&(s=l.currentNode);return s||(s=a),r.setStart(e.util.getFirstSelectableLeafNode(s),0),r},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,o,r){if(o.textContent.length>0&&r>0)return-1;var a=o;if(3!==a.nodeType&&(a=o.childNodes[r]),a){if(!e.util.isElementAtBeginningOfBlock(a))return-1;var s=e.util.findPreviousSibling(a);if(!s)return-1;if(s.nodeValue)return-1}for(var l=e.util.getClosestBlockContainer(o),u=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),c=0;u.nextNode();){var d=""===u.currentNode.textContent;if((d||c>0)&&(c+=1),u.currentNode===l)return c;d||(c=0)}return c},doesRangeStartWithImages:function(e,t){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"===e.startContainer.nodeName.toLowerCase())return!0;var n=e.startContainer.querySelector("img");if(!n)return!1;for(var i=t.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var o=i.currentNode;if(o===n)break;if(o.nodeValue)return!1}return!0},getTrailingImageCount:function(e,t,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var o=n.childNodes[i-1];o.hasChildNodes();)o=o.lastChild;for(var r,a=e,s=[],l=0,u=!1,c=!1,d=!1,p=0;!d&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if("img"===a.nodeName.toLowerCase()&&p++,a===o)d=!0;else if(1===a.nodeType)for(var f=a.childNodes.length-1;f>=0;)s.push(a.childNodes[f]),f-=1}else p=0,r=l+a.length,!u&&t.start>=l&&t.start<=r&&(u=!0),u&&t.end>=l&&t.end<=r&&(c=!0),l=r;d||(a=s.pop())}return p},selectionContainsContent:function(e){var t=e.getSelection();if(!t||t.isCollapsed||!t.rangeCount)return!1;if(""!==t.toString().trim())return!0;var n=this.getSelectedParentElement(t.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(e){var t,n=this.findMatchingSelectionParent(function(e){var n=e&&e.getAttribute("contenteditable");return"true"===n&&(t=!0),"#text"!==e.nodeName&&"false"===n},e);return!t&&n},getSelectionHtml:function(e){var t,n,i,o="",r=e.getSelection();if(r.rangeCount){for(i=e.createElement("div"),t=0,n=r.rangeCount;t<n;t+=1)i.appendChild(r.getRangeAt(t).cloneContents());o=i.innerHTML}return o},getCaretOffsets:function(e,t){var n,i;return t||(t=window.getSelection().getRangeAt(0)),n=t.cloneRange(),i=t.cloneRange(),n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,n,i,o=e.getSelection();if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(t=o.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(n=[],i=t.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"!=typeof o.containsNode||o.containsNode(e,!0)})},selectNode:function(e,t){var n=t.createRange();n.selectNodeContents(e),this.selectRange(t,n)},select:function(e,t,n,i,o){var r=e.createRange();return r.setStart(t,n),i?r.setEnd(i,o):r.collapse(!0),this.selectRange(e,r),r},clearSelection:function(e,t){t?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,t,n){this.select(e,t,n)},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},selectRange:function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},getSelectionStart:function(e){var t=e.getSelection().anchorNode;return t&&3===t.nodeType?t.parentNode:t}};e.selection=n}(),function(){function t(t,n){return!!t&&t.some(function(t){if("function"!=typeof t.getInteractionElements)return!1;var i=t.getInteractionElements();return!!i&&(Array.isArray(i)||(i=[i]),i.some(function(t){return e.util.isDescendant(t,n,!0)}))})}var n=function(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(t,n,i,o){var r=this.base.options.contentWindow,a=this.base.options.ownerDocument;t=e.util.isElement(t)||[r,a].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){e.addEventListener(n,i,o),this.events.push([e,n,i,o])}.bind(this))},detachDOMEvent:function(t,n,i,o){var r,a,s=this.base.options.contentWindow,l=this.base.options.ownerDocument;t&&(t=e.util.isElement(t)||[s,l].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){-1!==(r=this.indexOfListener(e,n,i,o))&&(a=this.events.splice(r,1)[0],a[0].removeEventListener(a[1],a[2],a[3]))}.bind(this)))},indexOfListener:function(e,t,n,i){var o,r,a;for(o=0,r=this.events.length;o<r;o+=1)if(a=this.events[o],a[0]===e&&a[1]===t&&a[2]===n&&a[3]===i)return o;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(e){for(var t=this.events.filter(function(t){return t&&t[0].getAttribute&&t[0].getAttribute("medium-editor-index")===e.getAttribute("medium-editor-index")}),n=0,i=t.length;n<i;n++){var o=t[n];this.detachDOMEvent(o[0],o[1],o[2],o[3])}},attachAllEventsToElement:function(e){this.listeners.editableInput&&(this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(t){this.attachDOMEvent(e,t.name,t.handler.bind(this))},this)},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){var n=this.indexOfCustomListener(e,t);-1!==n&&this.customEvents[e].splice(n,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,n){this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var t=e.execCommand.listeners.indexOf(this.execCommandListener);-1!==t&&e.execCommand.listeners.splice(t,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var t=function(t,n){
e.execCommand.listeners&&e.execCommand.listeners.forEach(function(e){e({command:t[0],value:t[2],args:t,result:n})})},n=function(){var n=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return t(i,n),n};n.orig=e.execCommand,n.listeners=[],n.callListeners=t,e.execCommand=n}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":case"editableKeydownEnter":case"editableKeydownTab":case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(e,t){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,e,t.bind(this))},this),this.eventsCache.push({name:e,handler:t})},cleanupElement:function(e){var t=e.getAttribute("medium-editor-index");t&&(this.detachAllEventsFromElement(e),this.contentCache&&delete this.contentCache[t])},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(n,i){var o,r=this.base.getFocusedElement();r&&"click"===i.type&&this.lastMousedownTarget&&(e.util.isDescendant(r,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(o=r),o||this.base.elements.some(function(t){return!o&&e.util.isDescendant(t,n,!0)&&(o=t),!!o},this);var a=!e.util.isDescendant(r,n,!0)&&!t(this.base.extensions,n);o!==r&&(r&&a&&(r.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,r)),o&&(o.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,o))),a&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(e,t){if(this.contentCache){var n=e.getAttribute("medium-editor-index"),i=e.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[n]=i}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var n,i=t.currentTarget.activeElement;this.base.elements.some(function(t){return!!e.util.isDescendant(t,i,!0)&&(n=t,!0)},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var t={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(t){return this.triggerCustomEvent("editableKeydown",t,t.currentTarget),e.util.isKey(t,e.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.ENTER)||t.ctrlKey&&e.util.isKey(t,e.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget):e.util.isKey(t,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget):void 0}},e.Events=n}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){t.isBuiltInButton(n)?e.Extension.call(this,this.defaults[n]):e.Extension.call(this,n)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(t){e.classList.add(t)}),e.setAttribute("data-action",this.getAction()),n&&(e.setAttribute("title",n),e.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(t){e.setAttribute(t,this.attrs[t])},this),"fontawesome"===i&&this.contentFA&&(t=this.contentFA),e.innerHTML=t,e},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,n,i=!1,o=this.getTagNames();return!1===this.knownState||!0===this.knownState?this.knownState:(o&&o.length>0&&(i=-1!==o.indexOf(e.nodeName.toLowerCase())),!i&&this.style&&(t=this.style.value.split("|"),n=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),t.forEach(function(e){this.knownState||((i=-1!==n.indexOf(e))||"text-decoration"!==this.style.prop)&&(this.knownState=i)},this)),i)}});t.isBuiltInButton=function(t){return"string"==typeof t&&e.extensions.button.prototype.defaults.hasOwnProperty(t)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var n=e.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||e.util.getClosestTag(e.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){e.util.isKey(t,e.util.keyCode.K)&&e.util.isMetaCtrlKey(t)&&!t.shiftKey&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(t){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),o=this.getAnchorButtonCheckbox();if(t=t||{value:""},"string"==typeof t&&(t={value:t}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=t.value,n.focus(),i&&(i.checked="_blank"===t.target),o){var r=t.buttonClass?t.buttonClass.split(" "):[];o.checked=-1!==r.indexOf(this.customClassOption)}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",e&&e.checked&&(n.target="_blank"),t&&t.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},ensureEncodedUri:function(e){return e===decodeURI(e)?encodeURI(e):e},ensureEncodedUriComponent:function(e){return e===decodeURIComponent(e)?encodeURIComponent(e):e},ensureEncodedParam:function(e){var t=e.split("="),n=t[0],i=t[1];return n+(void 0===i?"":"="+this.ensureEncodedUriComponent(i))},ensureEncodedQuery:function(e){return e.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=t.test(e),i="",o=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,r=e.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),a=r[1],s=r[2],l=r[3];if(o.test(e))return"tel:"+e;if(!n){var u=a.split("/")[0];(u.match(/.+(\.|:).+/)||"localhost"===u)&&(i="http://")}return i+this.ensureEncodedUri(a)+(void 0===s?"":"?"+this.ensureEncodedQuery(s))+(void 0===l?"":"#"+l)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(t){if(t.keyCode===e.util.keyCode.ENTER)return t.preventDefault(),void this.doFormSave();t.keyCode===e.util.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel())},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!e.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i,o,r,a=this.window.innerWidth,s=this.anchorPreview.offsetHeight,l=e.getBoundingClientRect(),u=this.diffLeft,c=this.diffTop,d=this.getEditorOption("elementsContainer"),p=["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position"))>-1,f={};t=this.anchorPreview.offsetWidth/2;var h=this.base.getExtensionByName("toolbar");h&&(u=h.diffLeft,c=h.diffTop),n=u-t,p?(o=d.getBoundingClientRect(),["top","left"].forEach(function(e){f[e]=l[e]-o[e]}),f.width=l.width,f.height=l.height,l=f,a=o.width,r=d.scrollTop):r=this.window.pageYOffset,i=l.left+l.width/2,r+=s+l.top+l.height-c-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(r)+"px",this.anchorPreview.style.right="initial",i<t?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):a-i<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+i+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var n=e.util.getClosestTag(t.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){function t(t){return!e.util.getClosestTag(t,"a")}var n,i,o,r,a;n=[" ","\t","\n","\r","Â ","â","â","â","â","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",o="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?Â«Â»ââââ])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",r=new RegExp("^("+i+")$","i"),a=new RegExp(o,"gi");var s=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var e=0,t=0;t<this.window._mediumEditors.length;t++){var n=this.window._mediumEditors[t];null!==n&&void 0!==n.getExtensionByName("autoLink")&&e++}return 1===e},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||e.util.isKey(t,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(e){window.console&&window.console.error("Failed to perform linking",e),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var n=e.util.splitByBlockElements(t),i=!1;0===n.length&&(n=[t]);for(var o=0;o<n.length;o++)i=this.removeObsoleteAutoLinkSpans(n[o])||i,i=this.performLinkingWithinElement(n[o])||i;return this.base.events.updateInput(t,{target:t,currentTarget:t}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),o=!1,r=0;r<i.length;r++){var a=i[r].textContent;if(-1===a.indexOf("://")&&(a=e.util.ensureUrlHasProtocol(a)),i[r].getAttribute("data-href")!==a&&t(i[r])){o=!0;var s=a.replace(/\s+$/,"");if(i[r].getAttribute("data-href")===s){var l=a.length-s.length,u=e.util.splitOffDOMTree(i[r],this.splitTextBeforeEnd(i[r],l));i[r].parentNode.insertBefore(u,i[r].nextSibling)}else e.util.unwrap(i[r],this.document)}}return o},splitTextBeforeEnd:function(e,t){for(var n=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var o,r,a;t>0&&null!==a;)o=n.currentNode,r=o.nodeValue,r.length>t?(a=o.splitText(r.length-t),t=0):(a=n.previousNode(),t-=r.length);return a},performLinkingWithinElement:function(t){for(var n=this.findLinkableText(t),i=0;i<n.length;i++){var o=e.util.findOrCreateMatchingTextNodes(this.document,t,n[i]);this.shouldNotLink(o)||this.createAutoLink(o,n[i].href)}return!1},shouldNotLink:function(t){for(var n=!1,i=0;i<t.length&&!1===n;i++)n=!!e.util.traverseUp(t[i],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return n},findLinkableText:function(e){for(var t=e.textContent,i=null,o=[];null!==(i=a.exec(t));){var s=!0,l=i.index+i[0].length;s=!(0!==i.index&&-1===n.indexOf(t[i.index-1])||l!==t.length&&-1===n.indexOf(t[l])),s=s&&(-1!==i[0].indexOf("/")||r.test(i[0].split(".").pop().split("?").shift())),s&&o.push({href:i[0],start:i.index,end:l})}return o},createAutoLink:function(t,n){n=e.util.ensureUrlHasProtocol(n);var i=e.util.createLink(this.document,t,n,this.getEditorOption("targetBlank")?"_blank":null),o=this.document.createElement("span");for(o.setAttribute("data-auto-link","true"),o.setAttribute("data-href",n),i.insertBefore(o,i.firstChild);i.childNodes.length>1;)o.appendChild(i.childNodes[1])}});e.extensions.autoLink=s}(),function(){function t(t){var i=e.util.getContainerEditorElement(t);Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n)).forEach(function(e){e.classList.remove(n)})}var n="medium-editor-dragover",i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var i=e.target.classList?e.target:e.target.parentElement;t(i),"dragover"===e.type&&i.classList.add(n)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files).forEach(function(e){this.isAllowedFile(e)&&e.type.match("image")&&this.insertImageFile(e)},this),t(e.target)},isAllowedFile:function(e){return this.allowedTypes.some(function(t){return!!e.type.match(t)})},insertImageFile:function(t){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",function(t){var n=this.document.createElement("img");n.src=t.target.result,e.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(t){var n=e.util.getKeyCode(t);if(this.keys[n]){var i=e.util.isMetaCtrlKey(t),o=!!t.shiftKey,r=!!t.altKey;this.keys[n].forEach(function(e){e.meta!==i||e.shift!==o||e.alt!==r&&void 0!==e.alt||(t.preventDefault(),t.stopPropagation(),"function"==typeof e.command?e.command.apply(this):!1!==e.command&&this.execAction(e.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){
e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e,t=this.document,n=t.createElement("div"),i=t.createElement("select"),o=t.createElement("a"),r=t.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var a=0;a<this.fonts.length;a++)e=t.createElement("option"),e.innerHTML=this.fonts[a],e.value=this.fonts[a],i.appendChild(e);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;""===e?this.clearFontName():this.execAction("fontName",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),n=e.createElement("input"),i=e.createElement("a"),o=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",t.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){function t(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|â|â)(((?!&quot;|&rdquo;|&ldquo;|"|â|â).)*)(?:&quot;|&rdquo;|&ldquo;|"|â|â)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function n(e,t,n){var i=e.clipboardData||t.clipboardData||n.dataTransfer,o={};if(!i)return o;if(i.getData){var r=i.getData("Text");r&&r.length>0&&(o["text/plain"]=r)}if(i.types)for(var a=0;a<i.types.length;a++){var s=i.types[a];o[s]=i.getData(s)}return o}var i=null,o=null,r=function(e){e.stopPropagation()},a=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(e){this.on(e,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(e,t){this.on(t,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(e,t){if(!e.defaultPrevented){var i=n(e,this.window,this.document),o=i["text/html"],r=i["text/plain"];this.window.clipboardData&&void 0===e.clipboardData&&!o&&(o=r),(o||r)&&(e.preventDefault(),this.doPaste(o,r,t))}},doPaste:function(t,n,i){var o,r,a="";if(this.cleanPastedHTML&&t)return this.cleanPaste(t);if(n){if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))a=e.util.htmlEntities(n);else if(o=n.split(/[\r\n]+/g),o.length>1)for(r=0;r<o.length;r+=1)""!==o[r]&&(a+="<p>"+e.util.htmlEntities(o[r])+"</p>");else a=e.util.htmlEntities(o[0]);e.util.insertHTMLCommand(this.document,a)}},handlePasteBinPaste:function(e){if(e.defaultPrevented)return void this.removePasteBin();var t=n(e,this.window,this.document),i=t["text/html"],r=t["text/plain"],a=o;if(!this.cleanPastedHTML||i)return e.preventDefault(),this.removePasteBin(),this.doPaste(i,r,a),void this.trigger("editablePaste",{currentTarget:a,target:a},a);setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,r,a),this.trigger("editablePaste",{currentTarget:a,target:a},a)}.bind(this),0)},handleKeydown:function(t,n){e.util.isKey(t,e.util.keyCode.V)&&e.util.isMetaCtrlKey(t)&&(t.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(t){var n,a=e.selection.getSelectionRange(this.document),s=this.window.pageYOffset;o=t,a&&(n=a.getClientRects(),n.length?s+=n[0].top:void 0!==a.startContainer.getBoundingClientRect?s+=a.startContainer.getBoundingClientRect().top:s+=a.getBoundingClientRect().top),i=a;var l=this.document.createElement("div");l.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),l.setAttribute("style","border: 1px red solid; position: absolute; top: "+s+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),l.setAttribute("contentEditable",!0),l.innerHTML="%ME_PASTEBIN%",this.document.body.appendChild(l),this.on(l,"focus",r),this.on(l,"focusin",r),this.on(l,"focusout",r),l.focus(),e.selection.selectNode(l,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(l,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==i&&(e.selection.selectRange(this.document,i),i=null),null!==o&&(o=null);var t=this.getPasteBin();t&&t&&(this.off(t,"focus",r),this.off(t,"focusin",r),this.off(t,"focusout",r),this.off(t,"paste",this.boundHandlePaste),t.parentElement.removeChild(t))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var e=this.getPasteBin();if(!e)return!1;if(e.firstChild&&"mcepastebin"===e.firstChild.id)return!1;var t=e.innerHTML;return!(!t||"%ME_PASTEBIN%"===t)&&t},cleanPaste:function(e){var n,i,o,r,a=/<p|<br|<div/.test(e),s=[].concat(this.preCleanReplacements||[],t(),this.cleanReplacements||[]);for(n=0;n<s.length;n+=1)e=e.replace(s[n][0],s[n][1]);if(!a)return this.pasteHTML(e);for(o=this.document.createElement("div"),o.innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>",i=o.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(r=i[n],r.innerHTML=r.innerHTML.replace(/\n/gi," "),r.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r)}this.pasteHTML(o.innerHTML)},pasteHTML:function(t,n){n=e.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var i,o,r,a,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),a=s.querySelector("body"),a.innerHTML=t,this.cleanupSpans(a),i=a.querySelectorAll("*"),r=0;r<i.length;r+=1)o=i[r],"a"===o.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(o),e.util.cleanupAttrs(o,n.cleanAttrs),e.util.cleanupTags(o,n.cleanTags),e.util.unwrapTags(o,n.unwrapTags);e.util.insertHTMLCommand(this.document,a.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(t){var n,i,o,r=t.querySelectorAll(".replace-with"),a=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(n=0;n<r.length;n+=1)i=r[n],o=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?o.innerHTML="<i>"+i.innerHTML+"</i>":o.innerHTML=i.innerHTML,i.parentNode.replaceChild(o,i);for(r=t.querySelectorAll("span"),n=0;n<r.length;n+=1){if(i=r[n],e.util.traverseUp(i,a))return!1;e.util.unwrap(i,this.document)}}});e.extensions.paste=a}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(e,t){this.initElement(t)},initElement:function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(e,t){this.cleanupElement(t)},cleanupElement:function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},showPlaceholder:function(t){t&&(e.util.isFF&&0===t.childNodes.length?(t.classList.add("medium-editor-placeholder-relative"),t.classList.remove("medium-editor-placeholder")):(t.classList.add("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(e){e&&(e.classList.remove("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(e,t){if(e.querySelector("img, blockquote, ul, ol, table")||""!==e.textContent.replace(/^\s+|\s+$/g,""))return this.hidePlaceholder(e);t||this.showPlaceholder(e)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(e,t){var n=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,n)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(e,t){return this.base.extensions.forEach(function(n){if(n!==this)return e.apply(t||this,arguments)},this)},createToolbar:function(){var e=this.document.createElement("div");return e.id="medium-editor-toolbar-"+this.getEditorId(),e.className="medium-editor-toolbar",this.static?e.className+=" static-toolbar":this.relativeContainer?e.className+=" medium-editor-relative-toolbar":e.className+=" medium-editor-stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var t,n,i,o,r,a,s=this.document.createElement("ul");return s.id="medium-editor-toolbar-actions"+this.getEditorId(),s.className="medium-editor-toolbar-actions",s.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(r=i,a=null):(r=i.name,a=i),(o=this.base.addBuiltInExtension(r,a))&&"function"==typeof o.getButton&&(n=o.getButton(this.base),t=this.document.createElement("li"),e.util.isElement(n)?t.appendChild(n):t.innerHTML=n,s.appendChild(t))},this),i=s.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),s},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){if(t&&t.target&&e.util.isDescendant(this.getToolbarElement(),t.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var t=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=e.selection.getSelectionHtml(this.document).replace(t,""),o=i.match(n);return!!o&&o.length>1},modifySelection:function(){var t=this.window.getSelection(),n=t.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var o=0;0===i.nodeValue.substr(o,1).trim().length;)o+=1;n=e.selection.select(this.document,i,o,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var t=e.selection.getSelectionElement(this.window);return!t||-1===this.getEditorElements().indexOf(t)||t.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!e.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var t,n=[],i=null,o=e.selection.getSelectionRange(this.document),r=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(o&&(this.forEachExtension(function(e){if("function"==typeof e.queryCommandState&&null!==(i=e.queryCommandState()))return void(i&&"function"==typeof e.setActive&&e.setActive());n.push(e)}),t=e.selection.getSelectedParentElement(o),this.getEditorElements().some(function(n){return e.util.isDescendant(n,t,!0)})))for(;t&&(n.forEach(r),!e.util.isMediumEditorElement(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e=this.base.getFocusedElement(),t=this.window.getSelection();if(!e)return this;!this.static&&t.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(e):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,o=this.getToolbarElement(),r=e.getBoundingClientRect(),a=r.top+n,s=r.left+r.width/2,l=o.offsetHeight,u=o.offsetWidth,c=u/2;switch(this.sticky?n>a+e.offsetHeight-l-this.stickyTopOffset?(o.style.top=a+e.offsetHeight-l+"px",o.classList.remove("medium-editor-sticky-toolbar")):n>a-l-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=a-l+"px"):o.style.top=a-l+"px",this.align){case"left":t=r.left;break;case"right":t=r.right-u;break;case"center":t=s-c}t<0?t=0:t+u>i&&(t=i-Math.ceil(u)-1),o.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t=e.getRangeAt(0),n=t.getBoundingClientRect();(!n||0===n.height&&0===n.width&&t.startContainer===t.endContainer)&&(n=1===t.startContainer.nodeType&&t.startContainer.querySelector("img")?t.startContainer.querySelector("img").getBoundingClientRect():t.startContainer.getBoundingClientRect());var i,o,r=this.window.innerWidth,a=this.getToolbarElement(),s=a.offsetHeight,l=a.offsetWidth,u=l/2,c=this.diffLeft-u,d=this.getEditorOption("elementsContainer"),p=["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position"))>-1,f={},h={};p?(o=d.getBoundingClientRect(),["top","left"].forEach(function(e){h[e]=n[e]-o[e]}),h.width=n.width,h.height=n.height,n=h,r=o.width,f.top=d.scrollTop):f.top=this.window.pageYOffset,i=n.left+n.width/2,f.top+=n.top-s,n.top<50?(a.classList.add("medium-toolbar-arrow-over"),a.classList.remove("medium-toolbar-arrow-under"),f.top+=50+n.height-this.diffTop):(a.classList.add("medium-toolbar-arrow-under"),a.classList.remove("medium-toolbar-arrow-over"),f.top+=this.diffTop),i<u?(f.left=c+u,f.right="initial"):r-i<u?(f.left="auto",f.right=0):(f.left=c+i,f.right="initial"),["top","left","right"].forEach(function(e){a.style[e]=f[e]+(isNaN(f[e])?"":"px")})}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add("medium-editor-dragover"):"dragleave"===e.type&&e.target.classList.remove("medium-editor-dragover")},handleDrop:function(t){var n;t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&(n=Array.prototype.slice.call(t.dataTransfer.files,0),n.some(function(t){if(t.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(t),i="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var e=this.document.getElementById(i);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this)}}.bind(this))),t.target.classList.remove("medium-editor-dragover")}});e.extensions.imageDragging=t}(),function(){function t(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,o=e.selection.getCaretOffsets(n);(void 0===i[o.left-1]||""===i[o.left-1].trim()||void 0!==i[o.left]&&""===i[o.left].trim())&&t.preventDefault()}function n(t,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=e.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&t.preventDefault()}}function i(t){var n=e.selection.getSelectionStart(this.options.ownerDocument);"pre"===(n&&n.nodeName.toLowerCase())&&(t.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(n)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument),o=i.nodeName.toLowerCase(),r=/^(\s+|<br\/?>)?$/i,a=/h\d/i;e.util.isKey(t,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&i.previousElementSibling&&a.test(o)&&0===e.selection.getCaretOffsets(i).left?e.util.isKey(t,e.util.keyCode.BACKSPACE)&&r.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),t.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(t,e.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!a.test(o)&&r.test(i.innerHTML)&&a.test(i.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&"li"===o&&r.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),e.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&!1!==e.util.getClosestTag(i,"blockquote")&&0===e.selection.getCaretOffsets(i).left?(t.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(t,e.util.keyCode.ENTER)&&!1!==e.util.getClosestTag(i,"blockquote")&&0===e.selection.getCaretOffsets(i).right?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.insertBefore(n,i.nextSibling),e.selection.moveCursor(this.options.ownerDocument,n),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(i.parentElement)&&!i.previousElementSibling&&i.nextElementSibling&&r.test(i.innerHTML)&&(t.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,i.nextSibling),i.parentElement.removeChild(i))}function r(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument);i&&(e.util.isMediumEditorElement(i)&&0===i.children.length&&!e.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!e.util.isKey(t,e.util.keyCode.ENTER)||e.util.isListItem(i)||e.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||t.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function a(e,t){var n=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=t.innerHTML.trim())}function s(e){e._mediumEditors||(e._mediumEditors=[null]),this.id||(this.id=e._mediumEditors.length),e._mediumEditors[this.id]=this}function l(e){e._mediumEditors&&e._mediumEditors[this.id]&&(e._mediumEditors[this.id]=null)}function u(t,n,i){var o=[];if(t||(t=[]),"string"==typeof t&&(t=n.querySelectorAll(t)),e.util.isElement(t)&&(t=[t]),i)for(var r=0;r<t.length;r++){var a=t[r];!e.util.isElement(a)||a.getAttribute("data-medium-editor-element")||a.getAttribute("medium-editor-textarea-id")||o.push(a)}else o=Array.prototype.slice.apply(t);return o}function c(e){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&(t.classList.remove("medium-editor-hidden"),t.removeAttribute("medium-editor-textarea-id")),e.parentNode&&e.parentNode.removeChild(e)}function d(e,t){return Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function p(e,t,n){return e=d(e,{window:n.options.contentWindow,document:n.options.ownerDocument,base:n}),"function"==typeof e.init&&e.init(),e.name||(e.name=t),e}function f(){return!this.elements.every(function(e){return!!e.getAttribute("data-disable-toolbar")})&&!1!==this.options.toolbar}function h(){return!!f.call(this)&&!1!==this.options.anchorPreview}function m(){return!1!==this.options.placeholder}function g(){return!1!==this.options.autoLink}function v(){return!1!==this.options.imageDragging}function b(){return!1!==this.options.keyboardCommands}function y(){return!this.options.extensions.imageDragging}function _(e){for(var t=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,o=e.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;t.className=e.className,t.id=i,t.innerHTML=e.value,e.setAttribute("medium-editor-textarea-id",i);for(var r=0,a=o.length;r<a;r++)t.hasAttribute(o[r].nodeName)||t.setAttribute(o[r].nodeName,o[r].value);return e.form&&this.on(e.form,"reset",function(e){e.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),e.classList.add("medium-editor-hidden"),e.parentNode.insertBefore(t,e),t}function w(t,i){if(!t.getAttribute("data-medium-editor-element")){"textarea"===t.nodeName.toLowerCase()&&(t=_.call(this,t),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=a.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),
this.instanceHandleEditableKeydownEnter||(t.getAttribute("data-disable-return")||t.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||t.getAttribute("data-disable-return")||this.on(t,"keyup",r.bind(this));var o=e.util.guid();t.setAttribute("data-medium-editor-element",!0),t.classList.add("medium-editor-element"),t.setAttribute("role","textbox"),t.setAttribute("aria-multiline",!0),t.setAttribute("data-medium-editor-editor-index",i),t.setAttribute("medium-editor-index",o),S[o]=t.innerHTML,this.events.attachAllEventsToElement(t)}return t}function C(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function k(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(e){"toolbar"!==e&&this.options.extensions[e]&&this.extensions.push(p(this.options.extensions[e],e,this))},this),y.call(this)){var t=this.options.fileDragging;t||(t={},v.call(this)||(t.allowedTypes=[])),this.addBuiltInExtension("fileDragging",t)}var n={paste:!0,"anchor-preview":h.call(this),autoLink:g.call(this),keyboardCommands:b.call(this),placeholder:m.call(this)};Object.keys(n).forEach(function(e){n[e]&&this.addBuiltInExtension(e)},this);var i=this.options.extensions.toolbar;if(!i&&f.call(this)){var o=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new e.extensions.toolbar(o)}i&&this.extensions.push(p(i,"toolbar",this))}function x(t,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(t){n.hasOwnProperty(t[0])&&void 0!==n[t[0]]&&e.util.deprecated(t[0],t[1],"v6.0.0")}),e.util.defaults({},n,t)}function E(t,n){var i,o,r=/^append-(.+)$/gi,a=/justify([A-Za-z]*)$/g;if(i=r.exec(t))return e.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===t)return n.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),o=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,o);if("fontName"===t)return n.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),o=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,o);if("createLink"===t)return this.createLink(n);if("image"===t){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if("html"===t){var l=this.options.contentWindow.getSelection().toString().trim();return e.util.insertHTMLCommand(this.options.ownerDocument,l)}if(a.exec(t)){var u=this.options.ownerDocument.execCommand(t,!1,null),c=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return c&&T.call(this,e.util.getTopBlockContainer(c)),u}return o=n&&n.value,this.options.ownerDocument.execCommand(t,!1,o)}function T(t){if(t){var n,i=Array.prototype.slice.call(t.childNodes).filter(function(e){var t="div"===e.nodeName.toLowerCase();return t&&!n&&(n=e.style.textAlign),t});i.length&&(this.saveSelection(),i.forEach(function(t){if(t.style.textAlign===n){var i=t.lastChild;if(i){e.util.unwrap(t,this.options.ownerDocument);var o=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(o,i.nextSibling)}}},this),t.style.textAlign=n,this.restoreSelection())}}var S={};e.prototype={init:function(e,t){return this.options=x.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(s.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,k.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(e){"function"==typeof e.destroy&&e.destroy()},this),this.events.destroy(),this.elements.forEach(function(e){this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-editor-element"),e.classList.remove("medium-editor-element"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.removeAttribute("medium-editor-index"),e.removeAttribute("data-medium-editor-editor-index"),e.getAttribute("medium-editor-textarea-id")&&c(e)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(e,t,n,i){return this.events.attachDOMEvent(e,t,n,i),this},off:function(e,t,n,i){return this.events.detachDOMEvent(e,t,n,i),this},subscribe:function(e,t){return this.events.attachCustomEvent(e,t),this},unsubscribe:function(e,t){return this.events.detachCustomEvent(e,t),this},trigger:function(e,t,n){return this.events.triggerCustomEvent(e,t,n),this},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,n={},i=this.elements.length;for(e=0;e<i;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},getExtensionByName:function(e){var t;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===e&&(t=n,!0)}),t},addBuiltInExtension:function(t,n){var i,o=this.getExtensionByName(t);if(o)return o;switch(t){case"anchor":i=e.util.extend({},this.options.anchor,n),o=new e.extensions.anchor(i);break;case"anchor-preview":o=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":o=new e.extensions.autoLink;break;case"fileDragging":o=new e.extensions.fileDragging(n);break;case"fontname":o=new e.extensions.fontName(this.options.fontName);break;case"fontsize":o=new e.extensions.fontSize(n);break;case"keyboardCommands":o=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":o=new e.extensions.paste(this.options.paste);break;case"placeholder":o=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(t)&&(n?(i=e.util.defaults({},n,e.extensions.button.prototype.defaults[t]),o=new e.extensions.button(i)):o=new e.extensions.button(t))}return o&&this.extensions.push(p(o,t,this)),o},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var e=this.getExtensionByName("toolbar");return e&&e.checkState(),this},queryCommandState:function(e){var t,n=/^full-(.+)$/gi,i=null;(t=n.exec(e))&&(e=t[1]);try{i=this.options.ownerDocument.queryCommandState(e)}catch(e){i=null}return i},execAction:function(t,n){var i,o,r=/^full-(.+)$/gi;return i=r.exec(t),i?(this.saveSelection(),this.selectAllContents(),o=E.call(this,i[1],n),this.restoreSelection()):o=E.call(this,t,n),"insertunorderedlist"!==t&&"insertorderedlist"!==t||e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(t){return void 0===t&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(t)},selectAllContents:function(){var t=e.selection.getSelectionElement(this.options.contentWindow);if(t){for(;1===t.children.length;)t=t.children[0];this.selectElement(t)}},selectElement:function(t){e.selection.selectNode(t,this.options.ownerDocument);var n=e.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var e;return this.elements.some(function(t){return!e&&t.getAttribute("data-medium-focused")&&(e=t),!!e},this),e},exportSelection:function(){var t=e.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(t),i=null;return n>=0&&(i=e.selection.exportSelection(t,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,n){if(t){var i=this.elements[t.editableElementIndex||0];e.selection.importSelection(t,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var n,i=e.selection.getSelectionElement(this.options.contentWindow),o={};if(-1!==this.elements.indexOf(i)){try{if(this.events.disableCustomEvent("editableInput"),t.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),(n=t.url||t.value)&&n.trim().length>0){var r=this.options.contentWindow.getSelection();if(r){var a,s,l,u,c=r.getRangeAt(0),d=c.commonAncestorContainer;if(3===c.endContainer.nodeType&&3!==c.startContainer.nodeType&&0===c.startOffset&&c.startContainer.firstChild===c.endContainer&&(d=c.endContainer),s=e.util.getClosestBlockContainer(c.startContainer),l=e.util.getClosestBlockContainer(c.endContainer),3!==d.nodeType&&0!==d.textContent.length&&s===l){var p=s||i,f=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),a=this.exportSelection(),f.appendChild(p.cloneNode(!0)),i===p?e.selection.select(this.options.ownerDocument,p.firstChild,0,p.lastChild,3===p.lastChild.nodeType?p.lastChild.nodeValue.length:p.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,p,0,p,p.childNodes.length);var h=this.exportSelection();u=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,f,{start:a.start-h.start,end:a.end-h.start,editableElementIndex:a.editableElementIndex}),0===u.length&&(f=this.options.ownerDocument.createDocumentFragment(),f.appendChild(d.cloneNode(!0)),u=[f.firstChild.firstChild,f.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,u,n.trim());var m=(f.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,f.firstChild.innerHTML.replace(/^\s+/,"")),a.start-=m,a.end-=m,this.importSelection(a)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===t.target?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n),t.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),t.buttonClass)}}if(this.options.targetBlank||"_blank"===t.target||t.buttonClass){o=this.options.ownerDocument.createEvent("HTMLEvents"),o.initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,v=this.elements.length;g<v;g+=1)this.elements[g].dispatchEvent(o)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",o,i)}},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)},setContent:function(e,t){if(t=t||0,this.elements[t]){var n=this.elements[t];n.innerHTML=e,this.checkContentChanged(n)}},getContent:function(e){return e=e||0,this.elements[e]?this.elements[e].innerHTML.trim():null},checkContentChanged:function(t){t=t||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(t,{target:t,currentTarget:t})},resetContent:function(e){if(e){var t=this.elements.indexOf(e);return void(-1!==t&&this.setContent(S[e.getAttribute("medium-editor-index")],t))}this.elements.forEach(function(e,t){this.setContent(S[e.getAttribute("medium-editor-index")],t)},this)},addElements:function(e){var t=u(e,this.options.ownerDocument,!0);if(0===t.length)return!1;t.forEach(function(e){e=w.call(this,e,this.id),this.elements.push(e),this.trigger("addElement",{target:e,currentTarget:e},e)},this)},removeElements:function(e){var t=u(e,this.options.ownerDocument),n=t.map(function(e){return e.getAttribute("medium-editor-textarea-id")&&e.parentNode?e.parentNode.querySelector('div[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]'):e});this.elements=this.elements.filter(function(e){return-1===n.indexOf(e)||(this.events.cleanupElement(e),e.getAttribute("medium-editor-textarea-id")&&c(e),this.trigger("removeElement",{target:e,currentTarget:e},e),!1)},this)}},e.getEditorFromElement=function(e){var t=e.getAttribute("data-medium-editor-editor-index"),n=e&&e.ownerDocument&&(e.ownerDocument.defaultView||e.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[t]?n._mediumEditors[t]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(e){var t=e.split("-"),n=t[0].split("."),i=t.length>1?t[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},e.version=e.parseVersionString.call(this,{version:"5.23.3"}.version),e}()),define("storymaps-react/tpl/builder/textEditor/plugins/blockToolbar/utils",["module","exports","lib/medium-editor/dist/js/medium-editor"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n),o={isChildOf:function(e,t){return!!i.default.util.traverseUp(e,function(e){return e===t})}};t.default=o,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/textEditor/plugins/blockToolbar/Core",[],function(){}),define("storymaps-react/tpl/builder/textEditor/plugins/blockToolbar/Core",["module","exports","lib/medium-editor/dist/js/medium-editor","./utils","lib-build/less!./Core"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){r(this,e),this._plugin=t,this._editor=this._plugin.base,this._editorNode=$(this._editor.elements[0]),this._document=$(document),this._defaultButtons=a.default.extensions.button.prototype.defaults,this._highlightToolbar=null,this._buttonsClasses={},this._managedTagsList=[],this._activeButtons=[],this._actionPendingRefresh=!1,this._button=null,this._blockToolbar=null,this._selection=a.default.selection,this.init(),this.createToolbar(),this.initEvents()}return l(e,[{key:"selectElement",value:function(e){this.selectedElement=e}},{key:"getSelectedElement",value:function(){return this.selectedElement}},{key:"init",value:function(){var e=this;this._plugin.getButtons().forEach(function(t){e._buttonsClasses[t]=e._editor.addBuiltInExtension(t),e._managedTagsList=e._managedTagsList.concat(e._buttonsClasses[t].tagNames)}),this._managedTagsList.push("p"),this._managedTagsList=this._managedTagsList.filter(function(e,t,n){return n.indexOf(e)==t}),setTimeout(function(){var e=this;this._editor.extensions.forEach(function(t){"toolbar"==t.name&&(e._highlightToolbar=t)})}.bind(this),1e3)}},{key:"createToolbar",value:function(){var e=this._plugin.getButtons(),t=a.default.extensions.button.prototype.defaults,n=void 0;this._button=document.createElement("div"),this._button.classList.add("block-toolbar-button"),this._button.setAttribute("contentediable",!1),this._button.innerHTML=n,document.body.appendChild(this._button),this._blockToolbar=document.createElement("div"),this._blockToolbar.classList.add("block-toolbar-buttons"),this._blockToolbar.classList.add("medium-toolbar-arrow-under"),this._blockToolbar.setAttribute("contentediable",!1),n="<ul>",e.forEach(function(e){if(t[e]){var i=t[e].contentFA;i.match(/<\/i>$/)||(i+="</i>"),n+='<li><a class="block-button" data-button="'+e+'">'+i+"</a></li>"}}),n+="</ul>",this._blockToolbar.innerHTML=n,document.body.appendChild(this._blockToolbar)}},{key:"initEvents",value:function(){var e=this;this._plugin.on(document,"click",this.updateToolbar.bind(this)),this._plugin.on(document,"keyup",this.updateToolbarKeyboard.bind(this)),this._plugin.on(this._button,"click",this.toggleToolbar.bind(this));var t=this._blockToolbar.getElementsByClassName("block-button");Array.prototype.forEach.call(t,function(t){e._plugin.on(t,"click",e.handleButtonClick.bind(e))}),this._plugin.on(window,"resize",this.positionToolbar.bind(this)),this._editor.subscribe("showToolbar",function(){this.hideToolbar()}.bind(this))}},{key:"destroy",value:function(){this._button.remove(),this._blockToolbar.remove()}},{key:"positionToolbar",value:function(){var e=void 0,t=void 0,n=void 0;!1!==this._button.classList.contains("active")&&(e=this._editor.getSelectedParentElement(),this._managedTagsList.indexOf(e.tagName.toLowerCase())<0&&(e=$(e).closest(this._managedTagsList.join(","))[0],!this.shouldDisplayButtonsOnElement(e))||(t=e.getBoundingClientRect(),n={top:this.getScrollY()+t.top,left:(window.scrollX||0)+t.left},$(e).is("h1")&&(n.top=n.top+10),n.left-=35,n.left=n.left<0?t.left:n.left,this._button.style.left=n.left+"px",this._button.style.top=n.top+"px",this._blockToolbar.style.top=n.top-42+"px",this._blockToolbar.style.left=n.left-10+"px"))}},{key:"updateToolbar",value:function(e){var t=$(e.target),n=$(this._editor.elements[0]);if(!this._editorNode.has(t).length&&!this._actionPendingRefresh&&!(t.is(this._editor.elements[0])&&1==n.find(".block").length&&""==n.find(".block").eq(0).html()||t.parents(".block-toolbar-button").length))return void this.hideToolbarAndButton();this.updateToolbarForElement(this._editor.getSelectedParentElement())}},{key:"updateToolbarKeyboard",value:function(e){var t=e.keyCode;(this._editorNode.is(e.target)||this._editorNode.has(e.target).length)&&(8!=t&&46!=t&&13!=t&&37!=t&&38!=t&&39!=t&&40!=t||this.updateToolbarForElement(this._editor.getSelectedParentElement()))}},{key:"updateToolbarForElement",value:function(e){var t=$(e);if(this._highlightToolbar&&this._highlightToolbar.multipleBlockElementsSelected())return void this.hideToolbarAndButton();if(!this.shouldDisplayButtonsOnElement(e))return void this.hideToolbarAndButton();if(t.hasClass("block-caption")||t.parents(".block-media").length)return void this.hideToolbarAndButton();var n=e!=this.getSelectedElement();null==this.getSelectedElement()?n=!1:$(e).hasClass("block-toolbar-button-status")?n=!1:this._actionPendingRefresh&&(n=!1,this._actionPendingRefresh=!1),n&&this.hideToolbar(),this.selectElement(e),this.showButtons()}},{key:"shouldDisplayButtonsOnElement",value:function(e){var t=!1;return this._plugin.getEditorElements().forEach(function(n){if(s.default.isChildOf(e,n))return void(t=!0)}),!!t}},{key:"showButtons",value:function(){var e=this,t=this._plugin.getButtons(),n=[];t.forEach(function(t){var i=!1,o=$(e.getSelectedElement()),r=o.parents(".block")[0];if(o=o.is("b, i, u, span, a")&&r?r:o[0],/^justify.+/i.test(t)){var a=/^justify(.+)/i.exec(t),s=a&&"string"==typeof a[1]?a[1].toLowerCase():"";i=$(o).css("text-align")===s}else i=e._buttonsClasses[t].isAlreadyApplied(o);i&&n.push(t)}),t.forEach(function(e){var t=n.indexOf(e)>-1;$(".block-button[data-button="+e+"]").toggleClass("active",t)});var i="justifyLeft";n.length?i=n.indexOf("h1")>-1?"h1":n.indexOf("h2")>-1?"h2":n.indexOf("quote")>-1?"quote":n[0]:(n=[i],$(".block-button[data-button="+i+"]").toggleClass("active",!0)),this._button.innerHTML='<a class="block-toolbar-button-status">'+this._defaultButtons[i].contentFA+"</a>",this._button.classList.add("active"),this.positionToolbar(),this._activeButtons=n}},{key:"toggleToolbar",value:function(){this._button.classList.toggle("buttons-active"),this._blockToolbar.classList.toggle("active")}},{key:"hideToolbar",value:function(){this._button.classList.remove("buttons-active"),this._blockToolbar.classList.remove("active")}},{key:"hideToolbarAndButton",value:function(){this._button.classList.remove("active"),this._button.classList.remove("buttons-active"),this._blockToolbar.classList.remove("active")}},{key:"handleButtonClick",value:function(e){var t=e.currentTarget.getAttribute("data-button");this._actionPendingRefresh=!0,this._selection.selectNode(this.getSelectedElement(),document),"quote"==t?this._activeButtons.indexOf("h1")>-1?this._editor.execAction(this._defaultButtons.h1.action):this._activeButtons.indexOf("h2")>-1&&this._editor.execAction(this._defaultButtons.h2.action):"h1"!=t&&"h2"!=t||(this._activeButtons.indexOf("quote")>-1?this._editor.execAction(this._defaultButtons.quote.action):this._activeButtons.indexOf("orderedlist")>-1?this._editor.execAction(this._defaultButtons.orderedlist.action):this._activeButtons.indexOf("unorderedlist")>-1&&this._editor.execAction(this._defaultButtons.unorderedlist.action)),this._defaultButtons[t]&&this._editor.execAction(this._defaultButtons[t].action);var n=document.getSelection().anchorNode;this.hideEditorToolbar(),this._selection.clearSelection(document),this.postProcessMarkup(n,t),e.preventDefault()}},{key:"postProcessMarkup",value:function(e,t){if("quote"===t){var n=$(e).closest(".block"),i=n.parent("blockquote");if(n.length&&i.length){var o=n.css("text-align");o&&i.css("text-align",o);var r=n.contents();n.replaceWith(r)}}if(/^justify.+/i.test(t)&&$(e).hasClass("block")){var a=e.parentNode,s=a.parentNode,l=/^justify(.+)/i.exec(t),u=l&&"string"==typeof l[1]?l[1].toLowerCase():"";if($(e).attr("align")===u)$(e).removeAttr("align"),$(e).css("text-align",u);else if($(a).attr("align")===u){s.replaceChild(e,a),$(e).css("text-align",u);var c=document.getSelection();c.collapse(e)}}}},{key:"hideEditorToolbar",value:function(){setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),0),setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),10),setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),50)}},{key:"getScrollY",value:function(){return this._document.scrollTop()}}]),e}();t.default=u,e.exports=t.default}),define("storymaps-react/tpl/builder/textEditor/plugins/blockToolbar/Plugin",["module","exports","lib/medium-editor/dist/js/medium-editor","./Core"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n),a=o(i),s=r.default.Extension.extend({name:"blockToolbar",_initializedAddons:{},init:function(){r.default.Extension.prototype.init.apply(this,arguments),this.core=new a.default(this)},destroy:function(){this.core.destroy()},getCore:function(){return this.core},getButtons:function(){return this.buttons},getQueryStateMethods:function(){return this.queryStateMethods},hide:function(){this.core.hideToolbarAndButton()},updateToolbar:function(){this.core.updateToolbarForElement(this.base.getSelectedParentElement())}});t.default=s,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/textEditor/plugins/blockAdd/Core",[],function(){}),define("storymaps-react/tpl/builder/textEditor/plugins/blockAdd/Core",["module","exports","dojo/has","lib-build/less!./Core"],function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this._plugin=t,this._editor=this._plugin.base,this._document=$(document),this._editorNode=$(this._editor.elements[0]),this._menu=null,this._placementRules=null,this.createMenu(),this.initEvents(),this.addBlockEvents()}return r(e,[{key:"setPlacementRules",value:function(e){this._placementRules=e,e.left&&this._menu.attr("style","left:"+e.left),this._menu.css(e)}},{key:"addBlockEvents",value:function(){this.getEditorBlocks().removeClass("show-add-invite").off("mousemove").off("mouseleave").mousemove(function(e){var t=$(e.target),n=t[0];if(t.hasClass("block")){var i=n.getBoundingClientRect(),o=e.pageY>i.bottom+this.getScrollY();$(e.target).toggleClass("show-add-invite",o).css("cursor",o?"hand":"")}}.bind(this)).mouseleave(function(){var e=$(this);e.hasClass("block")&&e.toggleClass("show-add-invite",!1).css("cursor","")})}},{key:"getEditorBlocks",value:function(){return this._editorNode.find(this._plugin.getBlocksSelector())}},{key:"onEditorContentChange",value:function(){setTimeout(function(){this.addBlockEvents()}.bind(this),200)}},{key:"update",value:function(){this.onEditorContentChange()}},{key:"destroy",value:function(){this._menu.remove()}},{key:"createMenu",value:function(){var e=this._plugin.getButtons();this._menu=document.createElement("div"),this._menu.classList.add("add-toolbar-menu-container"),this._menu.setAttribute("contentediable",!1);var t='<div class="add-toolbar-menu"><ul>';Object.keys(e).forEach(function(n){var i=e[n],o=e[n].icon||"",r=e[n].iconHover||"";t+='<li><a class="add-button" data-button="'+n+'" data-icon="'+o+'" data-icon-hover="'+r+'"><img class="add-button-icon" src="'+o+'" /> '+i.label+"</a></li>"}),t+="</ul></div>",this._menu.innerHTML=t,document.body.appendChild(this._menu),this._menu=$(this._menu)}},{key:"initEvents",value:function(){var e=this;this._plugin.on(document,"click",this.handleDocumentClick.bind(this));var t=this._menu[0].getElementsByClassName("add-button");Array.prototype.forEach.call(t,function(t){e._plugin.on(t,"click",e.handleButtonClick.bind(e)),t.getAttribute("data-icon-hover")&&$(t).hover(function(){$(this).find("img").attr("src",t.getAttribute("data-icon-hover"))},function(){$(this).find("img").attr("src",t.getAttribute("data-icon"))})}),this._editor.subscribe("editableInput",this.onEditorContentChange.bind(this)),(0,o.default)("mac")&&$("body").addClass("is-mac-os")}},{key:"handleDocumentClick",value:function(e){var t=$(e.target),n=!1,i=null;if(this._editorNode.has(t).length&&t.hasClass("block")&&(i=e.target.getBoundingClientRect(),e.pageY>i.bottom+this.getScrollY()&&(n=!0)),this.hideMenuAndInvite(),n){if(this._menu.hasClass("active")&&this._menu.data("block-index")==t.index())return void this._menu.removeClass("active");this._menu.css({top:this.getScrollY()+i.bottom}).data("block-index",t.index()).addClass("active"),this._editor.options.extensions&&this._editor.options.extensions.blockToolbar&&this._editor.options.extensions.blockToolbar.hide(),t.addClass("add-menu-active");var o=this._menu[0].getBoundingClientRect(),r=0;if(o.bottom>app.display.windowHeight&&(r=app.display.windowHeight-o.bottom),r){var a=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:a-r+10},150)}}}},{key:"hideMenuAndInvite",value:function(){this.getEditorBlocks().removeClass("add-menu-active"),this._menu.removeClass("active")}},{key:"handleButtonClick",value:function(e){var t=e.currentTarget.getAttribute("data-button"),n=this._plugin.getButtons();if(n[t].action){var i=this._editorNode.find(".add-menu-active"),o=i.parents(".section").eq(0).index();n[t].action({previousNode:i,sectionIndex:o,blockIndex:i.index()}).then(function(e){var n=null;if(!e)return void this.hideMenuAndInvite();i.after(e),this.update(),this.hideMenuAndInvite(),"text"==t&&(n=i.next(),this._editor.selectElement(n[0]),setTimeout(function(){n.click()},50)),i.hasClass("block-placeholder")&&(i.remove(),this._editorNode.attr("contentEditable","true"),n&&(this._editor.selectElement(n[0]),setTimeout(function(){n.click()},50)))}.bind(this),function(){})}}},{key:"getScrollY",value:function(){return this._document.scrollTop()}}]),e}();t.default=a,e.exports=t.default}),define("storymaps-react/tpl/builder/textEditor/plugins/blockAdd/Plugin",["module","exports","lib/medium-editor/dist/js/medium-editor","./Core"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n),a=o(i),s=r.default.Extension.extend({name:"blockAdd",_initializedAddons:{},init:function(){r.default.Extension.prototype.init.apply(this,arguments),this.core=new a.default(this)},destroy:function(){this.core.destroy()},getCore:function(){return this.core},getButtons:function(){return this.buttons},getBlocksSelector:function(){return this.blocksSelector},update:function(){this.core.update()},hide:function(){this.core.hideMenuAndInvite()},setPlacementRules:function(e){this.core.setPlacementRules(e)}});t.default=s,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/textEditor/plugins/AnchorPreview",[],function(){}),define("storymaps-react/tpl/builder/textEditor/plugins/AnchorPreview",["module","exports","lib/medium-editor/dist/js/medium-editor","lib-build/less!./AnchorPreview"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=i.default.extensions.anchorPreview.extend({name:"anchor-preview",init:function(){i.default.extensions.anchorPreview.prototype.init.call(this)},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner" target="_blank"></a>    <i class="fa fa-trash-o delete-btn" aria-hidden="true"></i>    <i class="fa fa-pencil edit-btn" aria-hidden="true"></i></div>'},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&($(t.form).parent().addClass("medium-editor-toolbar-anchor-sm"),e.target.classList.contains("delete-btn")&&(i.default.selection.selectNode(this.activeAnchor,document),t.execAction("unlink"),e.preventDefault()),e.target.classList.contains("edit-btn")&&(i.default.selection.selectNode(this.activeAnchor,document),e.preventDefault(),this.base.delay(function(){if(n){var e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this)))),this.hidePreview()},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i=this.anchorPreview.offsetHeight,o=e.getBoundingClientRect(),r=(o.left+o.right)/2,a=this.diffLeft;t=this.anchorPreview.offsetWidth/2;var s=this.base.getExtensionByName("toolbar");s&&(a=s.diffLeft),n=a-t,this.anchorPreview.style.top=Math.round(o.top-i+this.window.pageYOffset)+"px",this.anchorPreview.style.right="initial",r<t?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):this.window.innerWidth-r<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+r+"px",this.anchorPreview.style.right="initial")}});t.default=o,e.exports=t.default}),define("storymaps-react/tpl/builder/textEditor/plugins/ColorPicker",["module","exports","lib/medium-editor/dist/js/medium-editor","storymaps-react/tpl/builder/ColorPicker"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}function a(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()}
Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=s.default.selection,c=s.default.extensions.button.extend({name:"colorPicker",action:"applyForeColor",aria:"color picker",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("medium-editor-action"),this.button.innerHTML='<i class="fa fa-paint-brush" aria-hidden="true"></i>',l.default.initPicker({element:this.button,showPalette:!0,onShowCallback:this.onShow.bind(this),onChangeCallback:this.onChange.bind(this),onMoveCallback:this.onChange.bind(this),onHideCallback:this.onHide.bind(this),showAlpha:!0,showClear:!0}),this.on(this.button,"click",this.handleClick.bind(this))},handleClick:function(){this._selectedText=r();var e=$(this.base.getSelectedParentElement()).css("color");$(this.button).spectrum("set",e)},onShow:function(){this._colorSelected=!1},onChange:function(){this._colorSelected=!0},onHide:function(e){a(this._selectedText),this._colorSelected&&(this.document.execCommand("styleWithCSS",!1,!0),null===e?this.document.execCommand("removeFormat",!1,"foreColor"):this.document.execCommand("foreColor",!1,e),u.clearSelection(document)),setTimeout(function(){var e=this.base.getExtensionByName("toolbar");e&&(this._colorSelected?e.hideToolbar():e.showToolbar())}.bind(this),0)}});t.default=c,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/textEditor/plugins/Anchor",[],function(){}),define("storymaps-react/tpl/builder/textEditor/plugins/Anchor",["module","exports","lib/medium-editor/dist/js/medium-editor","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Anchor"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n),a=o(i),s=r.default.selection,l=r.default.extensions.anchor.extend({name:"anchor",aria:"",placeholderText:a.default.builder.textEditor.link.invite,linkValidation:!0,init:function(){r.default.extensions.anchor.prototype.init.call(this)},createForm:function(){var e=r.default.extensions.anchor.prototype.createForm.call(this);return e.className+=" medium-editor-toolbar-anchor-creation",e},completeFormSave:function(e){r.default.extensions.anchor.prototype.completeFormSave.call(this,e),this.hideToolbarDefaultActions(),setTimeout(function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbar(),this.base.getExtensionByName("anchor-preview").handleEditableMouseover({target:s.getSelectedElements(document)[0]})}.bind(this),0)}});t.default=l,e.exports=t.default}),define("lib-build/css!lib/medium-editor/dist/css/medium-editor",[],function(){}),define("lib-build/less!storymaps-react/tpl/builder/textEditor/MediumEditorWrapper",[],function(){}),define("storymaps-react/tpl/builder/textEditor/MediumEditorWrapper",["module","exports","lib/medium-editor/dist/js/medium-editor","lib-build/i18n!resources/tpl/builder/nls/app","./plugins/blockToolbar/Plugin","./plugins/blockAdd/Plugin","./plugins/AnchorPreview","./plugins/ColorPicker","./plugins/Anchor","storymaps/tpl/utils/CommonHelper","storymaps-react/tpl/view/section/Common","dojo/Deferred","lib-build/css!lib/medium-editor/dist/css/medium-editor","lib-build/less!./MediumEditorWrapper"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.node,n=e.addMedia,i=e.style,o=e.addButtons||[],r=e.authorizedMedia,a=e.onChange,s=null;if(!t||!n||!i)return void console.error("Could not initialize MediumEditor");var l={text:h.default.builder.textEditor.placeholder.continueStory,hideOnClick:!1};!1===e.placeholder&&(l=!1);var u=[{name:"bold",aria:""},{name:"italic",aria:""},{name:"underline",aria:""},{name:"strikethrough",aria:""},{name:"anchor",aria:""},{name:"colorPicker",aria:""}],c=["h1","h2","quote","justifyLeft","justifyCenter","justifyRight"],d=["justifyLeft","justifyCenter","justifyRight","h2"],p={justifyLeft:"ALREADY_APPLIED",justifyCenter:"ALREADY_APPLIED",justifyRight:"ALREADY_APPLIED",quote:"ALREADY_APPLIED",h1:"ALREADY_APPLIED",h2:"ALREADY_APPLIED"},E={text:{icon:"resources/tpl/builder/icons/text-editor/Text.png",label:h.default.builder.textEditor.blockAdd.text,action:function(){var e=new C.default;return e.resolve('<p class="block"></p>'),e}},media:{icon:"resources/tpl/builder/icons/text-editor/Media.png",label:h.default.builder.textEditor.blockAdd.media,action:function(e){function t(t,i){var o=n({media:i,blockIndex:e.blockIndex});t.resolve(o)}var i=new C.default;return e=e||{},e.previousNode?(app.builder.mediaPicker.open({mode:"add",authorizedMedia:r}).then(function(e){t(i,e)},function(e){"swap-map-editor"===e?w.default.launchMapEditorFromMediaPicker().then(function(e){t(i,e)},function(){i.reject()}):i.reject()}),i):(i.reject(),i)}},title:{icon:"resources/tpl/builder/icons/text-editor/Title.png",label:h.default.builder.textEditor.blockAdd.title,action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new C.default;return void 0===e.sectionIndex?(t.reject(),t):(app.Controller.splitAndAddSection({section:e.sectionIndex,split:e.blockIndex,type:"title"}),t.resolve(),t)}},immersive:{icon:"resources/tpl/builder/icons/text-editor/Immersive.png",label:h.default.builder.textEditor.blockAdd.immersive,action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new C.default;return void 0===e.sectionIndex?(t.reject(),t):(app.Controller.splitAndAddSection({section:e.sectionIndex,split:e.blockIndex,type:"immersive"}),t.resolve(),t)}}},T="p, h1, h2, blockquote, ol, ul",S=".image-gallery, .image, .block-type-webmap, .block-webpage, .block-type-webscene, .block-type-video, .block-audio",P={},O=!0,I=!1,M=void 0;try{for(var A,N=o[Symbol.iterator]();!(O=(A=N.next()).done);O=!0){var j=A.value;E[j]&&(P[j]=E[j])}}catch(e){I=!0,M=e}finally{try{!O&&N.return&&N.return()}finally{if(I)throw M}}var L="compact"==i?d:c,D=null;o.length&&(D=new g.default({buttons:P,blocksSelector:".block",style:i}));var R=new f.default(t,{targetBlank:!0,autoLink:!0,imageDragging:!1,fileDragging:!1,diffTop:-20,buttonLabels:"fontawesome",toolbar:{allowMultiParagraphSelection:!1,buttons:u},placeholder:l,paste:{forcePlainText:!0,cleanPastedHTML:!1},extensions:{imageDragging:new function(){},blockToolbar:new m.default({buttons:L,queryStateMethods:p,style:i}),blockAdd:D,"anchor-preview":new v.default,anchor:new y.default,colorPicker:new b.default}});e.disableEditing&&t.attr("contenteditable",!1),R.subscribe("focus",function(e,t){var n=window.getSelection();if(n.anchorNode===t&&1===n.anchorNode.nodeType&&n.isCollapsed){var i=n.anchorOffset,o=null,r=n.anchorNode.childNodes[i];if(1===r.nodeType)o=r;else{var a=n.anchorNode.childNodes[i+1],s=n.anchorNode.childNodes[i-1];a&&1===a.nodeType?o=a:s&&1===s.nodeType&&(o=s)}$(o).hasClass("block")&&n.collapse(o)}}),R.subscribe("editableKeydown",function(e){var t=$(R.getSelectedParentElement());if(8==e.keyCode)0===k.getSelectionRange(document).startOffset&&(t.is(".block-caption")?0===k.getSelectionRange(document).endOffset&&e.preventDefault():(t.is(S)||t.parents(".block").eq(0).is(S))&&e.preventDefault(),setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},0));else if(46==e.keyCode){var n=k.getSelectionRange(document),i=t.next();t.hasClass("block")&&i.is(S)&&(n.startOffset==n.startContainer.length?e.preventDefault():0==n.startOffset&&0==n.endOffset&&0==n.collapsed&&setTimeout(function(){k.moveCursor(document,i.find(".block-caption")[0],0),s.options.extensions.blockToolbar.updateToolbar()},0))}else 37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode||setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},0)}),R.subscribe("editableKeydownEnter",function(e){var t=$(R.getSelectedParentElement()),n=k.getSelectionRange(document);if(D.hide(),(t.is("h1")||t.is("h2")||t.is("blockquote"))&&(t.prev().is(T)&&t.prev().addClass("block"),n.startOffset==n.startContainer.length))return t.after('<p class="block"></p>'),f.default.selection.moveCursor(document,t.next()[0],0),setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},10),void e.preventDefault();if(t.is(".block-caption"))return n.startOffset==n.startContainer.length&&(t.parents(".block").eq(0).after('<p class="block"></p>'),f.default.selection.moveCursor(document,t.parents(".block").eq(0).next()[0],0)),void e.preventDefault();if(t.is(".block")){var i=t.children();""==t.html()&&0==i.length&&e.preventDefault(),""!=t.prev().html()&&"<br>"!=t.prev().html()||0!==n.startOffset||e.preventDefault(),1==i.length?"br"!=i[0].tagName.toLowerCase()||t.text()||e.preventDefault():setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},100)}}.bind(this)),R.subscribe("editableInput",function(e,t){var n=$(R.getSelectedParentElement());if(n.is("p")&&n.parent().is(".block-caption"))return void n.parent().html(n.html());n.is(T)?n.addClass("block"):n.is("b, i, u")&&n.parent().is(T)&&n.parent().addClass("block"),$(t).find("p").contents().each(function(){this.nodeType!==Node.COMMENT_NODE&&8!=this.nodeType||$(this).remove()}),B()});var F=$(R.elements[0]);F.on("input",function(){F.children("p, h1, h2, blockquote").children("span[style]").each(function(){(this.style.fontWeight||this.style.fontStyle||this.style.textDecoration||this.style.color)&&"inherit"!=this.style.color&&this.style.color!=x||$(this).contents().unwrap()}),F.find(".block-caption").find("p").each(function(){$(this).contents().unwrap()}),setTimeout(function(){F.find(".block-caption").children("span[style]").each(function(){(this.style.fontWeight||this.style.fontStyle||this.style.textDecoration||this.style.color)&&"inherit"!=this.style.color&&this.style.color!=x||$(this).contents().unwrap()})},50),F.children("h1:not(.block), h2:not(.block), blockquote:not(.block)").children("p:empty").each(function(){var e=$(this),t=e.parent();t.addClass("block"),e.replaceWith("<br>");var n=t.children();R.selectElement(n[0]),setTimeout(function(){n.click()},50)}),F.children("p:not(.block), h1:not(.block), h2:not(.block), blockquote:not(.block)").addClass("block")}),R.subscribe("editablePaste",function(){setTimeout(function(){$(R.elements[0]).find(T).addClass("block")},100)}),s=R,s.extensions.forEach(function(e){"placeholder"==e.name&&(e.updatePlaceholder=function(e,t){if(e.querySelector("img, blockquote, ul, ol")||""!==e.textContent)return this.hidePlaceholder(e);t||this.showPlaceholder(e)})}),this.serialize=function(){var e=[],t=$(s.serialize()["element-0"].value);return $.each(t,function(t,n){var i=$(n);3!=n.nodeType&&(i.is(T)?e.push({type:"text",text:{value:i[0].outerHTML}}):i.is(S)&&e.push({type:"media",id:i.attr("id")}))}),e},this.hideToolbars=function(){s.options.extensions.blockToolbar.hide(),s.options.extensions.blockAdd.hide(),s.extensions.forEach(function(e){"toolbar"==e.name&&e.hideToolbar()})},this.setAddMenuPlacementRules=function(e){D.setPlacementRules(e)},this.focus=function(){s.elements[0].focus()};var B=_.default.throttle(function(){a&&a()},500)};var f=p(n),h=p(i),m=p(o),g=p(r),v=p(a),b=p(s),y=p(l),_=p(u),w=p(c),C=p(d),k=f.default.selection,x="rgb(76, 76, 76)";e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/SequenceBuilder",[],function(){}),define("storymaps-react/tpl/view/section/SequenceBuilder",["module","exports","./Sequence","storymaps-react/tpl/view/section/Common","storymaps-react/tpl/builder/mediaPicker/constants","storymaps-react/tpl/builder/textEditor/MediumEditorWrapper","dojo/topic","dojo/_base/lang","lib-build/less!./SequenceBuilder"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(o),m=l(r),g=l(a),v=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},_=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._editor=null,n.scanResults={hasErrors:!1,hasWarnings:!1},n.MEDIA_BUILDER_TABS=["size","appearance","manage","alternate"],n}return d(t,e),b(t,[{key:"render",value:function(){if(!(this._section.background&&this._section.foreground&&this._section.foreground.blocks&&this._section.foreground.blocks.length)){var e="#FFF",n=app.data.appItem.data.values.settings.theme;n&&(n=n.colors)&&(n=n.bgMain)&&(e=n),this._section={type:"sequence",layout:"sequence-1",background:{type:"color",color:{value:e}},foreground:{blocks:[{type:"text",text:{value:'<p class="block"></p>'}}]}}}return y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){var n=y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);return this._editor=new m.default({node:this._node.find(".foreground"),addMedia:this.addMedia.bind(this),addButtons:["text","arcgis","media","title","immersive"],style:"full",placeholder:1!=e.index(),disableEditing:1==e.index()&&this._section.foreground.blocks&&1==this._section.foreground.blocks.length&&"text"==this._section.foreground.blocks[0].type&&this._section.foreground.blocks[0].text.value.match(/block-placeholder/),onChange:this._onContentChange.bind(this)}),n}},{key:"focus",value:function(){setTimeout(function(){this._editor.focus()}.bind(this),50)}},{key:"addMedia",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.media){var t=f.default.createBlock(e.media);return this._blocks.splice(e.blockIndex,0,t),setTimeout(function(){t.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS,sectionType:"sequence"}),t.load();var n=t.getNode()[0].getBoundingClientRect(),i=0;if(n.bottom>app.display.windowHeight&&(i=app.display.windowHeight-n.bottom),i){var o=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:o-i+10},150)}f.default.checkMedia(e.media),this._onContentChange()}.bind(this),50),t.render({placement:"block"})}}},{key:"_onContentChange",value:function(){this.serialize(!1),g.default.publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(e){var t=e.getNode()[0],n=t.getBoundingClientRect(),i=0;if(n.bottom>app.display.windowHeight&&(i=app.display.windowHeight-n.bottom),i){var o=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:o-i+10},150)}}},{key:"_onEditMedia",value:function(e,t){var n=this,i=f.default.initMedia({media:t,isNewMedia:!0});e.getNode().before(i.render({placement:"block"})),e.getNode().remove();var o=i.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS,sectionType:"sequence"});o&&o.isAsync?o.promise.then(function(){n._onEditedContentMounted(i,e,t)}):this._onEditedContentMounted(i,e,t)}},{key:"_onEditedContentMounted",value:function(e,t,n){e.load(),this._blocks.splice(this._blocks.indexOf(t),1,e),f.default.checkMedia(n),this._onContentChange()}},{key:"_onMediaConfigAction",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.action&&(t.media||"alternate-media-add"===t.action)){if("remove"===t.action)t.media.remove(),this._blocks.splice(this._blocks.indexOf(t.media),1);else if("swap"===t.action||"alternate-media-swap"===t.action||"alternate-media-add"===t.action||"https-open-picker"===t.action){var n="alternate-media-add"===t.action,i=-1!==t.action.indexOf("alternate-"),o=i?["image"]:null;app.builder.mediaPicker.open({mode:n?"add":"edit",media:n?null:t.media.serialize(!1),authorizedMedia:o,selectedProvider:"https-open-picker"===t.action?h.default.providers.URL:""}).then(function(n){i?(f.default.onEditMediaAlternate({mainMedia:t.mainMedia,newMediaJSON:n,oldMedia:t.media,sectionType:"sequence"}),e._onContentChange()):f.default.isSameMediaWithSecureProtocol(t.media,n)?(t.media.convertToHttps(),g.default.publish("builder-should-check-story")):e._onEditMedia(t.media,n)},function(n){"swap-map-editor"===n&&f.default.launchMapEditorFromMediaPicker().then(function(n){e._onEditMedia(t.media,n)},function(){})})}else if("arcgis-edit"===t.action)f.default.launchMapEditor(t.media).then(function(n){e._onEditMedia(t.media,n)},function(){});else if("alternate-media-remove"===t.action)f.default.onRemoveMediaAlternate({mainMedia:t.mainMedia,media:t.media,sectionType:"sequence"}),this._onContentChange();else if("image-to-image-gallery"===t.action)app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(e){if("image"==e.type){var n=t.media.serialize(!1);this._onEditMedia(t.media,{type:"image-gallery","image-gallery":{images:[{url:n.image.url,width:n.image.width,height:n.image.height},e.image],caption:n.image.caption}})}}.bind(this),function(){});else if("image-gallery-to-image"===t.action){var r=t.media.serialize(!1)["image-gallery"],a=r.images[0];this._onEditMedia(t.media,{type:"image",image:{url:a.url,width:a.width,height:a.height,caption:r.caption}})}this._onContentChange()}}},{key:"getPreviewThumbnail",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;if("text"!=r.type)return r.getPreviewThumbnail()}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}return null}},{key:"getPreviewIcon",value:function(){return""}},{key:"getPreviewText",value:function(){var e="";if(this._section.foreground.blocks&&this._section.foreground.blocks.length){var t=!0,n=!1,i=void 0;try{for(var o,r=this._section.foreground.blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if("text"==a.type&&(e=$(a.text.value).text()))break}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}return e}},{key:"findBlock",value:function(e){if(!e)return null;for(var t=0;t<this._blocks.length;t++)if(this._blocks[t]._domID==e)return this._blocks[t]}},{key:"serialize",value:function(e){if(this._editor){for(var t=this._editor.serialize(e),n=0;n<t.length;n++){var i=t[n];if("media"==i.type){var o=this.findBlock(i.id);o&&(t[n]=o.serialize(e))}}this._section.foreground.blocks=t}return v.default.clone(this._section)}},{key:"requireSplitAt",value:function(e){return e<this.serialize(!1).foreground.blocks.length-1}},{key:"serializePartially",value:function(e,t){var n=this.serialize(!1);return void 0===t&&(t=n.foreground.blocks.length),n.foreground.blocks=n.foreground.blocks.slice(e,t),n}},{key:"mergeAndSerialize",value:function(e){var t=this.serialize(!1),n=e.serialize(!1);return t.foreground.blocks=t.foreground.blocks.concat(n.foreground.blocks),t}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}},{key:"addContextSpecificIssues",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,s=a._instanceID,l=e[s];l&&!l.alternateMedia&&("scene"!==l.mediaType&&"webpage"!==l.mediaType||l.scanResult.warnings.push("content/noAlternateMedia"))}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}}]),t}(p.default);t.default=_,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/builder/AddMenu",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s='<div class="add-menu">\n  <ul>\n    ';return r=null!=(r=t.buttons||(null!=e?e.buttons:e))?r:a,o="function"==typeof r?r.call(e,{name:"buttons",hash:{},data:i}):r,null!=o&&(s+=o),s+"\n  </ul>\n</div>\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/builder/AddMenu",[],function(){}),define("storymaps-react/tpl/view/section/builder/AddMenu",["module","exports","lib-build/hbars!./AddMenu","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./AddMenu"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u={sequence:{name:"sequence",icon:"resources/tpl/builder/icons/text-editor/Narrative.png",label:s.default.builder.sections.sequence},title:{name:"title",icon:"resources/tpl/builder/icons/text-editor/Title.png",label:s.default.builder.sections.title},immersive:{name:"immersive",icon:"resources/tpl/builder/icons/text-editor/Immersive.png",label:s.default.builder.sections.immersive}},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),this._container=null,this._sectionContainer=null,this._buttons=[],t.buttons&&t.buttons.length){var n=!0,i=!1,o=void 0;try{for(var a,s=t.buttons[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;this._buttons.push(u[l])}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}}return l(e,[{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._container=e.container,this._sectionContainer=e.sectionContainer,this._container.html(this._render()).mouseleave(this._onMenuMouseleave.bind(this)).find(".add-button").click(this._onButtonClick.bind(this)),this._sectionContainer.click(this._onSectionClick.bind(this)).mousemove(this._onSectionMouseMove.bind(this)).mouseleave(this._onSectionMouseleave.bind(this))}},{key:"_render",value:function(){var e="",t=!0,n=!1,i=void 0;try{for(var o,r=this._buttons[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value,l=s.name,u=s.icon||"";e+='<li><a class="add-button" data-button="'+l+'" data-icon="'+u+'" data-icon-hover="'+(s.iconHover||"")+'">'+('<img class="add-button-icon" src="'+u+'" />')+" "+s.label+"</a></li>"}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return(0,a.default)({buttons:e})}},{key:"show",value:function(){this._container.addClass("active")}},{key:"_onSectionClick",value:function(e){var t=e.currentTarget.getBoundingClientRect();if(e.clientY-15<t.top){"block"==window.getComputedStyle(this._container.parent(".section")[0],":before").getPropertyValue("display")&&this.show()}}},{key:"_onSectionMouseMove",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientY-15<t.top;this._sectionContainer.toggleClass("show-add-section-menu",n).css("cursor",n?"hand":"default")}},{key:"_onSectionMouseleave",value:function(){this._sectionContainer.toggleClass("show-add-section-menu",!1).css("cursor","default"),this._container.removeClass("active")}},{key:"_onMenuMouseleave",value:function(){this._onSectionMouseleave()}},{key:"_onButtonClick",value:function(e){var t=$(e.currentTarget),n=this._sectionContainer.index()-1;this._sectionContainer.hasClass("section-layout-credits")&&n--;var i=t.data("button");app.Controller.addSection({type:i,index:n,navigation:"title"!=i,animateSpeed:800,ensureFullyVisible:"title"==i})}}]),e}();t.default=c,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/TitleBuilder",[],function(){}),define("storymaps-react/tpl/view/section/TitleBuilder",["module","exports","./Title","lib-build/i18n!resources/tpl/builder/nls/app","storymaps-react/tpl/view/section/Common","./builder/AddMenu","storymaps-react/tpl/builder/mediaPicker/constants","dojo/topic","dojo/_base/lang","lib-build/less!./TitleBuilder"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(o),g=u(r),v=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},C=function(e){function t(e,n){c(this,t);var i=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._initialMedia=n,i._addMenu=new g.default({buttons:["sequence","title","immersive"]}),i.scanResults={hasErrors:!1,hasWarnings:!1},i.MEDIA_BUILDER_TABS_BACKGROUND=["section-appearance","background","manage"],i}return p(t,e),_(t,[{key:"render",value:function(){return this._section.layout||(this._section.layout="title-regular"),this._section.background||(this._section.background=this._initialMedia||{type:"empty",empty:"empty"},this._section.foreground={title:"",credits:"",options:{titleStyle:{shadow:!1,text:"dark",background:"light"}}}),this._section.foreground.options||(this._section.foreground.options={}),this._section.foreground.options.titleStyle||(this._section.foreground.options.titleStyle={shadow:!0,text:"light",background:null}),w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){var n=this;w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._node.find(".fg-title").attr("contenteditable",!0).attr("placeholder",h.default.builder.title.placeholder).on("keyup blur",function(e){if(8===e.keyCode||46===e.keyCode){var t=e.currentTarget;!t.textContent&&t.innerHTML&&(t.innerHTML="")}n.serialize(!1),n._onContentChange()}).on("paste",function(){setTimeout(function(){n._node.find(".fg-title").html($("<div>"+n._node.find(".fg-title").text()+"</div>").text()),n.serialize(!1),n._onContentChange()},0)}).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}})}},{key:"focus",value:function(){var e=this;setTimeout(function(){e._node.find(".fg-title").focus()},50)}},{key:"serialize",value:function(e){return this._section.background=this._backgroundMedia.serialize(e),this._section.foreground.title=$("<div>"+this._node.find(".fg-title").text()+"</div>").text(),y.default.clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}},{key:"addContextSpecificIssues",value:function(){}},{key:"_onContentChange",value:function(){b.default.publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(){if(this._backgroundMedia.isConfigActive()){this._node.addClass("media-config-active");var e=this._node[0],t=e.getBoundingClientRect(),n=0,i=t.bottom+225;if(i>app.display.windowHeight&&(n=app.display.windowHeight-i),n){var o=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:o-n+50},150)}}else this._node.removeClass("media-config-active")}},{key:"_onMediaConfigAction",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.action&&t.media){if("swap"==t.action||"https-open-picker"===t.action){var n="empty"==t.media.serialize(!1).type;app.builder.mediaPicker.open({mode:n?"add":"edit",media:n?null:t.media.serialize(!1),authorizedMedia:["image"],selectedProvider:"https-open-picker"===t.action?v.default.providers.URL:""}).then(function(n){m.default.isSameMediaWithSecureProtocol(t.media,n)?(t.media.convertToHttps(),b.default.publish("builder-should-check-story")):e._onEditMedia(t.media,n)},function(){})}this._onContentChange()}}},{key:"_applySectionConfig",value:function(){this._applyConfig(),this._onContentChange()}},{key:"_onEditMedia",value:function(e,t){var n=m.default.initMedia({media:t,isNewMedia:!0});this._node.find(".background").remove(),this._node.prepend(m.default.renderBackground({media:n})),n.postCreate({container:this._node,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"title"}),n.load(),"empty"!=e.type&&this._onToggleMediaConfig(),e.destroy(),this._backgroundMedia=n,m.default.checkMedia(t),this._applySectionConfig()}}]),t}(f.default);t.default=C,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveBuilderPanel",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveBuilderPanel",["module","exports","lib-build/i18n!resources/tpl/builder/nls/app","storymaps-react/tpl/builder/overviewPanel/OverviewPanel","lib-build/less!./ImmersiveBuilderPanel"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u={"fade-fast":{id:"fade-fast",label:a.default.builder.immersiveViewPanel.fade,icon:"resources/tpl/builder/icons/immersive-panel/FadeFast.png"},"fade-slow":{id:"fade-slow",label:a.default.builder.immersiveViewPanel.fadeSlow,icon:"resources/tpl/builder/icons/immersive-panel/Fade.png"},"swipe-vertical":{id:"swipe-vertical",
label:a.default.builder.immersiveViewPanel.swipeVertical,icon:"resources/tpl/builder/icons/immersive-panel/SwipeVertical.png"},"swipe-horizontal":{id:"swipe-horizontal",label:a.default.builder.immersiveViewPanel.swipeHorizontal,icon:"resources/tpl/builder/icons/immersive-panel/SwipeHorizontal.png"},none:{id:"none",label:a.default.builder.immersiveViewPanel.none,icon:"resources/tpl/builder/icons/immersive-panel/None.png"}},c=function(){function e(t){r(this,e),t=t||{},t.container&&(this._node=t.container,this._medias=null,this._panels=null,this._transitions=null,this._overview=new s.default(this._node[0],"horizontal",[],{selectItem:function(e){t.selectView(this._getViewById(e))}.bind(this),addItem:t.addView,deleteItem:function(e){t.deleteView(this._getViewById(e))}.bind(this),duplicateItem:function(e){t.duplicateView(this._getViewById(e))}.bind(this),updateItemTransition:t.updateTransition,organize:t.organize}))}return l(e,[{key:"update",value:function(e){e=e||{},e.medias&&e.panels&&(this._medias=e.medias,this._panels=e.panels,this._transitions=e.transitions,this._overview.updateItems(this._getViewsOverview(e.transitionsInfos)))}},{key:"selectView",value:function(e){e<0||this._overview.navigateTo(this._getViewIdByIndex(e))}},{key:"_getViewById",value:function(e){for(var t in this._panels){if(this._panels[t].id==e)return parseInt(t,10)}return-1}},{key:"_getViewIdByIndex",value:function(e){return e<0?null:this._panels[e].id}},{key:"_getViewsOverview",value:function(e){for(var t=this,n=[],i=0;i<this._medias.length;i++)!function(i){var o=t._medias[i],r=t._panels[i],a=t._transitions[i],s=e[i],l=[o.scanResults];r._blocks.forEach(function(e){e.scanResults&&l.push(e.scanResults)}),n.push({id:r.id,type:"thumbnail",icon:o.getPreviewIcon(),transition:a,mediaType:o.type,transitions:t._getTransition({index:i,mediaType:o.type,isDuplicate:s.isDuplicate,isDuplicateConsecutive:s.isDuplicateConsecutive,firstOccurenceTransition:s.firstOccurenceTransition,duplicateConsecutiveTransitions:s.duplicateConsecutiveTransitions}),thumbnail:o.getPreviewThumbnail(),hidden:!1,hasDelete:!0,hasHide:!0,hasDuplicate:!0,hasOrganize:!0,scanResults:l})}(i);return n}},{key:"_getTransition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if(0===e.index)return t;if(e.isDuplicateConsecutive){var n=a.default.builder.immersiveViewPanel.disabledConsecutiveSameMedia,i=a.default.builder.immersiveViewPanel.disabledTooltipMap,o=a.default.builder.immersiveViewPanel.disabledConsecutiveSameMap,r=a.default.builder.immersiveViewPanel.disabledNotInBeta,s=["fade-fast","fade-slow","swipe-vertical","swipe-horizontal"],l=!0,c=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var h=p.value,m=Object.assign({},u[h]);e.duplicateConsecutiveTransitions.indexOf(h)>-1?(m.enabled=!0,m.tooltip=""):"webmap"==e.mediaType?"fade-slow"==h||"fade-fast"==h?(m.enabled=!1,m.tooltip=o):"swipe-horizontal"==h?(m.enabled=!1,m.tooltip=r):(m.enabled=!1,m.tooltip=i):(m.enabled=!1,m.tooltip=n),t.push(m)}}catch(e){c=!0,d=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw d}}var g=Object.assign({},u.none);g.enabled=!0,g.tooltip="",t.push(g)}else if(e.isDuplicate&&e.firstOccurenceTransition&&"image"!=e.mediaType){var v=a.default.builder.immersiveViewPanel.disabledNonConsecutive;e.firstOccurenceTransition="none";for(var b in u){var y=Object.assign({},u[b]);b!=e.firstOccurenceTransition?(y.enabled=!1,y.tooltip=v):(y.enabled=!0,y.tooltip=""),t.push(y)}}else for(var _ in u){var w=Object.assign({},u[_]);w.enabled=!0,w.tooltip="",t.push(w)}return t}}]),e}();t.default=c,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/ImmersiveTitleConfig",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda;return'<div class="builder-config-panel-wrapper immersive-title-config-wrapper">\n  <div class="builder-config-panel">\n    <div class="builder-config-panel-btn title-config-close">\n      <i class="builder-invite-close fa fa-check" aria-hidden="true"></i>\n    </div>\n    <div class="panel-config-row">\n\n      <div class="options-container panel-scrolling-theme" data-option="theme">\n        <div class="column-label">'+(0,this.escapeExpression)(r(null!=(o=null!=e?e.strings:e)?o.theme:o,e))+'</div>\n        <div class="panel-column">\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="shadow-light" data-shadow="true" data-text="light">\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleShadowLightOverDark.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="shadow-dark" data-shadow="true" data-text="dark">\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleShadowDarkOverLight.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="background-dark" data-background="dark" data-text="light">\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleSolidLightOverDark.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="background-light" data-background="light" data-text="dark">\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleSolidDarkOverLight.png" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="builder-config-panel-btn title-config-open">\n    <i class="builder-invite-open fa fa-pencil" aria-hidden="true"></i>\n  </div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveTitleConfig",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveTitleConfig",["module","exports","lib-build/hbars!./ImmersiveTitleConfig","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./ImmersiveTitleConfig"],function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=o(n),s=o(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){r(this,e),this._node=null,this._sectionOptions=null,this._configPanel=null,this.applyConfig=t?t.applyConfigCallback:null,this._style=t?t.style:null}return l(e,[{key:"render",value:function(){return(0,a.default)({strings:s.default.builder.immersive.titleConfig})}},{key:"postCreate",value:function(e){!e.container&&e.sectionOptions||(this._node=e.container,this._sectionOptions=e.sectionOptions,this._configPanel=this._node.find(".builder-config-panel"),this._addEvents())}},{key:"_addEvents",value:function(){var e=this,t=this._node.find('.panel-cfg-item-wrapper[data-type="style"]'),n=this._determineTitleStyle();this._node.find('.panel-cfg-item-wrapper[data-value="'+n+'"]').addClass("fa fa-check active"),t.on("click",function(n){var i=$(n.currentTarget),o={shadow:!!i.data("shadow"),text:i.data("text"),background:i.data("background")||null};t.removeClass("fa fa-check active"),i.addClass("fa fa-check active"),e.setStyle(o),"function"==typeof e.applyConfig&&e.applyConfig()})}},{key:"_determineTitleStyle",value:function(){if(!this._sectionOptions)return"shadow-light";var e=this._sectionOptions.style;return e?e.background?"dark"===e.background?"background-dark":"background-light":e.shadow&&"dark"===e.text?"shadow-dark":"shadow-light":"shadow-light"}},{key:"getStyle",value:function(){return this._style}},{key:"setStyle",value:function(e){this._style=e}},{key:"toggleBuilderPanel",value:function(e){var t=this._node.find(".builder-config-panel-btn.title-config-open");e.hasClass("title-config-open")?(this._configPanel.addClass("active"),t.css("display","none")):(this._configPanel.removeClass("active"),t.css("display","block"))}}]),e}();t.default=u,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveBuilder",["module","exports","./Immersive","./ImmersiveBuilderPanel","./ImmersiveTitleConfig","storymaps-react/tpl/view/section/Common","storymaps-react/tpl/builder/mediaPicker/constants","storymaps-react/tpl/builder/notification/Undo","../builder/AddMenu","dojo/topic","dojo/_base/lang","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./ImmersiveBuilder"],function(e,t,n,i,o,r,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=p(n),v=p(i),b=p(o),y=p(r),_=p(a),w=p(s),C=p(l),k=p(u),x=p(c),E=p(d),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},P=function(e){function t(e,n){f(this,t);var i=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.MEDIA_BUILDER_TABS_BACKGROUND=["appearance","background","manage","alternate"],i.MEDIA_BUILDER_TABS_PANEL=["appearance","manage","alternate"],i._latestOnScrollParams=null,i._currentScrollPosition=null,i._builderPanel=null,i._builderPanelNode=null,i._initialMedia=n,i._titleConfig=null,i.scanResults={hasErrors:!1,hasWarnings:!1},i._addMenu=new C.default({buttons:["sequence","title","immersive"]}),i}return m(t,e),T(t,[{key:"render",value:function(){var e=this._section.views;if(!e||!e.length){var n=this._initialMedia||{type:"empty",empty:"empty"};this._section.views=[{transition:"fade-fast",background:y.default.initMedia({media:n}).serialize(!1),foreground:{panels:[app.ui.ImmersivePanelFactory.createInstance(null,"fade-fast").serialize(!1)],title:{style:{shadow:!1,text:"dark",background:"light"}}}}]}return this._section.views[0].foreground.title.style||(this._section.views[0].foreground.title.style={shadow:!0,text:"light",background:null}),this._titleConfig=new b.default({applyConfigCallback:this._onTitleConfigChange.bind(this),style:this._section.views[0].foreground&&this._section.views[0].foreground.title?this._section.views[0].foreground.title.style:null}),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,{titleConfigPanel:this._titleConfig.render()})}},{key:"postCreate",value:function(e){var n=this;S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._builderPanelNode=this._node.find(".builder-panel"),this._builderPanel=new v.default({container:this._builderPanelNode,selectView:this._selectView.bind(this),addView:this._addEmptyView.bind(this),deleteView:this._deleteView.bind(this),duplicateView:this._duplicateView.bind(this),updateTransition:this._updateTransition.bind(this),organize:this._organizeByIds.bind(this)}),this._node.find(".background-title h2").attr("contenteditable",!0).attr("placeholder",E.default.builder.title.placeholder).on("blur keyup",function(e){if(8===e.keyCode||46===e.keyCode){var t=e.currentTarget;!t.textContent&&t.innerHTML&&(t.innerHTML="")}n.serialize(!1),n._onContentChange()}).on("paste",function(){setTimeout(function(){n._node.find(".background-title h2").html($("<div>"+n._node.find(".background-title h2").text()).text()),n.serialize(!1),n._onContentChange()},0)}).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}}),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._titleConfig.postCreate({container:this._node.find(".background-title-wrapper .builder-config-panel-wrapper"),sectionOptions:this._section.views[0].foreground?this._section.views[0].foreground.title:null}),this._node.find(".background-title-wrapper .builder-config-panel-btn").on("click",function(e){n._titleConfig.toggleBuilderPanel($(e.currentTarget))}),this._updateBuilderPanel()}},{key:"update",value:function(){var e=this._medias[this._currentViewIndex-1];e&&"webmap"==e.type&&e.resetSwipe(),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this._updateMapHomeButtons(),this._updateBuilderPanel(),this._onContentChange()}},{key:"_onTitleConfigChange",value:function(){this._onContentChange(),this.update()}},{key:"onScroll",value:function(e){this._latestOnScrollParams=e,this._currentScrollPosition=e.currentSectionScroll;var n=this._currentViewIndex;if(S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onScroll",this).call(this,e),n!=this._currentViewIndex){this._builderPanel.selectView(this._currentViewIndex-1);var i=this._panels&&this._panels.length?this._panels[n-1]:null;if(i&&i.closeConfigPanel(),app.isInBuilder){var o=this._medias[this._currentViewIndex-1];o&&(this._node.toggleClass("hide-foreground",o.isConfigActive()),this._node.find(".media-media").removeClass("appearance-invite"))}}}},{key:"navigateToViewByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"navigateToViewByIndex",this).call(this,e),this._builderPanel.selectView(e.index)}},{key:"getPreviewThumbnail",value:function(){return this._medias.length?this._medias[0].getPreviewThumbnail():""}},{key:"getPreviewText",value:function(){return this._node.find(".background-title h2").text()?this._node.find(".background-title h2").text():this._panels.length?this._panels[0].getPreviewText():""}},{key:"getPreviewIcon",value:function(){return"glyphicon glyphicon-random"}},{key:"onUpdatePanelLayout",value:function(e){this._node.removeClass("layout-scroll-full layout-scroll-partial").addClass("layout-"+e),"scroll-full"===e&&this._node.find(".blocks").css("opacity",1);var t=!0,n=!1,i=void 0;try{for(var o,r=this._panels[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;a.layout=e,a.updatePosition({viewScroll:this._currentViewScrollPosition,isNavigatingAway:this._isNavigatingAway,windowHeight:app.display.windowHeight})}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}},{key:"focus",value:function(){setTimeout(function(){this._panels[0]&&this._panels[0].focus()}.bind(this),50)}},{key:"serialize",value:function(e){for(var t=[],n=0;n<this._medias.length;n++){var i=this._medias[n],o=this._panels[n],r=this._transitions[n];t.push({transition:r,background:i.serialize(e),foreground:{panels:[o.serialize(e)]}}),0===n&&(t[0].foreground.title={value:$("<div>"+this._node.find(".background-title h2").text()+"</div>").text(),global:!0,style:this._titleConfig.getStyle()})}return this._section.views=t,x.default.clone(this._section)}},{key:"addContextSpecificIssues",value:function(e){for(var t=0;t<this._medias.length;t++){var n=this._medias[t];this._panels[t].addContextSpecificIssues(e);var i=n._instanceID,o=e[i];o&&(o.alternateMedia||("video"===o.mediaType?o.scanResult.warnings.push("content/noAlternateMedia"):"scene"===o.mediaType?o.scanResult.warnings.push("content/noAlternateMedia"):"webpage"===o.mediaType&&o.scanResult.warnings.push("content/noAlternateMedia")))}}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"_onContentChange",value:function(){this.serialize(!1),k.default.publish("builder-section-update")}},{key:"_updateBuilderPanel",value:function(){if(this._builderPanel){for(var e=[],t=0;t<this._medias.length;t++)e.push(this._getTransitionInfo(t));this._builderPanel.update({medias:this._medias,panels:this._panels,transitions:this._transitions,transitionsInfos:e})}}},{key:"_onToggleMediaConfig",value:function(){this._node.toggleClass("hide-foreground")}},{key:"_onMediaConfigAction",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.action&&(t.media||"alternate-media-add"===t.action))if("swap"===t.action||"alternate-media-swap"===t.action||"alternate-media-add"===t.action||"https-open-picker"===t.action){var n="alternate-media-add"===t.action||"empty"==t.media.serialize(!1).type,i=-1!==t.action.indexOf("alternate-"),o=i?["image"]:["image","video","webpage","webmap","webscene"];app.builder.mediaPicker.open({mode:n?"add":"edit",media:n?null:t.media.serialize(!1),authorizedMedia:o,selectedProvider:"https-open-picker"===t.action?_.default.providers.URL:""}).then(function(n){i?(y.default.onEditMediaAlternate({mainMedia:t.mainMedia,newMediaJSON:n,oldMedia:t.media,sectionType:"immersive"}),e.update()):y.default.isSameMediaWithSecureProtocol(t.media,n)?(t.media.convertToHttps(),k.default.publish("builder-should-check-story")):("empty"!=t.media.type&&e._onToggleMediaConfig(),e._onEditMedia({media:t.media,newMediaJSON:n}))},function(n){"swap-map-editor"===n&&y.default.launchMapEditorFromMediaPicker().then(function(n){e._onEditMedia({media:t.media,newMediaJSON:n})},function(){})})}else"arcgis-edit"===t.action?y.default.launchMapEditor(t.media).then(function(n){e._onEditMedia({media:t.media,newMediaJSON:n,forceReload:!0})},function(){}):"alternate-media-remove"===t.action&&(y.default.onRemoveMediaAlternate({mainMedia:t.mainMedia,media:t.media,sectionType:"immersive"}),this.update())}},{key:"_onMediaConfigChange",value:function(){this.update()}},{key:"_onEditMedia",value:function(e){var t=e.media,n=e.newMediaJSON,i=e.forceReload,o=this._medias.indexOf(t),r=y.default.initMedia({media:n,mediaCache:this._mediaCache,isNewMedia:!0}),a=this.isMediaAlreadyLoaded(n);a?i&&t.getNode().replaceWith(y.default.renderBackground({media:r,transition:this._transitions[o]})):t.getNode().after(y.default.renderBackground({media:r,transition:this._transitions[o]})),a&&n.video&&y.default.onEditBackgroundVideo(this._medias,n,r),r.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"}),!a||i?r.load({isBuilderAdd:!0,isUniqueInSection:!0}):r.onDuplicateOrEdit&&r.onDuplicateOrEdit(t,!0),this._medias[o]=r,-1===this._medias.findIndex(function(e){return e.getNode().is(t.getNode())})&&t.destroy(),y.default.checkMedia(n),this.update(),r.getNode().addClass("active"),r.getNode().nextAll().removeClass("active")}},{key:"_selectView",value:function(e){var t=this._currentViewIndex-1;if(e!=t){var n=this._medias&&this._medias[t];n&&n.maybeCloseConfig&&n.maybeCloseConfig(),this.navigateToViewByIndex({index:e,animate:!1})}}},{key:"_addEmptyView",value:function(e){var t=y.default.initMedia({media:{type:"empty",empty:"empty"}});this._medias.splice(e+1,0,t),this._medias[e].getNode().after(y.default.renderBackground({media:t,transition:"fade-fast"})),t.postCreate({container:this._node,delayBuilderInit:!0,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"});var n=app.ui.ImmersivePanelFactory.duplicateWithoutContent(this._panels[e]?this._panels[e].serialize(!1):null,"fade-fast",{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)});this._panels.splice(e+1,0,n),this._node.find(".foreground .imm-panel").eq(e).after(n.render()),n.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),n.focus(),this._transitions.splice(e+1,0,"fade-fast"),this.update();var i=this._currentViewIndex;this._currentViewIndex=-1,this.navigateToViewByIndex({index:e+1,animate:!1}),e+1==i-1&&app.ui.update({forceUpdate:!0})}},{key:"_addView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.media,i=e.panel,o=e.transition;if(void 0!==t&&n&&i&&o){n=y.default.initMedia({media:n,mediaCache:this._mediaCache});var r=this.isMediaAlreadyLoaded(n.serialize(!1));r||(0===t?this._medias[0].getNode().before(y.default.renderBackground({media:n,transition:o})):this._medias[t-1].getNode().after(y.default.renderBackground({media:n,transition:o}))),this._medias.splice(t,0,n),n.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"}),r||this.loadMediaItem(n),i=app.ui.ImmersivePanelFactory.createInstance(i,o,{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)}),this._panels.splice(t,0,i),0===t?this._node.find(".foreground .imm-panel").eq(0).before(i.render()):this._node.find(".foreground .imm-panel").eq(t-1).after(i.render()),i.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),i.load(),this._transitions.splice(t,0,o),y.default.checkMedia(e.media),this.update(),0===t&&this._medias[0].getNode().nextAll().removeClass("active"),this.navigateToViewByIndex({index:t,animate:!1})}}},{key:"_deleteView",value:function(e){if(1===this._medias.length)return void app.Controller.deleteActiveSection();var t={index:e,panel:this._panels[e].serialize(!1),media:this._medias[e].serialize(!1),transition:this._transitions[e]};if(this.isMediaUniqueInSection(this._medias[e].serialize(!1))&&this._node.find(".background").eq(e).remove(),this._node.find(".imm-panel").eq(e).remove(),this._panels.splice(e,1),this._medias.splice(e,1),this._transitions.splice(e,1),k.default.publish("builder-should-check-story"),this.update(),e==this._currentViewIndex-1)e>0?this.navigateToViewByIndex({index:e-1,animate:!1}):this._medias.length&&this.navigateToViewByIndex({index:e,animate:!1});else if(e<this._currentViewIndex-1){var n=this._currentViewIndex;this.navigateToViewByIndex({index:n-2,animate:!1})}this._currentViewIndex=-1,app.ui.update({forceUpdate:!0}),new w.default({container:this._node,label:E.default.builder.controller.viewDelete,positionTop:70}).display().then(function(){this._addView(t)}.bind(this),function(){})}},{key:"_duplicateView",value:function(e){var t=this._medias&&this._medias[this._currentViewIndex-1];t&&t.maybeCloseConfig&&t.maybeCloseConfig();var n=this._transitions[e],i=app.ui.MediaFactory.createInstance({mediaJSON:this._medias[e].serialize(!1),mediaCache:this._mediaCache});i.onDuplicateOrEdit&&i.onDuplicateOrEdit(this._medias[e]),this._medias.splice(e+1,0,i),this.isMediaAlreadyLoaded(i.serialize(!1))||("image"==i.type&&(n="none"),this._medias[e].getNode().after(y.default.renderBackground({media:i,transition:n}))),i.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"});var o=app.ui.ImmersivePanelFactory.duplicateWithoutContent(this._panels[e].serialize(!1),n,{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)});this._panels.splice(e+1,0,o),this._node.find(".foreground .imm-panel").eq(e).after(o.render()),o.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),o.focus(),this._transitions.splice(e+1,0,n),k.default.publish("builder-should-check-story"),this.update();var r=this._currentViewIndex;this._currentViewIndex=-1,this.navigateToViewByIndex({index:e+1,animate:!1}),e+1==r-1&&app.ui.update({forceUpdate:!0})}},{key:"_updateMapHomeButtons",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._medias[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;"webmap"===r.type&&(this.isMediaUniqueInSection(r.serialize(!1))?r.showHomeButton():r.hideHomeButton())}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}},{key:"_updateTransition",value:function(e,t){if(this._transitions[e]&&t){this._node.find(".imm-panel").eq(e).removeClass("view-transition-"+this._transitions[e]).addClass("view-transition-"+t)}this._currentViewIndex-1==e&&this._applyViewTransition({media:this._medias[e],prevTransition:this._transitions[e],newTransition:t}),this._transitions[e]=t,this.update(),this.onScroll(this._latestOnScrollParams)}},{key:"_applyViewTransition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.media){var t=e.media.getNode();e.prevTransition&&e.newTransition?(t.css("clip","").removeClass("transition-"+e.prevTransition),"fade-slow"==e.newTransition||"fade-fast"==e.newTransition?(this._node.addClass("disable-transition"),t.removeClass("active").addClass("transition-"+e.newTransition),setTimeout(function(){this._node.removeClass("disable-transition"),t.addClass("active")}.bind(this),10)):t.addClass("transition-"+e.newTransition)):console.error("TODO")}}},{key:"_organizeByIds",value:function(e){var t=this._getViewsIndexesByIds(e);this._organizeByIndexes(t,!0)}},{key:"_organizeByIndexes",value:function(e,t){for(var n=!0,i=0;i<e.length-1;i++)if(e[i]>e[i+1]){n=!1;break}if(!n){for(var o=[],r=[],a=[],s=-1,l=[],u=[],c=[],d=this._currentViewIndex,p=0;p<this._medias.length;p++)l[p]=this._medias[p],u[p]=this._panels[p],c[p]=this._transitions[p];for(var f=0;f<e.length;f++){var h=e[f];o.push(this._medias[h]),r.push(this._panels[h]),a.push(this._transitions[h]),h==this._currentViewIndex-1&&(s=f)}this._medias=o,this._panels=r,this._transitions=a;for(var m=this._panels.length-1;m>=0;m--){var g=this._panels[m];this._node.find(".foreground").prepend(g._node)}if(this.update(),-1!=s&&setTimeout(function(){this.navigateToViewByIndex({index:s,animate:!1})}.bind(this),50),t){new w.default({container:this._node,label:E.default.builder.controller.immersiveOrganize,positionTop:70}).display().then(function(){this._medias=l,this._panels=u,this._transitions=c;for(var e=this._panels.length-1;e>=0;e--){var t=this._panels[e];this._node.find(".foreground").prepend(t._node)}this.update(),d!=this._currentViewIndex&&setTimeout(function(){this.navigateToViewByIndex({index:d-1,animate:!1})}.bind(this),50)}.bind(this),function(){})}}}},{key:"_getViewsIndexesByIds",value:function(e){var t=[],n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0)for(var s=r.value,l=0;l<this._panels.length;l++){var u=this._panels[l];u.id==s&&t.push(l)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}}]),t}(g.default);t.default=P,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/CreditsBuilder",[],function(){}),define("storymaps-react/tpl/view/section/CreditsBuilder",["module","exports","./Credits","./builder/AddMenu","lib-build/i18n!resources/tpl/builder/nls/app","storymaps-react/tpl/builder/textEditor/MediumEditorWrapper","dojo/_base/lang","dojo/topic","lib-build/less!./CreditsBuilder"],function(e,t,n,i,o,r,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(o),m=l(r),g=l(a),v=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},_=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._addMenu=new f.default({buttons:["sequence","title","immersive"]}),n.scanResults={hasErrors:!1,hasWarnings:!1},n}return d(t,e),b(t,[{key:"render",value:function(){return this._section.background||(this._section={type:"credits",layout:"credits-1",background:{type:"color",color:{value:"#000"}},foreground:{panels:[{type:"blocks",blocks:[{type:"text",text:{value:'<p class="block" style="text-align: center;"></p>'}}]},{type:"credits",credits:[]}]}}),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._backgroundMedia.postCreate&&this._backgroundMedia.postCreate({container:this._node}),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node});var n=this._node.find(".credits > .blocks"),i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=$(l).index();this._panels[u].editor=new m.default({node:$(l),addMedia:function(){},style:"compact",addButtons:null,authorizedMedia:[],placeholder:h.default.builder.credits.introductionPlaceholder,onChange:this._onContentChange.bind(this)})}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}}},{key:"_onContentChange",value:function(){v.default.publish("builder-section-update")}},{key:"focus",value:function(){setTimeout(function(){this._panels[0]&&this._panels[0].editor&&this._panels[0].editor.focus()}.bind(this),50)}},{key:"serialize",value:function(e){for(var t=[],n=0;n<this._panels.length;n++){var i=this._panels[n];"credits"===i.type?t.push(i.credits.serialize(e)):"blocks"===i.type&&t.push(this.serializeBlocks(i,e))}return this._section.foreground.panels=t,g.default.clone(this._section)}},{key:"serializeBlocks",value:function(e,t){var n=[]
;if(e.editor){n=e.editor.serialize(t);for(var i=0;i<n.length;i++){var o=n[i];if("media"===o.type){var r=this.findBlock(e,o.id);r&&(n[i]=r.serialize(t))}}e.blocks=n}return{type:"blocks",blocks:n}}},{key:"findBlock",value:function(e,t){if(!t)return null;var n=!0,i=!1,o=void 0;try{for(var r,a=e.blocks[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;if(s._domID===t)return s}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}},{key:"addContextSpecificIssues",value:function(){}}]),t}(p.default);t.default=_,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/builder/CreditsPlaceholder",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div class="section section-layout-credits-placeholder">\n\n  ';return r=null!=(r=t.background||(null!=e?e.background:e))?r:a,o="function"==typeof r?r.call(e,{name:"background",hash:{},data:i}):r,null!=o&&(l+=o),l+'\n\n  <div class="foreground">\n    <button class="btn btn-primary btn-lg btn-add-credits">'+s((r=null!=(r=t.invite||(null!=e?e.invite:e))?r:a,"function"==typeof r?r.call(e,{name:"invite",hash:{},data:i}):r))+'</button>\n  </div>\n\n  <div class="builder-section-add-menu"></div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/builder/CreditsPlaceholder",[],function(){}),define("storymaps-react/tpl/view/section/builder/CreditsPlaceholder",["module","exports","storymaps-react/tpl/view/section/Common","storymaps/tpl/utils/UI","./AddMenu","lib-build/hbars!./CreditsPlaceholder","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./CreditsPlaceholder"],function(e,t,n,i,o,r,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=s(n),c=s(i),d=s(o),p=s(r),f=s(a),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(){l(this,e),this.type="credits-placeholder",this.id=c.default.getUID(),this._node=null,this.scanResults={hasErrors:!1,hasWarnings:!1},this._addMenu=new d.default({buttons:["sequence","title","immersive"]})}return h(e,[{key:"render",value:function(){return this._background=u.default.initMedia({media:{type:"color",color:{value:"#777"}}}),(0,p.default)({background:u.default.renderBackground({media:this._background}),invite:f.default.builder.credits.sectionInvite})}},{key:"postCreate",value:function(e){this._node=e,this._background&&this._background.postCreate&&this._background.postCreate({container:this._node}),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._node.find(".btn-add-credits").click(this._onClickAddCredits.bind(this))}},{key:"resize",value:function(){}},{key:"onScroll",value:function(){}},{key:"serialize",value:function(){return null}},{key:"getArcGISContent",value:function(){return[]}},{key:"setVisibility",value:function(e){this._node.toggleClass("hidden",!e)}},{key:"_onClickAddCredits",value:function(){app.Controller.addSection({type:"credits",index:this._node.index()})}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}},{key:"addContextSpecificIssues",value:function(){}}]),e}();t.default=m,e.exports=t.default}),define("storymaps-react/tpl/view/section/FactoryBuilder",["module","exports","./FactoryViewer","./Cover/CoverBuilder","./SequenceBuilder","./TitleBuilder","./Immersive/ImmersiveBuilder","./CreditsBuilder","./builder/CreditsPlaceholder"],function(e,t,n,i,o,r,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(o),g=u(r),v=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,null,[{key:"getClasses",value:function(){return{Cover:h.default,Sequence:m.default,Title:g.default,Immersive:v.default,Credits:b.default,CreditsPlaceholder:y.default}}}]),t}(f.default);t.default=w,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/Panel",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r,a=t.helperMissing,s=this.escapeExpression,l='<div class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,"function"==typeof r?r.call(e,{name:"classes",hash:{},data:i}):r))+'" id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,"function"==typeof r?r.call(e,{name:"id",hash:{},data:i}):r))+'">\n  <div class="blocksWrapper">\n    <div class="blocks">';return r=null!=(r=t.blocks||(null!=e?e.blocks:e))?r:a,o="function"==typeof r?r.call(e,{name:"blocks",hash:{},data:i}):r,null!=o&&(l+=o),l+'</div>\n    <div class="builder-ui panel-cfg"></div>\n  </div>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/Panel",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/Panel",["module","exports","storymaps-react/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Panel","lib-build/less!./Panel"],function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=r(o),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(t,n){s(this,e),this.id=u.default.getUID(),this.layout=t.layout,this._viewTransition=n,this._settings=t.settings,this._blocksJSON=t.blocks,this._blocks=null,this._node=null}return d(e,[{key:"render",value:function(){var e=l.default.renderBlocks(this._blocksJSON,{});return this._blocks=e.blocks,(0,c.default)({id:this.id,classes:this.getClasses(),blocks:e.output})}},{key:"load",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.load()}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.container){this._node=e.container.find("#"+this.id),this._node.parent().find(".imm-panel").attr("role","complementary");var t=!0,n=!1,i=void 0;try{for(var o,r=this._blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;a.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs,sectionType:"immersive"}),app.isInBuilder||a._node&&a._node.addClass("bring-in")}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}app.isInBuilder||1!=this._blocks.length||"text"!=this._blocks[0].type||this._blocks[0].getPreviewText()||this._node.find(".blocksWrapper").hide()}}},{key:"getClasses",value:function(){var e=["imm-panel"];return this._settings&&(e.push("style-"+this._settings.style),e.push("theme-"+this._settings.theme),e.push("placement-"+this._settings["position-x"]),e.push("size-"+this._settings.size)),e.push("view-transition-"+this._viewTransition),e.join(" ")}},{key:"_getPanelViewportDistance",value:function(e,t,n){var i=e.top;return{top:-1*(i-n),bottom:-1*(i+t-n)}}},{key:"_determinePartialOpacity",value:function(e,t,n,i){var o=t-n;return 1-(i?t-e:e-n)/o}},{key:"_determineOpacity",value:function(e,t){return t>=.95?0:t>.55&&t<.95?this._determinePartialOpacity(t,.95,.55,!1):e>=.45&&t<=.55?1:e>.05&&e<.45?this._determinePartialOpacity(e,.45,.05,!0):0}},{key:"_updateScrollPartialPosition",value:function(e){if(this._node){var t=this._node.find(".blocks")[0];if(t){var n=t.getBoundingClientRect(),i=n.height,o=this._getPanelViewportDistance(n,i,e.windowHeight),r=o.top/e.windowHeight,a=o.bottom/e.windowHeight,s=this._determineOpacity(r,a);t.style.opacity=s}}}},{key:"_updateScrollFullPosition",value:function(e){if((e.viewScroll||0===e.viewScroll)&&!app.isInBuilder&&this._node){var t=e.viewScroll/e.windowHeight;!this._node.hasClass("bring-in")&&t>.05?this._node.addClass("bring-in"):t<.05&&!e.isNavigatingAway&&this._node.removeClass("bring-in")}}},{key:"updatePosition",value:function(e){"scroll-partial"===this.layout?this._updateScrollPartialPosition(e):this._updateScrollFullPosition(e)}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,r=this._blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;e.push.apply(e,a(s.getArcGISContent()))}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}return e}}]),e}();t.default=p,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/PanelBuilder",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="builder-config-panel">\n  <div class="panel-scrolling">\n\n\n    <div class="panel-config-row">\n\n      <div class="options-container panel-scrolling-placement" data-option="position-x">\n        <div class="column-label">'+a(r(null!=(o=null!=e?e.labels:e)?o.position:o,e))+'</div>\n        <div class="panel-column">\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'left\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignLeft.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'center\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignCenter.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'right\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignRight.png" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="options-container panel-scrolling-size" data-option="size">\n        <div class="column-label">'+a(r(null!=(o=null!=e?e.labels:e)?o.size:o,e))+'</div>\n        <div class="panel-column">\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'small\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthNarrow.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'medium\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthMedium.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'large\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthWide.png" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="panel-config-row">\n\n      <div class="options-container panel-scrolling-theme" data-option="theme">\n        <div class="column-label">'+a(r(null!=(o=null!=e?e.labels:e)?o.theme:o,e))+'</div>\n        <div class="panel-column">\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'black-over-white\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelThemeLight.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'white-over-black\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelThemeDark.png" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="options-container panel-scrolling-style" data-option="style">\n        <div class="column-label">'+a(r(null!=(o=null!=e?e.labels:e)?o.background:o,e))+'</div>\n        <div class="panel-column">\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'background\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundFill.png" />\n            </div>\n          </div>\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'text-shadow\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundShadow.png" />\n            </div>\n          </div>\n          \x3c!--\n          <div class="panel-cfg-item">\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'auto\'>\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundAuto.png" />\n            </div>\n          </div>\n          --\x3e\n        </div>\n      </div>\n    </div>\n\n    <div class="row-scrolling column-label">'+a(r(null!=(o=null!=e?e.labels:e)?o.layout:o,e))+'</div>\n    <div class="options-container panel-scrolling-layout" data-option="layout">\n      <div class="panel-cfg-item">\n        <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'scroll-full\'>\n          <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelScrollFull.gif" />\n        </div>\n      </div>\n      <div class="panel-cfg-item">\n        <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'scroll-partial\'>\n          <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelScrollPartial.gif" />\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="builder-config-panel-btn">\n  <i class="builder-invite-open fa fa-pencil" aria-hidden="true"></i>\n  <i class="builder-invite-close fa fa-check" aria-hidden="true"></i>\n</div>\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/PanelBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/PanelBuilder",["module","exports","./Panel","storymaps-react/tpl/view/section/Common","storymaps-react/tpl/builder/mediaPicker/constants","storymaps-react/tpl/builder/textEditor/MediumEditorWrapper","lib-build/hbars!./PanelBuilder","lib-build/i18n!resources/tpl/builder/nls/app","dojo/topic","dojo/_base/lang","lib-build/less!./PanelBuilder"],function(e,t,n,i,o,r,a,s,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=c(i),g=c(o),v=c(r),b=c(a),y=c(s),_=c(l),w=c(u),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},x=function(e){function t(e,n,i){d(this,t);var o=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._callbacks=i,o._editor=null,o._configPanelIsInit=!1,o._configPanelIsOpen=!1,o._configPanelMedia=null,o._mediaConfigurationTabs=null,o}return f(t,e),C(t,[{key:"postCreate",value:function(e){this._mediaConfigurationTabs=e.mediaConfigurationTabs,k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._editor=new v.default({node:this._node.find(".blocks"),addMedia:this.addMedia.bind(this),addButtons:["text","media"],style:"compact",authorizedMedia:["image","audio","video","webpage"],onChange:this._onContentChange.bind(this)}),this.updateBuilderEditorPlacementRules(),this._node.find(".panel-cfg").html((0,b.default)({labels:y.default.builder.immersive.panelConfig})),this._node.find(".blocks").click(this.onPanelClick.bind(this)),this._node.find(".builder-config-panel-btn").click(this.toggleBuilderPanel.bind(this))}},{key:"updatePosition",value:function(e){if(k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePosition",this).call(this,e),this._editor.hideToolbars(),this._configPanelIsOpen)if(e.isNewView)this.closeConfigPanel();else{var n=this._configPanelMedia.getNode(),i=n[0].getBoundingClientRect();n.find(".media-cfg-panel").css("top",i.bottom)}}},{key:"closeConfigPanel",value:function(){this._configPanelIsOpen&&this._configPanelMedia&&(this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!1,this._configPanelMedia=null)}},{key:"focus",value:function(){}},{key:"onPanelClick",value:function(){this._node.find(".panel-cfg").addClass("active"),"scroll-partial"==this.layout&&this._node.find(".blocks").css("opacity",1)}},{key:"toggleBuilderPanel",value:function(){var e=this._node.find(".builder-config-panel-btn"),t=this._node.find(".builder-config-panel");if(!this._configPanelIsInit){this._node.find(".panel-cfg-item").click(this.onOptionChange.bind(this));var n=Object.assign({},this._settings,{layout:this.layout});this._node.find('.panel-cfg-item-wrapper[data-value="scroll-full"]').hover(function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollFullHover.gif")},function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollFull.gif")}),this._node.find('.panel-cfg-item-wrapper[data-value="scroll-partial"]').hover(function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollPartialHover.gif")},function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollPartial.gif")});for(var i in n){var o=n[i];this._node.find('.options-container[data-option="'+i+'"]').find('.panel-cfg-item-wrapper[data-value="'+o+'"]').addClass("active")}}this._editor.hideToolbars(),e.toggleClass("active"),t.toggleClass("active"),"scroll-partial"==this.layout&&(t.hasClass("active")?(this._node.data("opacity-tmp",this._node.css("opacity")),this._node.css("opacity",1)):(this._node.css("opacity",this._node.data("opacity-tmp")),this._node.data("opacity-tmp",""))),this._configPanelIsOpen&&this._configPanelMedia&&(this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!1,this._configPanelMedia=null)}},{key:"onOptionChange",value:function(e){var t=$(e.target),n=t.parents(".options-container"),i=n.data("option"),o=t.data("value");t.hasClass("panel-cfg-item-wrapper")&&("layout"==i&&this._callbacks.onUpdateLayout(o),n.find(".panel-cfg-item-wrapper").removeClass("active"),t.addClass("active"),this._settings[i]=o,this.updateSettings(),"scroll-partial"==this.layout&&this._node.find(".blocks").css("opacity",1),_.default.publish("builder-section-update"))}},{key:"updateSettings",value:function(){this._node.removeClass().addClass(this.getClasses()),this.updateBuilderEditorPlacementRules()}},{key:"updateBuilderEditorPlacementRules",value:function(){var e=this._settings,t=e.size,n=e["position-x"],i={width:"",minWidth:"250px",maxWidth:"400px",left:"",marginLeft:"",marginRight:""};"small"==t?(i.width="calc((100vw - 250px) * .28)",i.maxWidth="300px"):"medium"==t?i.width="calc((100vw - 250px) * .38)":"large"==t&&(i.width="calc((100vw - 250px) * .48)",i.maxWidth="600px"),"left"==n?i.marginLeft="30px":"center"==n?(i.minWidth="",i.maxWidth="",i.width=""):"right"==n&&(i.marginRight="30px",i.left="inherit !important"),this._editor.setAddMenuPlacementRules(i)}},{key:"_onContentChange",value:function(){this.serialize(!1),this._callbacks.onChange()}},{key:"addMedia",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.media){var t=m.default.createBlock(e.media);return this._blocks.push(t),setTimeout(function(){t.postCreate({container:this._node,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs,sectionType:"immersive"}),t.load(),m.default.checkMedia(e.media)}.bind(this),50),t.render({placement:"block"})}}},{key:"_onToggleMediaConfig",value:function(e){var t=e.getNode().find(".media-cfg-panel"),n=e.getNode()[0],i=n.getBoundingClientRect(),o=0;if(!e.getNode().hasClass("config-panel-active")||this._configPanelIsOpen&&e===this._configPanelMedia)return t.css("top",""),this._configPanelIsOpen=!1,void(this._configPanelMedia=null);this._configPanelIsOpen&&this._configPanelMedia&&this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!0,this._configPanelMedia=e,t.css("top",i.bottom);if(i.bottom+250+125>app.display.windowHeight&&(o=app.display.windowHeight-i.bottom-250-125),o){var r=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:r-o+10},150)}}},{key:"_onEditMedia",value:function(e,t){var n=m.default.initMedia({media:t,isNewMedia:!0});e.getNode().before(n.render({placement:"block"})),e.getNode().remove(),n.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs}),n.load(),this._blocks.splice(this._blocks.indexOf(e),1,n),m.default.checkMedia(t)}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.action&&(e.media||"alternate-media-add"===e.action))if("remove"==e.action)e.media.remove(),this._blocks.splice(this._blocks.indexOf(e.media),1);else if("swap"===e.action||"alternate-media-swap"===e.action||"alternate-media-add"===e.action||"https-open-picker"===e.action){var t="alternate-media-add"===e.action,n=-1!==e.action.indexOf("alternate-"),i=n?["image"]:["image","audio","video","webpage"];app.builder.mediaPicker.open({mode:t?"add":"edit",media:t?null:e.media.serialize(!1),authorizedMedia:i,selectedProvider:"https-open-picker"===e.action?g.default.providers.URL:""}).then(function(t){n?(m.default.onEditMediaAlternate({mainMedia:e.mainMedia,newMediaJSON:t,oldMedia:e.media,sectionType:"narrative-panel"}),this._onContentChange()):m.default.isSameMediaWithSecureProtocol(e.media,t)?(e.media.convertToHttps(),_.default.publish("builder-should-check-story")):(this._onToggleMediaConfig(e.media),this._onEditMedia(e.media,t))}.bind(this),function(){})}else"alternate-media-remove"===e.action&&(m.default.onRemoveMediaAlternate({mainMedia:e.mainMedia,media:e.media,sectionType:"narrative-panel"}),this._onContentChange())}},{key:"getPreviewText",value:function(){var e="";if(this._blocksJSON&&this._blocksJSON.length){var t=!0,n=!1,i=void 0;try{for(var o,r=this._blocksJSON[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;if("text"==a.type&&(e=$(a.text.value).text()))break}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}return e}},{key:"findBlock",value:function(e){if(!e)return null;for(var t=0;t<this._blocks.length;t++)if(this._blocks[t]._domID==e)return this._blocks[t]}},{key:"serialize",value:function(e){var t=[];if(this._editor){t=this._editor.serialize(e);for(var n=0;n<t.length;n++){var i=t[n];if("media"==i.type){var o=this.findBlock(i.id);o&&(t[n]=o.serialize(e))}}this._blocksJSON=t}return w.default.clone({layout:this.layout,settings:this._settings,blocks:this._blocksJSON})}},{key:"addContextSpecificIssues",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=this._blocks[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,s=a._instanceID,l=e[s];l&&!l.alternateMedia&&"webpage"===l.mediaType&&l.scanResult.warnings.push("content/noAlternateMedia")}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}}]),t}(h.default);t.default=x,e.exports=t.default}),define("storymaps/tpl/view/section/Immersive/PanelFactoryBuilder",["storymaps-react/tpl/view/section/Immersive/PanelBuilder"],function(e){var t={"position-x":"left",size:"medium",style:"background",theme:"white-over-black"},n=[{type:"text",text:{value:'<p class="block"></p>'}}];return{createInstance:function(i,o,r){return i?new e(i,o,r):new e({layout:"scroll-full",settings:t,blocks:n},o,r)},duplicateWithoutContent:function(i,o,r){var a={};return i?(a=JSON.parse(JSON.stringify(i)),a.blocks=n):a={layout:"scroll-full",settings:t,blocks:n},new e(a,o,r)}}}),require(["lib-build/css!lib/calcite-bootstrap/css/calcite-bootstrap-open.min","lib-build/less!storymaps/tpl/view/ui/bootstrap-override","storymaps/tpl/core/Core","storymaps/tpl/core/MainView","storymaps/tpl/builder/Builder","storymaps/tpl/builder/BuilderView","storymaps-react/tpl/view/media/FactoryBuilder","storymaps-react/tpl/view/section/FactoryBuilder","storymaps/tpl/view/section/Immersive/PanelFactoryBuilder"],function(){}),define("storymaps/tpl/BuildConfigBuilder",function(){});